!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){!function(a){a.fn.appendSafe=function(b){var c=a(b);return this.length&&c.length&&this[0].appendChild(c[0]),this},a.fn.appendToSafe=function(b){return a(b).appendSafe(this),this},a.fn.appendHtmlSafe=function(b,c){if(this.length){var d=a.parseHTML(b);if(d){var e=this[0];a.each(d,function(b,d){var f=d.nodeName.toLowerCase();(!c||c(d))&&(a(d).is("img")?a(d).attr("src",a.utilsUrl.toAbsolute(a(this).attr("src"))):a(d).find("img").each(function(){a(this).attr("src",a.utilsUrl.toAbsolute(a(this).attr("src")))}),e.appendChild(d),document.createStyleSheet&&"link"==f&&(d.href=d.href))})}}return this},a.fn.cloneSafe=function(){return this.length?a(document.createElement(this[0].nodeName)).appendHtmlSafe(a.stripScripts(this.html())):a()},a.fn.getAttributes=function(){var b={};if(this.length){var c=this[0].attributes;c&&a.each(c,function(a,c){c.specified&&(b[c.name]=c.value)})}return b},a.fn.getAttributesOn=function(b){var c={};if(this.length){var d=this[0].attributes;d&&a.each(d,function(a,d){if(d.specified){var e=0===d.name.toLowerCase().indexOf("on");(b?!e:e)&&(c[d.name]=d.value)}})}return c},a.fn.removeAttributes=function(){return this.each(function(){var b=a(this),c=b.getAttributes();for(var d in c)c.hasOwnProperty(d)&&b.removeAttr(d)})},a.fn.removeAttributesOn=function(){return this.each(function(){var b=a(this),c=b.getAttributesOn();for(var d in c)c.hasOwnProperty(d)&&b.removeAttr(d)})},a.fn.sanitize=function(a){return this.find(a).remove(),this},a.fn.removeContentsBut=function(a){return this.contents().remove(":not("+a+")"),this},a.utilsUrl={toAbsolute:function(b){return void 0===b?a('<a href="#"></a>').prop("href").slice(0,-1):a('<a href="'+b+'"></a>').prop("href")}},a.stripScripts=function(a){return a.replace(/<script[^>]*>([\S\s]*?)<\/script\s*>/gi,"")}}(iAdvize.$||jQuery)},{}],2:[function(){!function(){function a(a){var b,c,f,g='{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',h="json"==a;if(h||"json-stringify"==a||"json-parse"==a){if("json-stringify"==a||h){if(b="function"==typeof JSON3.stringify&&v){(f=function(){return 1}).toJSON=f;try{b="0"===JSON3.stringify(0)&&"0"===JSON3.stringify(new Number)&&'""'==JSON3.stringify(new String)&&JSON3.stringify(e)===d&&JSON3.stringify(d)===d&&JSON3.stringify()===d&&"1"===JSON3.stringify(f)&&"[1]"==JSON3.stringify([f])&&"[null]"==JSON3.stringify([d])&&"null"==JSON3.stringify(null)&&"[null,null,null]"==JSON3.stringify([d,e,null])&&JSON3.stringify({A:[f,!0,!1,null,"\x00\b\n\f\r	"]})==g&&"1"===JSON3.stringify(null,f)&&"[\n 1,\n 2\n]"==JSON3.stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==JSON3.stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==JSON3.stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==JSON3.stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==JSON3.stringify(new Date(-1))}catch(i){b=!1}}if(!h)return b}if("json-parse"==a||h){if("function"==typeof JSON3.parse)try{if(0===JSON3.parse("0")&&!JSON3.parse(!1)&&(f=JSON3.parse(g),c=5==f.A.length&&1==f.A[0])){try{c=!JSON3.parse('"	"')}catch(i){}if(c)try{c=1!=JSON3.parse("01")}catch(i){}}}catch(i){c=!1}if(!h)return c}return b&&c}}var b,c,d,e={}.toString;JSON3=JSON||(JSON={});var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=new Date(-0xc782b5b800cec);try{v=-109252==v.getUTCFullYear()&&0===v.getUTCMonth()&&1==v.getUTCDate()&&10==v.getUTCHours()&&37==v.getUTCMinutes()&&6==v.getUTCSeconds()&&708==v.getUTCMilliseconds()}catch(w){}a("json")||(v||(s=Math.floor,t=[0,31,59,90,120,151,181,212,243,273,304,334],u=function(a,b){return t[b]+365*(a-1970)+s((a-1969+(b=+(b>1)))/4)-s((a-1901+b)/100)+s((a-1601+b)/400)}),(b={}.hasOwnProperty)||(b=function(a){var c,d={};return(d.__proto__=null,d.__proto__={toString:1},d).toString!=e?b=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(c=d.constructor,b=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===b[a])}),d=null,b.call(this,a)}),c=function(a,c){var d,f,g,h,i=0;(d=function(){this.valueOf=0}).prototype.valueOf=0,f=new d;for(g in f)b.call(f,g)&&i++;return d=f=null,i?h=2==i?function(a,c){var d,f={},g="[object Function]"==e.call(a);for(d in a)g&&"prototype"==d||b.call(f,d)||!(f[d]=1)||!b.call(a,d)||c(d)}:function(a,c){var d,f,g="[object Function]"==e.call(a);for(d in a)g&&"prototype"==d||!b.call(a,d)||(f="constructor"===d)||c(d);(f||b.call(a,d="constructor"))&&c(d)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],h=function(a,c){var d,g,h="[object Function]"==e.call(a);for(d in a)h&&"prototype"==d||!b.call(a,d)||c(d);for(g=f.length;d=f[--g];b.call(a,d)&&c(d));}),h(a,c)},a("json-stringify")||(f={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},g=function(a,b){return("000000"+(b||0)).slice(-a)},h=function(a){for(var b,c='"',d=0;b=a.charAt(d);d++)c+='\\"\b\f\n\r	'.indexOf(b)>-1?f[b]:f[b]=" ">b?"\\u00"+g(2,b.charCodeAt(0).toString(16)):b;return c+'"'},i=function(a,f,j,k,l,m,n){var o,p,q,r,t,v,w,x,y,z,A,B,C,D,E,F,G=f[a];if("object"==typeof G&&G)if(o=e.call(G),"[object Date]"!=o||b.call(G,"toJSON"))"function"==typeof G.toJSON&&("[object Number]"!=o&&"[object String]"!=o&&"[object Array]"!=o||b.call(G,"toJSON"))&&(G=G.toJSON(a));else if(G>-1/0&&1/0>G){if(u){for(r=s(G/864e5),p=s(r/365.2425)+1970-1;u(p+1,0)<=r;p++);for(q=s((r-u(p,0))/30.42);u(p,q+1)<=r;q++);r=1+r-u(p,q),t=(G%864e5+864e5)%864e5,v=s(t/36e5)%24,w=s(t/6e4)%60,x=s(t/1e3)%60,y=t%1e3}else p=G.getUTCFullYear(),q=G.getUTCMonth(),r=G.getUTCDate(),v=G.getUTCHours(),w=G.getUTCMinutes(),x=G.getUTCSeconds(),y=G.getUTCMilliseconds();G=(0>=p||p>=1e4?(0>p?"-":"+")+g(6,0>p?-p:p):g(4,p))+"-"+g(2,q+1)+"-"+g(2,r)+"T"+g(2,v)+":"+g(2,w)+":"+g(2,x)+"."+g(3,y)+"Z"}else G=null;if(j&&(G=j.call(f,a,G)),null===G)return"null";if(o=e.call(G),"[object Boolean]"==o)return""+G;if("[object Number]"==o)return G>-1/0&&1/0>G?""+G:"null";if("[object String]"==o)return h(G);if("object"==typeof G){for(C=n.length;C--;)if(n[C]===G)throw TypeError();if(n.push(G),z=[],D=m,m+=l,"[object Array]"==o){for(B=0,C=G.length;C>B;E||(E=!0),B++)A=i(B,G,j,k,l,m,n),z.push(A===d?"null":A);F=E?l?"[\n"+m+z.join(",\n"+m)+"\n"+D+"]":"["+z.join(",")+"]":"[]"}else c(k||G,function(a){var b=i(a,G,j,k,l,m,n);b!==d&&z.push(h(a)+":"+(l?" ":"")+b),E||(E=!0)}),F=E?l?"{\n"+m+z.join(",\n"+m)+"\n"+D+"}":"{"+z.join(",")+"}":"{}";return n.pop(),F}},JSON3.stringify=function(a,b,c){var d,f,g,h,j,k;if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==e.call(b))f=b;else if("[object Array]"==e.call(b))for(g={},h=0,j=b.length;j>h;k=b[h++],("[object String]"==e.call(k)||"[object Number]"==e.call(k))&&(g[k]=1));if(c)if("[object Number]"==e.call(c)){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else"[object String]"==e.call(c)&&(d=c.length<=10?c:c.slice(0,10));return i("",(k={},k[""]=a,k),f,g,d,"",[])}),a("json-parse")||(j=String.fromCharCode,k={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"	",n:"\n",f:"\f",r:"\r"},l=function(){throw q=r=null,SyntaxError()},m=function(){for(var a,b,c,d,e,f=r,g=f.length;g>q;)if(a=f.charAt(q),"	\r\n ".indexOf(a)>-1)q++;else{if("{}[]:,".indexOf(a)>-1)return q++,a;if('"'==a){for(b="@",q++;g>q;)if(a=f.charAt(q)," ">a)l();else if("\\"==a)if(a=f.charAt(++q),'\\"/btnfr'.indexOf(a)>-1)b+=k[a],q++;else if("u"==a){for(c=++q,d=q+4;d>q;q++)a=f.charAt(q),a>="0"&&"9">=a||a>="a"&&"f">=a||a>="A"&&"F">=a||l();b+=j("0x"+f.slice(c,q))}else l();else{if('"'==a)break;b+=a,q++}if('"'==f.charAt(q))return q++,b;l()}else{if(c=q,"-"==a&&(e=!0,a=f.charAt(++q)),a>="0"&&"9">=a){for("0"==a&&(a=f.charAt(q+1),a>="0"&&"9">=a)&&l(),e=!1;g>q&&(a=f.charAt(q),a>="0"&&"9">=a);q++);if("."==f.charAt(q)){for(d=++q;g>d&&(a=f.charAt(d),a>="0"&&"9">=a);d++);d==q&&l(),q=d}if(a=f.charAt(q),"e"==a||"E"==a){for(a=f.charAt(++q),("+"==a||"-"==a)&&q++,d=q;g>d&&(a=f.charAt(d),a>="0"&&"9">=a);d++);d==q&&l(),q=d}return+f.slice(c,q)}if(e&&l(),"true"==f.slice(q,q+4))return q+=4,!0;if("false"==f.slice(q,q+5))return q+=5,!1;if("null"==f.slice(q,q+4))return q+=4,null;l()}}return"$"},n=function(a){var b,c;if("$"==a&&l(),"string"==typeof a){if("@"==a.charAt(0))return a.slice(1);if("["==a){for(b=[];a=m(),"]"!=a;c||(c=!0))c&&(","==a?(a=m(),"]"==a&&l()):l()),","==a&&l(),b.push(n(a));return b}if("{"==a){for(b={};a=m(),"}"!=a;c||(c=!0))c&&(","==a?(a=m(),"}"==a&&l()):l()),(","==a||"string"!=typeof a||"@"!=a.charAt(0)||":"!=m())&&l(),b[a.slice(1)]=n(m());return b}l()}return a},p=function(a,b,c){var e=o(a,b,c);e===d?delete a[b]:a[b]=e},o=function(a,b,d){var f,g=a[b];if("object"==typeof g&&g)if("[object Array]"==e.call(g))for(f=g.length;f--;)p(g,f,d);else c(g,function(a){p(g,a,d)});return d.call(a,b,g)},JSON3.parse=function(a,b){var c,d;return q=0,r=a,c=n(m()),"$"!=m()&&l(),q=r=null,b&&"[object Function]"==e.call(b)?o((d={},d[""]=c,d),"",b):c}))}(this)},{}],3:[function(require,module,exports){var io="undefined"==typeof module?{}:module.exports;!function(){if(function(a,b){var c=a;c.version="0.9.16",c.protocol=1,c.transports=[],c.j=[],c.sockets={},c.connect=function(a,d){var e,f,g=c.util.parseUri(a);b&&b.location&&(g.protocol=g.protocol||b.location.protocol.slice(0,-1),g.host=g.host||(b.document?b.document.domain:b.location.hostname),g.port=g.port||b.location.port),e=c.util.uniqueUri(g);var h={host:g.host,secure:"https"==g.protocol,port:g.port||("https"==g.protocol?443:80),query:g.query||""};return c.util.merge(h,d),(h["force new connection"]||!c.sockets[e])&&(f=new c.Socket(h)),!h["force new connection"]&&f&&(c.sockets[e]=f),f=f||c.sockets[e],f.of(g.path.length>1?g.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(a,b){var c=a.util={},d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];c.parseUri=function(a){for(var b=d.exec(a||""),c={},f=14;f--;)c[e[f]]=b[f]||"";return c},c.uniqueUri=function(a){var c=a.protocol,d=a.host,e=a.port;return"document"in b?(d=d||document.domain,e=e||("https"==c&&"https:"!==document.location.protocol?443:document.location.port)):(d=d||"localhost",e||"https"!=c||(e=443)),(c||"http")+"://"+d+":"+(e||80)},c.query=function(a,b){var d=c.chunkQuery(a||""),e=[];c.merge(d,c.chunkQuery(b||""));for(var f in d)d.hasOwnProperty(f)&&e.push(f+"="+d[f]);return e.length?"?"+e.join("&"):""},c.chunkQuery=function(a){for(var b,c={},d=a.split("&"),e=0,f=d.length;f>e;++e)b=d[e].split("="),b[0]&&(c[b[0]]=b[1]);return c};var f=!1;c.load=function(a){return"document"in b&&"complete"===document.readyState||f?a():void c.on(b,"load",a,!1)},c.on=function(a,b,c,d){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,d)},c.request=function(a){if(a&&"undefined"!=typeof XDomainRequest&&!c.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!a||c.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(b){}return null},"undefined"!=typeof window&&c.load(function(){f=!0}),c.defer=function(a){return c.ua.webkit&&"undefined"==typeof importScripts?void c.load(function(){setTimeout(a,100)}):a()},c.merge=function(a,b,d,e){var f,g=e||[],h="undefined"==typeof d?2:d;for(f in b)b.hasOwnProperty(f)&&c.indexOf(g,f)<0&&("object"==typeof a[f]&&h?c.merge(a[f],b[f],h-1,g):(a[f]=b[f],g.push(b[f])));return a},c.mixin=function(a,b){c.merge(a.prototype,b.prototype)},c.inherit=function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c},c.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},c.intersect=function(a,b){for(var d=[],e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=0,h=f.length;h>g;g++)~c.indexOf(e,f[g])&&d.push(f[g]);return d},c.indexOf=function(a,b,c){for(var d=a.length,c=0>c?0>c+d?0:c+d:c||0;d>c&&a[c]!==b;c++);return c>=d?-1:c},c.toArray=function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},c.ua={},c.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=new XMLHttpRequest}catch(b){return!1}return void 0!=a.withCredentials}(),c.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),c.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(a,b){function c(){}a.EventEmitter=c,c.prototype.on=function(a,c){return this.$events||(this.$events={}),this.$events[a]?b.util.isArray(this.$events[a])?this.$events[a].push(c):this.$events[a]=[this.$events[a],c]:this.$events[a]=c,this},c.prototype.addListener=c.prototype.on,c.prototype.once=function(a,b){function c(){d.removeListener(a,c),b.apply(this,arguments)}var d=this;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,c){if(this.$events&&this.$events[a]){var d=this.$events[a];if(b.util.isArray(d)){for(var e=-1,f=0,g=d.length;g>f;f++)if(d[f]===c||d[f].listener&&d[f].listener===c){e=f;break}if(0>e)return this;d.splice(e,1),d.length||delete this.$events[a]}else(d===c||d.listener&&d.listener===c)&&delete this.$events[a]}return this},c.prototype.removeAllListeners=function(a){return void 0===a?(this.$events={},this):(this.$events&&this.$events[a]&&(this.$events[a]=null),this)},c.prototype.listeners=function(a){return this.$events||(this.$events={}),this.$events[a]||(this.$events[a]=[]),b.util.isArray(this.$events[a])||(this.$events[a]=[this.$events[a]]),this.$events[a]},c.prototype.emit=function(a){if(!this.$events)return!1;var c=this.$events[a];if(!c)return!1;var d=Array.prototype.slice.call(arguments,1);if("function"==typeof c)c.apply(this,d);else{if(!b.util.isArray(c))return!1;for(var e=c.slice(),f=0,g=e.length;g>f;f++)e[f].apply(this,d)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(a){return 10>a?"0"+a:a}function date(a){return isFinite(a.valueOf())?a.getUTCFullYear()+"-"+f(a.getUTCMonth()+1)+"-"+f(a.getUTCDate())+"T"+f(a.getUTCHours())+":"+f(a.getUTCMinutes())+":"+f(a.getUTCSeconds())+"Z":null}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i instanceof Date&&(i=date(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})},JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(a,b){var c=a.parser={},d=c.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],e=c.reasons=["transport not supported","client not handshaken","unauthorized"],f=c.advice=["reconnect"],g=b.JSON,h=b.util.indexOf;c.encodePacket=function(a){var b=h(d,a.type),c=a.id||"",i=a.endpoint||"",j=a.ack,k=null;switch(a.type){case"error":var l=a.reason?h(e,a.reason):"",m=a.advice?h(f,a.advice):"";(""!==l||""!==m)&&(k=l+(""!==m?"+"+m:""));break;case"message":""!==a.data&&(k=a.data);break;case"event":var n={name:a.name};a.args&&a.args.length&&(n.args=a.args),k=g.stringify(n);break;case"json":k=g.stringify(a.data);break;case"connect":a.qs&&(k=a.qs);break;case"ack":k=a.ackId+(a.args&&a.args.length?"+"+g.stringify(a.args):"")}var o=[b,c+("data"==j?"+":""),i];return null!==k&&void 0!==k&&o.push(k),o.join(":")},c.encodePayload=function(a){var b="";if(1==a.length)return a[0];for(var c=0,d=a.length;d>c;c++){var e=a[c];b+="�"+e.length+"�"+a[c]}return b};var i=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;c.decodePacket=function(a){var b=a.match(i);if(!b)return{};var c=b[2]||"",a=b[5]||"",h={type:d[b[1]],endpoint:b[4]||""};switch(c&&(h.id=c,h.ack=b[3]?"data":!0),h.type){case"error":var b=a.split("+");h.reason=e[b[0]]||"",h.advice=f[b[1]]||"";break;case"message":h.data=a||"";break;case"event":try{var j=g.parse(a);h.name=j.name,h.args=j.args}catch(k){}h.args=h.args||[];break;case"json":try{h.data=g.parse(a)}catch(k){}break;case"connect":h.qs=a||"";break;case"ack":var b=a.match(/^([0-9]+)(\+)?(.*)/);if(b&&(h.ackId=b[1],h.args=[],b[3]))try{h.args=b[3]?g.parse(b[3]):[]}catch(k){}break;case"disconnect":case"heartbeat":}return h},c.decodePayload=function(a){if("�"==a.charAt(0)){for(var b=[],d=1,e="";d<a.length;d++)"�"==a.charAt(d)?(b.push(c.decodePacket(a.substr(d+1).substr(0,e))),d+=Number(e)+1,e=""):e+=a.charAt(d);return b}return[c.decodePacket(a)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b){function c(a,b){this.socket=a,this.sessid=b}a.Transport=c,b.util.mixin(c,b.EventEmitter),c.prototype.heartbeats=function(){return!0},c.prototype.onData=function(a){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==a){var c=b.parser.decodePayload(a);if(c&&c.length)for(var d=0,e=c.length;e>d;d++)this.onPacket(c[d])}return this},c.prototype.onPacket=function(a){return this.socket.setHeartbeatTimeout(),"heartbeat"==a.type?this.onHeartbeat():("connect"==a.type&&""==a.endpoint&&this.onConnect(),"error"==a.type&&"reconnect"==a.advice&&(this.isOpen=!1),this.socket.onPacket(a),this)},c.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}},c.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},c.prototype.onConnect=function(){return this.socket.onConnect(),this},c.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},c.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},c.prototype.packet=function(a){this.send(b.parser.encodePacket(a))},c.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},c.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},c.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},c.prototype.prepareUrl=function(){var a=this.socket.options;return this.scheme()+"://"+a.host+":"+a.port+"/"+a.resource+"/"+b.protocol+"/"+this.name+"/"+this.sessid},c.prototype.ready=function(a,b){b.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b,c){function d(a){if(this.options={port:80,secure:!1,document:"document"in c?document:!1,resource:"socket.io",transports:b.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},b.util.merge(this.options,a),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||b.util.ua.hasCORS)){var d=this;b.util.on(c,"beforeunload",function(){d.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function e(){}a.Socket=d,b.util.mixin(d,b.EventEmitter),d.prototype.of=function(a){return this.namespaces[a]||(this.namespaces[a]=new b.SocketNamespace(this,a),""!==a&&this.namespaces[a].packet({type:"connect"})),this.namespaces[a]},d.prototype.publish=function(){this.emit.apply(this,arguments);var a;for(var b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(a=this.of(b),a.$emit.apply(a,arguments))},d.prototype.handshake=function(a){function c(b){b instanceof Error?(d.connecting=!1,d.onError(b.message)):a.apply(null,b.split(":"))}var d=this,f=this.options,g=["http"+(f.secure?"s":"")+":/",f.host+":"+f.port,f.resource,b.protocol,b.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!b.util.ua.hasCORS){var h=document.getElementsByTagName("script")[0],i=document.createElement("script");i.src=g+"&jsonp="+b.j.length,h.parentNode.insertBefore(i,h),b.j.push(function(a){c(a),i.parentNode.removeChild(i)})}else{var j=b.util.request();j.open("GET",g,!0),this.isXDomain()&&(j.withCredentials=!0),j.onreadystatechange=function(){4==j.readyState&&(j.onreadystatechange=e,200==j.status?c(j.responseText):403==j.status?d.onError(j.responseText):(d.connecting=!1,!d.reconnecting&&d.onError(j.responseText)))},j.send(null)}},d.prototype.getTransport=function(a){for(var c,d=a||this.transports,e=0;c=d[e];e++)if(b.Transport[c]&&b.Transport[c].check(this)&&(!this.isXDomain()||b.Transport[c].xdomainCheck(this)))return new b.Transport[c](this,this.sessionid);return null},d.prototype.connect=function(a){if(this.connecting)return this;var c=this;return c.connecting=!0,this.handshake(function(d,e,f,g){function h(a){return c.transport&&c.transport.clearTimeouts(),c.transport=c.getTransport(a),c.transport?void c.transport.ready(c,function(){c.connecting=!0,c.publish("connecting",c.transport.name),c.transport.open(),c.options["connect timeout"]&&(c.connectTimeoutTimer=setTimeout(function(){if(!c.connected&&(c.connecting=!1,c.options["try multiple transports"])){for(var a=c.transports;a.length>0&&a.splice(0,1)[0]!=c.transport.name;);a.length?h(a):c.publish("connect_failed")}},c.options["connect timeout"]))}):c.publish("connect_failed")}c.sessionid=d,c.closeTimeout=1e3*f,c.heartbeatTimeout=1e3*e,c.transports||(c.transports=c.origTransports=g?b.util.intersect(g.split(","),c.options.transports):c.options.transports),c.setHeartbeatTimeout(),h(c.transports),c.once("connect",function(){clearTimeout(c.connectTimeoutTimer),a&&"function"==typeof a&&a()})}),this},d.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var a=this;this.heartbeatTimeoutTimer=setTimeout(function(){a.transport.onClose()},this.heartbeatTimeout)}},d.prototype.packet=function(a){return this.connected&&!this.doBuffer?this.transport.packet(a):this.buffer.push(a),this},d.prototype.setBuffer=function(a){this.doBuffer=a,!a&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},d.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},d.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},d.prototype.disconnectSync=function(){var a=b.util.request(),c=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,b.protocol,"",this.sessionid].join("/")+"/?disconnect=1";a.open("GET",c,!1),a.send(null),this.onDisconnect("booted")},d.prototype.isXDomain=function(){var a=c.location.port||("https:"==c.location.protocol?443:80);return this.options.host!==c.location.hostname||this.options.port!=a},d.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},d.prototype.onOpen=function(){this.open=!0},d.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},d.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)},d.prototype.onError=function(a){a&&a.advice&&"reconnect"===a.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",a&&a.reason?a.reason:a)},d.prototype.onDisconnect=function(a){var b=this.connected,c=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(b||c)&&(this.transport.close(),this.transport.clearTimeouts(),b&&(this.publish("disconnect",a),"booted"!=a&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},d.prototype.reconnect=function(){function a(){if(c.connected){for(var a in c.namespaces)c.namespaces.hasOwnProperty(a)&&""!==a&&c.namespaces[a].packet({type:"connect"});c.publish("reconnect",c.transport.name,c.reconnectionAttempts)}clearTimeout(c.reconnectionTimer),c.removeListener("connect_failed",b),c.removeListener("connect",b),c.reconnecting=!1,delete c.reconnectionAttempts,delete c.reconnectionDelay,delete c.reconnectionTimer,delete c.redoTransports,c.options["try multiple transports"]=e}function b(){return c.reconnecting?c.connected?a():c.connecting&&c.reconnecting?c.reconnectionTimer=setTimeout(b,1e3):void(c.reconnectionAttempts++>=d?c.redoTransports?(c.publish("reconnect_failed"),a()):(c.on("connect_failed",b),c.options["try multiple transports"]=!0,c.transports=c.origTransports,c.transport=c.getTransport(),c.redoTransports=!0,c.connect()):(c.reconnectionDelay<f&&(c.reconnectionDelay*=2),c.connect(),c.publish("reconnecting",c.reconnectionDelay,c.reconnectionAttempts),c.reconnectionTimer=setTimeout(b,c.reconnectionDelay))):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var c=this,d=this.options["max reconnection attempts"],e=this.options["try multiple transports"],f=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(b,this.reconnectionDelay),this.on("connect",b)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b){function c(a,b){this.socket=a,this.name=b||"",this.flags={},this.json=new d(this,"json"),this.ackPackets=0,this.acks={}}function d(a,b){this.namespace=a,this.name=b}a.SocketNamespace=c,b.util.mixin(c,b.EventEmitter),c.prototype.$emit=b.EventEmitter.prototype.emit,c.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},c.prototype.packet=function(a){return a.endpoint=this.name,this.socket.packet(a),this.flags={},this},c.prototype.send=function(a,b){var c={type:this.flags.json?"json":"message",data:a};return"function"==typeof b&&(c.id=++this.ackPackets,c.ack=!0,this.acks[c.id]=b),this.packet(c)},c.prototype.emit=function(a){var b=Array.prototype.slice.call(arguments,1),c=b[b.length-1],d={type:"event",name:a};return"function"==typeof c&&(d.id=++this.ackPackets,d.ack="data",this.acks[d.id]=c,b=b.slice(0,b.length-1)),d.args=b,this.packet(d)},c.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},c.prototype.onPacket=function(a){function c(){d.packet({type:"ack",args:b.util.toArray(arguments),ackId:a.id})}var d=this;switch(a.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(a.reason||"booted"):this.$emit("disconnect",a.reason);break;case"message":case"json":var e=["message",a.data];"data"==a.ack?e.push(c):a.ack&&this.packet({type:"ack",ackId:a.id}),this.$emit.apply(this,e);break;case"event":var e=[a.name].concat(a.args);"data"==a.ack&&e.push(c),this.$emit.apply(this,e);break;case"ack":this.acks[a.ackId]&&(this.acks[a.ackId].apply(this,a.args),delete this.acks[a.ackId]);break;case"error":a.advice?this.socket.onError(a):"unauthorized"==a.reason?this.$emit("connect_failed",a.reason):this.$emit("error",a.reason)}},d.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},d.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b,c){function d(){b.Transport.apply(this,arguments)}a.websocket=d,b.util.inherit(d,b.Transport),d.prototype.name="websocket",d.prototype.open=function(){var a,d=b.util.query(this.socket.options.query),e=this;return a||(a=c.MozWebSocket||c.WebSocket),this.websocket=new a(this.prepareUrl()+d),this.websocket.onopen=function(){e.onOpen(),e.socket.setBuffer(!1)},this.websocket.onmessage=function(a){e.onData(a.data)},this.websocket.onclose=function(){e.onClose(),e.socket.setBuffer(!0)},this.websocket.onerror=function(a){e.onError(a)},this},d.prototype.send=b.util.ua.iDevice?function(a){var b=this;return setTimeout(function(){b.websocket.send(a)},0),this}:function(a){return this.websocket.send(a),this},d.prototype.payload=function(a){for(var b=0,c=a.length;c>b;b++)this.packet(a[b]);return this},d.prototype.close=function(){return this.websocket.close(),this},d.prototype.onError=function(a){this.socket.onError(a)},d.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},d.check=function(){return"WebSocket"in c&&!("__addTask"in WebSocket)||"MozWebSocket"in c},d.xdomainCheck=function(){return!0},b.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b){function c(){b.Transport.websocket.apply(this,arguments)}a.flashsocket=c,b.util.inherit(c,b.Transport.websocket),c.prototype.name="flashsocket",c.prototype.open=function(){var a=this,c=arguments;return WebSocket.__addTask(function(){b.Transport.websocket.prototype.open.apply(a,c)}),this},c.prototype.send=function(){var a=this,c=arguments;return WebSocket.__addTask(function(){b.Transport.websocket.prototype.send.apply(a,c)}),this},c.prototype.close=function(){return WebSocket.__tasks.length=0,b.Transport.websocket.prototype.close.call(this),this},c.prototype.ready=function(a,d){function e(){var b=a.options,e=b["flash policy port"],g=["http"+(b.secure?"s":"")+":/",b.host+":"+b.port,b.resource,"static/flashsocket","WebSocketMain"+(a.isXDomain()?"Insecure":"")+".swf"];
c.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=g.join("/")),843!==e&&WebSocket.loadFlashPolicyFile("xmlsocket://"+b.host+":"+e),WebSocket.__initialize(),c.loaded=!0),d.call(f)}var f=this;return document.body?e():void b.util.load(e)},c.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},c.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),b.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),"undefined"!=typeof window)var swfobject=function(){function a(){if(!R){try{var a=K.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var c=N.length,d=0;c>d;d++)N[d]()}}function b(a){R?a():N[N.length]=a}function c(a){if(typeof J.addEventListener!=C)J.addEventListener("load",a,!1);else if(typeof K.addEventListener!=C)K.addEventListener("load",a,!1);else if(typeof J.attachEvent!=C)r(J,"onload",a);else if("function"==typeof J.onload){var b=J.onload;J.onload=function(){b(),a()}}else J.onload=a}function d(){M?e():f()}function e(){var a=K.getElementsByTagName("body")[0],b=q(D);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=C){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,f()}()}else f()}function f(){var a=O.length;if(a>0)for(var b=0;a>b;b++){var c=O[b].id,d=O[b].callbackFn,e={success:!1,id:c};if(U.pv[0]>0){var f=p(c);if(f)if(!s(O[b].swfVersion)||U.wk&&U.wk<312)if(O[b].expressInstall&&h()){var k={};k.data=O[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else if(u(c,!0),d){var q=g(c);q&&typeof q.SetVariable!=C&&(e.success=!0,e.ref=q),d(e)}}}function g(a){var b=null,c=p(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=C)b=c;else{var d=c.getElementsByTagName(D)[0];d&&(b=d)}return b}function h(){return!S&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){S=!0,y=d||null,z={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(w=k(e),x=null):(w=e,x=c),a.id=H,(typeof a.width==C||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==C||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),K.title=K.title.slice(0,47)+" - Flash Player Installation";var f=U.ie&&U.win?["Active"].concat("").join("X"):"PlugIn",g="MMredirectURL="+J.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+K.title;if(typeof b.flashvars!=C?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(D)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a,b,c){var d,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==C&&(a.id=c),U.ie&&U.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",P[P.length]=a.id,d=p(a.id)}else{var j=q(D);j.setAttribute("type",G);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=K.getElementById(a)}catch(c){}return b}function q(a){return K.createElement(a)}function r(a,b,c){a.attachEvent(b,c),Q[Q.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(!U.ie||!U.mac){var e=K.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(A=null,B=null),!A||B!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),A=e.appendChild(g),U.ie&&U.win&&typeof K.styleSheets!=C&&K.styleSheets.length>0&&(A=K.styleSheets[K.styleSheets.length-1]),B=f}U.ie&&U.win?A&&typeof A.addRule==D&&A.addRule(a,b):A&&typeof K.createTextNode!=C&&A.appendChild(K.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(T){var c=b?"visible":"hidden";R&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=C?encodeURIComponent(a):a}{var w,x,y,z,A,B,C="undefined",D="object",E="Shockwave Flash",F="ShockwaveFlash.ShockwaveFlash",G="application/x-shockwave-flash",H="SWFObjectExprInst",I="onreadystatechange",J=window,K=document,L=navigator,M=!1,N=[d],O=[],P=[],Q=[],R=!1,S=!1,T=!0,U=function(){var a=typeof K.getElementById!=C&&typeof K.getElementsByTagName!=C&&typeof K.createElement!=C,b=L.userAgent.toLowerCase(),c=L.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof L.plugins!=C&&typeof L.plugins[E]==D)i=L.plugins[E].description,!i||typeof L.mimeTypes!=C&&L.mimeTypes[G]&&!L.mimeTypes[G].enabledPlugin||(M=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof J[["Active"].concat("Object").join("X")]!=C)try{var j=new(window[["Active"].concat("Object").join("X")])(F);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();!function(){U.w3&&((typeof K.readyState!=C&&"complete"==K.readyState||typeof K.readyState==C&&(K.getElementsByTagName("body")[0]||K.body))&&a(),R||(typeof K.addEventListener!=C&&K.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(K.attachEvent(I,function(){"complete"==K.readyState&&(K.detachEvent(I,arguments.callee),a())}),J==top&&!function(){if(!R){try{K.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),U.wk&&!function(){return R?void 0:/loaded|complete/.test(K.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;a>b;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);for(var c=P.length,d=0;c>d;d++)n(P[d]);for(var e in U)U[e]=null;U=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}()}return{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,O[O.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===D)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===D)for(var r in k)q[r]=k[r];if(j&&typeof j===D)for(var t in j)typeof q.flashvars!=C?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h())return b.data=g,void i(b,q,c,n);u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=K.location.search||K.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=p(H);a&&w&&(a.parentNode.replaceChild(w,a),x&&(u(x,!0),U.ie&&U.win&&(w.style.display="block")),y&&y(z)),S=!1}}}}();!function(){if("undefined"!=typeof window&&!window.WebSocket){var a=window.console;if(a&&a.log&&a.error||(a={log:function(){},error:function(){}}),!swfobject.hasFlashPlayerVersion("10.0.0"))return void a.error("Flash Player >= 10.0.0 is required.");"file:"==location.protocol&&a.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(a,b,c,d,e){var f=this;f.__id=WebSocket.__nextId++,WebSocket.__instances[f.__id]=f,f.readyState=WebSocket.CONNECTING,f.bufferedAmount=0,f.__events={},b?"string"==typeof b&&(b=[b]):b=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(f.__id,a,b,c||null,d||0,e||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var b=WebSocket.__flash.send(this.__id,encodeURIComponent(a));return 0>b?!0:(this.bufferedAmount+=b,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(a,b){a in this.__events||(this.__events[a]=[]),this.__events[a].push(b)},WebSocket.prototype.removeEventListener=function(a,b){if(a in this.__events)for(var c=this.__events[a],d=c.length-1;d>=0;--d)if(c[d]===b){c.splice(d,1);break}},WebSocket.prototype.dispatchEvent=function(a){for(var b=this.__events[a.type]||[],c=0;c<b.length;++c)b[c](a);var d=this["on"+a.type];d&&d(a)},WebSocket.prototype.__handleEvent=function(a){"readyState"in a&&(this.readyState=a.readyState),"protocol"in a&&(this.protocol=a.protocol);var b;if("open"==a.type||"error"==a.type)b=this.__createSimpleEvent(a.type);else if("close"==a.type)b=this.__createSimpleEvent("close");else{if("message"!=a.type)throw"unknown event type: "+a.type;var c=decodeURIComponent(a.message);b=this.__createMessageEvent("message",c)}this.dispatchEvent(b)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var b=document.createEvent("Event");return b.initEvent(a,!1,!1),b}return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(a,b){if(document.createEvent&&window.MessageEvent&&!window.opera){var c=document.createEvent("MessageEvent");return c.initMessageEvent("message",!1,!1,b,null,null,window,null),c}return{type:a,data:b,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void a.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");var b=document.createElement("div");b.id="webSocketContainer",b.style.position="absolute",WebSocket.__isFlashLite()?(b.style.left="0px",b.style.top="0px"):(b.style.left="-100px",b.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash",b.appendChild(c),document.body.appendChild(b),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(b){b.success||a.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var b=WebSocket.__flash.receiveEvents(),c=0;c<b.length;++c)WebSocket.__instances[b[c].webSocketId].__handleEvent(b[c])}catch(d){a.error(d)}},0),!0},WebSocket.__log=function(b){a.log(decodeURIComponent(b))},WebSocket.__error=function(b){a.error(decodeURIComponent(b))},WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return a&&a.enabledPlugin&&a.enabledPlugin.filename&&a.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))}}(),function(a,b,c){function d(a){a&&(b.Transport.apply(this,arguments),this.sendBuffer=[])}function e(){}a.XHR=d,b.util.inherit(d,b.Transport),d.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},d.prototype.payload=function(a){for(var c=[],d=0,e=a.length;e>d;d++)c.push(b.parser.encodePacket(a[d]));this.send(b.parser.encodePayload(c))},d.prototype.send=function(a){return this.post(a),this},d.prototype.post=function(a){function b(){4==this.readyState&&(this.onreadystatechange=e,f.posting=!1,200==this.status?f.socket.setBuffer(!1):f.onClose())}function d(){this.onload=e,f.socket.setBuffer(!1)}var f=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),c.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=d:this.sendXHR.onreadystatechange=b,this.sendXHR.send(a)},d.prototype.close=function(){return this.onClose(),this},d.prototype.request=function(a){var c=b.util.request(this.socket.isXDomain()),d=b.util.query(this.socket.options.query,"t="+ +new Date);if(c.open(a||"GET",this.prepareUrl()+d,!0),"POST"==a)try{c.setRequestHeader?c.setRequestHeader("Content-type","text/plain;charset=UTF-8"):c.contentType="text/plain"}catch(e){}return c},d.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},d.check=function(a,d){try{var e=b.util.request(d),f=c.XDomainRequest&&e instanceof XDomainRequest,g=a&&a.options&&a.options.secure?"https:":"http:",h=c.location&&g!=c.location.protocol;if(e&&(!f||!h))return!0}catch(i){}return!1},d.xdomainCheck=function(a){return d.check(a,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b){function c(){b.Transport.XHR.apply(this,arguments)}a.htmlfile=c,b.util.inherit(c,b.Transport.XHR),c.prototype.name="htmlfile",c.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var a=this.doc.createElement("div");a.className="socketio",this.doc.body.appendChild(a),this.iframe=this.doc.createElement("iframe"),a.appendChild(this.iframe);var c=this,d=b.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+d,b.util.on(window,"unload",function(){c.destroy()})},c.prototype._=function(a,b){a=a.replace(/\\\//g,"/"),this.onData(a);try{var c=b.getElementsByTagName("script")[0];c.parentNode.removeChild(c)}catch(d){}},c.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(a){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},c.prototype.close=function(){return this.destroy(),b.Transport.XHR.prototype.close.call(this)},c.check=function(a){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{var c=new(window[["Active"].concat("Object").join("X")])("htmlfile");return c&&b.Transport.XHR.check(a)}catch(d){}return!1},c.xdomainCheck=function(){return!1},b.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b,c){function d(){b.Transport.XHR.apply(this,arguments)}function e(){}a["xhr-polling"]=d,b.util.inherit(d,b.Transport.XHR),b.util.merge(d,b.Transport.XHR),d.prototype.name="xhr-polling",d.prototype.heartbeats=function(){return!1},d.prototype.open=function(){var a=this;return b.Transport.XHR.prototype.open.call(a),!1},d.prototype.get=function(){function a(){4==this.readyState&&(this.onreadystatechange=e,200==this.status?(f.onData(this.responseText),f.get()):f.onClose())}function b(){this.onload=e,this.onerror=e,f.retryCounter=1,f.onData(this.responseText),f.get()}function d(){f.retryCounter++,!f.retryCounter||f.retryCounter>3?f.onClose():f.get()}if(this.isOpen){var f=this;this.xhr=this.request(),c.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=b,this.xhr.onerror=d):this.xhr.onreadystatechange=a,this.xhr.send(null)}},d.prototype.onClose=function(){if(b.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=e;try{this.xhr.abort()}catch(a){}this.xhr=null}},d.prototype.ready=function(a,c){var d=this;b.util.defer(function(){c.call(d)})},b.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b,c){function d(){b.Transport["xhr-polling"].apply(this,arguments),this.index=b.j.length;var a=this;b.j.push(function(b){a._(b)})}var e=c.document&&"MozAppearance"in c.document.documentElement.style;a["jsonp-polling"]=d,b.util.inherit(d,b.Transport["xhr-polling"]),d.prototype.name="jsonp-polling",d.prototype.post=function(a){function c(){d(),e.socket.setBuffer(!1)}function d(){e.iframe&&e.form.removeChild(e.iframe);try{g=document.createElement('<iframe name="'+e.iframeId+'">')}catch(a){g=document.createElement("iframe"),g.name=e.iframeId}g.id=e.iframeId,e.form.appendChild(g),e.iframe=g}var e=this,f=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var g,h=document.createElement("form"),i=document.createElement("textarea"),j=this.iframeId="socketio_iframe_"+this.index;h.className="socketio",h.style.position="absolute",h.style.top="0px",h.style.left="0px",h.style.display="none",h.target=j,h.method="POST",h.setAttribute("accept-charset","utf-8"),i.name="d",h.appendChild(i),document.body.appendChild(h),this.form=h,this.area=i}this.form.action=this.prepareUrl()+f,d(),this.area.value=b.JSON.stringify(a);try{this.form.submit()}catch(k){}this.iframe.attachEvent?g.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c,this.socket.setBuffer(!0)},d.prototype.get=function(){var a=this,c=document.createElement("script"),d=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),c.async=!0,c.src=this.prepareUrl()+d,c.onerror=function(){a.onClose()};var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(c,f),this.script=c,e&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},d.prototype._=function(a){return this.onData(a),this.isOpen&&this.get(),this},d.prototype.ready=function(a,c){var d=this;return e?void b.util.load(function(){c.call(d)}):c.call(this)},d.check=function(){return"document"in c},d.xdomainCheck=function(){return!0},b.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define([],function(){return io})}()},{}],4:[function(a,b){var c={version:"$Revision: 3026 $".substring(11).replace(" $","")};c.toByteArray=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a.charCodeAt(b),127>=c?d.push(c):2047>=c?(d.push(c>>6|192),d.push(63&c|128)):65535>=c?(d.push(c>>12|224),d.push(c>>6&63|128),d.push(63&c|128)):(d.push(c>>18|240),d.push(c>>12&63|128),d.push(c>>6&63|128),d.push(63&c|128));return d},c.Base64={CA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CAS:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",IA:new Array(256),IAS:new Array(256),init:function(){var a;for(a=0;256>a;a++)c.Base64.IA[a]=-1,c.Base64.IAS[a]=-1;for(a=0,iS=c.Base64.CA.length;iS>a;a++)c.Base64.IA[c.Base64.CA.charCodeAt(a)]=a,c.Base64.IAS[c.Base64.CAS.charCodeAt(a)]=a;c.Base64.IA["="]=c.Base64.IAS["="]=0},encode:function(a,b){var d,e,f,g,h,i,j,k,l,m;for(d=b?c.Base64.CAS:c.Base64.CA,f=a.constructor==Array?a:c.toByteArray(a),g=f.length,h=g/3*3,i=(g-1)/3+1<<2,e=new Array(i),j=0,k=0;h>j;)m=(255&f[j++])<<16|(255&f[j++])<<8|255&f[j++],e[k++]=d.charAt(m>>18&63),e[k++]=d.charAt(m>>12&63),e[k++]=d.charAt(m>>6&63),e[k++]=d.charAt(63&m);return l=g-h,l>0&&(m=(255&f[h])<<10|(2==l?(255&f[g-1])<<2:0),e[i-4]=d.charAt(m>>12),e[i-3]=d.charAt(m>>6&63),e[i-2]=2==l?d.charAt(63&m):"=",e[i-1]="="),e.join("")},decode:function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(d=b?c.Base64.IAS:c.Base64.IA,a.constructor==Array?(f=a,h=!0):(f=c.toByteArray(a),h=!1),g=f.length,i=0,j=g-1;j>i&&d[f[i]]<0;)i++;for(;j>0&&d[f[j]]<0;)j--;for(k="="==f[j]?"="==f[j-1]?2:1:0,l=j-i+1,m=g>76?("\r"==f[76]?l/78:0)<<1:0,n=(6*(l-m)>>3)-k,e=new Array(n),o=0,p=0,eLen=n/3*3;eLen>o;)q=d[f[i++]]<<18|d[f[i++]]<<12|d[f[i++]]<<6|d[f[i++]],e[o++]=q>>16&255,e[o++]=q>>8&255,e[o++]=255&q,m>0&&19==++p&&(i+=2,p=0);if(n>o){for(q=0,r=0;j-k>=i;r++)q|=d[f[i++]]<<18-6*r;for(s=16;n>o;s-=8)e[o++]=q>>s&255}if(h)return e;for(q=0;q<e.length;q++)e[q]=String.fromCharCode(e[q]);return e.join("")}},c.Base64.init();var d=8,e=6,f=3,g=(1<<e)+(f-1),h=(1<<16-e)-1,i=256;c.compress=function(a){var b,j,k,l,m,n,o,p,q,r=[],s=0,t=0,u=1<<d-1,v=new Array(i);for(p=0;i>p;p++)v[p]=3435973836;for(a.constructor==Array?(b=a,q=!0):(b=c.toByteArray(a),q=!1),j=b.length;j>s;){if((u<<=1)==1<<d){if(t>=j-1-2*d){for(m=j,s=0,t=0;m;m--)r[t++]=b[s++];return r}u=1,l=t,r[t++]=0}if(s>j-g)r[t++]=b[s++];else if(o=(b[s]+13^b[s+1]-13^b[s+2])&i-1,n=s-v[o]&h,v[o]=s,k=s-n,k>=0&&k!=s&&b[s]==b[k]&&b[s+1]==b[k+1]&&b[s+2]==b[k+2]){for(r[l]|=u,m=f;g>m&&b[s+m]==b[k+m];m++);r[t++]=m-f<<d-e|n>>d,r[t++]=n,s+=m}else r[t++]=b[s++]}return r},c.decompress=function(a,b){var g,i,j,k,l,m,n,o,p,q=[],r=0,s=0,t=1<<d-1;for(a.constructor==Array?(g=a,o=!0):(g=c.toByteArray(a),o=!1),o="undefined"==typeof b?!1:b,i=g.length,p=function(){if(o)return q;for(n=0;s>n;n++)q[n]=String.fromCharCode(q[n]);return q.join("")};i>r;)if((t<<=1)==1<<d&&(t=1,k=g[r++]),k&t){if(l=(g[r]>>d-e)+f,m=(g[r]<<d|g[r+1])&h,r+=2,!((j=s-m)>=0))return p();for(;--l>=0;)q[s++]=q[j++]}else q[s++]=g[r++];return p()},b.exports=c},{}],5:[function(a,b){function c(a){var b=function(a){for(var b={},c=0,d=a.length;d>c;c++)b[a[c]]=!0;return b};this.opts={elToObserve:"body",elToExclude:"",eventToSender:[],eventToReceiver:[],enable:function(){},disable:function(){},mode:"disabled",jQuery:!1,_$elToObserve:!1,_$elToExclude:!1,_map_Global:{jQueryPath_document:document,jQueryPath_window:window,window:"jQueryPath_window",document:"jQueryPath_document"}};var c={};this.updateElToObserve=function(a){return this.opts.elToObserve=a,this.opts._$elToObserve=this.opts.jQuery(a),this},this.updateElToExclude=function(a){return this.opts.elToExclude=a,this.opts._$elToExclude=this.opts.jQuery(a),this},this.getEventHandler=function(a){return a?c[a]:c},this.get_jQDocument=function(){var a=this.opts._$elToObserve;return a.is("body")||(a=a.parents("body")),a.parent().parent()},this.get_jQWindow=function(){var a=this.get_jQDocument()[0];return null==a?!1:this.opts.jQuery("object"==typeof a&&"defaultView"in a?a.defaultView:a.parentWindow)},this.simulateMouseEvent=function(a,b){this.simulateMouseEvent.previousTarget||(this.simulateMouseEvent.previousTarget={});var c={mouseover:"mouseout",mouseenter:"mouseleave",click:""},d=this.simulateMouseEvent.previousTarget[a];if(a in c&&b&&b.dispatchEvent){if(c[a]){if(d){var e=new MouseEvent(c[a],{view:window,bubbles:!0,cancelable:!0});d.dispatchEvent(e)}this.simulateMouseEvent.previousTarget[a]=b}{var f=new MouseEvent(a,{view:window,bubbles:!0,cancelable:!0});!b.dispatchEvent(f)}}},this.receiverDispatcher=function(a){var b=null,d=null;try{b="string"==typeof a?JSON.parse(iAdvize.html_entity_decode(a)):a}catch(e){b=null}try{if(-1!=b.i.indexOf("jQueryPath_")){if(b.i==this.opts._map_Global.document)d=this.get_jQDocument();else if(b.i==this.opts._map_Global.window)try{if(d=this.get_jQWindow(),d===!1)throw new Error("Window undefined :'(")}catch(e){d=null}}else null!=b.i&&(d=this.get_jQDocument().find(b.i))}catch(e){}null!==b&&d&&(b.iframe&&""!=b.iframe&&(d=this.opts._$elToObserve.find("#"+b.iframe).contents().find(b.i)),this.opts.eventToReceiver[b.type]&&c[b.type]&&c[b.type].onReceive?c[b.type].onReceive(d,b):this.opts.eventToReceiver["default"]&&c["default"].onReceive(d,b))},this._senderBuffer=[],this.sender=function(a){this._senderBuffer.push(JSON.stringify(a)),this._throttledSender()},this._throttledSender=iAdvize.Utils.throttle(350,function(){for(var a=0,b=this._senderBuffer.length;b>a;a++)this._sender(this._senderBuffer[a]);this._senderBuffer=[]}),this._sender=function(a){iAdvize.connection.send($msg({to:Strophe.getBareJidFromJid(iAdvize.operator.barejid)+"/operators",from:iAdvize.connection.jid,type:"command"}).c("body").t("!magic_event "+a).tree())},this.updateSenderMethod=function(a){this._sender=a},this.eventDispatcher=function(a){if(!a||!a.target)return!0;var b=this.opts.jQuery(a.target);if(!b)return!0;var d=b.data("MagicEvent_path");return d||(d=this.opts.jQuery.getjQueryPath(a.target),b.data("MagicEvent_path",d)),d!=this.opts._map_Global.window&&d!=this.opts._map_Global.document&&this.opts._$elToExclude&&1==this.opts._$elToExclude.has(a.target).length?!0:(this.opts.eventToSender[a.type]&&c[a.type]&&c[a.type].EventHandler?c[a.type].EventHandler(a,d):this.opts.eventToSender["default"]&&c["default"].EventHandler(a,d),!0)},this.forceEventHandler=function(a,b){c[a].EventHandler(b)},this.forceOnReceive=function(a,b,d){return c[a]&&"function"==typeof c[a].onReceive?void c[a].onReceive(b,d):!1},this.changeState=function(a){var b="disabled",d="disabled";if("sender"==this.opts.mode?b="Sender":"receiver"==this.opts.mode&&(b="Receiver"),"sender"==this.opts.mode){var e=this.opts["eventTo"+b];for(var f in e)c[f]&&c[f].disable()}if(this.opts["on"+b+"Disable"]&&this.opts["on"+b+"Disable"].call(this),this.opts.mode=a,"sender"==a?d="Sender":"receiver"==a&&(d="Receiver"),"sender"===a){var e=this.opts["eventTo"+d];for(var f in e)c[f]&&c[f].enable()}return this.opts["on"+d+"Enable"]&&this.opts["on"+d+"Enable"].call(this),this},this.refreshState=function(){this.changeState(this.opts.mode)},this.Helper_IntelliZoom=function(a){var b=this._magicEvent,c=b.get_jQWindow();if(c&&b.distantWinWidth>c.width()){var d=b.opts.jQuery,e=(b.localWinWidth=b.opts._$elToObserve.width(),a-c.width()/2);d("html, body",b.get_jQDocument()).stop().animate({scrollLeft:e},500)}},this.addEventHandler=function(a,b,d){c[a]&&delete c[a];var e={enable:function(){this._magicEvent.opts._$elToObserve.bind(a,this._magicEvent.eventDispatcher)},disable:function(){this._magicEvent.opts._$elToObserve.unbind(a)},onReceive:function(){}};if(this.opts.jQuery.extend(e,b),c[a]=e,c[a]._magicEvent=this,c[a]._intelliZoom=this.Helper_IntelliZoom,d&&d.mustBeBuffered)for(var f=d.mustBeBuffered.length;f--;)c[a][d.mustBeBuffered[f]]=iAdvize.Utils.throttle(c[a]._sampleDelay,c[a][d.mustBeBuffered[f]])},this.editEventHandler=function(a,b,d,e){var f=e||!1;if(c[a]&&c[a][b])if(f){var g=c[a][b];c[a][b]=function(){return function(){"before"!=f&&g.apply(this,arguments),d.apply(this,arguments),"before"==f&&g.apply(this,arguments)}}()}else c[a][b]=d;return this},this.init=function(a){a.jQuery.extend(this.opts,a),this.opts.jQuery.proxy||(this.opts.jQuery.proxy=this.opts.jQuery.fn.proxy=function(a,b){return function(){return a.apply(b||window,Array.prototype.slice.call(arguments))}}),this.eventDispatcher=this.opts.jQuery.proxy(this.eventDispatcher,this),this.opts._$elToObserve=this.opts.jQuery("function"==typeof this.opts.elToObserve?this.opts.elToObserve():this.opts.elToObserve),this.opts.elToExclude&&(this.opts._$elToExclude=this.opts.jQuery(this.opts.elToExclude)),this.opts.eventToSender=b(this.opts.eventToSender),this.opts.eventToReceiver=b(this.opts.eventToReceiver),this.addEventHandler("default",new function(){for(var a=["blur","change","select"],b="",c=0,d=a.length;d>c;c++)b+=a[c]+".magicEvent ";this.enable=function(){this._magicEvent.opts._$elToObserve.bind(b,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(b,this._magicEvent.eventDispatcher)},this.onReceive=function(a,b){var c=b.type;"change"!=c&&"blur"!=c||""==b.data||(a.val(unescape(b.data)),"change"==c&&a&&a[0]&&a[0].value&&(a[0].value=unescape(b.data))),a.fireEvent(b.type)},this.EventHandler=function(a,b){var c=this._magicEvent.opts.jQuery(a.target),d=a.type,e={i:b,type:d,data:null};("change"==d||"blur"==d)&&(e.data=escape("password"!=c.attr("type")&&"idzhide"!=c.attr("rel")&&"CreditCardNumber"!=c.attr("id")&&"CVV2"!=c.attr("id")?c.val():Array(c.val().length+1).join("*"))),this._magicEvent.sender(e)}}),this.addEventHandler("click",new function(){var a="click.magicEvent";this._sampleDelay=2450,this.enable=function(){var b=this._magicEvent.opts._$elToObserve.add("a",this._magicEvent.opts._$elToObserve);b.bind(a,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.add("a",this._magicEvent.opts._$elToObserve).unbind(a)},this.onReceive=function(a,b){this._magicEvent.opts.jQuery.fireEvent(a[0],b.type)},this.EventHandler=function(a,b){this._magicEvent.sender({i:b,type:"click",data:{x:a.pageX,y:a.pageY}})}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("resize",new function(){var a="resize.magicEvent";this._sampleDelay=2450,this.enable=function(){this._magicEvent.distantWinWidth=0,this._magicEvent.localWinWidth=0;var b=this._magicEvent.get_jQWindow();b!==!1&&(b.bind(a,this._magicEvent.eventDispatcher),this._magicEvent.localWinWidth=b.width()),this._magicEvent.sender({i:this._magicEvent.opts._map_Global.window,type:"resize",data:{w:this._magicEvent.localWinWidth}})
},this.disable=function(){var b=this._magicEvent.get_jQWindow();b!==!1&&b.unbind(a)},this.onReceive=function(){alert("Not implemented !")},this.EventHandler=function(){var a=this._magicEvent.get_jQWindow();if(a!==!1){var b=a.width();if(this._magicEvent.localWinWidth==b)return!0;this._magicEvent.localWinWidth=b,this._magicEvent.sender({i:this._magicEvent.opts._map_Global.window,type:"resize",data:{w:this._magicEvent.localWinWidth}})}}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("scroll",new function(){var a="scroll.magicEvent";this._sampleDelay=2450,this.scrollX=this.scrollY=this.lastSendScrollX=this.lastSendScrollY=0,this.enable=function(){var b=this._magicEvent.get_jQDocument();if(document.all){var c=this._magicEvent.get_jQWindow();c!==!1&&c.bind(a,this._magicEvent.eventDispatcher)}else b.bind(a,this._magicEvent.eventDispatcher);"sender"===this._magicEvent.opts.mode&&(this.scrollX=this.lastSendScrollX=b.scrollLeft(),this.scrollY=this.lastSendScrollY=b.scrollTop(),this._magicEvent.sender({i:this._magicEvent.opts._map_Global.document,type:"scroll",data:{x:this.scrollX,y:this.scrollY}}))},this.disable=function(){if(document.all){var b=this._magicEvent.get_jQWindow();b!==!1&&b.unbind(a)}else this._magicEvent.get_jQDocument().unbind(a)},this.onReceive=function(){alert("Not implemented !")},this.EventHandler=function(){return this.scrollX=this._magicEvent.get_jQDocument().scrollLeft(),this.scrollY=this._magicEvent.get_jQDocument().scrollTop(),this.scrollX==this.lastSendScrollX&&this.scrollY==this.lastSendScrollY?!0:(this._magicEvent.sender({i:this._magicEvent.opts._map_Global.document,type:"scroll",data:{x:this.scrollX,y:this.scrollY}}),this.lastSendScrollX=this.scrollX,void(this.lastSendScrollY=this.scrollY))}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("keyup",new function(){var a="keyup.magicEvent";this._sampleDelay=2450,this.enable=function(){this._magicEvent.opts._$elToObserve.bind(a,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(a)},this.onReceive=function(a,b){""!=b.data&&a.val(unescape(b.data))},this.EventHandler=function(a,b){var c=this._magicEvent.opts.jQuery(a.target);this._magicEvent.sender({i:b,type:"keyup",data:escape("password"!=c.attr("type")&&"idzhide"!=c.attr("rel")&&"CreditCardNumber"!=c.attr("id")&&"CVV2"!=c.attr("id")?c.val():Array(c.val().length+1).join("*"))})}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("mousemove",new function(){var a="mousemove.magicEvent";this._sampleDelay=2450,this.mouseX=0,this.mouseY=0,this.lastSendMouseX=0,this.lastSendMouseY=0,this.enable=function(){this._magicEvent.opts._$elToObserve.bind(a,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(a)},this.onReceive=function(){alert("Not implemented !")},this.EventHandler=function(a){return this.mouseX=a.pageX,this.mouseY=a.pageY,this.lastSendMouseX==this.mouseX||this.lastSendMouseY==this.mouseY?!0:(this._magicEvent.sender({i:this._magicEvent.opts._map_Global.window,type:"mousemove",data:{x:this.mouseX,y:this.mouseY}}),this.lastSendMouseX=this.mouseX,void(this.lastSendMouseY=this.mouseY))}},{mustBeBuffered:["EventHandler"]}),this.opts.jQuery.fireEvent||!function(a,b){a.fireEvent=function(d,e,f){if(d===b)return!1;var g;return c[e]?void("undefined"!=typeof document.createEvent?(g=document.createEvent(c[e].w3c),c[e].initEvt(g,d,f),d.dispatchEvent(g)):"click"==e?(a(d).click(),d.fireEvent(c[e].ie)):d.fireEvent(c[e].ie)):!1},a.fn.fireEvent=function(b,c){return 0==this.length?this:(a.fireEvent.call({},this[0],b,c),this)};var c={click:{ie:"onclick",w3c:"MouseEvents",initEvt:function(b,c,d){var e=a.extend({type:"click",canBubble:!0,cancelable:!0,view:window,detail:1,screenX:1,screenY:1,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:c},d);b.initMouseEvent(e.type,e.canBubble,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}},dblclick:{ie:"ondblclick",w3c:"MouseEvents",initEvt:function(b,d,e){c.click.initEvt(b,d,a.extend({type:"dblclick"},e))}},keyup:{ie:"onkeyup",w3c:"KeyboardEvent",initEvt:function(b,c,d){var e=a.extend({keyCode:null,CharCode:null},d);b.initKeyEvent("keyup",!0,!0,window,!1,!1,!1,!1,e.keyCode,e.CharCode)}},blur:{ie:"onblur",w3c:"HTMLEvents",initEvt:function(a){a.initEvent("blur",!0,!0)}},change:{ie:"onchange",w3c:"HTMLEvents",initEvt:function(a){a.initEvent("change",!0,!0)}},select:{ie:"onselect",w3c:"HTMLEvents",initEvt:function(a){a.initEvent("select",!0,!0)}}}}(this.opts.jQuery),this.opts.jQuery.getjQueryPath||!function(a){var b=function(){try{var b=a("<div><p></p><p></p></div>")[0].childNodes[1];return b.previousElementSibling&&"object"==typeof b.previousElementSibling?function(a){return a.previousElementSibling}:function(b){return a(b).prev()[0]}}catch(c){return!1}}(),c=function(a){if(null===a.previousElementSibling)return 0;for(var c=a,d=0,e=a.nodeName;c=b(c);)c.nodeName==e&&d++;return d},d=function(a,b){var d=b||!1,e="";e+=a.nodeName.toLowerCase();var f=c(a);return(f||d)&&(e+=":eq("+f+")"),e};a.getjQueryPath=function(a){if(!a)return!1;if(a.nodeName&&"#document"==a.nodeName.toLowerCase())return"jQueryPath_document";if(a.location)return"jQueryPath_window";for(var b=d(a,!0);a.parentNode&&"#document"!==a.parentNode.nodeName;)a=a.parentNode,b=d(a)+">"+b;return b}}(this.opts.jQuery)},this.init(a)}b.exports=c,"undefined"==typeof iAdvize&&(iAdvize={}),"undefined"==typeof iAdvize.Utils&&(iAdvize.Utils={}),iAdvize.Utils.throttle||!function(a){var b;iAdvize.Utils.throttle=b=function(b,c,d,e){function f(){function f(){h=+new Date,d.apply(j,l)}function i(){g=a}var j=this,k=+new Date-h,l=arguments;e&&!g&&f(),g&&clearTimeout(g),e===a&&k>b?f():c!==!0&&(g=setTimeout(e?i:f,e===a?b-k:b))}var g,h=0;return"boolean"!=typeof c&&(e=d,d=c,c=a),f},iAdvize.Utils.debounce=function(c,d,e){return e===a?b(c,d,!1):b(c,e,d!==!1)}}(),iAdvize.html_entity_decode||(iAdvize.get_html_translation_table=function(a,b){var c={},d={},e=0,f="",g={},h={},i={},j={};if(g[0]="HTML_SPECIALCHARS",g[1]="HTML_ENTITIES",h[0]="ENT_NOQUOTES",h[2]="ENT_COMPAT",h[3]="ENT_QUOTES",i=isNaN(a)?a?a.toUpperCase():"HTML_SPECIALCHARS":g[a],j=isNaN(b)?b?b.toUpperCase():"ENT_COMPAT":h[b],"HTML_SPECIALCHARS"!==i&&"HTML_ENTITIES"!==i)throw new Error("Table: "+i+" not supported");c[38]="&amp;","HTML_ENTITIES"===i&&(c[160]="&nbsp;",c[161]="&iexcl;",c[162]="&cent;",c[163]="&pound;",c[164]="&curren;",c[165]="&yen;",c[166]="&brvbar;",c[167]="&sect;",c[168]="&uml;",c[169]="&copy;",c[170]="&ordf;",c[171]="&laquo;",c[172]="&not;",c[173]="&shy;",c[174]="&reg;",c[175]="&macr;",c[176]="&deg;",c[177]="&plusmn;",c[178]="&sup2;",c[179]="&sup3;",c[180]="&acute;",c[181]="&micro;",c[182]="&para;",c[183]="&middot;",c[184]="&cedil;",c[185]="&sup1;",c[186]="&ordm;",c[187]="&raquo;",c[188]="&frac14;",c[189]="&frac12;",c[190]="&frac34;",c[191]="&iquest;",c[192]="&Agrave;",c[193]="&Aacute;",c[194]="&Acirc;",c[195]="&Atilde;",c[196]="&Auml;",c[197]="&Aring;",c[198]="&AElig;",c[199]="&Ccedil;",c[200]="&Egrave;",c[201]="&Eacute;",c[202]="&Ecirc;",c[203]="&Euml;",c[204]="&Igrave;",c[205]="&Iacute;",c[206]="&Icirc;",c[207]="&Iuml;",c[208]="&ETH;",c[209]="&Ntilde;",c[210]="&Ograve;",c[211]="&Oacute;",c[212]="&Ocirc;",c[213]="&Otilde;",c[214]="&Ouml;",c[215]="&times;",c[216]="&Oslash;",c[217]="&Ugrave;",c[218]="&Uacute;",c[219]="&Ucirc;",c[220]="&Uuml;",c[221]="&Yacute;",c[222]="&THORN;",c[223]="&szlig;",c[224]="&agrave;",c[225]="&aacute;",c[226]="&acirc;",c[227]="&atilde;",c[228]="&auml;",c[229]="&aring;",c[230]="&aelig;",c[231]="&ccedil;",c[232]="&egrave;",c[233]="&eacute;",c[234]="&ecirc;",c[235]="&euml;",c[236]="&igrave;",c[237]="&iacute;",c[238]="&icirc;",c[239]="&iuml;",c[240]="&eth;",c[241]="&ntilde;",c[242]="&ograve;",c[243]="&oacute;",c[244]="&ocirc;",c[245]="&otilde;",c[246]="&ouml;",c[247]="&divide;",c[248]="&oslash;",c[249]="&ugrave;",c[250]="&uacute;",c[251]="&ucirc;",c[252]="&uuml;",c[253]="&yacute;",c[254]="&thorn;",c[255]="&yuml;"),"ENT_NOQUOTES"!==j&&(c[34]="&quot;"),"ENT_QUOTES"===j&&(c[39]="&#39;"),c[60]="&lt;",c[62]="&gt;";for(e in c)f=String.fromCharCode(e),d[f]=c[e];return d},iAdvize.html_entity_decode=function(a,b){var c={},d="",e="",f="";if(e=a.toString(),!1===(c=iAdvize.get_html_translation_table("HTML_ENTITIES",b)))return!1;delete c["&"],c["&"]="&amp;";for(d in c)f=c[d],e=e.split(f).join(d);return e=e.split("&#039;").join("'")})},{}],6:[function(a,b,c){c.vuid=iAdvize.vuid,c.socketHost=iAdvize.mirrorHost,c.proxyHost=iAdvize.httpsProxy},{}],7:[function(a,b,c){function d(a){var b=h.socket.transport.name;h.emit("message",iAdvize.CompressNS.compress(JSON.stringify(a),"websocket"==b||"flashsocket"==b))}function e(){g&&g.disconnect()}function f(){h=i.connect(),h.on("connect",function(){-1!=k.inArray(h.socket.transport.name,l)&&j.setMethod(j.TEXT),h.emit("projector",j.getMethod()),h.once("method",function(a,b){j.setMethod(a),b&&b()}),h.once("start",function(){d({base:k.utilsUrl.toAbsolute()});var b=a("../tree.js");b.getClient(document,m,function(a){g=a})})}),h.on("disconnect",function(){e()}),h.on("message",function(a){console&&console.warn&&console.warn("message received: ",a)})}a("../../lib/jquery.dom-utils.js");var g,h,i=a("../socket.js"),j=a("../methods.js"),k=iAdvize.$,l=k.map(j.extraNodeSelectors,function(a,b){return b}),m={initialize:function(){d({f:"initialize",args:Array.prototype.slice.call(arguments)})},applyChanged:function(){d({f:"applyChanged",args:Array.prototype.slice.call(arguments)})},filterSelector:["script","title",".idz_hide","#idz_chatglobal","#idz_btn","#idz_bottompad","#idz_chatbar_mini","#visitor_cursor","#anim_clic","#idz_writting",'object[type="application/pdf"]'].join(",")};c.start=f,c.stop=e},{"../../lib/jquery.dom-utils.js":1,"../methods.js":9,"../socket.js":12,"../tree.js":13}],8:[function(a,b,c){function d(a){k.receiverDispatcher(a)}function e(a,b){this._magicEvent.$body||(this._magicEvent.$body=this._magicEvent.opts.jQuery("html,body",this._magicEvent.get_jQDocument())),this._magicEvent.$body.stop().animate({scrollLeft:b.data.x,scrollTop:b.data.y},700)}function f(a,b){var c=this._magicEvent.opts._$elToObserve;if(null==b.data&&(b.data={}),!b.data.x&&1==a.length){var d=a.offset();b.data.x=d.left+a.width()/2,b.data.y=d.top}this._intelliZoom(b.data.x,b.data.y);var e=c.find("#visitor_cursor"),f=c.find("#anim_clic");e.hide(),f.css({top:parseInt(b.data.y)-80,left:parseInt(b.data.x)-80}),setTimeout(function(){f.css({top:"-3000px",left:"-3000px"}),e.show()},800)}function g(a,b){return b.data.w?void(this._magicEvent.distantWinWidth=b.data.w):!1}function h(a,b){var c=this._magicEvent.opts._$elToObserve,d=this._magicEvent.opts.jQuery,e=c.width(),f=d(b.selector);f.length&&this._magicEvent.simulateMouseEvent("mouseover",f[0]),b.data.x-=30,b.data.y-=30,e<this._magicEvent.distantWinWidth&&(b.data.x=b.data.x-(this._magicEvent.distantWinWidth-e)/2),this.mouseX=b.data.x,this.mouseY=b.data.y,c.find("#visitor_cursor").stop().animate({top:this.mouseY,left:this.mouseX},650)}function i(){this._magicEvent.$frame=this._magicEvent.opts.jQuery.find("html")}function j(){return k=new n(p),k.changeState("disabled"),k.updateSenderMethod(function(a){l.emit("action",a)}),k.editEventHandler("scroll","onReceive",e).editEventHandler("click","onReceive",f,"after").editEventHandler("resize","onReceive",g).editEventHandler("mousemove","onReceive",h).editEventHandler("resize","enable",i,"after"),l=m.connect(),l.on("action",d),l.on("start",function(){k.changeState("sender")}),l.on("stop",function(){k.changeState("disabled")}),k}var k,l,m=a("../socket.js"),n=a("../MagicEvent.js"),o=["default","click","resize","keyup","mousemove","scroll"],p={elToExclude:"#idz_chatglobal",eventToSender:o,eventToReceiver:o,jQuery:iAdvize.$,onSenderEnable:function(){this.forceEventHandler("resize"),this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").hide()},onReceiverEnable:function(){this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").show(),this.getEventHandler("resize").enable()},onReceiverDisable:function(){this.getEventHandler("resize").disable()}};c.start=j},{"../MagicEvent.js":5,"../socket.js":12}],9:[function(a,b,c){function d(a){for(var b=0,c=a.length;c>b;b++)a[b]=String.fromCharCode(a[b]);return a.join("")}function e(a){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=a.charCodeAt(c);return b}function f(a){return decodeURIComponent(escape(a))}function g(a){var b=1024,c=1024*b,d=1024*c,e=1024*d;return a>=0&&b>a?a+" B":a>=b&&c>a?(a/b).toFixed(1)+" KB":a>=c&&d>a?(a/c).toFixed(1)+" MB":a>=d&&e>a?(a/d).toFixed(1)+" GB":a>=e?(a/e).toFixed(1)+" TB":a+" B"}function h(a){n.push(a)}var i=a("./Iuppiter.js"),j=window,k=(iAdvize.$||j.jQuery,function(){for(var a=["WebKit","Moz","O","Ms",""],b=0;b<a.length;b++)if(a[b]+"MutationObserver"in window)return j[a[b]+"MutationObserver"];return!1}());c.extraNodeSelectors={flashsocket:"[id=webSocketContainer]","jsonp-polling":".socketio"};var l={TEXT:1,DMO:2};c.DMO=l.DMO,c.TEXT=l.TEXT;var m=k?l.DMO:l.TEXT;c.getMethod=function(){return m},c.getMethodName=function(){return m==l.DMO?"dmo":"text"},c.setMethod=function(a){m=a},c.isDMO=function(){return m==l.DMO},iAdvize.CompressNS={compress:function(a,b){var c="0",e=a;if(b){var f=i.compress(a);f.length<a.length&&(c="1",e=d(f))}return c+e},decompress:function(a){var b,c=a.charAt(0),d=a.slice(1);return"1"==c?b=f(i.decompress(e(d))):"0"==c&&(b=d),b}};var n=[];c.logMessageSize=h,c.dumpMessageStats=function(){console.log("Messages size statistics =>"),console.log("Total    message size       :  "+g(_.reduce(n,function(a,b){return a+b}))),console.log("Mean     message size       :  "+g(_.reduce(n,function(a,b){return a+b})/n.length)),console.log("Biggest  message size       :  "+g(_.reduce(n,function(a,b){return a>b?a:b}))),console.log("Smallest message size       :  "+g(_.reduce(n,function(a,b){return b>a?a:b})))}},{"./Iuppiter.js":4}],10:[function(a){a("../lib/json3.js"),iAdvize.define("mirror",function(b,c){function d(b){a("./dom/projector.js").start(),f=a("./event/projector.js").start(),b.resolve()}function e(a){try{f=new h({elToExclude:"#idz_chatglobal",eventToSender:["default","click","resize","keyup","mousemove","scroll"],eventToReceiver:["default","click","resize","keyup","mousemove","scroll"],jQuery:g.$,onSenderEnable:function(){this.forceEventHandler("resize"),this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").hide()},onReceiverEnable:function(){this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").show(),this.getEventHandler("resize").enable()},onReceiverDisable:function(){this.getEventHandler("resize").disable()}}),f.updateSenderMethod(function(a){var b=g.operator.barejid||g.monitor_jid;return b?1==g.paused||1==g.opOffline?!1:g.connection.connected?(""!=g.iframeID&&(a=JSON.parse(a),a.iframe=g.iframeID,a=JSON.stringify(a)),void g.connection.send($msg({to:b+"/operators",from:g.connection.jid,type:"command",website:g.website_id}).c("body").t("!magic_event "+a))):!1:!1}),a.resolve(),f.editEventHandler("scroll","onReceive",function(a,b){this._magicEvent.$body||(this._magicEvent.$body=this._magicEvent.opts.jQuery("html, body",this._magicEvent.get_jQDocument())),this._magicEvent.$body.stop().animate({scrollLeft:b.data.x,scrollTop:b.data.y},700)}).editEventHandler("click","onReceive",function(a,b){var c=this._magicEvent.opts._$elToObserve;if(null==b.data&&(b.data={}),!b.data.x&&1==a.length){var d=a.offset();b.data.x=d.left+a.width()/2,b.data.y=d.top}this._intelliZoom(b.data.x,b.data.y),c.find("#visitor_cursor").hide(),c.find("#anim_clic").css({top:parseInt(b.data.y)-80+"px",left:parseInt(b.data.x)-80+"px"}),setTimeout(function(){c.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),c.find("#visitor_cursor").show()},800)},"after").editEventHandler("resize","enable",function(){this._magicEvent.$frame=this._magicEvent.opts.jQuery.find("html")},"after").editEventHandler("resize","onReceive",function(a,b){return b.data.w?void(this._magicEvent.distantWinWidth=b.data.w):!1}).editEventHandler("mousemove","onReceive",function(a,b){var c=this._magicEvent.opts._$elToObserve,d=c.width();b.data.x-=30,b.data.y-=30,d<this._magicEvent.distantWinWidth&&(b.data.x=b.data.x-(this._magicEvent.distantWinWidth-d)/2),this.mouseX=b.data.x,this.mouseY=b.data.y,c.find("#visitor_cursor").stop().animate({top:this.mouseY+"px",left:this.mouseX+"px"},650)})}catch(b){console.log(b),a.reject()}}var f,g=iAdvize,h=a("./MagicEvent.js"),i=!1;c.init=function(a){var b=g.$.Deferred();return i?(b.resolve(),b.promise()):(i=!0,"v2"==a?d(b):e(b),b.promise())},c.disable=function(){f&&f.changeState&&f.changeState("disabled")},c.isReceiver=function(){return f&&f.opts&&"receiver"===f.opts.mode},c.state=function(a){f&&f.changeState&&f.changeState(a)},c.receiverDispatcher=function(a){f.receiverDispatcher(a)},c.exclude=function(a){f&&f.updateElToExclude&&f.updateElToExclude(a)},c.takeControl=function(){}})},{"../lib/json3.js":2,"./MagicEvent.js":5,"./dom/projector.js":7,"./event/projector.js":8}],11:[function(a,b,c){var d=a("./config.js"),e=d.proxyHost;c.securizeUrl=function(a){var b=encodeURIComponent(a);return e+"proxify/?url="+b},c.securizeBaseUrl=function(a){return a=a||"",a=a.replace(/(http|https):\/\//g,""),e+"baseproxy/"+a}},{"./config.js":6}],12:[function(a,b,c){var d,e=a("./config.js"),f="//"+e.socketHost+"/"+e.vuid;io=a("../lib/socket.io.js");var g={query:"vuid="+e.vuid,"sync disconnect on unload":!0,"flash policy port":843};c.connect=function(){return d||(d=io.connect(f,g)),d}},{"../lib/socket.io.js":3,"./config.js":6}],13:[function(a,b,c){function d(a,b,c,d){var e=new a.TreeMirrorClient(b,c);d(e)}a("./tree/mutation_summary.js");{var e=a("./tree/text.js"),f=a("./tree/dmo.js"),g=a("./methods.js");iAdvize.$||window.jQuery}c.getClient=function(a,b,c){g.isDMO()?d(f,a,b,c):d(e,a,b,c)}},{"./methods.js":9,"./tree/dmo.js":15,"./tree/mutation_summary.js":16,"./tree/text.js":17}],14:[function(){!function(){function a(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}a.prototype.diff_main=function(a,b,c,d){if("undefined"==typeof d&&(d=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==a||null==b)throw Error("Null input. (diff_main)");if(a==b)return a?[[0,a]]:[];"undefined"==typeof c&&(c=!0);var e=c,f=this.diff_commonPrefix(a,b);c=a.substring(0,f),a=a.substring(f),b=b.substring(f);var f=this.diff_commonSuffix(a,b),g=a.substring(a.length-f);return a=a.substring(0,a.length-f),b=b.substring(0,b.length-f),a=this.diff_compute_(a,b,e,d),c&&a.unshift([0,c]),g&&a.push([0,g]),this.diff_cleanupMerge(a),a},a.prototype.diff_compute_=function(a,b,c,d){if(!a)return[[1,b]];if(!b)return[[-1,a]];var e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=e.indexOf(f);return-1!=g?(c=[[1,e.substring(0,g)],[0,f],[1,e.substring(g+f.length)]],a.length>b.length&&(c[0][0]=c[2][0]=-1),c):1==f.length?[[-1,a],[1,b]]:(e=this.diff_halfMatch_(a,b))?(f=e[0],a=e[1],g=e[2],b=e[3],e=e[4],f=this.diff_main(f,g,c,d),c=this.diff_main(a,b,c,d),f.concat([[0,e]],c)):c&&100<a.length&&100<b.length?this.diff_lineMode_(a,b,d):this.diff_bisect_(a,b,d)},a.prototype.diff_lineMode_=function(a,b,c){var d=this.diff_linesToChars_(a,b);a=d.chars1,b=d.chars2,d=d.lineArray,a=this.diff_main(a,b,!1,c),this.diff_charsToLines_(a,d),this.diff_cleanupSemantic(a),a.push([0,""]);for(var e=d=b=0,f="",g="";b<a.length;){switch(a[b][0]){case 1:e++,g+=a[b][1];break;case-1:d++,f+=a[b][1];break;case 0:if(d>=1&&e>=1){for(a.splice(b-d-e,d+e),b=b-d-e,d=this.diff_main(f,g,!1,c),e=d.length-1;e>=0;e--)a.splice(b,0,d[e]);b+=d.length}d=e=0,g=f=""}b++}return a.pop(),a},a.prototype.diff_bisect_=function(a,b,c){for(var d=a.length,e=b.length,f=Math.ceil((d+e)/2),g=f,h=2*f,i=Array(h),j=Array(h),k=0;h>k;k++)i[k]=-1,j[k]=-1;i[g+1]=0,j[g+1]=0;for(var k=d-e,l=0!=k%2,m=0,n=0,o=0,p=0,q=0;f>q&&!((new Date).getTime()>c);q++){for(var r=-q+m;q-n>=r;r+=2){var s,t=g+r;s=r==-q||r!=q&&i[t-1]<i[t+1]?i[t+1]:i[t-1]+1;for(var u=s-r;d>s&&e>u&&a.charAt(s)==b.charAt(u);)s++,u++;if(i[t]=s,s>d)n+=2;else if(u>e)m+=2;else if(l&&(t=g+k-r,t>=0&&h>t&&-1!=j[t])){var v=d-j[t];if(s>=v)return this.diff_bisectSplit_(a,b,s,u,c)}}for(r=-q+o;q-p>=r;r+=2){for(t=g+r,v=r==-q||r!=q&&j[t-1]<j[t+1]?j[t+1]:j[t-1]+1,s=v-r;d>v&&e>s&&a.charAt(d-v-1)==b.charAt(e-s-1);)v++,s++;if(j[t]=v,v>d)p+=2;else if(s>e)o+=2;else if(!l&&(t=g+k-r,t>=0&&h>t&&-1!=i[t]&&(s=i[t],u=g+s-t,v=d-v,s>=v)))return this.diff_bisectSplit_(a,b,s,u,c)}}return[[-1,a],[1,b]]},a.prototype.diff_bisectSplit_=function(a,b,c,d,e){var f=a.substring(0,c),g=b.substring(0,d);return a=a.substring(c),b=b.substring(d),f=this.diff_main(f,g,!1,e),e=this.diff_main(a,b,!1,e),f.concat(e)},a.prototype.diff_linesToChars_=function(a,b){function c(a){for(var b="",c=0,f=-1,g=d.length;f<a.length-1;){f=a.indexOf("\n",c),-1==f&&(f=a.length-1);var h=a.substring(c,f+1),c=f+1;(e.hasOwnProperty?e.hasOwnProperty(h):void 0!==e[h])?b+=String.fromCharCode(e[h]):(b+=String.fromCharCode(g),e[h]=g,d[g++]=h)}return b}var d=[],e={};d[0]="";var f=c(a),g=c(b);return{chars1:f,chars2:g,lineArray:d}},a.prototype.diff_charsToLines_=function(a,b){for(var c=0;c<a.length;c++){for(var d=a[c][1],e=[],f=0;f<d.length;f++)e[f]=b[d.charCodeAt(f)];a[c][1]=e.join("")}},a.prototype.diff_commonPrefix=function(a,b){if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(f,e)==b.substring(f,e)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e},a.prototype.diff_commonSuffix=function(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e},a.prototype.diff_commonOverlap_=function(a,b){var c=a.length,d=b.length;if(0==c||0==d)return 0;if(c>d?a=a.substring(c-d):d>c&&(b=b.substring(0,c)),c=Math.min(c,d),a==b)return c;for(var d=0,e=1;;){var f=a.substring(c-e),f=b.indexOf(f);if(-1==f)return d;e+=f,(0==f||a.substring(c-e)==b.substring(0,e))&&(d=e,e++)}},a.prototype.diff_halfMatch_=function(a,b){function c(a,b,c){for(var d,e,f,h,i=a.substring(c,c+Math.floor(a.length/4)),j=-1,k="";-1!=(j=b.indexOf(i,j+1));){var l=g.diff_commonPrefix(a.substring(c),b.substring(j)),m=g.diff_commonSuffix(a.substring(0,c),b.substring(0,j));k.length<m+l&&(k=b.substring(j-m,j)+b.substring(j,j+l),d=a.substring(0,c-m),e=a.substring(c+l),f=b.substring(0,j-m),h=b.substring(j+l))}return 2*k.length>=a.length?[d,e,f,h,k]:null}if(0>=this.Diff_Timeout)return null;var d=a.length>b.length?a:b,e=a.length>b.length?b:a;if(4>d.length||2*e.length<d.length)return null;var f,g=this,h=c(d,e,Math.ceil(d.length/4)),d=c(d,e,Math.ceil(d.length/2));if(!h&&!d)return null;f=d?h&&h[4].length>d[4].length?h:d:h;var i;return a.length>b.length?(h=f[0],d=f[1],e=f[2],i=f[3]):(e=f[0],i=f[1],h=f[2],d=f[3]),f=f[4],[h,d,e,i,f]},a.prototype.diff_cleanupSemantic=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=0,h=0,i=0,j=0;f<a.length;)0==a[f][0]?(c[d++]=f,g=i,h=j,j=i=0,e=a[f][1]):(1==a[f][0]?i+=a[f][1].length:j+=a[f][1].length,e&&e.length<=Math.max(g,h)&&e.length<=Math.max(i,j)&&(a.splice(c[d-1],0,[-1,e]),a[c[d-1]+1][0]=1,d--,d--,f=d>0?c[d-1]:-1,j=i=h=g=0,e=null,b=!0)),f++;for(b&&this.diff_cleanupMerge(a),this.diff_cleanupSemanticLossless(a),f=1;f<a.length;)-1==a[f-1][0]&&1==a[f][0]&&(b=a[f-1][1],c=a[f][1],d=this.diff_commonOverlap_(b,c),e=this.diff_commonOverlap_(c,b),d>=e?(d>=b.length/2||d>=c.length/2)&&(a.splice(f,0,[0,c.substring(0,d)]),a[f-1][1]=b.substring(0,b.length-d),a[f+1][1]=c.substring(d),f++):(e>=b.length/2||e>=c.length/2)&&(a.splice(f,0,[0,b.substring(0,e)]),a[f-1][0]=1,a[f-1][1]=c.substring(0,c.length-e),a[f+1][0]=-1,a[f+1][1]=b.substring(e),f++),f++),f++},a.prototype.diff_cleanupSemanticLossless=function(b){function c(b,c){if(!b||!c)return 6;var d=b.charAt(b.length-1),e=c.charAt(0),f=d.match(a.nonAlphaNumericRegex_),g=e.match(a.nonAlphaNumericRegex_),h=f&&d.match(a.whitespaceRegex_),i=g&&e.match(a.whitespaceRegex_),d=h&&d.match(a.linebreakRegex_),e=i&&e.match(a.linebreakRegex_),j=d&&b.match(a.blanklineEndRegex_),k=e&&c.match(a.blanklineStartRegex_);return j||k?5:d||e?4:f&&!h&&i?3:h||i?2:f||g?1:0}for(var d=1;d<b.length-1;){if(0==b[d-1][0]&&0==b[d+1][0]){var e=b[d-1][1],f=b[d][1],g=b[d+1][1],h=this.diff_commonSuffix(e,f);if(h)var i=f.substring(f.length-h),e=e.substring(0,e.length-h),f=i+f.substring(0,f.length-h),g=i+g;for(var h=e,i=f,j=g,k=c(e,f)+c(f,g);f.charAt(0)===g.charAt(0);){var e=e+f.charAt(0),f=f.substring(1)+g.charAt(0),g=g.substring(1),l=c(e,f)+c(f,g);l>=k&&(k=l,h=e,i=f,j=g)}b[d-1][1]!=h&&(h?b[d-1][1]=h:(b.splice(d-1,1),d--),b[d][1]=i,j?b[d+1][1]=j:(b.splice(d+1,1),d--))}d++}},a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,a.whitespaceRegex_=/\s/,a.linebreakRegex_=/[\r\n]/,a.blanklineEndRegex_=/\n\r?\n$/,a.blanklineStartRegex_=/^\r?\n\r?\n/,a.prototype.diff_cleanupEfficiency=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=!1,h=!1,i=!1,j=!1;f<a.length;)0==a[f][0]?(a[f][1].length<this.Diff_EditCost&&(i||j)?(c[d++]=f,g=i,h=j,e=a[f][1]):(d=0,e=null),i=j=!1):(-1==a[f][0]?j=!0:i=!0,e&&(g&&h&&i&&j||e.length<this.Diff_EditCost/2&&3==g+h+i+j)&&(a.splice(c[d-1],0,[-1,e]),a[c[d-1]+1][0]=1,d--,e=null,g&&h?(i=j=!0,d=0):(d--,f=d>0?c[d-1]:-1,i=j=!1),b=!0)),f++;b&&this.diff_cleanupMerge(a)},a.prototype.diff_cleanupMerge=function(a){a.push([0,""]);for(var b,c=0,d=0,e=0,f="",g="";c<a.length;)switch(a[c][0]){case 1:e++,g+=a[c][1],c++;break;case-1:d++,f+=a[c][1],c++;break;case 0:d+e>1?(0!==d&&0!==e&&(b=this.diff_commonPrefix(g,f),0!==b&&(c-d-e>0&&0==a[c-d-e-1][0]?a[c-d-e-1][1]+=g.substring(0,b):(a.splice(0,0,[0,g.substring(0,b)]),c++),g=g.substring(b),f=f.substring(b)),b=this.diff_commonSuffix(g,f),0!==b&&(a[c][1]=g.substring(g.length-b)+a[c][1],g=g.substring(0,g.length-b),f=f.substring(0,f.length-b))),0===d?a.splice(c-e,d+e,[1,g]):0===e?a.splice(c-d,d+e,[-1,f]):a.splice(c-d-e,d+e,[-1,f],[1,g]),c=c-d-e+(d?1:0)+(e?1:0)+1):0!==c&&0==a[c-1][0]?(a[c-1][1]+=a[c][1],a.splice(c,1)):c++,d=e=0,g=f=""}for(""===a[a.length-1][1]&&a.pop(),d=!1,c=1;c<a.length-1;)0==a[c-1][0]&&0==a[c+1][0]&&(a[c][1].substring(a[c][1].length-a[c-1][1].length)==a[c-1][1]?(a[c][1]=a[c-1][1]+a[c][1].substring(0,a[c][1].length-a[c-1][1].length),a[c+1][1]=a[c-1][1]+a[c+1][1],a.splice(c-1,1),d=!0):a[c][1].substring(0,a[c+1][1].length)==a[c+1][1]&&(a[c-1][1]+=a[c+1][1],a[c][1]=a[c][1].substring(a[c+1][1].length)+a[c+1][1],a.splice(c+1,1),d=!0)),c++;d&&this.diff_cleanupMerge(a)},a.prototype.diff_xIndex=function(a,b){var c,d=0,e=0,f=0,g=0;for(c=0;c<a.length&&(1!==a[c][0]&&(d+=a[c][1].length),-1!==a[c][0]&&(e+=a[c][1].length),!(d>b));c++)f=d,g=e;return a.length!=c&&-1===a[c][0]?g:g+(b-f)},a.prototype.diff_prettyHtml=function(a){for(var b=[],c=/&/g,d=/</g,e=/>/g,f=/\n/g,g=0;g<a.length;g++){var h=a[g][0],i=a[g][1],i=i.replace(c,"&amp;").replace(d,"&lt;").replace(e,"&gt;").replace(f,"&para;<br>");switch(h){case 1:b[g]='<ins style="background:#e6ffe6;">'+i+"</ins>";break;case-1:b[g]='<del style="background:#ffe6e6;">'+i+"</del>";break;case 0:b[g]="<span>"+i+"</span>"}}return b.join("")},a.prototype.diff_text1=function(a){for(var b=[],c=0;c<a.length;c++)1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")},a.prototype.diff_text2=function(a){for(var b=[],c=0;c<a.length;c++)-1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")},a.prototype.diff_levenshtein=function(a){for(var b=0,c=0,d=0,e=0;e<a.length;e++){var f=a[e][0],g=a[e][1];switch(f){case 1:c+=g.length;break;case-1:d+=g.length;break;case 0:b+=Math.max(c,d),d=c=0}}return b+=Math.max(c,d)},a.prototype.diff_toDelta=function(a){for(var b=[],c=0;c<a.length;c++)switch(a[c][0]){case 1:b[c]="+"+encodeURI(a[c][1]);break;case-1:b[c]="-"+a[c][1].length;break;case 0:b[c]="="+a[c][1].length}return b.join("	").replace(/%20/g," ")},a.prototype.diff_fromDelta=function(a,b){for(var c=[],d=0,e=0,f=b.split(/\t/g),g=0;g<f.length;g++){var h=f[g].substring(1);switch(f[g].charAt(0)){case"+":try{c[d++]=[1,decodeURI(h)]}catch(i){throw Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var j=parseInt(h,10);if(isNaN(j)||0>j)throw Error("Invalid number in diff_fromDelta: "+h);h=a.substring(e,e+=j),c[d++]="="==f[g].charAt(0)?[0,h]:[-1,h];break;default:if(f[g])throw Error("Invalid diff operation in diff_fromDelta: "+f[g])}}if(e!=a.length)throw Error("Delta length ("+e+") does not equal source text length ("+a.length+").");return c},a.prototype.match_main=function(a,b,c){if(null==a||null==b||null==c)throw Error("Null input. (match_main)");return c=Math.max(0,Math.min(c,a.length)),a==b?0:a.length?a.substring(c,c+b.length)==b?c:this.match_bitap_(a,b,c):-1},a.prototype.match_bitap_=function(a,b,c){function d(a,d){var e=a/b.length,g=Math.abs(c-d);return f.Match_Distance?e+g/f.Match_Distance:g?1:e}if(b.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var e=this.match_alphabet_(b),f=this,g=this.Match_Threshold,h=a.indexOf(b,c);-1!=h&&(g=Math.min(d(0,h),g),h=a.lastIndexOf(b,c+b.length),-1!=h&&(g=Math.min(d(0,h),g)));for(var i,j,k,l=1<<b.length-1,h=-1,m=b.length+a.length,n=0;n<b.length;n++){for(i=0,j=m;j>i;)d(n,c+j)<=g?i=j:m=j,j=Math.floor((m-i)/2+i);m=j,i=Math.max(1,c-j+1);var o=Math.min(c+j,a.length)+b.length;for(j=Array(o+2),j[o+1]=(1<<n)-1;o>=i;o--){var p=e[a.charAt(o-1)];if(j[o]=0===n?(j[o+1]<<1|1)&p:(j[o+1]<<1|1)&p|((k[o+1]|k[o])<<1|1)|k[o+1],j[o]&l&&(p=d(n,o-1),g>=p)){if(g=p,h=o-1,!(h>c))break;i=Math.max(1,2*c-h)}}if(d(n+1,c)>g)break;k=j}return h},a.prototype.match_alphabet_=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=0;for(c=0;c<a.length;c++)b[a.charAt(c)]|=1<<a.length-c-1;return b},a.prototype.patch_addContext_=function(a,b){if(0!=b.length){for(var c=b.substring(a.start2,a.start2+a.length1),d=0;b.indexOf(c)!=b.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,c=b.substring(a.start2-d,a.start2+a.length1+d);d+=this.Patch_Margin,(c=b.substring(a.start2-d,a.start2))&&a.diffs.unshift([0,c]),(d=b.substring(a.start2+a.length1,a.start2+a.length1+d))&&a.diffs.push([0,d]),a.start1-=c.length,a.start2-=c.length,a.length1+=c.length+d.length,a.length2+=c.length+d.length}},a.prototype.patch_make=function(b,c,d){var e;if("string"==typeof b&&"string"==typeof c&&"undefined"==typeof d)e=b,c=this.diff_main(e,c,!0),2<c.length&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(b&&"object"==typeof b&&"undefined"==typeof c&&"undefined"==typeof d)c=b,e=this.diff_text1(c);else if("string"==typeof b&&c&&"object"==typeof c&&"undefined"==typeof d)e=b;else{if("string"!=typeof b||"string"!=typeof c||!d||"object"!=typeof d)throw Error("Unknown call format to patch_make.");e=b,c=d}if(0===c.length)return[];d=[],b=new a.patch_obj;for(var f=0,g=0,h=0,i=e,j=0;j<c.length;j++){var k=c[j][0],l=c[j][1];switch(!f&&0!==k&&(b.start1=g,b.start2=h),k){case 1:b.diffs[f++]=c[j],b.length2+=l.length,e=e.substring(0,h)+l+e.substring(h);break;case-1:b.length1+=l.length,b.diffs[f++]=c[j],e=e.substring(0,h)+e.substring(h+l.length);break;case 0:l.length<=2*this.Patch_Margin&&f&&c.length!=j+1?(b.diffs[f++]=c[j],b.length1+=l.length,b.length2+=l.length):l.length>=2*this.Patch_Margin&&f&&(this.patch_addContext_(b,i),d.push(b),b=new a.patch_obj,f=0,i=e,g=h)}1!==k&&(g+=l.length),-1!==k&&(h+=l.length)}return f&&(this.patch_addContext_(b,i),d.push(b)),d},a.prototype.patch_deepCopy=function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=new a.patch_obj;f.diffs=[];for(var g=0;g<e.diffs.length;g++)f.diffs[g]=e.diffs[g].slice();f.start1=e.start1,f.start2=e.start2,f.length1=e.length1,f.length2=e.length2,c[d]=f}return c},a.prototype.patch_apply=function(a,b){if(0==a.length)return[b,[]];a=this.patch_deepCopy(a);
var c=this.patch_addPadding(a);b=c+b+c,this.patch_splitMax(a);for(var d=0,e=[],f=0;f<a.length;f++){var g,h=a[f].start2+d,i=this.diff_text1(a[f].diffs),j=-1;if(i.length>this.Match_MaxBits?(g=this.match_main(b,i.substring(0,this.Match_MaxBits),h),-1!=g&&(j=this.match_main(b,i.substring(i.length-this.Match_MaxBits),h+i.length-this.Match_MaxBits),-1==j||g>=j)&&(g=-1)):g=this.match_main(b,i,h),-1==g)e[f]=!1,d-=a[f].length2-a[f].length1;else if(e[f]=!0,d=g-h,h=-1==j?b.substring(g,g+i.length):b.substring(g,j+this.Match_MaxBits),i==h)b=b.substring(0,g)+this.diff_text2(a[f].diffs)+b.substring(g+i.length);else if(h=this.diff_main(i,h,!1),i.length>this.Match_MaxBits&&this.diff_levenshtein(h)/i.length>this.Patch_DeleteThreshold)e[f]=!1;else{this.diff_cleanupSemanticLossless(h);for(var k,i=0,j=0;j<a[f].diffs.length;j++){var l=a[f].diffs[j];0!==l[0]&&(k=this.diff_xIndex(h,i)),1===l[0]?b=b.substring(0,g+k)+l[1]+b.substring(g+k):-1===l[0]&&(b=b.substring(0,g+k)+b.substring(g+this.diff_xIndex(h,i+l[1].length))),-1!==l[0]&&(i+=l[1].length)}}}return b=b.substring(c.length,b.length-c.length),[b,e]},a.prototype.patch_addPadding=function(a){for(var b=this.Patch_Margin,c="",d=1;b>=d;d++)c+=String.fromCharCode(d);for(d=0;d<a.length;d++)a[d].start1+=b,a[d].start2+=b;var d=a[0],e=d.diffs;if(0==e.length||0!=e[0][0])e.unshift([0,c]),d.start1-=b,d.start2-=b,d.length1+=b,d.length2+=b;else if(b>e[0][1].length){var f=b-e[0][1].length;e[0][1]=c.substring(e[0][1].length)+e[0][1],d.start1-=f,d.start2-=f,d.length1+=f,d.length2+=f}return d=a[a.length-1],e=d.diffs,0==e.length||0!=e[e.length-1][0]?(e.push([0,c]),d.length1+=b,d.length2+=b):b>e[e.length-1][1].length&&(f=b-e[e.length-1][1].length,e[e.length-1][1]+=c.substring(0,f),d.length1+=f,d.length2+=f),c},a.prototype.patch_splitMax=function(b){for(var c=this.Match_MaxBits,d=0;d<b.length;d++)if(!(b[d].length1<=c)){var e=b[d];b.splice(d--,1);for(var f=e.start1,g=e.start2,h="";0!==e.diffs.length;){var i=new a.patch_obj,j=!0;for(i.start1=f-h.length,i.start2=g-h.length,""!==h&&(i.length1=i.length2=h.length,i.diffs.push([0,h]));0!==e.diffs.length&&i.length1<c-this.Patch_Margin;){var h=e.diffs[0][0],k=e.diffs[0][1];1===h?(i.length2+=k.length,g+=k.length,i.diffs.push(e.diffs.shift()),j=!1):-1===h&&1==i.diffs.length&&0==i.diffs[0][0]&&k.length>2*c?(i.length1+=k.length,f+=k.length,j=!1,i.diffs.push([h,k]),e.diffs.shift()):(k=k.substring(0,c-i.length1-this.Patch_Margin),i.length1+=k.length,f+=k.length,0===h?(i.length2+=k.length,g+=k.length):j=!1,i.diffs.push([h,k]),k==e.diffs[0][1]?e.diffs.shift():e.diffs[0][1]=e.diffs[0][1].substring(k.length))}h=this.diff_text2(i.diffs),h=h.substring(h.length-this.Patch_Margin),k=this.diff_text1(e.diffs).substring(0,this.Patch_Margin),""!==k&&(i.length1+=k.length,i.length2+=k.length,0!==i.diffs.length&&0===i.diffs[i.diffs.length-1][0]?i.diffs[i.diffs.length-1][1]+=k:i.diffs.push([0,k])),j||b.splice(++d,0,i)}}},a.prototype.patch_toText=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b.join("")},a.prototype.patch_fromText=function(b){var c=[];if(!b)return c;b=b.split("\n");for(var d=0,e=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;d<b.length;){var f=b[d].match(e);if(!f)throw Error("Invalid patch string: "+b[d]);var g=new a.patch_obj;for(c.push(g),g.start1=parseInt(f[1],10),""===f[2]?(g.start1--,g.length1=1):"0"==f[2]?g.length1=0:(g.start1--,g.length1=parseInt(f[2],10)),g.start2=parseInt(f[3],10),""===f[4]?(g.start2--,g.length2=1):"0"==f[4]?g.length2=0:(g.start2--,g.length2=parseInt(f[4],10)),d++;d<b.length;){f=b[d].charAt(0);try{var h=decodeURI(b[d].substring(1))}catch(i){throw Error("Illegal escape in patch_fromText: "+h)}if("-"==f)g.diffs.push([-1,h]);else if("+"==f)g.diffs.push([1,h]);else if(" "==f)g.diffs.push([0,h]);else{if("@"==f)break;if(""!==f)throw Error('Invalid patch mode "'+f+'" in: '+h)}d++}}return c},a.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},a.patch_obj.prototype.toString=function(){var a,b;a=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,b=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2,a=["@@ -"+a+" +"+b+" @@\n"];var c;for(b=0;b<this.diffs.length;b++){switch(this.diffs[b][0]){case 1:c="+";break;case-1:c="-";break;case 0:c=" "}a[b+1]=c+encodeURI(this.diffs[b][1])+"\n"}return a.join("").replace(/%20/g," ")},this.diff_match_patch=a,this.DIFF_DELETE=-1,this.DIFF_INSERT=1,this.DIFF_EQUAL=0}()},{}],15:[function(a,b,c){function d(a,b){this.root=a,this.idMap={},this.delegate=b}function e(a,b,c){this.target=a,this.mirror=b,this.knownNodes=new MutationSummary.NodeMap;for(var d,e=this.serializeNode(a).id,f=[],g=a.firstChild;g;g=g.nextSibling)d=this.serializeNode(g,!0),null!==d&&f.push(d);this.mirror.initialize(e,f);var h=this,i=[{all:!0}];c&&(i=i.concat(c)),this.mutationSummary=new MutationSummary({rootNode:a,callback:function(a){h.applyChanged(a)},queries:i})}function f(a,b,c){var d=[];return a.forEach(function(a){var e=b.call(c,a);null!==e&&d.push(e)}),d}var g=a("../proxy.js"),h=iAdvize.$||jQuery,i={FIRST:"first",LAST:"last",RANGE:"range"};d.prototype={initialize:function(a,b){this.idMap[a]=this.root;for(var c=0;c<b.length;c++)this.deserializeNode(b[c],this.root)},deserializeNode:function(a,b){if(!a)return null;if("number"==typeof a)return this.idMap[a];var c,d=this.root instanceof HTMLDocument?this.root:this.root.ownerDocument;switch(a.nodeType){case Node.COMMENT_NODE:c=d.createComment(a.textContent);break;case Node.TEXT_NODE:c=d.createTextNode(a.textContent);break;case Node.DOCUMENT_TYPE_NODE:c=d.implementation.createDocumentType(a.name,a.publicId,a.systemId);break;case Node.ELEMENT_NODE:this.delegate&&this.delegate.createElement&&(c=this.delegate.createElement(a.tagName)),c||(c=d.createElement(a.tagName)),Object.keys(a.attributes).forEach(function(b){if(!this.delegate||!this.delegate.setAttribute||!this.delegate.setAttribute(c,b,a.attributes[b]))try{0===document.location.protocol.search("https")&&("LINK"==c.tagName&&"href"==b||"IMG"==c.tagName&&"src"==b)?c.setAttribute(b,g.securizeUrl(a.attributes[b])):c.setAttribute(b,a.attributes[b])}catch(d){console.log(d)}},this)}if(this.idMap[a.id]=c,b)try{b.appendChild(c)}catch(e){console&&console.error&&console.error(h(c)[0],e)}if(a.childNodes)for(var f=0;f<a.childNodes.length;f++)this.deserializeNode(a.childNodes[f],c);return c},applyChanged:function(a,b,c,d){function e(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function f(a){var b=a.type;b&&"function"==typeof i[b]&&i[b](a)}function g(a){var b=this.deserializeNode(a.node);Object.keys(a.attributes).forEach(function(c){var d=a.attributes[c];if(null===d)b.removeAttribute(c);else if(!this.delegate||!this.delegate.setAttribute||!this.delegate.setAttribute(b,c,d))try{b.setAttribute(c,d)}catch(e){console.log(e)}},this)}function h(a){var b=this.deserializeNode(a.node);b.textContent=a.textContent}var i={first:function(a){var b=a.node,c=a.parentNode;c.insertBefore(b,c.firstChild)},last:function(a){var b=a.node,c=a.parentNode;c.appendChild(b)},range:function(a){var b=a.node,c=a.parentNode,d=a.previousSibling;c.insertBefore(b,d.nextSibling)}};b.forEach(function(a){a.node=this.deserializeNode(a.node),a.previousSibling=this.deserializeNode(a.previousSibling),a.parentNode=this.deserializeNode(a.parentNode),e(a.node)},this),a.map(this.deserializeNode,this).forEach(e),b.forEach(f),c.forEach(g,this),d.forEach(h,this),a.forEach(function(a){delete this.idMap[a]},this)}},e.prototype={nextId:1,isNodeHidden:function(a){var b;return a.nodeType===Node.ELEMENT_NODE?b=h(a):a.nodeType===Node.TEXT_NODE&&(b=h(a).parent()),b&&b.closest(this.mirror.filterSelector).length},disconnect:function(){this.mutationSummary&&(this.mutationSummary.disconnect(),this.mutationSummary=void 0)},rememberNode:function(a){var b=this.nextId++;return this.knownNodes.set(a,b),b},forgetNode:function(a){delete this.knownNodes["delete"](a)},serializeNode:function(a,b,c){if(null===a)return null;if(a.nodeType===Node.COMMENT_NODE)return null;if(c&&this.isNodeHidden(c))return null;if(this.isNodeHidden(a))return null;var d=this.knownNodes.get(a);if(void 0!==d)return d;var e={nodeType:a.nodeType};switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:e.name=a.name,e.publicId=a.publicId,e.systemId=a.systemId;break;case Node.COMMENT_NODE:case Node.TEXT_NODE:e.textContent=a.textContent;break;case Node.ELEMENT_NODE:e.tagName=a.tagName,e.attributes={};for(var f=0;f<a.attributes.length;f++){var g=a.attributes.item(f);e.attributes[g.name]="LINK"==a.tagName&&"href"==g.name||"IMG"==a.tagName&&"src"==g.name?h.utilsUrl.toAbsolute(g.value):g.value}if(b&&a.childNodes.length){e.childNodes=[];for(var i=a.firstChild;i;i=i.nextSibling){var j=this.serializeNode(i,!0);null!==j&&e.childNodes.push(j)}}}return e.id=this.rememberNode(a),e},serializePreviousNodeOrGetId:function(a){for(;a=a.previousSibling;)if(serializedPreviousNode=this.serializeNode(a))return serializedPreviousNode},serializeAddedAndMoved:function(a){var b=a.added.concat(a.reparented).concat(a.reordered),c=new MutationSummary.NodeMap;b.forEach(function(a){var b=a.parentNode,d=c.get(b);d||(d=new MutationSummary.NodeMap,c.set(b,d)),d.set(a,!0)});var d=[];return c.keys().forEach(function(a){for(var b=c.get(a),e=b.keys();e.length;){for(var f=e[0];f.previousSibling&&b.has(f.previousSibling);)f=f.previousSibling;for(;f&&b.has(f);){var g=this.serializeNode(f);if(null!==g){var h=f===f.parentNode.firstChild,j=f===f.parentNode.lastChild,k={node:g,parentNode:this.serializeNode(f.parentNode),type:h?i.FIRST:j?i.LAST:i.RANGE};k.type===i.RANGE&&(k.previousSibling=this.serializePreviousNodeOrGetId(f)),d.push(k)}b["delete"](f),f=f.nextSibling}e=b.keys()}},this),d},serializeAttributeChanges:function(a){var b=new MutationSummary.NodeMap;return Object.keys(a).forEach(function(c){a[c].forEach(function(a){var d=b.get(a);if(!d){var e=this.serializeNode(a);null!==e&&(d={node:e,attributes:{}},b.set(a,d))}d&&(d.attributes[c]=a.getAttribute(c))},this)},this),b.keys().map(function(a){return b.get(a)})},serializeCharacterDataChange:function(a){var b=this.serializeNode(a);return null===b?null:{node:b,textContent:a.textContent}},serializeRemovedNodes:function(a,b){return f(b,function(b){var c=a.getOldParentNode(b);return-1!==a.removed.indexOf(c)?null:this.serializeNode(b,void 0,c)},this)},applyChanged:function(a){var b=a[0],c=this.serializeRemovedNodes(b,b.removed),d=this.serializeAddedAndMoved(b),e=this.serializeAttributeChanges(b.attributeChanged),g=f(b.characterDataChanged,this.serializeCharacterDataChange,this);(c.length||d.length||e.length||g.length)&&this.mirror.applyChanged(c,d,e,g),b.removed.forEach(this.forgetNode,this)}},c.TreeMirror=d,c.TreeMirrorClient=e},{"../proxy.js":11}],16:[function(){!function(a){"use strict";function b(a){return a[p]?!1:(a[p]=q++,!0)}function c(){this.map_={}}function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function e(a,b,c,d){this.rootNode=a,this.elementFilter=b,this.calcReordered=c,this.calcOldPreviousSibling=d}function f(a){function b(){e&&(f&&(e.qualifiers.push(f),f=void 0),h.push(e)),e={qualifiers:[]}}function c(){f&&e.qualifiers.push(f),f={}}function d(a){return'"'+a.replace(/"/,'\\"')+'"'}for(var e,f,g,h=[],i=/\s/,j="Invalid or unsupported selector syntax.",k=1,l=2,m=3,n=4,o=5,p=6,q=7,r=8,s=9,t=10,u=11,v=12,w=13,x=14,A=k,B=0;B<a.length;){var C=a[B++];switch(A){case k:if(C.match(y)){b(),e.tagName=C,A=l;break}if("*"==C){b(),e.tagName="*",A=m;break}if("."==C){b(),c(),e.tagName="*",f["class"]=!0,A=n;break}if("#"==C){b(),c(),e.tagName="*",f.id=!0,A=n;break}if("["==C){b(),c(),e.tagName="*",f.attrName="",A=p;break}if(C.match(i))break;throw Error(j);case l:if(C.match(z)){e.tagName+=C;break}if("."==C){c(),f["class"]=!0,A=n;break}if("#"==C){c(),f.id=!0,A=n;break}if("["==C){c(),f.attrName="",A=p;break}if(C.match(i)){A=x;break}if(","==C){A=k;break}throw Error(j);case m:if("."==C){c(),f["class"]=!0,A=n;break}if("#"==C){c(),f.id=!0,A=n;break}if("["==C){c(),f.attrName="",A=p;break}if(C.match(i)){A=x;break}if(","==C){A=k;break}throw Error(j);case n:if(C.match(y)){f.attrValue=C,A=o;break}throw Error(j);case o:if(C.match(z)){f.attrValue+=C;break}if("."==C){c(),f["class"]=!0,A=n;break}if("#"==C){c(),f.id=!0,A=n;break}if("["==C){c(),A=p;break}if(C.match(i)){A=x;break}if(","==C){A=k;break}throw Error(j);case p:if(C.match(y)){f.attrName=C,A=q;break}if(C.match(i))break;throw Error(j);case q:if(C.match(z)){f.attrName+=C;break}if(C.match(i)){A=r;break}if("~"==C){f.contains=!0,A=s;break}if("="==C){f.attrValue="",A=u;break}if("]"==C){A=m;break}throw Error(j);case r:if("~"==C){f.contains=!0,A=s;break}if("="==C){f.attrValue="",A=u;break}if("]"==C){A=m;break}if(C.match(i))break;throw Error(j);case s:if("="==C){f.attrValue="",A=u;break}throw Error(j);case t:if("]"==C){A=m;break}if(C.match(i))break;throw Error(j);case u:if(C.match(i))break;if('"'==C||"'"==C){g=C,A=w;break}f.attrValue+=C,A=v;break;case v:if(C.match(i)){A=t;break}if("]"==C){A=m;break}if("'"==C||'"'==C)throw Error(j);f.attrValue+=C;break;case w:if(C==g){A=t;break}f.attrValue+=C;break;case x:if(C.match(i))break;if(","==C){A=k;break}throw Error(j)}}switch(A){case k:case l:case m:case o:case x:b();break;default:throw Error(j)}if(!h.length)throw Error(j);return h.forEach(function(a){var b=a.tagName.toUpperCase();a.tagName!=b&&(a.caseInsensitiveTagName=b);var c=a.tagName;a.qualifiers.forEach(function(a){if(a["class"])c+="."+a.attrValue;else if(a.id)c+="#"+a.attrValue;else{var b=a.attrName.toLowerCase();a.attrName!=b&&(a.caseInsensitiveAttrName=b),a.contains?c+="["+a.attrName+"~="+d(a.attrValue)+"]":(c+="["+a.attrName,a.hasOwnProperty("attrValue")&&(c+="="+d(a.attrValue)),c+="]")}}),a.selectorString=c}),h}function g(a){if("string"!=typeof a)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(a=a.trim(),!a)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!a.match(A))throw Error("Invalid request option. invalid attribute name: "+a);return a}function h(a){if(!a.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var b={},c={},d=a.split(/\s+/),e=0;e<d.length;e++){var f=d[e];if(f){var f=g(f);if(b.hasOwnProperty(f.toLowerCase()))throw Error("Invalid request option: observing multiple case varitations of the same attribute is not supported.");c[f]=!0,b[f.toLowerCase()]=!0}}return Object.keys(c)}function i(a){var b={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},c={};for(var d in a)if(!(d in b))throw Error("Invalid option: "+d);if("function"!=typeof a.callback)throw Error("Invalid options: callback is required and must be a function");if(c.callback=a.callback,c.rootNode=a.rootNode||document,c.observeOwnChanges=a.observeOwnChanges,c.oldPreviousSibling=a.oldPreviousSibling,!a.queries||!a.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");c.queries=[];for(var e=0;e<a.queries.length;e++){var i=a.queries[e];if(i.all){if(Object.keys(i).length>1)throw Error("Invalid request option. all has no options.");c.queries.push({all:!0})}else if(i.hasOwnProperty("attribute")){var j={attribute:g(i.attribute)};if(j.elementFilter=f("*["+j.attribute+"]"),Object.keys(i).length>1)throw Error("Invalid request option. attribute has no options.");c.queries.push(j)}else if(i.hasOwnProperty("element")){var k=Object.keys(i).length,j={element:i.element,elementFilter:f(i.element)};if(i.hasOwnProperty("elementAttributes")&&(j.elementAttributes=h(i.elementAttributes),k--),k>1)throw Error("Invalid request option. element only allows elementAttributes option.");c.queries.push(j)}else{if(!i.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(i).length>1)throw Error("Invalid request option. characterData has no options.");c.queries.push({characterData:!0})}}return c}function j(a){var b={};return a.forEach(function(a){a.qualifiers.forEach(function(a){a["class"]?b["class"]=!0:a.id?b.id=!0:b[a.attrName]=!0})}),Object.keys(b)}function k(a){function b(a){if(!d.attributes||c){if(d.attributes=!0,d.attributeOldValue=!0,!a)return void(c=void 0);c=c||{},a.forEach(function(a){c[a]=!0,c[a.toLowerCase()]=!0})}}var c,d={childList:!0,subtree:!0};return a.forEach(function(a){if(a.characterData)return d.characterData=!0,void(d.characterDataOldValue=!0);if(a.all)return b(),d.characterData=!0,void(d.characterDataOldValue=!0);if(a.attribute)return void b([a.attribute.trim()]);a.elementFilter&&a.elementFilter.some(function(a){return a.className})&&b(["class"]);var c=j(a.elementFilter).concat(a.elementAttributes||[]);c.length&&b(c)}),c&&(d.attributeFilter=Object.keys(c)),d}function l(a,b,c){a.elementFilter=c.elementFilter,a.filterCharacterData=c.characterData;var d={target:b,type:"summary",added:[],removed:[]};if(d.getOldParentNode=a.getOldParentNode.bind(a),(c.all||c.element)&&(d.reparented=[]),c.all&&(d.reordered=[]),a.getChanged(d),c.all||c.attribute||c.elementAttributes){var e=c.attribute?[c.attribute]:c.elementAttributes,f=a.getAttributesChanged(e);c.attribute?(d.valueChanged=[],f[c.attribute]&&(d.valueChanged=f[c.attribute]),d.getOldAttribute=function(b){return a.getOldAttribute(b,c.attribute)}):(d.attributeChanged=f,c.elementAttributes&&c.elementAttributes.forEach(function(a){d.attributeChanged.hasOwnProperty(a)||(d.attributeChanged[a]=[])}),d.getOldAttribute=a.getOldAttribute.bind(a))}if(c.all||c.characterData){var g=a.getCharacterDataChanged();d.getOldCharacterData=a.getOldCharacterData.bind(a),c.characterData?d.valueChanged=g:d.characterDataChanged=g}return d.reordered&&(d.getOldPreviousSibling=a.getOldPreviousSibling.bind(a)),d}function m(a){function b(){s.forEach(function(a){a&&a.recordPreviousState()})}function c(a){s.forEach(function(b,c){b&&b.validate(a[c])})}function d(a){if(!a||!a.length)return[];var b=new e(n,q,r,h.oldPreviousSibling);return b.processMutations(a),h.queries.map(function(a){return l(b,n,a)})}function f(a){return a.some(function(a){var b=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(b.some(function(b){return a[b]&&a[b].length}))return!0;if(a.attributeChanged){var c=Object.keys(a.attributeChanged).some(function(b){return a.attributeChanged[b].length});if(c)return!0}return!1})}var g=!1,h=i(a),j=k(h.queries),n=h.rootNode,p=h.callback,q=Array.prototype.concat.apply([],h.queries.map(function(a){return a.elementFilter?a.elementFilter:[]}));q.length||(q=void 0);var r=h.queries.some(function(a){return a.all}),s=[];m.createQueryValidator&&(s=h.queries.map(function(a){return m.createQueryValidator(n,a)}));var t=new o(function(a){h.observeOwnChanges||t.disconnect();var e=d(a);c(e),h.observeOwnChanges&&b(),f(e)&&p(e),h.observeOwnChanges||(b(),t.observe(n,j))});this.reconnect=function(){if(g)throw Error("Already connected");t.observe(n,j),g=!0,b()};var u=this.takeSummaries=function(){if(!g)throw Error("Not connected");var a=t.takeRecords(),b=d(a);return f(b)?b:void 0};this.disconnect=function(){var a=u();return t.disconnect(),g=!1,a},this.reconnect()}var n="matchesSelector";"undefined"!=typeof Element&&("webkitMatchesSelector"in Element.prototype?n="webkitMatchesSelector":"mozMatchesSelector"in Element.prototype&&(n="mozMatchesSelector"));var o=function(){for(var b=["WebKit","Moz","O","Ms",""],c=0;c<b.length;c++)if(b[c]+"MutationObserver"in window)return a[b[c]+"MutationObserver"];return!1}();if(o){var p="__mutation_summary_node_map_id__",q=1;c.prototype={set:function(a,c){b(a),this.map_[a[p]]={k:a,v:c}},get:function(a){if(!b(a)){var c=this.map_[a[p]];return c?c.v:void 0}},has:function(a){return!b(a)&&a[p]in this.map_},"delete":function(a){b(a)||delete this.map_[a[p]]},keys:function(){var a=[];for(var b in this.map_)a.push(this.map_[b].k);return a}};var r=0,s=1,t=2,u=3,v=4,w=5,x=Array.prototype.forEach.call.bind(Array.prototype.forEach);e.prototype={getChange:function(a){var b=this.changeMap.get(a);return b||(b={target:a},this.changeMap.set(a,b)),a.nodeType==Node.ELEMENT_NODE&&(b.matchCaseInsensitive=a instanceof HTMLElement&&a.ownerDocument instanceof HTMLDocument),b},getParentChange:function(a){var b=this.getChange(a);return b.childList||(b.childList=!0,b.oldParentNode=null),b},handleChildList:function(a){this.childListChanges=!0,x(a.removedNodes,function(b){var c=this.getParentChange(b);c.added||c.oldParentNode?c.added=!1:c.oldParentNode=a.target},this),x(a.addedNodes,function(a){var b=this.getParentChange(a);b.added=!0},this)},handleAttributes:function(a){this.attributesChanges=!0;var b=this.getChange(a.target);b.attributes||(b.attributes=!0,b.attributeOldValues={});var c=b.attributeOldValues;d(c,a.attributeName)||(c[a.attributeName]=a.oldValue)},handleCharacterData:function(a){this.characterDataChanges=!0;var b=this.getChange(a.target);b.characterData||(b.characterData=!0,b.characterDataOldValue=a.oldValue)},processMutations:function(a){function b(a){if(l.calcOldPreviousSibling){l.processChildlistChanges();var b=a.parentNode,d=l.changeMap.get(a);d&&d.oldParentNode&&(b=d.oldParentNode),d=l.childlistChanges.get(b),d||(d={oldPrevious:new c},l.childlistChanges.set(b,d)),d.oldPrevious.has(a)||d.oldPrevious.set(a,a.previousSibling)}}function d(a,c){if(!k.has(a)){k.set(a,!0);var m=l.changeMap.get(a),n=c;if((m&&m.childList||void 0==n)&&(n=i(a)),n!=r){if(h(a),n==s)e.push(a);else if(n==u)f.push(a),b(a);else if(n==t){var o=t;m&&m.childList&&(m.oldParentNode!==a.parentNode?(o=v,b(a)):l.calcReordered&&j(a)&&(o=w)),g.set(a,o)}if(n!=t)for(var p=a.firstChild;p;p=p.nextSibling)d(p,n)}}}this.mutations=a,this.changeMap=new c,this.mutations.forEach(function(a){switch(a.type){case"childList":this.handleChildList(a);break;case"attributes":this.handleAttributes(a);break;case"characterData":this.handleCharacterData(a)}},this);var e=this.entered=[],f=this.exited=[],g=this.stayedIn=new c;if(this.childListChanges||this.attributesChanges){var h=this.matchabilityChange.bind(this),i=this.reachabilityChange.bind(this),j=this.wasReordered.bind(this),k=new c,l=this;this.changeMap.keys().forEach(function(a){d(a)})}},getChanged:function(a){var b=this.matchabilityChange.bind(this);this.entered.forEach(function(c){var d=b(c);(d==s||d==t)&&a.added.push(c)}),this.stayedIn.keys().forEach(function(c){var d=b(c);if(d==s)a.added.push(c);else if(d==u)a.removed.push(c);else if(d==t&&(a.reparented||a.reordered)){var e=this.stayedIn.get(c);a.reparented&&e==v?a.reparented.push(c):a.reordered&&e==w&&a.reordered.push(c)}},this),this.exited.forEach(function(c){var d=b(c);(d==u||d==t)&&a.removed.push(c)})},getOldParentNode:function(a){var b=this.changeMap.get(a);if(b&&b.childList)return b.oldParentNode?b.oldParentNode:null;var c=this.reachabilityChange(a);if(c==r||c==s)throw new Error("getOldParentNode requested on invalid node.");return a.parentNode},getOldPreviousSibling:function(a){var b=a.parentNode,c=this.changeMap.get(a);if(c&&c.oldParentNode&&(b=c.oldParentNode),c=this.childlistChanges.get(b),!c)throw new Error("getOldPreviousSibling requested on invalid node.");return c.oldPrevious.get(a)},getOldAttribute:function(a,b){var c=this.changeMap.get(a);if(!c||!c.attributes)throw new Error("getOldAttribute requested on invalid node.");if(c.matchCaseInsensitive&&(b=b.toLowerCase()),!d(c.attributeOldValues,b))throw new Error("getOldAttribute requested for unchanged attribute name.");return c.attributeOldValues[b]},getAttributesChanged:function(a){if(!this.attributesChanges)return{};var b,c;a&&(b={},c={},a.forEach(function(a){b[a]=!0;var d=a.toLowerCase();a!=d&&(c[d]=a)}));for(var d={},e=this.changeMap.keys(),f=0;f<e.length;f++){var g=e[f],h=this.changeMap.get(g);if(h.attributes&&t==this.reachabilityChange(g)&&t==this.matchabilityChange(g)){var i=g,j=h.attributeOldValues;Object.keys(j).forEach(function(a){var e=a;h.matchCaseInsensitive&&c&&c[a]&&(e=c[a]),(!b||b[e])&&i.getAttribute(a)!=j[a]&&(d[e]||(d[e]=[]),d[e].push(i))})}}return d},getOldCharacterData:function(a){var b=this.changeMap.get(a);if(!b||!b.characterData)throw new Error("getOldCharacterData requested on invalid node.");return b.characterDataOldValue},getCharacterDataChanged:function(){if(!this.characterDataChanges)return[];for(var a=this.changeMap.keys(),b=[],c=0;c<a.length;c++){var d=a[c];if(t==this.reachabilityChange(d)&&t==this.matchabilityChange(d)){var e=this.changeMap.get(d);e.characterData&&d.textContent!=e.characterDataOldValue&&b.push(d)}}return b},reachabilityChange:function(a){function b(a){var b=g.get(a);if(b&&b.childList){if(b.oldParentNode)return b.oldParentNode;if(b.added)return null}return a.parentNode}function d(a){if(a===f)return!0;if(!a)return!1;var b=h.get(a);return void 0===b&&(b=d(a.parentNode),h.set(a,b)),b}function e(a){if(a===f)return!0;if(!a)return!1;var c=i.get(a);return void 0===c&&(c=e(b(a)),i.set(a,c)),c}this.reachableCache=this.reachableCache||new c,this.wasReachableCache=this.wasReachableCache||new c;var f=this.rootNode,g=this.changeMap,h=this.reachableCache,i=this.wasReachableCache;return d(a)?e(a)?t:s:e(a)?u:r},checkWasMatching:function(a,b,c){var e=this.changeMap.get(a);if(!e||!e.attributeOldValues)return c;var f=b.tagName;if(e.matchCaseInsensitive&&"*"!=f&&d(b,"caseInsensitiveTagName")&&(f=b.caseInsensitiveTagName),"*"!=f&&f!=a.tagName)return!1;var g=e.attributeOldValues,h=b.qualifiers.some(function(a){return a["class"]?d(g,"class"):a.id?d(g,"id"):e.matchCaseInsensitive&&d(a,"caseInsensitiveAttrName")?d(g,a.caseInsensitiveAttrName):d(g,a.attrName)});if(!h)return c;for(var i=0;i<b.qualifiers.length;i++){var j,k=b.qualifiers[i];j=k["class"]?"class":k.id?"id":e.matchCaseInsensitive&&d(k,"caseInsensitiveAttrName")?k.caseInsensitiveAttrName:k.attrName;var l=k["class"]?!0:k.contains,m=d(g,j)?g[j]:a.getAttribute(j);if(null==m)return!1;if(k.hasOwnProperty("attrValue")){if(!l&&k.attrValue!==m)return!1;var n=m.split(" ").some(function(a){return a==k.attrValue});if(!n)return!1}}return!0},matchabilityChange:function(a){function b(a){this.matchCache||(this.matchCache={}),this.matchCache[a.selectorString]||(this.matchCache[a.selectorString]=new c);var b=this.matchCache[a.selectorString],e=b.get(d);if(void 0!==e)return e;var f=d[n](a.selectorString),g=this.checkWasMatching(d,a,f);return e=f?g?t:s:g?u:r,b.set(d,e),e}if(this.filterCharacterData)switch(a.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return t;default:return r}if(!this.elementFilter)return t;if(a.nodeType!==Node.ELEMENT_NODE)return r;for(var d=a,e=this.elementFilter.map(b,this),f=r,g=0;f!=t&&g<e.length;){switch(e[g]){case t:f=t;break;case s:f=f==u?t:s;break;case u:f=f==s?t:u}g++}return f},processChildlistChanges:function(){function a(a){var d=b.get(a);return d||(d={added:new c,removed:new c,maybeMoved:new c,oldPrevious:new c},b.set(a,d)),d}if(!this.childlistChanges){var b=this.childlistChanges=new c,d=this.reachabilityChange.bind(this),e=this;this.mutations.forEach(function(b){function c(a,b){!a||f.oldPrevious.has(a)||f.added.has(a)||f.maybeMoved.has(a)||b&&(f.added.has(b)||f.maybeMoved.has(b))||f.oldPrevious.set(a,b)}if("childList"==b.type&&(d(b.target)==t||e.calcOldPreviousSibling)){var f=a(b.target),g=b.previousSibling;x(b.removedNodes,function(a){c(a,g),f.added.has(a)?f.added["delete"](a):(f.removed.set(a,!0),f.maybeMoved["delete"](a,!0)),g=a}),c(b.nextSibling,g),x(b.addedNodes,function(a){f.removed.has(a)?(f.removed["delete"](a),f.maybeMoved.set(a,!0)):f.added.set(a,!0)})}})}},wasReordered:function(a){function b(a){if(!a)return!1;if(!g.maybeMoved.has(a))return!1;var b=h.get(a);return void 0!==b?b:(i.has(a)?b=!0:(i.set(a,!0),b=e(a)!==d(a)),i.has(a)?(i["delete"](a),h.set(a,b)):b=h.get(a),b)}function d(a){var c=j.get(a);if(void 0!==c)return c;for(c=g.oldPrevious.get(a);c&&(g.removed.has(c)||b(c));)c=d(c);return void 0===c&&(c=a.previousSibling),j.set(a,c),c}function e(a){if(k.has(a))return k.get(a);for(var c=a.previousSibling;c&&(g.added.has(c)||b(c));)c=c.previousSibling;return k.set(a,c),c}if(!this.childListChanges)return!1;this.processChildlistChanges();var f=a.parentNode,g=this.changeMap.get(a);if(g&&g.oldParentNode&&(f=g.oldParentNode),g=this.childlistChanges.get(f),!g)return!1;if(g.moved)return g.moved.get(a);var h=g.moved=new c,i=new c,j=new c,k=new c;return g.maybeMoved.keys().forEach(b),g.moved.get(a)}};var y=/[a-zA-Z_]+/,z=/[a-zA-Z0-9_\-]+/,A=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/;a.MutationSummary=m,a.MutationSummary.NodeMap=c,a.MutationSummary.parseElementFilter=f}}(window)},{}],17:[function(a,b,c){function d(a,b){this.root=a,this.delegate=b,this.doc="undefined"!=typeof this.root.documentElement?this.root:this.root.ownerDocument,this.extraNodeSelectors=f.map(g.extraNodeSelectors,function(a){return a}),this.extraNodeSelectors.push("script"),this.extraNodeSelectors=this.extraNodeSelectors.join(","),this.dmp=new diff_match_patch}function e(a,b){this.target=a,this.mirror=b,this.doc="undefined"!=typeof this.target.documentElement?this.target:this.target.ownerDocument;var c=f(this.doc.documentElement),d=c.find("head"),e=c.find("body");this.extraNodeSelectors=f.map(g.extraNodeSelectors,function(a){return a}),this.extraNodeSelectors.push(this.mirror.filterSelector),this.extraNodeSelectors=this.extraNodeSelectors.join(","),this.htmlAttr=JSON.stringify(c.getAttributesOn(!0)),this.headAttr=JSON.stringify(d.getAttributesOn(!0)),this.bodyAttr=JSON.stringify(e.getAttributesOn(!0)),this.headHtml=f.stripScripts(d.html())||"",this.bodyHtml=e.cloneSafe().sanitize(this.extraNodeSelectors).html()||"",this.mirror.initialize(this.htmlAttr,this.headAttr,this.bodyAttr,this.headHtml,this.bodyHtml),this.dmp=new diff_match_patch;var h=this;!function j(){h.applyChanged(),h.timeoutID=setTimeout(j,i)}()}a("./diff_match_patch.js");var f=iAdvize.$||jQuery,g=a("../methods.js"),h=a("../proxy.js"),i=1e3;d.prototype={initialize:function(a,b,c,d,e){this.initDom(),this.htmlAttr=a,this.headAttr=b,this.bodyAttr=c,this.headHtml=d,this.bodyHtml=e,this.updateAttr(this.$html,this.htmlAttr),this.updateAttr(this.$head,this.headAttr),this.updateAttr(this.$body,this.bodyAttr),this.updateHtml(this.$head,this.headHtml),this.updateHtml(this.$body,this.bodyHtml)},applyChanged:function(a,b,c,d,e){this.initDom(),void 0!=this.htmlAttr&&a.length&&(this.htmlAttr=this.dmp.patch_apply(this.dmp.patch_fromText(a),this.htmlAttr)[0],this.updateAttr(this.$html,this.htmlAttr)),void 0!=this.headAttr&&b.length&&(this.headAttr=this.dmp.patch_apply(this.dmp.patch_fromText(b),this.headAttr)[0],this.updateAttr(this.$head,this.headAttr)),void 0!=this.bodyAttr&&c.length&&(this.bodyAttr=this.dmp.patch_apply(this.dmp.patch_fromText(c),this.bodyAttr)[0],this.updateAttr(this.$body,this.bodyAttr)),void 0!=this.headHtml&&d.length&&(this.headHtml=this.dmp.patch_apply(this.dmp.patch_fromText(d),this.headHtml)[0],this.updateHtml(this.$head,this.headHtml)),void 0!=this.bodyHtml&&e.length&&(this.bodyHtml=this.dmp.patch_apply(this.dmp.patch_fromText(e),this.bodyHtml)[0],this.updateHtml(this.$body,this.bodyHtml))},initDom:function(){var a,b;this.$html=this.doc.documentElement?f(this.doc.documentElement):f("<html></html>").appendToSafe(this.doc),this.$head=(a=f("head")).length?a:f("<head></head>").appendToSafe(this.$html),this.$body=(b=f("body")).length?b:f("<body></body>").appendToSafe(this.$html)},updateBase:function(){var a,b=this.delegate.getBase();b&&(a=(a=f("base")).length?a:f("<base></base>").appendToSafe(this.$head),0===document.location.protocol.search("https")&&(b=h.securizeBaseUrl(b)),a.attr("href",b))},updateAttr:function(a,b){a.removeAttributes().attr(JSON.parse(b))},updateHtml:function(a,b){a.removeContentsBut(this.extraNodeSelectors),a.is(this.$head)&&this.updateBase(),a.appendHtmlSafe(b,this.delegate.diffTextCreateElement)}},e.prototype={applyChanged:function(){var a=f(this.doc.documentElement),b=a.find("head"),c=a.find("body"),d=this.htmlAttr,e=this.headAttr,g=this.bodyAttr,h=this.headHtml,i=this.bodyHtml;this.htmlAttr=JSON.stringify(a.getAttributesOn(!0)),this.headAttr=JSON.stringify(b.getAttributesOn(!0)),this.bodyAttr=JSON.stringify(c.getAttributesOn(!0)),this.headHtml=f.stripScripts(b.html())||"",this.bodyHtml=c.cloneSafe().sanitize(this.extraNodeSelectors).html()||"";
var j=this.dmp.patch_make(d,this.htmlAttr),k=this.dmp.patch_make(e,this.headAttr),l=this.dmp.patch_make(g,this.bodyAttr),m=this.dmp.patch_make(h,this.headHtml),n=this.dmp.patch_make(i,this.bodyHtml);(j.length||k.length||l.length||m.length||n.length)&&this.mirror.applyChanged(this.dmp.patch_toText(j),this.dmp.patch_toText(k),this.dmp.patch_toText(l),this.dmp.patch_toText(m),this.dmp.patch_toText(n))},disconnect:function(){clearTimeout(this.timeoutID)}},c.TreeMirror=d,c.TreeMirrorClient=e},{"../methods.js":9,"../proxy.js":11,"./diff_match_patch.js":14}]},{},[10]);