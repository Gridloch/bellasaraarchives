window.microsoft.advertising.DepMngr.define("CatalogueFlyout",["core.FlyoutWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u){if(!(this instanceof i))return new i(t,r,u);n.call(this,t,r,u)}function r(n,t){var r=n._utils.htmlEncode,i=n._assets,e={shareEmailSubject:i.captionExpanded,shareEmailBody:"<div><a href='"+i.url+"'>"+r(i.captionExpanded)+"</a></div><br/><div><a href='"+i.url+"'><img src='"+i.imagesrc+"' border='0'/></a></div><br/><div>"+r(i.caption)+"</div><br/><div>"+r(i.description)+"</div>"},f,u;if(t)return;f=e.shareEmailSubject,u=e.shareEmailBody.replace(/\\n\\n/g,"<br/>"),n.fireEvent("email",n,{email:{subject:f,body:u},log:{ModuleType:"gae",Control:"interactions",Action:"click",_meta:{_once:!0}}})}return t.inherits(i,n),i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var u=this._utils.ellipsizeHTML,i=this._utils.getGaePropertyValue,f=this._utils.getUrlWithProtocol,e=266,o=20,r=n.F,t={};t.url=f(i(r,"curl")),t.imagesrc=i(r,"image"),t.description=i(r,"desc"),t.descriptionEllipsized=u(i(r,"desc"),e).replace(/\\n/g,"<br/>"),t.caption=i(r,"caption"),t.captionEllipsized=u(i(r,"caption"),o),t.captionExpanded=i(n.E,"caption"),this._assets=t},i.prototype._createView=function(){var n=this._assets,t="<div class='module preview catalogue'><div class='main'><div class='gae flyout catalogueimage'><table border='0' cellspacing='0' cellpadding='0'><tr><td align='center' valign='middle'><a href='"+n.url+"' target='_blank'><img src='"+n.imagesrc+"'/></a></td></tr></table></div><div class='gae flyout cataloguedesc'>"+n.descriptionEllipsized+"</div></div><div class='gae footer'><div class='footer-left t_tc'>"+n.captionEllipsized+"</div><div class='footer-right'><div class='gae view t_hdbg c_cd'>"+adbar.renderers.UI.VIEW+"</div></div><div class='footer-right'><span href='#' class='gae share t_tc'>"+adbar.renderers.UI.SHARE+"</span></div></div><div class='pointer'></div></div>";jQuery(this._container).append(t)},i.prototype._wireEvents=function(){i.uber._wireEvents.call(this);var u=jQuery(this._container),f=u.find("span.gae.share"),t=u.find("div.gae.view"),n=this;f.on("click",function(){var t=!1;r(n,t)});t.on("click",function(){n.fireEvent("openUrl",n,{tileLandingUrl:n._assets.url,log:{ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}})});t.on("mouseenter",function(){jQuery(this).removeClass("t_hdbg").addClass("t_bci varyingOpactiy")});t.on("mouseleave",function(){jQuery(this).removeClass("t_bci varyingOpactiy").addClass("t_hdbg")});u.find("a").on("click",function(t){t.preventDefault(),n.fireEvent("openUrl",n,{tileLandingUrl:n._assets.url,log:{ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}})})},i});window.microsoft.advertising.DepMngr.define("CatalogueTile",["GAEBaseTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f)}return t.inherits(i,n),i.prototype._validateProperties=function(){return!0},i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var i=this._utils.ellipsizeHTML,t=this._utils.getGaePropertyValue,f=76,e=10,o=6,s=23,r=n.B,u=n.E;n.singleOrDoubleTile=this._SingleOrDoubleTile,n.descriptionEllipsized=i(t(r,"pname"),f),n.providerEllipsized=i(t(r,"bname"),e),n.priceEllipsized=i(t(r,"price"),o),n.mainImageUrl=t(u,"image"),n.titleEllipsized=i(t(u,"caption"),s),this._assets=n},i.prototype._createView=function(){var n=this._assets,i="<div class='module tile catalogue'><div class='content'><div class='description'>"+n.descriptionEllipsized+"</div></div><div class='gae source'>"+n.providerEllipsized+"</div><div class='gae "+n.singleOrDoubleTile+" price t_tc'>"+n.priceEllipsized+"</div><div class='gae peek "+n.singleOrDoubleTile+"'><div class='peekContainer'><table border='0' cellspacing='0' cellpadding='0'><tr><td cellspacing='0' cellpadding='0'><img src='"+n.mainImageUrl+"' /></td></tr></table></div><span class='title'>"+n.titleEllipsized+"</span></div></div>",t=jQuery(i);this._$peekable=t,jQuery(this._container).append(t)},i});window.microsoft.advertising.DepMngr.define("FbAssetTile",["GAEBaseTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i)||this.constructor==="FbAssetTile")throw new Error("FbAssetTile needs to be instantiated using child classes with a new operator");n.call(this,t,r,u,f)}t.inherits(i,n),i.prototype._validateProperties=function(){return!0},i.prototype._validateAssets=function(){return!0};var r=95;return i.prototype._setAssets=function(n){var r=this._utils.ellipsizeHTML,i=this._utils.getGaeProperty,f=this._utils.getGaePropertyValue,e=25,o=90,u=10,t=n.B;n.headline=r(i(t,"headline").tx,e),n.image=i(t,"image"),n.imageURL=n.image.u,n.imageHeight=n.image.h,n.description=r(i(t,"description").tx,o),this._curl=n.curl=i(t,"curl").u,n.priceEllipsized=r(f(t,"price"),u),this._assets=n},i.prototype._createView=function(){var n=this._assets,f=(r-n.imageHeight)/2,u="",t="",i;this._FlyoutClass&&(u="<div class='flyoutIcon'></div>"),n.priceEllipsized&&(t="<div class='price t_tc'>"+n.priceEllipsized+"</div>"),i="<div class='module tile fb "+this._fbTileType+"'><div class='headline t_tc'>"+n.headline+"</div><div class='box'><img style='top:"+f+"px' src='"+n.imageURL+"'></div><div class='description'>"+n.description+"</div>"+u+t+"</div>",jQuery(this._container).append(i)},i.prototype.getSize=function(){throw new Error("GetSize needs to be implemented by child classes");},i});window.microsoft.advertising.DepMngr.define("FbLargeAssetTile",["FbAssetTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f),this._fbTileType="fbLarge"}return t.inherits(i,n),i.prototype.getSize=function(){return{height:448,width:160}},i});window.microsoft.advertising.DepMngr.define("FbHeroAssetTile",["FbAssetTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f),this._fbTileType="fbHero"}return t.inherits(i,n),i.prototype.getSize=function(){return{height:315,width:160}},i});window.microsoft.advertising.DepMngr.define("FbSmallAssetTile",["FbAssetTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f),this._fbTileType="fbSmall"}return t.inherits(i,n),i.prototype.getSize=function(){return{height:275,width:160}},i});window.microsoft.advertising.DepMngr.define("GAEBaseTile",["core.ExpandableTileWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))throw new Error("A child class of GAEBaseTile has to be instantiated with a new operator");this._SingleOrDoubleTile="single",t&&t.F||(f=null),f&&f._getIconType&&(this._IconCssClass=f._getIconType()),this._tileNumber=t.tileNumber,n.call(this,t,r,u,f)}return t.inherits(i,n),i.prototype._getTrackingArgs=function(n,t){var i=null;return t==="adbar"&&n==="mouseenter"?{ModuleType:"gae",Control:"adbar",Action:"mouseenter"}:(i=[],i.push({ModuleType:"gae",Control:"tile"+this._tileNumber,Action:"click"}),t==="preview"?i.push({ModuleType:"gae",Control:"adbar",Action:"click"}):t==="adbarclickthrus"&&i.push({ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}),i)},i.prototype.getSize=function(){return{height:115,width:160}},i});window.microsoft.advertising.DepMngr.define("HeroTile",["GAEBaseTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f)}return t.inherits(i,n),i.prototype._validateProperties=function(){return!0},i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var i=this._utils.getGaeProperty,t=n.B;n.imageURL=i(t,"image").u,this._curl=n.curl=i(t,"curl").u,this._assets=n},i.prototype._createView=function(){var i=this._assets,r="",n="",t;(this._FlyoutClass||i.curl)&&(r="style=cursor:pointer;"),this._FlyoutClass&&(n="<div class='flyoutIcon'></div>"),t="<div class='module tile hero' "+r+"><img src='"+i.imageURL+"'/>"+n+"</div>",jQuery(this._container).append(t)},i.prototype.getSize=function(){return{height:235,width:160}},i});window.microsoft.advertising.DepMngr.define("ImageGalleryFlyout",["core.FlyoutWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u){if(!(this instanceof i))return new i(t,r,u);this._MAX_CAPTION_CHAR_COUNT=40,this._MAX_TITLE_CHAR_COUNT=50,this._CAPTION_HEIGHT=30,this._FLIPPER_HEIGHT=40,this._TITLE_HEIGHT=15,this._TITLE_BOTTOM_MARGIN=7,n.call(this,t,r,u)}return t.inherits(i,n),i.prototype._validateAssets=function(n){if(!n||!n.F)return!1;var t=n.F.image1;return!t||!t.u||!t.w||isNaN(parseInt(t.w,10))||!t.h||isNaN(parseInt(t.h,10))?!1:!0},i.prototype._setAssets=function(n){var u=[],f=n.F,r={},s=this._utils.getGaeProperty,h=/(image|caption|curl)(\d)/,i,t,e,o;for(i in f)f.hasOwnProperty(i)&&(t=i.match(h),t&&t.length===3&&(e=parseInt(t[2],10)-1,o=u[e]||{},o[t[1]]=s(f,i),u[e]=o));r.title=s(f,"title"),r.galleryItems=u,r.tileCurl=n.curl||this._utils.getGaePropertyValue(n.B.curl),this._assets=r,this._galleryItemsCount=u.length},i.prototype._createView=function(){var a=this._assets,d=a.galleryItems,y=this._utils.ellipsizeHTML,k="<div class='gallery item sized'><table border='0' cellspacing='0' cellpadding='0'><tr><td align='center' valign='middle'><img data-curl='{CURL}' src='{IMAGE_SRC}'/></td></tr></table>{CAPTION_MARKUP}</div>",w="",r=a.title,i=0,t=0,f=0,v=0,e,p,n,s,l;for(r&&r.tx&&(r="<div class='gae flyoutTitle t_tc'>"+y(r.tx,this._MAX_TITLE_CHAR_COUNT)+"</div>",v=this._TITLE_HEIGHT+this._TITLE_BOTTOM_MARGIN),e=0,p=this._galleryItemsCount;e<p;e++){var u=d[e],h=u.image||{},b=h.u,c=parseInt(h.h,10),o=parseInt(h.w,10);if(!b||isNaN(c)||isNaN(o))continue;i=c>i?c:i,t=o>t?o:t,n=u.caption,n&&n.tx?(n=y(n.tx,this._MAX_CAPTION_CHAR_COUNT),n="<div class='caption'>"+n+"</div>",f=this._CAPTION_HEIGHT):n="",s=a.tileCurl,u.curl&&u.curl.u&&(s=u.curl.u),w+=k.replace("{IMAGE_SRC}",b).replace("{CAPTION_MARKUP}",n).replace("{CURL}",s)}this._maxWidth=t,l=jQuery("<div class='module preview imageGallery'>"+r+"<div class='galleryWrapper sized'><div class='gallery items'>"+w+"</div></div><div class='galleryNav left'></div><div class='galleryNav right'></div><div class='pointer'></div></div>"),l.css({height:v+f+i+"px",width:t+"px"}).find(".galleryNav").css("top",-1*(f+(i+this._FLIPPER_HEIGHT)/2)+"px").parent().find(".sized").css({width:t+"px",height:i+f+"px"}).find("table").css({width:t+"px",height:i+"px"}),jQuery(this._container).append(l)},i.prototype._wireEvents=function(){function h(i){if(!t||f)return;u.fireEvent("log",u,{ModuleType:"gae",Control:"interactions",Action:"click"}),f=!0,i.target.className.indexOf(" right")!==-1?(e.animate({left:0-c*n+"px"}),n++,s.css("visibility","visible"),n===o&&r.css("visibility","hidden")):(e.animate({left:0-(n-2)*c+"px"}),n--,r.css("visibility","visible"),n===1&&s.css("visibility","hidden")),setTimeout(function(){f=!1},100)}i.uber._wireEvents.call(this);var t=jQuery(this._container),e=t.find("div.gallery.items"),s=t.find("div.galleryNav.left"),r=t.find("div.galleryNav.right"),o=this._galleryItemsCount,c=this._maxWidth,n=1,f=!1,u=this;s.on("click",h);r.on("click",h);t.find("img").on("click",function(){var t=jQuery(this),n=t.data("curl");n&&u.fireEvent("openUrl",u,{tileLandingUrl:n,log:{ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}})});e.css("width",this._maxWidth*o),o>1&&r.css("visibility","visible")},i._getIconType=function(){return"image"},i});window.microsoft.advertising.DepMngr.define("ImageOnlyFlyout",["core.FlyoutWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u){if(!(this instanceof i))return new i(t,r,u);n.call(this,t,r,u)}return t.inherits(i,n),i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var f=this._utils.ellipsizeHTML,r=this._utils.getGaeProperty,u=this._utils.getUrlWithProtocol,i=n.F,t={};t.url=u(r(i,"curl").u),t.imagesrc=r(i,"image").u,t.imagewidth=r(i,"image").w,t.imageheight=r(i,"image").h,this._assets=t},i.prototype._createView=function(){var n=this._assets,t="<div class='module preview imageonly'><div class='only' style='width: "+n.imagewidth+"px; height: "+n.imageheight+"px;'><a href='"+n.url+"' target='_blank'><img src='"+n.imagesrc+"'/></a><div class='pointer'></div></div>";jQuery(this._container).append(t)},i.prototype._wireEvents=function(){i.uber._wireEvents.call(this);var t=jQuery(this._container),n=this;t.find("div.only").on("click",function(t){t.preventDefault(),n.fireEvent("openUrl",n,{tileLandingUrl:n._assets.url,log:{ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}})})},i.prototype.getHeight=function(){return this._assets.imageheight+20},i});window.microsoft.advertising.DepMngr.define("LocatorFlyout",["core.FlyoutWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u){if(!(this instanceof i))return new i(t,r,u);n.call(this,t,r,u)}return t.inherits(i,n),i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var i=this._utils.getGaePropertyValue,t={};t.keyword=i(n.F,"keyword"),this._assets=t},i.prototype._createView=function(){var n="<div class='module preview locator'><div class='main'><div class='gae flyout locator'><div class='gae flyoutTitle'>"+adbar.renderers.UI.FINDLOCATION+"</div><div class='locator searchbucket'><input type='text' value='"+adbar.renderers.UI.ADDRESS+"' class='locator addressinput'/><div class='locator search iconbutton'></div></div><div class='locator Bing logo'></div><div class='locator search textbutton t_hdbg c_cd'>"+adbar.renderers.UI.SEARCH+"</div></div></div><div class='pointer'></div></div>";jQuery(this._container).append(n)},i.prototype._wireEvents=function(){function f(t){var f=13,i,u,o;if(t)if(t.keyCode||t.which){f=t.keyCode?t.keyCode:t.which;if(f!==1&&f!==13)return!0}i=n.find("input").val();if(jQuery.trim(i)===""||jQuery.trim(i)===adbar.renderers.UI.ADDRESS)return!1;try{u=adbar.renderers.UI.LOCATORSEARCHURL;if(!u)return!1;o=e.keyword,r.fireEvent("openUrl",r,{tileLandingUrl:u.replace(/\{querystring\}/,o.replace(/ /g,"+")).replace(/\{address\}/,i.replace(/ /g,"+")),log:{ModuleType:"gae",Control:"interactions",Action:"click",_meta:{_once:!0}}})}catch(s){return!1}return!1}i.uber._wireEvents.call(this);var o="div.locator.search",h="div.locator.search.textbutton",n=jQuery(this._container),t=n.find("input"),s=n.find(o),u=n.find(h),e=this._assets,r=this;t.on("focus",function(){jQuery(this).val(jQuery(this).val()===adbar.renderers.UI.ADDRESS?"":jQuery(this).val())});t.on("blur",function(){jQuery(this).val(jQuery(this).val()===""?adbar.renderers.UI.ADDRESS:jQuery(this).val())});t.on("keypress",f);s.on("click",f);u.on("mouseenter",function(){jQuery(this).removeClass("t_hdbg").addClass("t_bci varyingOpactiy")});u.on("mouseleave",function(){jQuery(this).removeClass("t_bci varyingOpactiy").addClass("t_hdbg")})},i._getIconType=function(){return"location"},i});window.microsoft.advertising.DepMngr.define("LocatorTile",["TextTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f)}return t.inherits(i,n),i.prototype._setAssets=function(n){i.uber._setAssets.call(this,n),n.expandCaption=n.expandCaption||adbar.renderers.UI.FINDUS,n.mapImg="<div class='gae locator'></div>"},i});window.microsoft.advertising.DepMngr.define("LogoOnlyTile",["GAEBaseTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f)}return t.inherits(i,n),i.prototype._validateProperties=function(){return!0},i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var u=this._utils.ellipsizeHTML,t=this._utils.getGaePropertyValue,f=10,e=23,i=n.B,r=n.E;n.singleOrDoubleTile=this._SingleOrDoubleTile,n.logoImageUrl=t(i,"logo"),n.provider=u(t(i,"bname"),f),n.mainImageUrl=t(r,"image"),n.title=u(t(r,"caption"),e),this._assets=n},i.prototype._createView=function(){var n=this._assets,i="<div class='module tile logoOnly'><div class='content'><div class='logoContainer'><table border='0' cellspacing='0' cellpadding='0'><tr><td align='center' valign='middle'><img src='"+n.logoImageUrl+"' /></td></tr></table></div></div><div class='gae source'>"+n.provider+"</div><div class='gae peek "+n.singleOrDoubleTile+"'><div class='peekContainer'><table border='0' cellspacing='0' cellpadding='0'><tr><td align='center' valign='middle'><img src='"+n.mainImageUrl+"' /></td></tr></table></div><span class='title'>"+n.title+"</span></div></div>",t=jQuery(i);this._$peekable=t,jQuery(this._container).append(t)},i});window.microsoft.advertising.DepMngr.define("LogoTextDoubleTile",["GAEBaseTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f)}return t.inherits(i,n),i.prototype._validateProperties=function(){return!0},i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var r=this._utils.ellipsizeHTML,t=this._utils.getGaePropertyValue,f=80,e=10,o=23,i=n.B,u=n.E;n.singleOrDoubleTile="double",n.iconCssClass=this._IconCssClass,n.logoImageUrl=t(i,"logo"),n.tagline=r(t(i,"tagline"),f),n.provider=r(t(i,"bname"),e),n.mainImageUrl=t(u,"image"),n.title=r(t(u,"caption"),o),this._assets=n},i.prototype._createView=function(){var n=this._assets,i="<div class='module tile logoTextDouble'><div class='content'><div class='logoContainer'><table border='0' cellspacing='0' cellpadding='0'><tr><td align='center' valign='middle'><img src='"+n.logoImageUrl+"' /></td></tr></table></div><div class='taglineContainer'>"+n.tagline+"</div></div><div class='gae source'>"+n.provider+"</div><div class='gae typeicon "+n.singleOrDoubleTile+" t_hdbg'><div class='gae typeiconstyle "+n.iconCssClass+"'></div></div><div class='gae peek "+n.singleOrDoubleTile+"'><div class='peekContainer'><table border='0' cellspacing='0' cellpadding='0'><tr><td align='center' valign='middle'><img src='"+n.mainImageUrl+"' /></td></tr></table></div><span class='title'>"+n.title+"</span></div></div>",t=jQuery(i);this._$peekable=t,jQuery(this._container).append(t)},i.prototype.getSize=function(){return{height:235,width:160}},i});window.microsoft.advertising.DepMngr.define("OnlineRetailersFlyout",["core.FlyoutWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u){if(!(this instanceof i))return new i(t,r,u);n.call(this,t,r,u)}return t.inherits(i,n),i.prototype._validateProperties=function(){return!0},i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var e=this._utils.ellipsizeHTML,u=this._utils.getGaePropertyValue,f=this._utils.getUrlWithProtocol,o=50,r=n.F,i={},t;for(t in r)i[t]=t.indexOf("title")!==-1?e(u(r,"title"),o):t.indexOf("url")!==-1?f(u(r,t)):u(r,t);this._assets=i},i.prototype._createView=function(){for(var i=this._assets,r={flyoutModuleContents:"<div class='module preview onlineRetailers'><div class='main'><div class='gae flyoutTitle t_tc onlineRetailers'>"+i.title+"</div><table border='0' cellspacing='5' cellpadding='0' class='gae flyout onlineRetailers'><tr><td align='center' valign='center'>{link1}</td><td align='center' valign='center'>{link2}</td><td align='center' valign='center'>{link3}</td></tr><tr><td align='center' valign='center'>{link4}</td><td align='center' valign='center'>{link5}</td><td align='center' valign='center'>{link6}</td></tr></table></div><div class='pointer'></div></div>",imageLink:"<a href='{url}' target='_blank'><img src='{img}'/></a>",emptyLink:"<div class='gae onlineRetailers empty'></div>"},t=r.flyoutModuleContents,n=1;n<=6;n++){var e=i["url"+n],f=i["image"+n],u="{link"+n+"}";t=e!==""&&f!==""?t.replace(u,r.imageLink.replace("{url}",e).replace("{img}",f)):t.replace(u,r.emptyLink)}jQuery(this._container).append(t)},i.prototype._wireEvents=function(){i.uber._wireEvents.call(this);var n=this;jQuery(this._container).find("a").on("click",function(t){t.preventDefault(),n.fireEvent("openUrl",n,{tileLandingUrl:jQuery(this).attr("href"),log:{ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}})})},i._getIconType=function(){return"location"},i});window.microsoft.advertising.DepMngr.define("RotatorFlyout",["core.FlyoutWidget","helpers.utils","RotatorWidget"],function(n,t,i){"use strict";function r(t,i,u){if(!(this instanceof r))return new r(t,i,u);n.call(this,t,i,u)}return t.inherits(r,n),r.prototype._validateAssets=function(){return!0},r.prototype._setAssets=function(n){this._assets=n},r.prototype._createView=function(){var t=jQuery("<div class='module preview rotator'></div>")[0],n=new i(this._assets,this._properties,t);this._rotator=n,this._container.appendChild(t),n.render()},r.prototype.getHeight=function(){return 362},r});window.microsoft.advertising.DepMngr.define("TextImageGalleryFlyout",["core.FlyoutWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u){if(!(this instanceof i))return new i(t,r,u);n.call(this,t,r,u)}return t.inherits(i,n),i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var o=[],r=n.F,h={},s,t,i;for(s in r)s.indexOf("image")!==-1&&(o[o.length]=s);var l=280,c=30,a=20,e=[],f=this._utils.ellipsizeHTML,u=this._utils.getGaePropertyValue;for(t=1;t<=o.length;t++)i={},i.imagesrc=u(r,"image"+t),i.caption=f(u(r,"caption"+t),c),i.desc=f(u(r,"desc"+t),l),i.curl=this._utils.getUrlWithProtocol(u(r,"curl"+t)),i.ltext=f(u(r,"ltext"+t),a),e[t-1]=i;h.galleryItems=e,this._assets=h,this._galleryItemsCount=e.length},i.prototype._createView=function(){for(var h=this._assets,i={flyoutModuleContents:"<div class='module preview textImageGallery'><div class='main'><div class='gae flyout galleryWraper'><div id='gaeImageGallery_{galleryid}' class='gae flyout gallery items'>{galleryitems}</div></div><div class='gae flyout galleryNav left'></div><div class='gae flyout galleryNav right'></div></div><div class='pointer'></div></div>",flyoutModuleImage:"<div class='gae flyout gallery item'><div class='gae gallery innerpanel left'><table border='0' cellspacing='0' cellpadding='0'><tr><td align='center' valign='middle'>{image}</td></tr></table><div class='gallery item caption'>{caption}</div></div><div class='gae gallery innerpanel right'>{desc}</div><div class='gae gallery textlink'>{text}</div></div>",flyoutImageClickthru:"<a href='{url}' target='_blank'><img src='{imagesrc}'/></a>",flyoutImage:"<img src='{imagesrc}'/>",flyoutTextClickthru:"<a href='{url}' target='_blank' class='c_cht'>{linktext}</a>",flyoutText:"<span class='c_cht'>{linktext}</span>"},e=h.galleryItems,o="",t,n,f,u,s,r=0;r<e.length;r++)t=e[r],n=i.flyoutModuleImage,n=n.replace("{caption}",t.caption),n=n.replace("{desc}",t.desc),f=t.curl!==""?i.flyoutImageClickthru:i.flyoutImage,f=f.replace("{url}",t.curl).replace("{imagesrc}",t.imagesrc),n=n.replace("{image}",f),u=t.curl!==""?i.flyoutTextClickthru:i.flyoutText,u=u.replace("{url}",t.curl).replace("{linktext}",t.ltext),n=n.replace("{text}",u),o+=n;s=i.flyoutModuleContents.replace("{galleryitems}",o),jQuery(this._container).append(s)},i.prototype._wireEvents=function(){function l(i){if(!t||o)return;o=!0,r=r===0?t.find(e.gaeImageGalleryWraper).css("width").replace(/px/i,"")*1:r,f.fireEvent("log",f,{ModuleType:"gae",Control:"interactions",Action:"click",_meta:{_once:!0}}),i.target.className.indexOf(" right")!==-1?(s.animate({left:0-r*n+"px"}),n++,h.css("visibility","visible"),n===c&&u.css("visibility","hidden")):(s.animate({left:0-(n-2)*r+"px"}),n--,u.css("visibility","visible"),n===1&&h.css("visibility","hidden")),setTimeout(function(){o=!1},100)}i.uber._wireEvents.call(this);var e={gaeImageGalleryWraper:"div.gae.galleryWraper",gaeImageGalleryItems:"div.gae.gallery.items",gaeImageGalleryNavLeft:"div.gae.galleryNav.left",gaeImageGalleryNavRight:"div.gae.galleryNav.right"},a=396,t=jQuery(this._container),s=t.find(e.gaeImageGalleryItems),h=t.find(e.gaeImageGalleryNavLeft),u=t.find(e.gaeImageGalleryNavRight),c=this._galleryItemsCount,r=0,n=1,o=!1,f=this;h.live("click",l),u.live("click",l),t.find("a").live("click",function(n){n.preventDefault(),f.fireEvent("openUrl",f,{tileLandingUrl:jQuery(this).attr("href"),log:{ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}})}),s.css("width",a*c),c>1&&u.css("visibility","visible")},i._getIconType=function(){return"info"},i});window.microsoft.advertising.DepMngr.define("TextOnlyFlyout",["core.FlyoutWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u){if(!(this instanceof i))return new i(t,r,u);n.call(this,t,r,u)}return t.inherits(i,n),i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var u=this._utils.ellipsizeHTML,r=this._utils.getGaePropertyValue,o=this._utils.getUrlWithProtocol,f=50,s=884,e=60,i=n.F,t={};t.curl=o(r(i,"curl")),t.caption=u(r(i,"caption"),e),t.title=u(r(i,"title"),f),t.description=u(r(i,"desc"),s),this._assets=t},i.prototype._createView=function(){var n=this._assets,t="<div class='module preview textOnly'><div class='main'><div class='gae flyoutTitle t_tc textOnly'>"+n.title+"</div><div class='gae flyout description'>"+n.description+"</div></div><div class='gae footer'><div class='footer-left'><a href='"+n.curl+"' target='_blank' class='gae link t_tc'>"+n.caption+"</a></div><div class='footer-right'><span href='#' class='gae share t_tc'>"+adbar.renderers.UI.SHARE+"</span></div></div><div class='pointer'></div></div>";jQuery(this._container).append(t)},i.prototype._wireEvents=function(){i.uber._wireEvents.call(this);var r=jQuery(this._container),n=this._assets,f="span.gae.share",u=!1,o=n.title,e="<div>"+n.description+"</div><br/><div><a href='"+n.curl+"' target='_blank' class='gae link t_tc'>"+n.caption+"</a></div>",t=this;r.find(f).on("click",function(){u=!0,setTimeout(function(){u=!1},500),t.fireEvent("email",t,{email:{subject:o,body:e},log:{ModuleType:"gae",Control:"interactions",Action:"click",_meta:{_once:!0}}})});r.find("a").on("click",function(n){n.preventDefault(),t.fireEvent("openUrl",t,{tileLandingUrl:jQuery(this).attr("href"),log:{ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}})})},i._getIconType=function(){return"info"},i});window.microsoft.advertising.DepMngr.define("TextOnlyMarketingTile",["GAEBaseTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f)}return t.inherits(i,n),i.prototype._validateProperties=function(){return!0},i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var r=this._utils.ellipsizeHTML,i=this._utils.getGaePropertyValue,u=76,f=10,t=n.B;n.tileText=r(i(t,"text"),u),n.caption=r(i(t,"caption"),f),n.curl=i(t,"curl"),this._assets=n},i.prototype._createView=function(){var n=this._assets,t="<div class='module tile textOnlyMarketing'><div class='content'><div class='description'>"+n.tileText+"</div></div><div class='source'><span class='title'>"+n.caption+"</span></div></div>";jQuery(this._container).append(t)},i.prototype._wireEvents=function(){function u(){var t=[];t.push({ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}),t.push({ModuleType:"gae",Control:"tile"+n._tileNumber,Action:"click",_meta:{_once:!0}}),n.fireEvent("openUrl",n,{tileLandingUrl:n._assets.curl,log:t})}function e(n){var r=n.data,i;if(r.useCss3)return;clearTimeout(r.hoverTimer),i=jQuery(n.currentTarget),t(i,"removeClass")}function o(i){var r=i.data,u=jQuery(i.currentTarget);n.fireEvent("log",n,{ModuleType:"gae",Control:"adbar",Action:"mouseenter",_meta:{_once:!0}});if(r.useCss3)return;clearTimeout(r.hoverTimer),r.hoverTimer=setTimeout(function(){t(u,"addClass")},400)}function t(n,t){n.fadeTo(i,.8,function(){n[t]("hoverState"),n.fadeTo(i,1)})}var s=jQuery(this._container),f={click:u,mouseenter:o,mouseleave:e},i=125,r,n=this;s.on(f,{useCss3:this._utils.isCSS3Supported,hoverTimer:r,curl:this._assets.curl})},i});window.microsoft.advertising.DepMngr.define("TextTile",["GAEBaseTile","helpers.utils"],function(n,t){"use strict";function i(t,r,u,f){if(!(this instanceof i))return new i(t,r,u,f);n.call(this,t,r,u,f)}return t.inherits(i,n),i.prototype._validateProperties=function(){return!0},i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){var r=this._utils.ellipsizeHTML,t=this._utils.getGaePropertyValue,f=76,e=10,o=23,u=n.B,i=n.E;n.singleOrDoubleTile=this._SingleOrDoubleTile,n.description=r(t(u,"pname"),f),n.provider=r(t(u,"bname"),e),n.iconCssClass=this._IconCssClass,n.peekImg=t(i,"image"),n.expandCaption=r(t(i,"caption"),o),this._assets=n,this._curl=t(i,"curl")},i.prototype._createView=function(){var r="",u="",n=this._assets,t=n.mapImg,i;n.iconCssClass&&(r="<div class='gae typeicon "+n.singleOrDoubleTile+" t_hdbg'><div class='gae typeiconstyle "+n.iconCssClass+"'></div></div>"),t||(t="<table border='0' cellspacing='0' cellpadding='0'><tr><td cellspacing='0' cellpadding='0'><img src=' "+n.peekImg+" ' /></td></tr></table>"),u="<div class='module tile text'><div class='content'><div class='description'>"+n.description+"</div></div><div class='gae source'>"+n.provider+"</div>"+r+"<div class='gae peek "+n.singleOrDoubleTile+"'><div class='peekContainer'>"+t+"</div><span class='title'>"+n.expandCaption+"</span></div></div>",i=jQuery(u),this._$peekable=i,jQuery(this._container).append(i)},i});window.microsoft.advertising.DepMngr.define("ThreeImagesFlyout",["core.FlyoutWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u){if(!(this instanceof i))return new i(t,r,u);n.call(this,t,r,u)}return t.inherits(i,n),i.prototype._validateAssets=function(){return!0},i.prototype._setAssets=function(n){for(var o=this._utils.ellipsizeHTML,u=this._utils.getGaePropertyValue,c=this._utils.getUrlWithProtocol,h=63,s=18,e=[],r=n.F,f={},i,t=1;t<=3;t++)i={},i.caption=o(u(r,"caption"+t),s),i.curl=c(u(r,"curl"+t)),i.imageUrl=u(r,"image"+t),e[t-1]=i;f.title=o(u(r,"title"),h),f.imageItems=e,this._assets=f},i.prototype._createView=function(){for(var f=this._assets,t={flyoutModuleContents:"<div class='module preview threeImages'><div class='main'><div class='gae flyoutTitle t_tc threeImages'>{title}</div><div class='gae flyout threeImages items'>{threeimages}</div></div><div class='pointer'></div></div>",flyoutModuleLink:"<div class='gae flyout threeImages item'><table border='0' cellspacing='0' cellpadding='0'><tr><td align='center' valign='middle'>{image}</td></tr></table><div class='caption'>{caption}</div></div>",flyoutImageClickthru:"<a href='{url}' target='_blank'><img src='{imagesrc}'/></a>",flyoutImage:"<img src='{imagesrc}'/>"},s=f.imageItems,o="",c="",i=0,h=s.length;i<h;i++){var r=t.flyoutModuleLink,u=s[i],e=u.curl,n="";n=e!==""?t.flyoutImageClickthru:t.flyoutImage,n=n.replace("{url}",e).replace("{imagesrc}",u.imageUrl),r=r.replace("{image}",n).replace("{caption}",u.caption),o+=r}c=t.flyoutModuleContents.replace("{threeimages}",o).replace("{title}",f.title),jQuery(this._container).append(c)},i.prototype._wireEvents=function(){i.uber._wireEvents.call(this);var n=this;jQuery(this._container).find("a").on("click",function(t){t.preventDefault(),n.fireEvent("openUrl",n,{tileLandingUrl:jQuery(this).attr("href"),log:{ModuleType:"gae",Control:"adbarclickthrus",Action:"click"}})})},i._getIconType=function(){return"image"},i});window.microsoft.advertising.DepMngr.define("VideoFlyout",["core.FlyoutWidget","helpers.utils"],function(n,t){"use strict";function i(t,r,u){if(!(this instanceof i))return new i(t,r,u);n.call(this,t,r,u)}return t.inherits(i,n),i.prototype._validateAssets=function(n){return!n||!n.F||!n.F.video||typeof n.F.video.tx!="string"&&typeof n.F.video.u!="string"?!1:!0},i.prototype._setAssets=function(n){var r="/wl_html/content/swf/videoPlayer.swf",i=this._utils,t={};t.videoSource=i.getGaePropertyValue(n.F,"video"),t.videoId="gaeFlyoutVideo_1",t.playerURL=this._properties.BaseUrl+r,t.protocol=i.isUsingHttps()?"https":"http",this._assets=t},i.prototype._createView=function(){var n=this._assets,t={flyoutModuleContents:"<div class='module preview video'><div class='main'><div class='videoContainer'>{gaevideoplayer}</div></div><div class='pointer'></div></div>",html5VideoPlayer:"<video id='"+n.videoId+"' width='376' height='211' preload='metadata' hidefocus='true' style='outline:none'><div class='nonesupported'>Your browser does not support the video tag.</div></video>",flashVideoPlayer:"<object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' id='"+n.videoId+"' width='376' height='211' align='middle'>{flashparameters}<!--[if !IE]>--><object type='application/x-shockwave-flash' data='"+n.playerURL+"' id='"+n.videoId+"' width='376' height='211'>{flashparameters}<!--<![endif]--><a href='"+n.protocol+"://www.adobe.com/go/getflash' target='_blank'><img src='"+n.protocol+"://www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player' /></a><!--[if !IE]>--></object><!--<![endif]--></object>",flashParameters:"<param name='movie' value='"+n.playerURL+"?videoSrc="+n.videoSource+"' /><param name='quality' value='high' /><param name='bgcolor' value='000000' /><param name='play' value='true' /><param name='loop' value='true' /><param name='wmode' value='opaque' /><param name='scale' value='showall' /><param name='menu' value='true' /><param name='devicefont' value='false' /><param name='salign' value='' /><param name='allowScriptAccess' value='always' /><param name='FlashVars' value='videoSrc="+n.videoSource+"'/>"},i="",r;this._utils.isHTML5VideoSupported?i=t.flyoutModuleContents.replace("{gaevideoplayer}",t.html5VideoPlayer):(r=t.flashVideoPlayer.replace(/\{flashparameters\}/g,t.flashParameters),i=t.flyoutModuleContents.replace("{gaevideoplayer}",r)),jQuery(this._container).append(i)},i.prototype._wireEvents=function(){function h(){f=!1,o=!1,s=!1}function w(n){var i=n.target,r;if(i.readyState<3)return;if(u){u=!1;return}if(i.seeking)return;r=i.currentTime,r>0?t("VIDEO_PLAY"):r===0&&(c&&(t("VIDEO_PLAY"),h()),t("VIDEO_START")),c=!0,i.controls="controls"}function y(n){var i=n.target;if(i.currentTime===i.duration||i.seeking){u=i.seeking;return}t("VIDEO_PAUSE")}function d(){t("VIDEO_FULL")}function k(){u=!0}function a(){h(),t("VIDEO_SEEK")}function v(n){var i=n.target;i.muted?(t("VIDEO_MUTE"),e=!0):e&&(t("VIDEO_UNMUTE"),e=!1)}function p(n){var r=n.target,u=r.duration,e=r.currentTime,i=e/u*100;f||i<25||i>=50?o||i<50||i>=75?s||i<75||(t("VIDEO_75"),s=!0):(t("VIDEO_50"),o=!0):(t("VIDEO_25"),f=!0)}function t(n){var t=b[n];t&&r.fireEvent("log",r,{ModuleType:"gae",Control:"video",Action:t})}var r=this,b={VIDEO_START:"start",VIDEO_PLAY:"play",VIDEO_PAUSE:"pause",VIDEO_25:"firstquartile",VIDEO_50:"midpoint",VIDEO_75:"thirdquartile",VIDEO_FULL:"complete",VIDEO_MUTE:"mute",VIDEO_UNMUTE:"unmute",VIDEO_SEEK:"seek"},f=!1,o=!1,s=!1,c=!1,u=!1,e=!1,l,n;i.uber._wireEvents.call(this),l=jQuery(this._container),n=l.find("video").get(0),window.receiveFlashEvent=function(n){t(n)},n&&(n.addEventListener("playing",w,!1),n.addEventListener("pause",y,!1),n.addEventListener("ended",d,!1),n.addEventListener("timeupdate",p,!1),n.addEventListener("volumechange",v,!1),n.addEventListener("seeking",k,!1),n.addEventListener("seeked",a,!1),n.addEventListener("canplay",function(){(r._state!==r._STATES.CLOSED||r._state!==r._STATES.DESTROYED)&&n.play()}),n.setAttribute("src",this._assets.videoSource),n.load())},i.prototype.getHeight=function(){return 235},i._getIconType=function(){return"video"},i})