window.Sponsorpay={_:null,Backbone:null,pm:null,logger:null,Lib:{},Models:{},Collections:{},Views:{},Templates:{}},Sponsorpay.FlashDetect=new function(){var e=this;e.installed=!1,e.raw="",e.major=-1,e.minor=-1,e.revision=-1,e.revisionStr="";var t=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(e){return n(e)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(e){var t="6,0,21";try{e.AllowScriptAccess="always",t=n(e)}catch(r){}return t}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(e){return n(e)}}],n=function(e){var t=-1;try{t=e.GetVariable("$version")}catch(n){}return t},r=function(e){var t=-1;try{t=new ActiveXObject(e)}catch(n){t={activeXError:!0}}return t},s=function(e){var t=e.split(",");return{raw:e,major:parseInt(t[0].split(" ")[1],10),minor:parseInt(t[1],10),revision:parseInt(t[2],10),revisionStr:t[2]}},o=function(e){var t=e.split(/ +/),n=t[2].split(/\./),r=t[3];return{raw:e,major:parseInt(n[0],10),minor:parseInt(n[1],10),revisionStr:r,revision:u(r)}},u=function(t){return parseInt(t.replace(/[a-zA-Z]/g,""),10)||e.revision};e.majorAtLeast=function(t){return e.major>=t},e.minorAtLeast=function(t){return e.minor>=t},e.revisionAtLeast=function(t){return e.revision>=t},e.versionAtLeast=function(t){var n=[e.major,e.minor,e.revision],r=Math.min(n.length,arguments.length);for(i=0;i<r;i++){if(n[i]>=arguments[i]){if(i+1<r&&n[i]==arguments[i])continue;return!0}return!1}},e.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var n="application/x-shockwave-flash",i=navigator.mimeTypes;if(i&&i[n]&&i[n].enabledPlugin&&i[n].enabledPlugin.description){var u=i[n].enabledPlugin.description,a=o(u);e.raw=a.raw,e.major=a.major,e.minor=a.minor,e.revisionStr=a.revisionStr,e.revision=a.revision,e.installed=!0}}else if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var u=-1;for(var f=0;f<t.length&&u==-1;f++){var l=r(t[f].name);if(!l.activeXError){e.installed=!0,u=t[f].version(l);if(u!=-1){var a=s(u);e.raw=a.raw,e.major=a.major,e.minor=a.minor,e.revision=a.revision,e.revisionStr=a.revisionStr}}}}}()},Sponsorpay.FlashDetect.JS_RELEASE="1.0.4";if(!window.console){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;++i)window.console[names[i]]=function(){}}Sponsorpay.Lib.Utils={browser:{safari:function(){var e=Sponsorpay.Lib.Utils;return e.userAgent().indexOf("Safari")!==-1&&e.userAgent().indexOf("Chrome")===-1},ie7:function(){return document.all&&!window.opera&&window.XMLHttpRequest?!0:!1},hasNativePostmessage:function(){return!(!window.postMessage||typeof window.postMessage!="function"&&typeof window.postMessage!="object"||!(window.postMessage+"").match(/native code/))},isMsie:function(){return/(msie) ([\w.]+)/.test(Sponsorpay.Lib.Utils.userAgent())},msieVersion:function(){var e;try{e=parseInt(Sponsorpay.Lib.Utils.userAgent().match(/msie (\d+)/)[1],10)}catch(t){e=0}return e}},userAgent:function(){return navigator.userAgent},toUrlParams:function(e){var t="";for(var n in e)t.length>0&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]);return t},FlashAvailable:function(){return typeof Sponsorpay.FlashDetect=="undefined"?!0:Sponsorpay.FlashDetect.installed},evalBoolean:function(e){function t(e){return e=e.toLowerCase(),e==="yes"||e==="on"||e==="1"||e==="true"}function n(e){return e=e.toLowerCase(),e==="no"||e==="off"||e==="0"||e==="false"}if(e===!1||e===!0)return e;if(typeof e=="string"){if(t(e))return!0;if(n(e))return!1}return!!e},removeElementById:function(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)},loadCssFile:function(e,t){var n=document.styleSheets;for(var r=0,i=n.length;r<i;r++)if(n[r].href===e)return;var s=document.createElement("link");s.setAttribute("type","text/css"),s.setAttribute("media","screen"),s.setAttribute("rel","stylesheet"),s.setAttribute("href",e),t&&s.setAttribute("id",t),document.getElementsByTagName("head")[0].appendChild(s)}};var SPjQuery={};SPjQuery.load=function(e){typeof jQuery=="undefined"||jQuery.fn.jquery!==e.version&&jQuery().jquery!==e.version?SPjQuery._loadJSFile({success:e.success,url:e.url}):e.success.apply(this,[jQuery])},SPjQuery.noConflict=function(){var e=jQuery.noConflict(!0);return typeof jQuery=="undefined"&&(window.jQuery=e,typeof $=="undefined"&&(window.$=e)),SPjQuery.version=e().jquery,e},SPjQuery._loadJSFile=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.readyState?t.onreadystatechange=function(){if(t.readyState==="loaded"||t.readyState==="complete")t.onreadystatechange=null,e.success.apply(this,[SPjQuery.noConflict()])}:t.onload=function(){e.success.apply(this,[SPjQuery.noConflict()])}};var Sponsorpay=Sponsorpay||{};Sponsorpay.Messenger=function(e,t){function u(e){function s(t){var n,i;for(i=0;i<t.length;i++)n=t[i].call(null,r.data,e.source),typeof n!="undefined"&&o.post(r.mid,{target:e.source,data:JSON.stringify(n)})}var t,r=a(e.data);if(!r)return;var i=f(r.type);if(!i)return;switch(!0){case!!n.boundOnce[i]:s(n.boundOnce[i]),delete n.boundOnce[i];break;case!!n.bound[i]:s(n.bound[i]);break;case typeof n.success[i]=="function":n.success[i].call(null,JSON.parse(r.data)),delete n.success[i]}}function a(e){try{e=JSON.parse(e)}catch(t){return null}return e?e:null}function f(e){return e=c(e),e?e:null}function l(e){return i+e}function c(e){if(!e)return null;var t=(new RegExp(i+"(.*)")).exec(e);return t?t[1]:null}function h(){var e=[];for(var t=0;t<32;t++)e[t]=r[0|Math.random()*32];return e.join("")}var n={bound:{},boundOnce:{},success:{}},r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i="SPMSSNGR_",s=function(){},o={bind:function(e,t){typeof t=="function"&&(delete n.boundOnce[e],n.bound[e]||(n.bound[e]=[]),n.bound[e].push(t))},bindOnce:function(e,t){typeof t=="function"&&(delete n.bound[e],n.boundOnce[e]=[t])},unbind:function(e){delete n.bound[e],delete n.boundOnce[e]},post:function(t,r){r=r||{},r.target||(r.target=e),r.data=typeof r.data=="undefined"?{}:r.data;var i="SUCCESS_"+h(),s={type:l(t),data:r.data,mid:i};r.target.postMessage(JSON.stringify(s),"*"),typeof r.success=="function"&&(n.success[i]=r.success)},getCallbacks:function(e){switch(!0){case!!n.bound[e]:return n.bound[e];case!!n.boundOnce[e]:return n.boundOnce[e];default:return[]}}};return typeof e.addEventListener!="function"?e.attachEvent("onmessage",function(){u(e.event)}):e.addEventListener("message",function(e){u(e)},!1),o}(this),Sponsorpay.Logger=function(e,t,n){this._setupLogDB(),this._autoFlush=e||!1,this._timestamping=typeof n!="undefined"?n:!0,typeof t!="undefined"?this._output=t:typeof console!="undefined"||typeof console.log!="undefined"?this._output=console:this._output={log:function(e){}}},Sponsorpay.Logger.prototype._setupLogDB=function(){this._logDB={},this._logDB.debugs=[],this._logDB.infos=[]},Sponsorpay.Logger.prototype.save=function(e){typeof e!="undefined"&&typeof e.key!="undefined"&&(this._logDB[e.key]={timeStamp:this._logTime(),value:e.value})},Sponsorpay.Logger.prototype.all=function(){return this._logDB},Sponsorpay.Logger.prototype.emptyLog=function(){this._setupLogDB()},Sponsorpay.Logger.prototype.infos=function(){return this._logDB.infos},Sponsorpay.Logger.prototype.saveInfo=function(e){this._log(this._logDB.infos,e)},Sponsorpay.Logger.prototype.debugs=function(){return this._logDB.debugs},Sponsorpay.Logger.prototype.debug=function(e){this._log(this._logDB.debugs,e)},Sponsorpay.Logger.prototype.flush=function(){for(var e in this._logDB)this._flush(this._logDB[e],e);this.emptyLog()},Sponsorpay.Logger.prototype._log=function(e,t){this._autoFlush?this._flush([this._timestamp(t)]):e.push(this._timestamp(t))},Sponsorpay.Logger.prototype._timestamp=function(e){return this._timestamping?this._logTime()+" ++++ "+e:e},Sponsorpay.Logger.prototype._flush=function(e,t){t&&this._output.log("FLUSHING: "+t);if(typeof e.length!="undefined")for(var n=0;n<e.length;n++)this._output.log(e[n]);else this._output.log(e)},Sponsorpay.Logger.prototype._logTime=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()};var SPONSORPAY=SPONSORPAY||{};SPONSORPAY.Video=SPONSORPAY.Video||{},SPONSORPAY.Video.Iframe=function(e){var t=this,n=Sponsorpay.Lib.Utils.evalBoolean;this._params={appid:e.appid,uid:e.uid,height:e.height||(e.where!==undefined?330:750),width:e.width||(e.where!==undefined?400:750),greyOut:typeof e.greyout=="undefined"?!0:n(e.greyout),displayFormat:e.display_format||"bare_player",callbackOffersAvailable:e.callback_on_start,callbackNoOffers:e.callback_no_offers,callbackOnConversion:e.callback_on_conversion,callbackOnClose:e.callback_on_close,displayPrivacyPolicy:!!e.display_privacy_policy,exchangeRate:e.er,verticalOffset:e.vertical_offset,timeStamp:e.ts,year:e.year,gender:e.gender,currency:e.currency,digest:e.digest,sp_dbg:e.sp_dbg,psTime:e.ps_time,theme:e.theme||"default",where:e.where!==undefined?"#"+e.where:null,type:e.where!==undefined?"dedicated":"lightbox",endpoint:e.endpoint||null,apiHost:e.api_host||"be.sponsorpay.com",enableClose:typeof e.enable_close=="undefined"?!0:n(e.enable_close),textClaimButton:e.text_claim_button!==undefined?e.text_claim_button:null,pub0:e.pub0,pub1:e.pub1,pub2:e.pub2,pub3:e.pub3,pub4:e.pub4,pub5:e.pub5,pub6:e.pub6,pub7:e.pub7,pub8:e.pub8,pub9:e.pub9,tracking:e.tracking,lpid:e.lpid,gm:e.gm,cc:e.cc,sweepx:e.sweepx,sig:e.sig},this._params.apiHost=this._params.apiHost.replace("iframe.sponsorpay.com","be.sponsorpay.com"),this._params.displayFormat!="bare_player"&&this._params.displayFormat!="no_reward_btn"&&this._params.displayFormat!="player_and_reward"&&(this._params.displayFormat="bare_player"),Sponsorpay.logger=new Sponsorpay.Logger(this._params.sp_dbg),Sponsorpay.logger.save({key:"cookie:all",value:document.cookie.split("; ")}),this.backgroundLoad=function(){t.timer!=="proceeded"?(clearInterval(t.timer),t.timer=setInterval(t._startBackgroundLoad,10)):this._startBackgroundLoad()},this._startBackgroundLoad=function(){typeof SPJSLoaded!="undefined"&&(t.timer!=="proceeded"?(clearInterval(t.timer),t.timer="proceeded",t.widget=t._makeWidget(t._params)):t.widget=t._makeWidget(t._params))},this.showVideo=function(){t.widget.showUp()},this.close=function(){t.widget.closeUp()},this.closeContainer=function(){t.widget.closeUp()},this.loadAndShow=function(){t.timer!=="proceeded"?(clearInterval(t.timer),t.timer=setInterval(t._startloadAndShow,10)):this._startloadAndShow()},this._makeWidget=function(e){return Sponsorpay.Views.Brandengage.createWrapper(e)},this._startloadAndShow=function(){typeof SPJSLoaded!="undefined"&&(t.timer!=="proceeded"&&(clearInterval(t.timer),t.timer="proceeded"),t.widget=t._makeWidget(t._params),t.widget.showUp())}},SPjQuery.load({url:"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",version:"1.9.1",success:function(e){Sponsorpay.$=Sponsorpay.jQuery=e,function(){function C(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(e);var r=a.call(e);if(r!=a.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&C(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(S.has(e,u)){s++;if(!(o=S.has(t,u)&&C(e[u],t[u],n)))break}if(o){for(u in t)if(S.has(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.slice,u=r.unshift,a=i.toString,f=i.hasOwnProperty,l=r.forEach,c=r.map,h=r.reduce,p=r.reduceRight,d=r.filter,v=r.every,m=r.some,g=r.indexOf,y=r.lastIndexOf,b=Array.isArray,w=Object.keys,E=s.bind,S=function(e){return new O(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.3.1";var x=S.each=S.forEach=function(e,t,r){if(e==null)return;if(l&&e.forEach===l)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)return}else for(var o in e)if(S.has(e,o)&&t.call(r,e[o],o,e)===n)return};S.map=S.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(x(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=S.bind(t,r)),i?e.reduce(t,n):e.reduce(t);x(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=S.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=S.toArray(e).reverse();return r&&!i&&(t=S.bind(t,r)),i?S.reduce(s,t,n,r):S.reduce(s,t)},S.find=S.detect=function(e,t,n){var r;return T(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},S.filter=S.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(x(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},S.reject=function(e,t,n){var r=[];return e==null?r:(x(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},S.every=S.all=function(e,t,r){var i=!0;return e==null?i:v&&e.every===v?e.every(t,r):(x(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),i)};var T=S.some=S.any=function(e,t,r){t||(t=S.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,r):(x(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};S.include=S.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:(n=T(e,function(e){return e===t}),n)},S.invoke=function(e,t){var n=o.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.max=function(e,t,n){if(!t&&S.isArray(e))return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-Infinity;var r={computed:-Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},S.min=function(e,t,n){if(!t&&S.isArray(e))return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return Infinity;var r={computed:Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},S.shuffle=function(e){var t=[],n;return x(e,function(e,r,i){r==0?t[0]=e:(n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e)}),t},S.sortBy=function(e,t,n){return S.pluck(S.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")},S.groupBy=function(e,t){var n={},r=S.isFunction(t)?t:function(e){return e[t]};return x(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},S.sortedIndex=function(e,t,n){n||(n=S.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},S.toArray=function(e){return e?e.toArray?e.toArray():S.isArray(e)?o.call(e):S.isArguments(e)?o.call(e):S.values(e):[]},S.size=function(e){return S.toArray(e).length},S.first=S.head=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},S.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},S.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},S.rest=S.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},S.compact=function(e){return S.filter(e,function(e){return!!e})},S.flatten=function(e,t){return S.reduce(e,function(e,n){return S.isArray(n)?e.concat(t?n:S.flatten(n)):(e[e.length]=n,e)},[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.uniq=S.unique=function(e,t,n){var r=n?S.map(e,n):e,i=[];return S.reduce(r,function(n,r,s){if(0==s||(t===!0?S.last(n)!=r:!S.include(n,r)))n[n.length]=r,i[i.length]=e[s];return n},[]),i},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=S.intersect=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=S.flatten(o.call(arguments,1));return S.filter(e,function(e){return!S.include(t,e)})},S.zip=function(){var e=o.call(arguments),t=S.max(S.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=S.pluck(e,""+r);return n},S.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=S.sortedIndex(e,t),e[r]===t?r:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},S.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var N=function(){};S.bind=function(t,n){var r,i;if(t.bind===E&&E)return E.apply(t,o.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return i=o.call(arguments,2),r=function(){if(this instanceof r){N.prototype=t.prototype;var e=new N,s=t.apply(e,i.concat(o.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(o.call(arguments)))}},S.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=S.functions(e)),x(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var r=t.apply(this,arguments);return S.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))},S.throttle=function(e,t){var n,r,i,s,o,u=S.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var a=function(){i=null,o&&e.apply(n,r),u()};i||(i=setTimeout(a,t)),s?o=!0:e.apply(n,r),u(),s=!0}},S.debounce=function(e,t){var n;return function(){var r=this,i=arguments,s=function(){n=null,e.apply(r,i)};clearTimeout(n),n=setTimeout(s,t)}},S.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},S.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},S.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&(t[t.length]=n);return t},S.values=function(e){return S.map(e,S.identity)},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},S.defaults=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isEqual=function(e,t){return C(e,t,[])},S.isEmpty=function(e){if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!!e&&e.nodeType==1},S.isArray=b||function(e){return a.call(e)=="[object Array]"},S.isObject=function(e){return e===Object(e)},S.isArguments=function(e){return a.call(e)=="[object Arguments]"},S.isArguments(arguments)||(S.isArguments=function(e){return!!e&&!!S.has(e,"callee")}),S.isFunction=function(e){return a.call(e)=="[object Function]"},S.isString=function(e){return a.call(e)=="[object String]"},S.isNumber=function(e){return a.call(e)=="[object Number]"},S.isNaN=function(e){return e!==e},S.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},S.isDate=function(e){return a.call(e)=="[object Date]"},S.isRegExp=function(e){return a.call(e)=="[object RegExp]"},S.isNull=function(e){return e===null},S.isUndefined=function(e){return e===void 0},S.has=function(e,t){return f.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},S.mixin=function(e){x(S.functions(e),function(t){_(t,S[t]=e[t])})};var k=0;S.uniqueId=function(e){var t=k++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/.^/,A=function(e){return e.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};S.template=function(e,t){var n=S.templateSettings,r="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.escape||L,function(e,t){return"',_.escape("+A(t)+"),'"}).replace(n.interpolate||L,function(e,t){return"',"+A(t)+",'"}).replace(n.evaluate||L,function(e,t){return"');"+A(t).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",i=new Function("obj","_",r);return t?i(t,S):function(e){return i.call(this,e,S)}},S.chain=function(e){return S(e).chain()};var O=function(e){this._wrapped=e};S.prototype=O.prototype;var M=function(e,t){return t?S(e).chain():e},_=function(e,t){O.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),M(t.apply(S,e),this._chain)}};S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];O.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],M(n,this._chain)}}),x(["concat","join","slice"],function(e){var t=r[e];O.prototype[e]=function(){return M(t.apply(this._wrapped,arguments),this._chain)}}),O.prototype.chain=function(){return this._chain=!0,this},O.prototype.value=function(){return this._wrapped}}.call(window),function(){var e=this,t=e.Backbone,n=Array.prototype.slice,r=Array.prototype.splice,i;typeof exports!="undefined"?i=exports:i=e.Backbone={},i.VERSION="0.9.1-SP";var s=e._;!s&&typeof require!="undefined"&&(s=require("underscore"));var o=e.Sponsorpay&&e.Sponsorpay.jQuery?e.Sponsorpay.jQuery:e.jQuery;i.setDomLibrary=function(e){o=e},i.noConflict=function(){return e.Backbone=t,this},i.emulateHTTP=!1,i.emulateJSON=!1,i.Events={on:function(e,t,n){var r;e=e.split(/\s+/);var i=this._callbacks||(this._callbacks={});while(r=e.shift()){var s=i[r]||(i[r]={}),o=s.tail||(s.tail=s.next={});o.callback=t,o.context=n,s.tail=o.next={}}return this},off:function(e,t,n){var r,i,s;if(!e)delete this._callbacks;else if(i=this._callbacks){e=e.split(/\s+/);while(r=e.shift()){s=i[r],delete i[r];if(!t||!s)continue;while((s=s.next)&&s.next){if(s.callback===t&&(!n||s.context===n))continue;this.on(r,s.callback,s.context)}}}return this},trigger:function(e){var t,r,i,s,o,u,a;if(!(i=this._callbacks))return this;u=i.all,(e=e.split(/\s+/)).push(null);while(t=e.shift()){u&&e.push({next:u.next,tail:u.tail,event:t});if(!(r=i[t]))continue;e.push({next:r.next,tail:r.tail})}a=n.call(arguments,1);while(r=e.pop()){s=r.tail,o=r.event?[r.event].concat(a):a;while((r=r.next)!==s)r.callback.apply(r.context||this,o)}return this}},i.Events.bind=i.Events.on,i.Events.unbind=i.Events.off,i.Model=function(e,t){var n;e||(e={}),t&&t.parse&&(e=this.parse(e));if(n=w(this,"defaults"))e=s.extend({},n,e);t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=s.uniqueId("c"),this.set(e,{silent:!0}),delete this._changed,this._previousAttributes=s.clone(this.attributes),this.initialize.apply(this,arguments)},s.extend(i.Model.prototype,i.Events,{idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.attributes[e];return this._escapedAttributes[e]=s.escape(n==null?"":""+n)},has:function(e){return this.attributes[e]!=null},set:function(e,t,n){var r,o,u;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n||(n={});if(!r)return this;r instanceof i.Model&&(r=r.attributes);if(n.unset)for(o in r)r[o]=void 0;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var a=this.attributes,f=this._escapedAttributes,l=this._previousAttributes||{},c=this._setting;this._changed||(this._changed={}),this._setting=!0;for(o in r){u=r[o],s.isEqual(a[o],u)||delete f[o],n.unset?delete a[o]:a[o]=u,this._changing&&!s.isEqual(this._changed[o],u)&&(this.trigger("change:"+o,this,u,n),this._moreChanges=!0),delete this._changed[o];if(!s.isEqual(l[o],u)||s.has(a,o)!=s.has(l,o))this._changed[o]=u}return c||(!n.silent&&this.hasChanged()&&this.change(n),this._setting=!1),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)},clear:function(e){return(e||(e={})).unset=!0,this.set(s.clone(this.attributes),e)},fetch:function(e){e=e?s.clone(e):{};var t=this,n=e.success;return e.success=function(r,i,s){if(!t.set(t.parse(r,s),e))return!1;n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},save:function(e,t,n){var r,o;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n=n?s.clone(n):{},n.wait&&(o=s.clone(this.attributes));var u=s.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?u:n))return!1;var a=this,f=n.success;n.success=function(e,t,i){var o=a.parse(e,i);n.wait&&(o=s.extend(r||{},o));if(!a.set(o,n))return!1;f?f(a,e):a.trigger("sync",a,e,n)},n.error=i.wrapError(n.error,a,n);var l=this.isNew()?"create":"update",c=(this.sync||i.sync).call(this,l,this,n);return n.wait&&this.set(o,u),c},destroy:function(e){e=e?s.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(this.isNew())return r();e.success=function(i){e.wait&&r(),n?n(t,i):t.trigger("sync",t,i,e)},e.error=i.wrapError(e.error,t,e);var o=(this.sync||i.sync).call(this,"delete",this,e);return e.wait||r(),o},url:function(){var e=w(this.collection,"url")||w(this,"urlRoot")||E();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(e){if(this._changing||!this.hasChanged())return this;this._changing=!0,this._moreChanges=!0;for(var t in this._changed)this.trigger("change:"+t,this,this._changed[t],e);while(this._moreChanges)this._moreChanges=!1,this.trigger("change",this,e);return this._previousAttributes=s.clone(this.attributes),delete this._changed,this._changing=!1,this},hasChanged:function(e){return arguments.length?this._changed&&s.has(this._changed,e):!s.isEmpty(this._changed)},changedAttributes:function(e){if(!e)return this.hasChanged()?s.clone(this._changed):!1;var t,n=!1,r=this._previousAttributes;for(var i in e){if(s.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return s.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=s.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}}),i.Collection=function(e,t){t||(t={}),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})},s.extend(i.Collection.prototype,i.Events,{model:i.Model,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(e,t){var n,i,o,u,a,f,l={},c={};t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,o=e.length;n<o;n++){if(!(u=e[n]=this._prepareModel(e[n],t)))throw new Error("Can't add an invalid model to a collection");if(l[a=u.cid]||this._byCid[a]||(f=u.id)!=null&&(c[f]||this._byId[f]))throw new Error("Can't add the same model to a collection twice");l[a]=c[f]=u}for(n=0;n<o;n++)(u=e[n]).on("all",this._onModelEvent,this),this._byCid[u.cid]=u,u.id!=null&&(this._byId[u.id]=u);this.length+=o,i=t.at!=null?t.at:this.models.length,r.apply(this.models,[i,0].concat(e)),this.comparator&&this.sort({silent:!0});if(t.silent)return this;for(n=0,o=this.models.length;n<o;n++){if(!l[(u=this.models[n]).cid])continue;t.index=n,u.trigger("add",u,this,t)}return this},remove:function(e,t){var n,r,i,o;t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,r=e.length;n<r;n++){o=this.getByCid(e[n])||this.get(e[n]);if(!o)continue;delete this._byId[o.id],delete this._byCid[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o)}return this},get:function(e){return e==null?null:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(e){e||(e={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var t=s.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return s.map(this.models,function(t){return t.get(e)})},reset:function(e,t){e||(e=[]),t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return this._reset(),this.add(e,{silent:!0,parse:t.parse}),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?s.clone(e):{},e.parse===undefined&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r,i,s){t[e.add?"add":"reset"](t.parse(r,s),e),n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t=t?s.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(i,s,o){t.wait&&n.add(i,t),r?r(i,s):i.trigger("sync",e,s,t)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return s(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof i.Model)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(n,t),e._validate(e.attributes,t)||(e=!1)}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments)}});var u=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];s.each(u,function(e){i.Collection.prototype[e]=function(){return s[e].apply(s,[this.models].concat(s.toArray(arguments)))}}),i.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var a=/:\w+/g,f=/\*\w+/g,l=/[-[\]{}()+?.,\\^$|#\s]/g;s.extend(i.Router.prototype,i.Events,{initialize:function(){},route:function(e,t,n){return i.history||(i.history=new i.History),s.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),i.history.route(e,s.bind(function(r){var s=this._extractParameters(e,r);n&&n.apply(this,s),this.trigger.apply(this,["route:"+t].concat(s)),i.history.trigger("route",this,t,s)},this)),this},navigate:function(e,t){i.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(l,"\\$&").replace(a,"([^/]+)").replace(f,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e
.exec(t).slice(1)}}),i.History=function(){this.handlers=[],s.bindAll(this,"checkUrl")};var c=/^[#\/]/,h=/msie [\w.]+/,p=!1;s.extend(i.History.prototype,i.Events,{interval:50,getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n)}else e=window.location.hash;return e=decodeURIComponent(e),e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(c,"")},start:function(e){if(p)throw new Error("Backbone.history has already been started");this.options=s.extend({},{root:"/"},this.options,e),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,r=h.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);r&&(this.iframe=o('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t,p=!0;var i=window.location,u=i.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&i.hash&&(this.fragment=i.hash.replace(c,""),window.history.replaceState({},document.title,i.protocol+"//"+i.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){o(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),p=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t==this.fragment&&this.iframe&&(t=this.getFragment(this.iframe.location.hash));if(t==this.fragment||t==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=s.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!p)return!1;if(!t||t===!0)t={trigger:t};var n=(e||"").replace(c,"");if(this.fragment==n||this.fragment==decodeURIComponent(n))return;this._hasPushState?(n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history[t.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,t.replace),this.iframe&&n!=this.getFragment(this.iframe.location.hash)&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){n?e.replace(e.toString().replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}}),i.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};var d=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName"];s.extend(i.View.prototype,i.Events,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&o(r).attr(t),n&&o(r).html(n),r},setElement:function(e,t){return this.$el=o(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=w(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];s.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Event "'+e[t]+'" does not exist');var r=t.match(d),i=r[1],o=r[2];n=s.bind(n,this),i+=".delegateEvents"+this.cid,o===""?this.$el.bind(i,n):this.$el.delegate(o,i,n)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=s.extend({},this.options,e));for(var t=0,n=v.length;t<n;t++){var r=v[t];e[r]&&(this[r]=e[r])}this.options=e},_ensureElement:function(){if(!this.el){var e=w(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}else this.setElement(this.el,!1)}});var m=function(e,t){var n=b(this,e,t);return n.extend=this.extend,n};i.Model.extend=i.Collection.extend=i.Router.extend=i.View.extend=m;var g={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};i.sync=function(e,t,n){var r=g[e],u={type:r,dataType:"json"};return n.url||(u.url=w(t,"url")||E()),!n.data&&t&&(e=="create"||e=="update")&&(u.contentType="application/json",u.data=JSON.stringify(t.toJSON())),i.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),i.emulateHTTP&&(r==="PUT"||r==="DELETE")&&(i.emulateJSON&&(u.data._method=r),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r)}),u.type!=="GET"&&!i.emulateJSON&&(u.processData=!1),o.ajax(s.extend(u,n))},i.wrapError=function(e,t,n){return function(r,i){i=r===t?i:r,e?e(t,i,n):t.trigger("error",t,i,n)}};var y=function(){},b=function(e,t,n){var r;return t&&t.hasOwnProperty("constructor")?r=t.constructor:r=function(){e.apply(this,arguments)},s.extend(r,e),y.prototype=e.prototype,r.prototype=new y,t&&s.extend(r.prototype,t),n&&s.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r},w=function(e,t){return!e||!e[t]?null:s.isFunction(e[t])?e[t]():e[t]},E=function(){throw new Error('A "url" property or function must be specified')}}.call(this.window),window.swfobject||(window.swfobject=function(){function k(){if(b||!document.getElementsByTagName("body")[0])return;try{var e,t=X("span");t.style.display="none",e=a.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(n){return}b=!0;var r=c.length;for(var i=0;i<r;i++)c[i]()}function L(e){b?e():c[c.length]=e}function A(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)V(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function O(){var n=a.getElementsByTagName("body")[0],r=X(t);r.setAttribute("style","visibility: hidden;"),r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function u(){if(typeof s.GetVariable!=e)try{var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),N.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}catch(i){N.pv=[8,0,0]}else if(o<10){o++,setTimeout(u,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(N.pv[0]>0){var o=W(r);if(o)if($(h[n].swfVersion)&&!(N.wk&&N.wk<312))K(r,!0),i&&(s.success=!0,s.ref=_(r),s.id=r,i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));H(u,a,r,i)}else B(o),i&&i(s)}else{K(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p,s.id=p.id),i(s)}}}}function _(n){var r=null,i=W(n);return i&&i.nodeName==="OBJECT"&&(typeof i.SetVariable!==e?r=i:r=i.getElementsByTagName(t)[0]||i),r}function D(){return!w&&$("6.0.65")&&(N.win||N.mac)&&!(N.wk&&N.wk<312)}function P(e){if(!e)return;e.readyState==4?e.parentNode.removeChild(e):setTimeout(function(){P(e)},10)}function H(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=W(r);if(o){o.nodeName=="OBJECT"?(v=j(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=N.ie?"ActiveX":"PlugIn",l="MMredirectURL="+encodeURIComponent(u.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(N.ie&&o.readyState!=4){var c=X("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",P(o)}I(t,n,r)}}function B(e){if(N.ie&&e.readyState!=4){e.style.display="none";var t=X("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(j(e),t),P(e)}else e.parentNode.replaceChild(j(e),e)}function j(e){var n=X("div");if(N.win&&N.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function F(e,t){var n=X("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function I(n,r,s){var o,u=W(s);if(N.wk&&N.wk<312)return o;if(u){var a=N.ie?X("div"):X(t),f,l,c;typeof n.id==e&&(n.id=z(s)?s.id:s);for(c in r)r.hasOwnProperty(c)&&c.toLowerCase()!=="movie"&&q(a,c,r[c]);N.ie&&(a=F(n.data,a.innerHTML));for(f in n)n.hasOwnProperty(f)&&(l=f.toLowerCase(),l==="styleclass"?a.setAttribute("class",n[f]):l!=="classid"&&l!=="data"&&a.setAttribute(f,n[f]));N.ie?p[p.length]=n.id:(a.setAttribute("type",i),a.setAttribute("data",n.data)),u.parentNode.replaceChild(a,u),o=a}return o}function q(e,t,n){var r=X("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function R(e){var t=W(e);t&&t.nodeName=="OBJECT"&&(N.ie?(t.style.display="none",function n(){t.readyState==4?U(e):setTimeout(n,10)}()):t.parentNode.removeChild(t))}function U(e){var t=W(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function z(e){return e&&e.nodeType&&e.nodeType===1}function W(e){if(z(e))return e;var t=null;try{t=a.getElementById(e)}catch(n){}return t}function X(e){return a.createElement(e)}function V(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function $(e){e+="";var t=N.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function J(t,n,r,i){if(N.ie&&N.mac)return;var s=a.getElementsByTagName("head")[0];if(!s)return;var o=r&&typeof r=="string"?r:"screen";i&&(E=null,S=null);if(!E||S!=o){var u=X("style");u.setAttribute("type","text/css"),u.setAttribute("media",o),E=s.appendChild(u),N.ie&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=o}N.ie?E&&typeof E.addRule!=e&&E.addRule(t,n):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(t+" {"+n+"}"))}function K(e,t){if(!x)return;var n=t?"visible":"hidden";b&&W(e)?W(e).style.visibility=n:J("#"+e,"visibility:"+n)}function Q(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=!1,N=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=f.appName==="Microsoft Internet Explorer",m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&typeof f.mimeTypes!=e&&f.mimeTypes[i]&&f.mimeTypes[i].enabledPlugin&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=e)try{var y=new ActiveXObject(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),C=function(){if(!N.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&k(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",k,!1),N.ie&&(a.attachEvent(o,function t(){a.readyState=="complete"&&(a.detachEvent(o,t),k())}),u==top&&function n(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(n,0);return}k()}()),N.wk&&function r(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(r,0);return}k()}())}();c[0]=function(){l?O():M()};var G=function(){N.ie&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)R(p[r]);for(var i in N)N[i]=null;N=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(N.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,K(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(N.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};N.w3&&!(N.wk&&N.wk<312)&&n&&r&&i&&s&&o?(K(r,!1),L(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)if(a.hasOwnProperty(g)){var y=T?encodeURIComponent(g):g,b=T?encodeURIComponent(a[g]):a[g];typeof v.flashvars!=e?v.flashvars+="&"+y+"="+b:v.flashvars=y+"="+b}if($(o)){var w=I(p,v,r);p.id==r&&K(r,!0),h.success=!0,h.ref=w,h.id=w.id}else{if(u&&D()){p.data=u,H(p,v,r,c);return}K(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},enableUriEncoding:function(t){T=typeof t===e?!0:t},ua:N,getFlashPlayerVersion:function(){return{major:N.pv[0],minor:N.pv[1],release:N.pv[2]}},hasFlashPlayerVersion:$,createSWF:function(e,t,n){return N.w3?I(e,t,n):undefined},showExpressInstall:function(e,t,n,r){N.w3&&D()&&H(e,t,n,r)},removeSWF:function(e){N.w3&&R(e)},createCSS:function(e,t,n,r){N.w3&&J(e,t,n,r)},addDomLoadEvent:L,addLoadEvent:A,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return Q(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return Q(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=W(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(K(m,!0),N.ie&&(v.style.display="block")),g&&g(y)),w=!1}}}}(),window.swfobject.Sponsorpay=!0),function(e){var t=e,n=e.document,r="undefined",i=!0,s=!1,o="",u="object",a="string",f=null,l=null,c=null,h=e.parseInt,p=e.setTimeout;if(typeof e.flensed===r)e.flensed={};else if(typeof e.flensed.ua!==r)return;f=e.flensed,p(function(){var e="flensed.js",t=s,u=n.getElementsByTagName("script"),a=u.length;try{f.base_path.toLowerCase(),t=i}catch(l){f.base_path=o}if(typeof u!==r&&u!==null&&!t){var c=0;for(var h=0;h<a;h++)if(typeof u[h].src!==r&&(c=u[h].src.indexOf(e))>=0){f.base_path=u[h].src.substr(0,c);break}}},0),f.parseXMLString=function(n){var r=null;if(t.ActiveXObject)r=new e.ActiveXObject("Microsoft.XMLDOM"),r.async=s,r.loadXML(n);else{var i=new e.DOMParser;r=i.parseFromString(n,"text/xml")}return r},f.getObjectById=function(e){try{if(n.layers)return n.layers[e];if(n.all)return n.all[e];if(n.getElementById)return n.getElementById(e)}catch(t){}return null},f.createCSS=function(e,t,i,s){if(f.ua.ie&&f.ua.mac)return;var o=n.getElementsByTagName("head")[0];if(!o)return;var h=i&&typeof i===a?i:"screen";s&&(l=null,c=null);if(!l||c!==h){var p=n.createElement("style");p.setAttribute("type","text/css"),p.setAttribute("media",h),l=o.appendChild(p),f.ua.ie&&f.ua.win&&typeof n.styleSheets!==r&&n.styleSheets.length>0&&(l=n.styleSheets[n.styleSheets.length-1]),c=h}f.ua.ie&&f.ua.win?l&&typeof l.addRule===u&&l.addRule(e,t):l&&typeof n.createTextNode!==r&&l.appendChild(n.createTextNode(e+" {"+t+"}"))},f.bindEvent=function(e,t,n){t=t.toLowerCase();try{typeof e.addEventListener!==r?e.addEventListener(t.replace(/^on/,o),n,s):typeof e.attachEvent!==r&&e.attachEvent(t,n)}catch(i){}},f.unbindEvent=function(e,t,n){t=t.toLowerCase();try{typeof e.removeEventListener!==r?e.removeEventListener(t.replace(/^on/,o),n,s):typeof e.detachEvent!==r&&e.detachEvent(t,n)}catch(i){}},f.throwUnhandledError=function(t){throw new e.Error(t)},f.error=function(e,t,n,r){return{number:e,name:t,description:n,message:n,srcElement:r,toString:function(){return e+", "+t+", "+n}}},f.ua=function(){var i="Shockwave Flash",o="ShockwaveFlash.ShockwaveFlash",a="application/x-shockwave-flash",f=e.navigator,l=typeof n.getElementById!==r&&typeof n.getElementsByTagName!==r&&typeof n.createElement!==r,c=[0,0,0],p=null;if(typeof f.plugins!==r&&typeof f.plugins[i]===u)p=f.plugins[i].description,p&&(typeof f.mimeTypes===r||!f.mimeTypes[a]||!!f.mimeTypes[a].enabledPlugin)&&(p=p.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),c[0]=h(p.replace(/^(.*)\..*$/,"$1"),10),c[1]=h(p.replace(/^.*\.(.*)\s.*$/,"$1"),10),c[2]=/r/.test(p)?h(p.replace(/^.*r(.*)$/,"$1"),10):0);else if(typeof t.ActiveXObject!==r)try{var d=new e.ActiveXObject(o);d&&(p=d.GetVariable("$version"),p&&(p=p.split(" ")[1].split(","),c=[h(p[0],10),h(p[1],10),h(p[2],10)]))}catch(v){}var m=f.userAgent.toLowerCase(),g=f.platform.toLowerCase(),y=/webkit/.test(m)?parseFloat(m.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):s,b=s,w=0,E=g?/win/.test(g):/win/.test(m),S=g?/mac/.test(g):/mac/.test(m);b=/(msie) ([\w.]+)/.test(m);try{w=h(m.match(/msie (\d+)/)[1],10)}catch(x){}return{w3cdom:l,pv:c,webkit:y,ie:b,ieVer:w,win:E,mac:S}}()}(window),flensed.base_path=window.location.protocol+"//be.sponsorpay.com/assets/",function(e){var t=e,n=e.document,r="undefined",i=!0,s=!1,o="",u="object",a="function",f="string",l="div",c="onunload",h="none",p=null,d=null,v=null,m=null,g="flensed.js",y="checkplayer.js",b="swfobject.js",w=e.setTimeout,E=e.clearTimeout,S=e.setInterval,x=e.clearInterval;typeof e.flensed===r&&(e.flensed={});if(typeof e.flensed.checkplayer!==r)return;d=e.flensed,w(function(){function l(e,t,i){for(var s=0;s<a;s++)if(typeof u[s].src!==r&&u[s].src.indexOf(e)>=0)break;var o=n.createElement("script");o.setAttribute("src",d.base_path+e),typeof t!==r&&o.setAttribute("type",t),typeof i!==r&&o.setAttribute("language",i),n.getElementsByTagName("head")[0].appendChild(o)}function S(){E(T);try{t.detachEvent(c,arguments.callee)}catch(e){}}var o=s,u=n.getElementsByTagName("script"),a=u.length;try{d.base_path.toLowerCase(),o=i}catch(f){d.base_path=""}if(typeof u!==r&&u!==null&&!o){var h=0;for(var p=0;p<a;p++)if(typeof u[p].src!==r)if((h=u[p].src.indexOf(g))>=0||(h=u[p].src.indexOf(y))>=0){d.base_path=u[p].src.substr(0,h);break}}try{e.swfobject.getObjectById("a")}catch(v){l(b,"text/javascript")}try{d.ua.pv.join(".")}catch(m){l(g,"text/javascript")}try{t.attachEvent(c,S)}catch(x){}var T=w(function(){S();try{e.swfobject.getObjectById("a"),d.ua.pv.join(".")}catch(t){throw new e.Error("CheckPlayer dependencies failed to load.")}},2e4)},0),d.checkplayer=function(p,g,y,b){function ct(){try{et=n.getElementsByTagName("body")[0]}catch(t){}if(typeof et===r||et===null){F=w(ct,25);return}try{e.swfobject.getObjectById("a"),m=e.swfobject}catch(s){F=w(ct,25);return}ut=m.hasFlashPlayerVersion(k),ot=m.hasFlashPlayerVersion(tt),mt(),typeof nt===a&&nt(xt),z=i,ot?dt():it&&!j&&yt()}function ht(){typeof t.detachEvent!==r&&t.detachEvent(c,ht),v._ins=null;if(typeof $!==r&&$!==null){try{$.updateSWFCallback=null,Et=null}catch(n){}$=null}try{for(var i in xt)if(xt[i]!==Object.prototype[i])try{xt[i]=null}catch(s){}}catch(o){}xt=null,et=null,vt(),Z=null,nt=null,rt=null;try{for(var u in v)if(v[u]!==Object.prototype[u])try{v[u]=null}catch(a){}}catch(f){}v=null,d.checkplayer=null,d=null,e=null}function pt(e,t,n){Z[Z.length]={func:e,funcName:t,args:n}}function dt(){if(!z){B=w(dt,25);return}var t=0;try{t=Z.length}catch(n){}for(var r=0;r<t;r++)try{Z[r].func.apply(xt,Z[r].args),Z[r]=s}catch(i){ot=s,mt();if(typeof nt!==a)throw new e.Error("checkplayer::"+Z[r].funcName+"() call failed.");nt(xt)}Z=null}function vt(){E(F),F=null,E(B),B=null;for(var e in Y)Y[e]!==Object.prototype[e]&&(x(Y[e]),Y[e]=s);for(var t in _)_[t]!==Object.prototype[t]&&(E(_[t]),_[t]=s)}function mt(){try{xt.playerVersionDetected=st,xt.checkPassed=ot,xt.updateable=ut,xt.updateStatus=at,xt.updateControlsContainer=ft}catch(e){}}function gt(e,t){var n=t?"visible":"hidden",i=d.getObjectById(e);try{if(i!==null&&typeof i.style!==r&&i.style!==null)i.style.visibility=n;else try{d.createCSS("#"+e,"visibility:"+n)}catch(s){}}catch(o){try{d.createCSS("#"+e,"visibility:"+n)}catch(u){}}}function yt(){var e=et;if(typeof e===r||e===null){_[_.length]=w(yt,25);return}try{m.getObjectById("a")}catch(o){_[_.length]=w(yt,25);return}if(!j){j=i,vt();if(ut){U="CheckPlayerUpdate",q=U+"SWF",d.createCSS("#"+U,"width:221px;height:145px;position:absolute;left:5px;top:5px;border:none;background-color:#000000;display:block;"),d.createCSS("#"+q,"display:inline;position:absolute;left:1px;top:1px;"),ft=n.createElement(l),ft.id=U,e.appendChild(ft),gt(ft.id,s),mt();var u=null;try{u=t.top.location.toString()}catch(a){u=t.location.toString()}var f={swfId:q,MMredirectURL:u.replace(/&/g,"%26"),MMplayerType:d.ua.ie&&d.ua.win?"ActiveX":"PlugIn",MMdoctitle:n.title.slice(0,47)+" - Flash Player Installation"},c={allowScriptAccess:"always"},h={id:q,name:q};try{St(d.base_path+"updateplayer.swf",{appendToId:U},"219","143",f,c,h,{swfTimeout:3e3,swfCB:wt},i)}catch(p){bt();return}}else bt()}}function bt(t){typeof t===r&&(t="Flash Player not detected or not updateable."),at=v.UPDATE_FAILED,mt();if(typeof rt!==a)throw new e.Error("checkplayer::UpdatePlayer(): "+t);rt(xt)}function wt(e){e.status===v.SWF_LOADED?(E(Y["continueUpdate_"+q]),Y["continueUpdate_"+q]=s,$=e.srcElem,$.updateSWFCallback=Et,at=v.UPDATE_INIT,mt(),typeof rt===a&&rt(xt),gt(ft.id,i)):(e.status===v.SWF_FAILED||e.status===v.SWF_TIMEOUT)&&bt()}function Et(n){try{if(n===0){at=v.UPDATE_SUCCESSFUL,ft.style.display=h;try{t.open(o,"_self",o),t.close(),e.self.opener=t,e.self.close()}catch(r){}}else if(n===1)at=v.UPDATE_CANCELED,ft.style.display=h;else{if(n===2){ft.style.display=h,bt("The Flash Player update failed.");return}if(n===3){ft.style.display=h,bt("The Flash Player update timed out.");return}}}catch(i){}mt(),typeof rt===a&&rt(xt)}function St(t,c,p,g,y,b,k,_,D){c!==null&&(typeof c===f||typeof c.replaceId===f)&&gt(typeof c===f?c:c.replaceId,s);if(!z&&!D){pt(St,"DoSWF",arguments);return}if(ot||D){p+=o,g+=o;var B=typeof k===u?k:{};B.data=t,B.width=p,B.height=g;var j=typeof b===u?b:{};if(typeof y===u)for(var F in y)y[F]!==Object.prototype[F]&&(typeof j.flashvars!==r?j.flashvars+="&"+F+"="+y[F]:j.flashvars=F+"="+y[F]);var q=null;typeof k.id!==r?q=k.id:c===null||typeof c!==f&&typeof c.replaceId!==f?q="swf_"+K.length:q=typeof c===f?c:c.replaceId;var U=null;if(c===null||c===s||typeof c.appendToId===f){var $=null;c!==null&&c!==s&&typeof c.appendToId===f?$=d.getObjectById(c.appendToId):$=et;var Z=n.createElement(l);U=Z.id=q,$.appendChild(Z)}else U=typeof c.replaceId===f?c.replaceId:c;var tt=function(){},nt=0,rt=o,it=null;typeof _!==r&&_!==null&&(typeof _===u?(typeof _.swfCB!==r&&_.swfCB!==null&&(tt=_.swfCB),typeof _.swfTimeout!==r&&e.parseInt(_.swfTimeout,10)>0&&(nt=_.swfTimeout),typeof _.swfEICheck!==r&&_.swfEICheck!==null&&_.swfEICheck!==o&&(rt=_.swfEICheck)):typeof _===a&&(tt=_));try{it=m.createSWF(B,j,U)}catch(st){}if(it!==null)K[K.length]=q,typeof tt===a&&(tt({status:v.SWF_INIT,srcId:q,srcElem:it}),Y[q]=S(function(){var e=d.getObjectById(q);if(typeof e!==r&&e!==null&&(e.nodeName==="OBJECT"||e.nodeName==="EMBED")){var t=0;try{t=e.PercentLoaded()}catch(n){}if(t>0){nt>0&&(E(Y["DoSWFtimeout_"+q]),Y["DoSWFtimeout_"+q]=s);if(t<100)w(function(){tt({status:v.SWF_LOADING,srcId:q,srcElem:e})},1);else{x(Y[q]),Y[q]=s,w(function(){tt({status:v.SWF_LOADED,srcId:q,srcElem:e})},1);if(rt!==o){var u=s;Y[q]=S(function(){if(!u&&typeof e[rt]===a){u=i;try{e[rt](),x(Y[q]),Y[q]=s,tt({status:v.SWF_EI_READY,srcId:q,srcElem:e})}catch(t){}u=s}},25)}}}}},50),nt>0&&(Y["DoSWFtimeout_"+q]=w(function(){var e=d.getObjectById(q);if(typeof e!==r&&e!==null&&(e.nodeName==="OBJECT"||e.nodeName==="EMBED")){var t=0;try{t=e.PercentLoaded()}catch(n){}t<=0&&(x(Y[q]),Y[q]=s,d.ua.ie&&d.ua.win&&e.readyState!==4?(e.id="removeSWF_"+e.id,e.style.display=h,Y[e.id]=S(function(){e.readyState===4&&(x(Y[e.id]),Y[e.id]=s,m.removeSWF(e.id))},500)):m.removeSWF(e.id),Y[q]=s,Y["DoSWFtimeout_"+q]=s,tt({status:v.SWF_TIMEOUT,srcId:q,srcElem:e}))}},nt)));else{if(typeof tt!==a)throw new e.Error("checkplayer::DoSWF(): SWF could not be loaded.");tt({status:v.SWF_FAILED,srcId:q,srcElem:null})}}else{if(typeof tt!==a)throw new e.Error("checkplayer::DoSWF(): Minimum Flash Version not detected.");tt({status:v.SWF_FAILED,srcId:q,srcElem:null})}}if(typeof v._ins!==r)return v._ins.ready()&&setTimeout(function(){g(v._ins)},0),v._ins;var k="6.0.65",_=[],B=null,j=s,F=null,q=null,U=o,z=s,$=null,K=[],Y={},Z=[],et=null,tt=null,nt=null,rt=null,it=s,st=null,ot=s,ut=s,at=s,ft=null,lt=function(){function e(){E(F);try{t.detachEvent(c,e)}catch(n){}}typeof p!==r&&p!==null&&p!==s?tt=p+o:tt="0.0.0",typeof g===a&&(nt=g),typeof y!==r&&(it=!!y),typeof b===a&&(rt=b);try{t.attachEvent(c,e)}catch(n){}(function(){try{d.bindEvent(t,c,ht)}catch(r){F=w(arguments.callee,25);return}e(),st=d.ua.pv.join("."),F=w(ct,1)})()}(),xt={playerVersionDetected:st,versionChecked:tt,checkPassed:ot,UpdatePlayer:yt,DoSWF:function(e,t,n,r,i,o,u,a){St(e,t,n,r,i,o,u,a,s)},ready:function(){return z},updateable:ut,updateStatus:at,updateControlsContainer:ft};return v._ins=xt,xt},v=d.checkplayer,v.UPDATE_INIT=1,v.UPDATE_SUCCESSFUL=2,v.UPDATE_CANCELED=3,v.UPDATE_FAILED=4,v.SWF_INIT=5,v.SWF_LOADING=6,v.SWF_LOADED=7,v.SWF_FAILED=8,v.SWF_TIMEOUT=9,v.SWF_EI_READY=10,v.module_ready=function(){}}(window),function(e){var t=e,n=e.document,r="undefined",i=!0,s=!1,o="",u="object",a="function",f="string",l="div",c="onunload",h=null,p=null,d=null,v=null,m=0,g=[],y=null,b=null,w="flXHR.js",E="flensed.js",S="flXHR.vbs",x="checkplayer.js",T="flXHR.swf",N=e.parseInt,C=e.setTimeout,k=e.clearTimeout,L=e.setInterval,A=e.clearInterval,O="instanceId",M="readyState",_="onreadystatechange",D="ontimeout",P="onerror",H="binaryResponseBody",B="xmlResponseText",j="loadPolicyURL",F="noCacheHeader",I="sendTimeout",q="appendToId",R="swfIdPrefix";typeof e.flensed===r&&(e.flensed={});if(typeof e.flensed.flXHR!==r)return;p=e.flensed,C(function(){function h(e,t,i){for(var s=0;s<f;s++)if(typeof a[s].src!==r&&a[s].src.indexOf(e)>=0)break;var o=n.createElement("script");o.setAttribute("src",p.base_path+e),typeof t!==r&&o.setAttribute("type",t),typeof i!==r&&o.setAttribute("language",i),n.getElementsByTagName("head")[0].appendChild(o)}function N(){k(T);try{t.detachEvent(c,N)}catch(e){}}function O(){k(A);try{t.detachEvent(c,O)}catch(e){}}var u=s,a=n.getElementsByTagName("script"),f=a.length;try{p.base_path.toLowerCase(),u=i}catch(l){p.base_path=o}if(typeof a!==r&&a!==null&&!u){var m=0;for(var g=0;g<f;g++)if(typeof a[g].src!==r)if((m=a[g].src.indexOf(E))>=0||(m=a[g].src.indexOf(w))>=0){p.base_path=a[g].src.substr(0,m);break}}try{p.checkplayer.module_ready()}catch(y){h(x,"text/javascript")}var T=null;(function(){try{p.ua.pv.join(".")}catch(i){T=C(arguments.callee,25);return}p.ua.win&&p.ua.ie&&h(S,"text/vbscript","vbscript"),p.binaryToString=function(e,t){t=p.ua.win&&p.ua.ie&&typeof t!==r?!!t:!p.ua.win||!p.ua.ie;if(!t)try{return flXHR_vb_BinaryToString(e)}catch(n){}var i=o,s=[];try{for(var u=0;u<e.length;u++)s[s.length]=String.fromCharCode(e[u]);i=s.join(o)}catch(a){}return i},p.bindEvent(t,c,function(){try{e.flensed.unbindEvent(t,c,arguments.callee);for(var n in b)if(b[n]!==Object.prototype[n])try{b[n]=null}catch(r){}p.flXHR=null,b=null,p=null,v=null,d=null}catch(i){}})})();if(T!==null)try{t.attachEvent(c,N)}catch(L){}var A=null;try{t.attachEvent(c,O)}catch(M){}A=C(function(){O();try{p.checkplayer.module_ready()}catch(e){}},2e4)},0),p.flXHR=function(w){function Et(){dt===null?rt=n.getElementsByTagName("body")[0]:rt=p.getObjectById(dt);try{rt.nodeName.toLowerCase(),p.checkplayer.module_ready(),d=p.checkplayer}catch(e){A=C(Et,25);return}if(v===null&&typeof d._ins===r)try{v=new d(b.MIN_PLAYER_VERSION,jt,s,Ft)}catch(t){Lt(b.DEPENDENCY_ERROR,"flXHR: checkplayer Init Failed","The initialization of the 'checkplayer' library failed to complete.");return}else v=d._ins,St()}function St(){if(v===null||!v.checkPassed){A=C(St,25);return}y===null&&dt===null&&(p.createCSS("."+pt,"left:-1px;top:0px;width:1px;height:1px;position:absolute;"),y=i);var e=n.createElement(l);e.id=X,e.className=pt,rt.appendChild(e),rt=null;var t={},r={allowScriptAccess:"always"},s={id:X,name:X,styleclass:pt},o={swfCB:xt,swfEICheck:"reset"};try{v.DoSWF(p.base_path+T,X,"1","1",t,r,s,o)}catch(u){Lt(b.DEPENDENCY_ERROR,"flXHR: checkplayer Call Failed","A call to the 'checkplayer' library failed to complete.");return}}function xt(e){if(e.status!==d.SWF_EI_READY)return;Ot(),tt=p.getObjectById(X),tt.setId(X),mt!==o&&tt.loadPolicy(mt),tt.autoNoCacheHeader(at),tt.returnBinaryResponseBody(ft),tt.doOnReadyStateChange=Ct,tt.doOnError=Lt,tt.sendProcessed=It,tt.chunkResponse=Nt,V=0,Ht(),Pt();if(typeof gt===a)try{gt(nt)}catch(t){Lt(b.HANDLER_ERROR,"flXHR::onreadystatechange(): Error","An error occurred in the handler function. ("+t.message+")");return}Dt()}function Tt(){try{e.flensed.unbindEvent(t,c,Tt)}catch(n){}try{for(var i=0;i<g.length;i++)g[i]===nt&&(g[i]=s)}catch(o){}try{for(var u in nt)if(nt[u]!==Object.prototype[u])try{nt[u]=null}catch(a){}}catch(f){}nt=null,Ot();if(typeof tt!==r&&tt!==null){try{tt.abort()}catch(l){}try{tt.doOnReadyStateChange=null,Ct=null}catch(h){}try{tt.doOnError=null,doOnError=null}catch(p){}try{tt.sendProcessed=null,It=null}catch(d){}try{tt.chunkResponse=null,Nt=null}catch(v){}tt=null;try{e.swfobject.removeSWF(X)}catch(m){}}_t(),gt=null,yt=null,bt=null,Y=null,Q=null,it=null,rt=null}function Nt(){ft&&typeof arguments[0]!==r?(it=it!==null?it:[],it=it.concat(arguments[0])):typeof arguments[0]===f&&(it=it!==null?it:o,it+=arguments[0])}function Ct(){typeof arguments[0]!==r&&(V=arguments[0]);if(V===4){Ot();if(ft&&it!==null)try{G=p.binaryToString(it,i);try{Q=flXHR_vb_StringToBinary(G)}catch(e){Q=it}}catch(t){}else G=it;it=null;if(G!==o&&lt)try{Y=p.parseXMLString(G)}catch(n){Y={}}}typeof arguments[1]!==r&&(Z=arguments[1]),typeof arguments[2]!==r&&(et=arguments[2]),kt(V)}function kt(e){$=e,Ht(),Pt(),nt[M]=Math.max(0,e);if(typeof gt===a)try{gt(nt)}catch(t){Lt(b.HANDLER_ERROR,"flXHR::onreadystatechange(): Error","An error occurred in the handler function. ("+t.message+")");return}}function Lt(){Ot(),_t(),ot=i;var e;try{e=new p.error(arguments[0],arguments[1],arguments[2],nt)}catch(t){function n(){function r(){return e+", "+t+", "+n}this.number=0,this.name="flXHR Error: Unknown",this.description="Unknown error from 'flXHR' library.",this.message=this.description,this.srcElement=nt;var e=this.number,t=this.name,n=this.description;this.toString=r}e=new n}var r=s;try{typeof yt===a&&(yt(e),r=i)}catch(o){var u=e.toString();function f(){function r(){return e+", "+t+", "+n}this.number=b.HANDLER_ERROR,this.name="flXHR::onerror(): Error",this.description="An error occured in the handler function. ("+o.message+")\nPrevious:["+u+"]",this.message=this.description,this.srcElement=nt;var e=this.number,t=this.name,n=this.description;this.toString=r}e=new f}r||C(function(){p.throwUnhandledError(e.toString())},1)}function At(){qt(),ot=i;if(typeof bt===a)try{bt(nt)}catch(e){Lt(b.HANDLER_ERROR,"flXHR::ontimeout(): Error","An error occurred in the handler function. ("+e.message+")");return}else Lt(b.TIMEOUT_ERROR,"flXHR: Operation Timed out","The requested operation timed out.")}function Ot(){k(A),A=null,k(W),W=null,k(U),U=null}function Mt(e,t,n){L[L.length]={func:e,funcName:t,args:n},st=s}function _t(){if(!st){st=i;var e=L.length;for(var t=0;t<e;t++)try{L[t]=s}catch(n){}L=[]}}function Dt(){if(V<0){U=C(Dt,25);return}if(!st){for(var e=0;e<L.length;e++)try{L[e]!==s&&(L[e].func.apply(nt,L[e].args),L[e]=s)}catch(t){Lt(b.HANDLER_ERROR,"flXHR::"+
L[e].funcName+"(): Error","An error occurred in the "+L[e].funcName+"() function.");return}st=i}}function Pt(){try{nt[O]=ut,nt[M]=$,nt.status=Z,nt.statusText=et,nt.responseText=G,nt.responseXML=Y,nt.responseBody=Q,nt[_]=gt,nt[P]=yt,nt[D]=bt,nt[j]=mt,nt[F]=at,nt[H]=ft,nt[B]=lt}catch(e){}}function Ht(){try{ut=nt[O],nt.timeout!==null&&(h=N(nt.timeout,10))>0&&(vt=h),gt=nt[_],yt=nt[P],bt=nt[D],nt[j]!==null&&(nt[j]!==mt&&V>=0&&tt.loadPolicy(nt[j]),mt=nt[j]),nt[F]!==null&&(nt[F]!==at&&V>=0&&tt.autoNoCacheHeader(nt[F]),at=nt[F]),nt[H]!==null&&(nt[H]!==ft&&V>=0&&tt.returnBinaryResponseBody(nt[H]),ft=nt[H]),lt!==null&&(lt=!!nt[B])}catch(e){}}function Bt(){qt();try{tt.reset()}catch(e){}Z=null,et=null,G=null,Y=null,Q=null,it=null,ot=s,Pt(),mt=o,Ht()}function jt(e){e.checkPassed?St():ct?v.UpdatePlayer():Lt(b.PLAYER_VERSION_ERROR,"flXHR: Insufficient Flash Player Version","The Flash Player was either not detected, or the detected version ("+e.playerVersionDetected+") was not at least the minimum version ("+b.MIN_PLAYER_VERSION+") needed by the 'flXHR' library.")}function Ft(e){e.updateStatus===d.UPDATE_CANCELED?Lt(b.PLAYER_VERSION_ERROR,"flXHR: Flash Player Update Canceled","The Flash Player was not updated."):e.updateStatus===d.UPDATE_FAILED&&Lt(b.PLAYER_VERSION_ERROR,"flXHR: Flash Player Update Failed","The Flash Player was either not detected or could not be updated.")}function It(){vt!==null&&vt>0&&(W=C(At,vt))}function qt(){Ot(),_t(),Ht(),V=0,$=0;try{tt.abort()}catch(e){Lt(b.CALL_ERROR,"flXHR::abort(): Failed","The abort() call failed to complete.")}Pt()}function Rt(){Ht();if(typeof arguments[0]===r||typeof arguments[1]===r)Lt(b.CALL_ERROR,"flXHR::open(): Failed","The open() call requires 'method' and 'url' parameters.");else{(V>0||ot)&&Bt(),$===0?Ct(1):V=1;var e=arguments[0],t=arguments[1],n=typeof arguments[2]!==r?arguments[2]:i,s=typeof arguments[3]!==r?arguments[3]:o,u=typeof arguments[4]!==r?arguments[4]:o;try{tt.autoNoCacheHeader(at),tt.open(e,t,n,s,u)}catch(a){Lt(b.CALL_ERROR,"flXHR::open(): Failed","The open() call failed to complete.")}}}function Ut(){Ht();if(V<=1&&!ot){var e=typeof arguments[0]!==r?arguments[0]:o;$===1?Ct(2):V=2;try{tt.autoNoCacheHeader(at),tt.send(e)}catch(t){Lt(b.CALL_ERROR,"flXHR::send(): Failed","The send() call failed to complete.")}}else Lt(b.CALL_ERROR,"flXHR::send(): Failed","The send() call cannot be made at this time.")}function zt(){Ht();if(typeof arguments[0]===r||typeof arguments[1]===r)Lt(b.CALL_ERROR,"flXHR::setRequestHeader(): Failed","The setRequestHeader() call requires 'name' and 'value' parameters.");else if(!ot){var e=typeof arguments[0]!==r?arguments[0]:o,t=typeof arguments[1]!==r?arguments[1]:o;try{tt.setRequestHeader(e,t)}catch(n){Lt(b.CALL_ERROR,"flXHR::setRequestHeader(): Failed","The setRequestHeader() call failed to complete.")}}}function Wt(){return Ht(),o}function Xt(){return Ht(),[]}var E=s;if(w!==null&&typeof w===u&&typeof w.instancePooling!==r){E=!!w.instancePooling;if(E){var S=function(){for(var e=0;e<g.length;e++){var t=g[e];if(t[M]===4)return t.Reset(),t.Configure(w),t}return null}();if(S!==null)return S}}var x=++m,L=[],A=null,U=null,W=null,X=null,V=-1,$=0,Q=null,G=null,Y=null,Z=null,et=null,tt=null,nt=null,rt=null,it=null,st=i,ot=s,ut="flXHR_"+x,at=i,ft=s,lt=i,ct=s,ht="flXHR_swf",pt="flXHRhideSwf",dt=null,vt=-1,mt=o,gt=null,yt=null,bt=null,wt=function(){function e(){k(A);try{t.detachEvent(c,e)}catch(n){}}typeof w===u&&w!==null&&(typeof w[O]!==r&&w[O]!==null&&w[O]!==o&&(ut=w[O]),typeof w[R]!==r&&w[R]!==null&&w[R]!==o&&(ht=w[R]),typeof w[q]!==r&&w[q]!==null&&w[q]!==o&&(dt=w[q]),typeof w[j]!==r&&w[j]!==null&&w[j]!==o&&(mt=w[j]),typeof w[F]!==r&&(at=!!w[F]),typeof w[H]!==r&&(ft=!!w[H]),typeof w[B]!==r&&(lt=!!w[B]),typeof w.autoUpdatePlayer!==r&&(ct=!!w.autoUpdatePlayer),typeof w[I]!==r&&(h=N(w[I],10))>0&&(vt=h),typeof w[_]!==r&&w[_]!==null&&(gt=w[_]),typeof w[P]!==r&&w[P]!==null&&(yt=w[P]),typeof w[D]!==r&&w[D]!==null&&(bt=w[D])),X=ht+"_"+x;try{t.attachEvent(c,e)}catch(n){}(function(){try{p.bindEvent(t,c,Tt)}catch(r){A=C(arguments.callee,25);return}e(),A=C(Et,1)})()}();return nt={readyState:$,responseBody:Q,responseText:G,responseXML:Y,status:Z,statusText:et,timeout:vt,open:function(){Ht(),nt[M]===0&&kt(1);if(!st||V<0){Mt(Rt,"open",arguments);return}Rt.apply({},arguments)},send:function(){Ht(),nt[M]===1&&kt(2);if(!st||V<0){Mt(Ut,"send",arguments);return}Ut.apply({},arguments)},abort:qt,setRequestHeader:function(){Ht();if(!st||V<0){Mt(zt,"setRequestHeader",arguments);return}zt.apply({},arguments)},getResponseHeader:Wt,getAllResponseHeaders:Xt,onreadystatechange:gt,ontimeout:bt,instanceId:ut,loadPolicyURL:mt,noCacheHeader:at,binaryResponseBody:ft,xmlResponseText:lt,onerror:yt,Configure:function(e){typeof e===u&&e!==null&&(typeof e[O]!==r&&e[O]!==null&&e[O]!==o&&(ut=e[O]),typeof e[F]!==r&&(at=!!e[F],V>=0&&tt.autoNoCacheHeader(at)),typeof e[H]!==r&&(ft=!!e[H],V>=0&&tt.returnBinaryResponseBody(ft)),typeof e[B]!==r&&(lt=!!e[B]),typeof e[_]!==r&&e[_]!==null&&(gt=e[_]),typeof e[P]!==r&&e[P]!==null&&(yt=e[P]),typeof e[D]!==r&&e[D]!==null&&(bt=e[D]),typeof e[I]!==r&&(h=N(e[I],10))>0&&(vt=h),typeof e[j]!==r&&e[j]!==null&&e[j]!==o&&e[j]!==mt&&(mt=e[j],V>=0&&tt.loadPolicy(mt)),Pt())},Reset:Bt,Destroy:Tt},E&&(g[g.length]=nt),nt},b=p.flXHR,b.HANDLER_ERROR=10,b.CALL_ERROR=11,b.TIMEOUT_ERROR=12,b.DEPENDENCY_ERROR=13,b.PLAYER_VERSION_ERROR=14,b.SECURITY_ERROR=15,b.COMMUNICATION_ERROR=16,b.MIN_PLAYER_VERSION="9.0.124",b.module_ready=function(){}}(window),typeof _!="undefined"&&typeof _.noConflict=="function"&&(Sponsorpay._=_.noConflict()),typeof Backbone!="undefined"&&typeof Backbone.noConflict=="function"&&(Sponsorpay.Backbone=Backbone.noConflict()),typeof SP_pm!="undefined"&&(Sponsorpay.pm=SP_pm),Sponsorpay.Lib.Xdm=function(){this.params={},this.baseUrl="",this.flashGateway,this.$iframeGateway,Sponsorpay._.extend(this,Sponsorpay.Backbone.Events)},Sponsorpay.Lib.Xdm.prototype.setup=function(e){function n(){if(typeof t.flashGateway!="undefined")return;typeof flensed.flXHR!="undefined"&&Sponsorpay.Lib.Utils.FlashAvailable()?(flensed.base_path=t.baseUrl,t.flashGateway=new flensed.flXHR({autoUpdatePlayer:!1,instanceId:"sp_flxhr_"+(0|Math.random()*1e3),sendTimeout:2e3,noCacheHeader:!1,onerror:function(){}})):t.flashGateway=null}function r(){if(typeof t.$iframeGateway!="undefined")return;Sponsorpay.$("#sp-bexdm-iframe").remove(),t.$iframeGateway=Sponsorpay.$('<iframe id="sp-bexdm-iframe" style="display: none" src="about:blank"></iframe>'),t.$iframeGateway.appendTo("body"),t.$iframeGateway.off("load")}var t=this;this.params=e,this.baseUrl=window.location.protocol+"//"+this.params.apiHost+"/"+this.params.basePath+"/";switch(this.params.method){case"flash":n();break;case"iframe":r()}},Sponsorpay.Lib.Xdm.prototype.get=function(e,t){function r(){if(!n.flashGateway){n.trigger("success",null);return}n.flashGateway.Configure({onreadystatechange:function(e){e.readyState===4&&(e.status===200?n.trigger("success",t==="xml"?e.responseXML:e.responseText):n.trigger("error","Error while retrieving data "+e.statusText))},onerror:function(e){n.trigger("error",e.message?e.message:e)},ontimeout:function(){n.trigger("timeout")}}),n.flashGateway.open("GET",e),n.flashGateway.send()}function i(){n.$iframeGateway.on("load",function(){Sponsorpay.Messenger.bind("bexdm_result",function(e){clearTimeout(t),n.trigger("success",e)}),Sponsorpay.Messenger.post("bexdm_query",{target:n.$iframeGateway.get(0).contentWindow})});var t=setTimeout(function(){n.$iframeGateway.off("load"),n.trigger("timeout")},2e3);n.$iframeGateway.attr("src",n.baseUrl+"bexdm.html?"+e+"&v=9")}var n=this;switch(this.params.method){case"flash":r();break;case"iframe":i()}},Sponsorpay.Lib.NetworkValidator=function(e,t){this.xdm=e||new Sponsorpay.Lib.Xdm,this.apiHost=t.apiHost,Sponsorpay._.extend(this,Sponsorpay.Backbone.Events)},Sponsorpay.Lib.NetworkValidator.prototype.perform=function(e){function o(){var e,s,o;r=="VISIBLE MEASURES"?(s=t.match(/^Visible Measures:(\d+)/),e="n=visible+measures&p="+(s?parseInt(s[1],10):0)):r=="UNRULY"?(s=t.match(/^Unruly:(\d+)/),o={placement_id:s?parseInt(s[1],10):0,application_name:n},e="n=unruly&p="+encodeURIComponent(JSON.stringify(o))):e=t,i.xdm.get(e,"text")}this.xdm.bound=!1;if(!e){this.trigger("success"),this.trigger("performed");return}var t=Sponsorpay.$.trim(e.get("network_endpoint")),n=Sponsorpay.$.trim(e.get("application_name")),r="",i=this;r=e.getValidator();if(r!=""){if(!e.canValidate()){this.trigger("error",e),this.trigger("performed",e);return}this.xdm.setup({method:r=="VISIBLE MEASURES"||r=="UNRULY"?"iframe":"flash",apiHost:this.apiHost,basePath:"/assets"}),this.xdm.bind("error",function(t){i.trigger("error",e,t),i.trigger("performed",e)}),this.xdm.bind("timeout",function(t){i.trigger("error",e,"Timeout occurred while contacting the XDM service"),i.trigger("performed",e)});if(r=="VAST")return i.VAST_findMediaFile(t,e);var s;this.xdm.bind("success",function(t){if(null===t)s=!1;else switch(r){case"GAMBIT":s=i.GAMBIT_hasVideo(t,e);break;case"JUNGROUP":s="0"!==t;break;case"VISIBLE MEASURES":s=t;break;case"UNRULY":s=t;break;default:s=!1}i.trigger(s?"success":"failure",e),i.trigger("performed",e)}),o()}else i.trigger("success",e),i.trigger("performed",e)},Sponsorpay.Lib.NetworkValidator.prototype.VAST_findMediaFile=function(e,t){var n=this,r;this.xdm.bind("success",function(e){if(t.get("network_validation_performed"))return;typeof r=="undefined"&&(r=e);var i=n.VAST_hasVideo(e);typeof i=="string"?n.xdm.get(i,"text"):i?(t.set({vastXML:r}),n.trigger("success",t),n.trigger("performed",t)):(n.trigger("failure",t),n.trigger("performed",t))}),this.xdm.get(e,"text"),setTimeout(function(){if(t.get("network_validation_performed"))return;n.trigger("error",t,"Timemout occurred while following VAST tags."),n.trigger("performed",t)},1e4)},Sponsorpay.Lib.NetworkValidator.prototype.VAST_hasVideo=function(e){if(typeof Sponsorpay.$!="undefined"&&typeof e!="undefined"&&"postMessage"in window&&e!==""){try{var t=Sponsorpay.$(Sponsorpay.$.parseXML(e.replace(/^\s+|\s+$/g,"")))}catch(n){return!1}return t.find("MediaFile").length>0?!0:t.find("VASTAdTagURL").length>0?Sponsorpay.$.trim(t.find("VASTAdTagURL").text()):t.find("VASTAdTagURI").length>0?Sponsorpay.$.trim(t.find("VASTAdTagURI").text()):!1}return!1},Sponsorpay.Lib.NetworkValidator.prototype.GAMBIT_hasVideo=function(t,n){if(typeof Sponsorpay.$!="undefined"&&typeof t!="undefined"&&"postMessage"in window&&t!=="[]"){try{var r=e(Sponsorpay.$.parseJSON(t))}catch(i){}var s=!1;return r.each(function(e,t){return t.click_url&&t.width&&t.height&&t.length&&t.gender===null&&t.max_age===null&&t.min_age===null?(n.set({gambitJSON:{url:t.click_url,duration:t.length,width:t.width,height:t.height},width:t.width,height:t.height}),s=!0,!1):!0}),s}return!1},Sponsorpay.Lib.Cookies={data:{},prefix:"SP",keys:[],_setter:null,_getter:null,_scrambler:null,init:function(e){this.data=e},safariHack:!1,state:{formSubmitted:!1},get:function(e,t){this._isSafari()&&this._setupSafari();var n=this._generateName(e);typeof this._getter!="function"&&(this._getter=this._get);var r=this._getter.apply(this,[n]);return!t&&r!==""&&typeof this._scrambler=="function"&&(r=this._scrambler.apply(this,[r,!1])),r},set:function(e,t,n){this._isSafari()&&this._setupSafari(),n=n||this.data.expires||14;var r=new Date;r.setDate(r.getDate()+parseInt(n,10));var i=this._generateName(e);return typeof this._setter!="function"&&(this._setter=this._set),t!==""&&typeof this._scrambler=="function"&&(t=this._scrambler.apply(this,[t,!0])),this._setter.apply(this,[i,t,r]),this.keys[this.keys.length]=e,this.keys=Sponsorpay._.uniq(this.keys),!0},_set:function(e,t,n){var t=e+"="+String(t)+";"+"expires="+n.toUTCString()+";"+"path=/;";document.cookie=t},_get:function(e){var t=document.cookie.split("; ");for(var n=0,r;r=t[n]&&t[n].split("=");n++)if(r[0]===e)return r[1]||"";return null},setSetter:function(e){typeof e=="function"&&(this._setter=e)},setGetter:function(e){typeof e=="function"&&(this._getter=e)},setScrambler:function(e){typeof e=="function"&&(this._scrambler=e)},resetAccessors:function(){this._getter=this._setter=this._scrambler=null},remove:function(e){null!==this.get(e)&&this.set(e,"",-1)},removeAll:function(){var e=this;Sponsorpay._.each(this.keys,function(t){e.remove(t)}),this.keys=[]},getLastValue:function(){return this.keys.length>0?this.get(this.keys[this.keys.length-1]):null},getLastName:function(){return this.keys.length>0?this.keys[this.keys.length-1]:null},_isSafari:function(){return Sponsorpay.Lib.Utils.browser.safari()&&!this.safariHack},_generateName:function(e){return this.prefix+"_"+this.data.appid+"_"+this.data.uid+"_"+e},_setupSafari:function(){var e=this;this.safariHack=!0;var t="<iframe id='sp-sponsorpay-cookies-iframe' name='sp-sponsorpay-cookies-iframe' style='display:none;'></iframe><form id='sp-sponsorpay-cookies-form' enctype='application/x-www-form-urlencoded' action='"+window.location.protocol+"//"+this.data.apiHost+"/setup_cookies' "+"target='sp-sponsorpay-cookies-iframe' "+"method='post'"+"></form>";Sponsorpay.$(document.body).append(t),Sponsorpay.$("#sp-sponsorpay-cookies-iframe").attr("src",window.location.protocol+"//"+this.data.apiHost+"/blank.html").load(function(){e.state.formSubmitted||(e.state.formSubmitted=!0,Sponsorpay.$("#sp-sponsorpay-cookies-form").submit())})}},typeof Sponsorpay=="undefined"&&(Sponsorpay={}),Sponsorpay.Tracker={plotPixel:"be.gif",host:"//tracking.sponsorpay.com/",timerStartedAt:0,setPlotPixel:function(e){this.plotPixel=e},getPlotPixel:function(){return this.plotPixel},setHost:function(e){this.host=e},startTimer:function(){this.timerStartedAt=(new Date).getTime()},resetTimer:function(){this.timerStartedAt=0},plot:function(e,t,n){this._getPixel(e,this.plotPixel,t,n)},track:function(e,t,n){if(t.params&&t.params.lpid){typeof n=="function"&&n.call();return}this._getPixel(e,"ofw.gif",t,n)},_getPixel:function(e,t,n,r){function a(){o||(o=!0,r.call())}var i=this,s;Sponsorpay.Collections&&n instanceof Sponsorpay.Backbone.Collection?s=this._buildDataForPixelFromCollection(n):s=this._buildDataForPixelFromOptions(n);if(!s)return;if(r&&typeof r=="function"){var o=!1,u=new Image;u.onload=a,u.src=i._buildPixelUrl(s,t,e),setTimeout(a,500)}else setTimeout(function(e,t,n){return function(){var r=new Image;r.src=i._buildPixelUrl(e,t,n)}}(s,t,e),0)},_buildDataForPixelFromCollection:function(e){if(!e.params||!e.params.appid)return null;var t=e.at(0);return{userid:e.params?e.params.uid:"",appid:e.params?e.params.appid:"",country:e.metainfo?e.metainfo.country?e.metainfo.country.toUpperCase():"":"",language:e.metainfo?e.metainfo.language?e.metainfo.language.toUpperCase():"":"",integration:e.params?e.params.integration:"",tracking:e.params?typeof e.params.tracking!="undefined"?e.params.tracking:6:6,offers:{ids:t&&t.get("track")&&t.id||"",page:1}}},_buildDataForPixelFromOptions:function(e){return{userid:e.userid||"",appid:e.appid||"",country:e.country?e.country.toUpperCase():"",language:e.language?e.language.toUpperCase():"",integration:"",tracking:typeof e.tracking!="undefined"?e.tracking:6,offers:{ids:e.lpid||"",page:1}}},_buildPixelUrl:function(e,t,n){var r=window.location.protocol+this.host+t+"?"+"ts="+Math.round((new Date).getTime()/1e3),i=encodeURIComponent;return r+="&u="+i(e.userid)+"&a="+i(e.appid)+"&c="+i(e.country)+"&l="+i(e.language)+"&t="+i(e.integration)+"&o="+i(e.offers.ids)+"&p="+i(e.offers.page)+"&m="+i(n)+"&i="+i(e.tracking)+"&s="+(this.timerStartedAt===0?"0":(((new Date).getTime()-this.timerStartedAt)/1e3).toFixed(2)),r}},Sponsorpay.Templates.brandengage_dedicated_wrapper_tmpl=" <div id='_sp_center' style='width: <%= width %>; height: <%= height %>; display:none; overflow:hidden;'> </div> ",Sponsorpay.Templates.brandengage_lightbox_wrapper_tmpl=" <div id='sp_lightbox' style='display: none;'>   <div id='_sp_overlay_iframe'>    <div id='_sp_content' style='background-color: <%= background_color %>;'>       <div id='_sp_main_content'>   <% if (enable_close) { %>         <a id='sp_close_x' href='#' style='background: url(\"//<%= apiHost %>/assets/web/x-close-dark-shadowed.png\") no-repeat 0 0;'>&nbsp;</a>   <% } %>         <div id='_sp_center' style='height: <%= lightbox_height %>; overflow: hidden;'></div>       </div>    </div>  </div></div>",Sponsorpay.Templates.brandengage_lightbox_fade_tmpl="<div id='sp_fade_background' style='background-image: url(\"//<%= apiHost %>/assets/web/layer-background.png\"); -moz-opacity: <%= opacity %>; opacity: <%= opacity %>; filter: alpha(opacity=<%= alpha %>);'></div>",Sponsorpay.Templates.brandengage_dedicated_fallback_tmpl=" <iframe id='_sp_wiframe' name='_sp_wiframe' src='<%= url %>' scrollbar='no' scrolling='no' frameborder='0' width='<%= width %>' height='<%= height %>' style='overflow:hidden; border: 8px solid #f0f0f0;'></iframe> ",Sponsorpay.Templates.brandengage_video_offer_tmpl="<iframe   id='_sp_wiframe'   name='_sp_wiframe'   src='<%= url %>'   scrollbar='no'   scrolling='no'   frameborder='0'   width=<%= iframeWidth %>   height=<%= iframeHeight %>   style='position:relative; top:<%= top %>; left: <%= left %>; overflow:hidden; border: none;'> </iframe> ",Sponsorpay.Templates.brandengage_custom_offer_tmpl=Sponsorpay.Templates.brandengage_video_offer_tmpl,Sponsorpay.Models.Brandengage={},Sponsorpay.Models.Brandengage._ParamsBase=Sponsorpay.Backbone.Model.extend({defaults:{appid:null,uid:null,width:null,height:null,endpoint:null,apiHost:"be.sponsorpay.com",displayFormat:"bare_player",type:null,branding:null,greyOut:!0,exchangeRate:null,currency:null,timeStamp:null,digest:null,psTime:null,theme:"default",callbackOffersAvailable:null,callbackNoOffers:null,callbackOnConversion:null,callbackOnClose:null,verticalOffset:null,enableClose:!0,sp_dbg:null,year:null,gender:null,where:null,pub0:null,pub1:null,pub2:null,pub3:null,pub4:null,pub5:null,pub6:null,pub7:null,pub8:null,pub9:null,lpid:null,extraWidth:null,extraHeight:null,displayReward:null,displayInstructions:null,displayRewardButton:null,displayPrivacyPolicy:!1,integration:"video_iframe",maxViews:1e5,pagination:{offersPerPage:10},sweepx:null,sig:null},_defaultWidth:null,_defaultHeight:null,mandatoryParams:function(){return["appid","uid"]},resetDimensions:function(){this.set({width:this._defaultWidth,height:this._defaultHeight})},initialize:function(){var e=Sponsorpay.Lib.Utils,t=this.mandatoryParams();for(var n=0,r=t.length;n<r;n++)if(!this.get(t[n]))throw new Error("Parameter "+t[n]+" is not defined but is mandatory");if(e.browser.isMsie()&&e.browser.msieVersion()<=6)throw new Error("Sponsorpay - Browser is not supported");Sponsorpay.Lib.Cookies.init({appid:this.get("appid"),uid:this.get("uid"),apiHost:this.get("apiHost"),expires:1}),Sponsorpay.Lib.Cookies.setScrambler(function(e,t){return e}),this.set({enableClose:Sponsorpay.Lib.Utils.evalBoolean(this.get("enableClose"))}),e.removeElementById("sp-style-default"),e.loadCssFile(window.location.protocol+"//"+this.get("apiHost")+"/assets/video_iframe/v2/default.css","sp-style-default"),e.removeElementById("sp-style-theme"),this.get("theme")&&this.get("theme")!="default"&&e.loadCssFile(window.location.protocol+"//"+this.get("apiHost")+"/assets/video_iframe/v2/themes/"+this.get("theme").toLowerCase()+".css","sp-style-theme");var i=0,s=0;this.get("displayFormat")==="no_reward_btn"?this.set({displayRewardButton:this.get("displayRewardButton")===null?!1:this.get("displayRewardButton")}):(this.set({displayRewardButton:this.get("displayRewardButton")===null?!0:this.get("displayRewardButton")}),s+=38),this.set({extraWidth:this.get("extraWidth")===null?i:this.get("extraWidth"),extraHeight:this.get("extraHeight")===null?s:this.get("extraHeight"),branding:this.get("branding")===null?!1:this.get("branding"),displayInstructions:this.get("displayInstructions")===null?!1:this.get("displayInstructions")}),this.get("displayFormat")==="bare_player"||this.get("displayFormat")==="no_reward_btn"?this.set({displayReward:this.get("displayReward")===null?!1:this.get("displayReward")}):this.set({displayReward:this.get("displayReward")===null?!0:this.get("displayReward")})},calculateWidth:function(){var e=this._getViewportWidth(),t=parseInt(this.get("width"),10),n;return n=t,e>=300&&t>e&&(n=e-68,this.set({width:n})),n-this.get("extraWidth")},calculateHeight:function(){return this.get("height")-this.get("extraHeight")},_getViewportWidth:function(){return window.innerWidth}}),Sponsorpay.Models.Brandengage.ParamsDedicated=Sponsorpay.Models.Brandengage._ParamsBase.extend({initialize:function(){Sponsorpay.Models.Brandengage._ParamsBase.prototype.initialize.apply(this),this._defaultWidth=400,this._defaultHeight=330,this.set({type:"dedicated",width:this.get("width")||this._defaultWidth,height:this.get("height")||this._defaultHeight})},mandatoryParams:function(){var e=Sponsorpay.Models.Brandengage._ParamsBase.prototype.mandatoryParams.apply(this);return e[e.length]="where",e}}),Sponsorpay.Models.Brandengage.ParamsLightbox=Sponsorpay.Models.Brandengage._ParamsBase.extend({initialize:function(){Sponsorpay.Models.Brandengage._ParamsBase.prototype.initialize.apply(this),this._defaultWidth=750,this._defaultHeight=750,this.set({type:"lightbox",width:this.get("width")||this._defaultWidth,height:this.get("height")||this._defaultHeight})}}),Sponsorpay.Models.Offer=Sponsorpay.Backbone.Model.extend({forceUrl:function(e){var t=e.protocol||window.location.protocol,n=e.params,r=Sponsorpay.Lib.Utils.toUrlParams(n),i=this.get("url");i=i.replace(/^(http|https|file):/,t),i=i.replace(/\?.*$/,""),i+="?"+r,this.set({url:i})},getValidator:function(){var e=Sponsorpay.$.trim(this.get("network_endpoint")),t=Sponsorpay.$.trim(this.get("network_name")).toUpperCase();return t=="CUSTOM_CAMPAIGN"&&e.match(/^Visible Measures:/)?"VISIBLE MEASURES":t=="CUSTOM_CAMPAIGN"&&e.match(/^Unruly:/)?"UNRULY":t=="VAST"||t=="CUSTOM_CAMPAIGN"&&e!=""?"VAST":t!=""&&e!=""?t:""},canValidate:function(){var e=Sponsorpay.$.trim(this.get("network_endpoint")),t=Sponsorpay.$.trim(this.get("network_name"));if(!e||!t)return!1;var n=this.getValidator();return n=="VISIBLE MEASURES"||n=="UNRULY"?!0:(typeof this._urlre=="undefined"&&(this._urlre=/^(https?):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i),this._urlre.test(e)?!0:!1)},isValidVideoURL:function(){return this.get("network_endpoint").length>0}}),Sponsorpay.Collections.OffersCollection=Sponsorpay.Backbone.Collection.extend({model:Sponsorpay.Models.Offer,statuses:{JSON_PARSE_RES_PROXY:"001",JSON_PARSE_ERR:"002",JSON_PARSE_RES_SERVER:"003",TIMEOUT_ON_MESSAGE:"004",TIMEOUT_ON_LOAD:"005",POSTMESSAGE_FAILED:"006"},initialize:function(e,t){function i(e){Sponsorpay.logger.saveInfo("Offers retrieved"),n.bind("check-again",function(e){n._checkOffersAvailability()}),e._checkOffersAvailability(),Sponsorpay.logger.save({key:"json:response",value:Sponsorpay._.map(e.models,function(e){return e.attributes})})}function s(e,t){function r(){return n?"A_"+n:t.origin?(t.origin=="client"?"C_":"S_")+t.status:"UNKNOWN"}var n;typeof t.getResponseHeader=="function"?n=t.getResponseHeader("X-Airbrake-Error"):typeof t.headers=="object"&&(n=t.headers["X-Airbrake-Error"]),Sponsorpay.Tracker.track("SERVER_ERROR",e),t.statusText=="timeout"?Sponsorpay.Tracker.plot("WARNING_SERVER_TIMEOUT",e):Sponsorpay.Tracker.plot("ERROR_SERVER_ONREQUEST_"+r(),e),Sponsorpay.Tracker.plot("FILL_NO",e),e.weDoNotHaveOffers()}this.params=t.params||{},this.callbacks=t.callbacks||{},this.xdm=t.xdm||null,this.syncing=!1,this.processed=!1,this.proxyId=Math.random()*1e4>>0;var n=this,r=Sponsorpay.$("body").data("environment");/^be\.sponsorpay\.com(:\d+)?$/.test(this.params.apiHost)?Sponsorpay.Tracker.setHost("//tracking.sponsorpay.com/"):/^staging[-\.]be\.sponsorpay\.com(:\d+)?$/.test(this.params.apiHost)?Sponsorpay.Tracker.setHost("//staging-tracking.sponsorpay.com/"):(Sponsorpay.Tracker.setHost("//"+this.params.apiHost+"/sweepx/"),this.params.sweepx=this.params.sweepx||"on");if(!Sponsorpay.Lib.Utils.browser.hasNativePostmessage()){Sponsorpay.Tracker.plot("UNSUPPORTED_BROWSER",this),this.weDoNotHaveOffers();return}Sponsorpay.Tracker.plot("REQUEST",this),e?(this.models=e,i(this)):this.fetch({success:function(e){i(e)},error:function(e,t){s(n,t)}})},sync:function(e,t,n){return n.type="GET",n.timeout=1e4,null!==this.params.endpoint?(n.url=this.params.endpoint,n.data={maxn:(new Date).getTimezoneOffset()+782}):(n.url=window.location.protocol+"//"+this.params.apiHost+"/web.json",n.data=this.setServerParams(this.params)),Sponsorpay.logger.debug("Fetching offers - w:"+this.params.width+", h:"+this.params.height),Sponsorpay.logger.save({key:"json:url",value:n.url}),this.syncUsingProxy(n)},syncUsingProxy:function(t){if(this.syncing)return;this.syncing=!0;var n=this,r=e("#sponsorpay_proxy_"+this.proxyId);r.remove(),r=Sponsorpay.$('<iframe id="sponsorpay_proxy_'+this.proxyId+'" width="0" height="0" frameborder="0">').appendTo("body");var i=window.setTimeout(function(){window.clearTimeout(s),Sponsorpay.$(window).unbind("message.beproxy");var e={origin:"client",status:n.statuses.TIMEOUT_ON_LOAD,statusText:"Timeout waiting for the iframe to be available",headers:{}};t.error&&t.error(e)},t.timeout+1e3),s=window.setTimeout(function(){window.clearTimeout(i),Sponsorpay.$(window).unbind("message.beproxy");var e={origin:"client",status:n.statuses.TIMEOUT_ON_MESSAGE,statusText:"Timeout waiting for the message from proxy",headers:{}};t.error&&t.error(e)},t.timeout+1500);Sponsorpay.$(window).bind("message.beproxy",function(e){var r,i=e.originalEvent.data,o;if(!i)return;r=i.match(/^BE_(.*?):(.*)$/);if(!r)return;window.clearTimeout(s),Sponsorpay.$(window).unbind("message.beproxy"),n.syncing=!1;switch(r[1]){case"RES":var u=!1;try{o=JSON.parse(r[2]).data}catch(e){u=!0,o={origin:"client",status:n.statuses.JSON_PARSE_RES_PROXY,statusText:"JSON parse error in BE_RES (from proxy)",headers:{}}}u?t.error(o):t.success(o.payload);break;case"ERR":try{o=JSON.parse(r[2]).data}catch(e){o={origin:"client",status:n.statuses.JSON_PARSE_ERR,statusText:"JSON parse error in BE_ERR",headers:{}}}o.status=="timeout"&&(o.statusText="timeout"),o.status=="parse error"&&(o={origin:o.origin,status:n.statuses.JSON_PARSE_RES_SERVER,statusText:"JSON parse error in BE_RES (from server)",headers:{}}),o.getResponseHeader=function(e){return this.headers[e]},t.error(o)}}),r.bind("load",function(){window.clearTimeout(i);var e={};for(var o in t)typeof t[o]!="function"&&(e[o]=t[o]);try{r.get(0).contentWindow.postMessage("BE_REQ:"+JSON.stringify(e),"*")}catch(u){window.clearTimeout(s);var a={origin:"client",status:n.statuses.POSTMESSAGE_FAILED,statusText:"Exception caught in postmessage",headers:{}};t.error&&t.error(a)}}),r.attr("src",window.location.protocol+"//"+this.params.apiHost+"/assets/beproxy.html?v=2")},parse:function(e){return this.setMetainfo(e),e.offers},setXDM:function(e){this.xdm=e},setMetainfo:function(e){this.metainfo=e.information},showNextOffer:function(){this.remove(this.at(0));if(this.length>0){var t=this.at(0),n=new Sponsorpay.Lib.NetworkValidator(this._getXDM(),this.params);n.bind("success",e.proxy(function(e){this.wrapperView.render()},this)),n.bind("failure",function(e){this.showNextOffer()}),n.bind("error",function(e,t){}),n.perform(t)}else{var r=window.location.protocol+"//"+this.params.apiHost+"/"+this.metainfo.session_id+"/web/video_none_suitable";Sponsorpay.Tracker.plot("WARNING_PREVALIDATION_NO_NEXT_OFFER",this),e("#_sp_wiframe").attr("src",r)}},getABTestInfo:function(e){return Sponsorpay._.isUndefined(this.metainfo)||Sponsorpay._.isUndefined(this.metainfo.ab_tests)?null:this.metainfo.ab_tests[e]},setServerParams:function(e){function u(){return i+t[String[r].apply(null,Sponsorpay._.map(n.split(/(?=(?:...)*$)/),function(e){return e-48})).substr(0,n.length/3)]()}var t=new Date,n="151149164132153157149170159158149127150150163149164",r="fromCharCode",i=782,s={appid:e.appid,uid:e.uid,integration:e.integration,limit:e.limit,width:e.width,height:e.height,ps_time:e.ps_time,year:e.year,gender:e.gender,er:e.er,digest:e.digest,ts:e.ts,currency:e.currency,text_claim_button:e.text_claim_button,sp_dbg:e.sp_dbg===!0?"on":e.sp_dbg,pub0:e.pub0,pub1:e.pub1,pub2:e.pub2,pub3:e.pub3,pub4:e.pub4,pub5:e.pub5,pub6:e.pub6,pub7:e.pub7,pub8:e.pub8,pub9:e.pub9,origin:window.location.toString(),https:window.location.protocol==="https:"?"on":"off",ie7:Sponsorpay.Lib.Utils.browser.ie7(),tracking:e.tracking,lpid:e.lpid,godmode:e.gm,country_code:e.cc,sweepx:e.sweepx,maxn:u(),sig:e.sig};for(var o in s)(s[o]===null||s[o]===undefined)&&delete s[o];return s},_checkOffersAvailability:function(){if(this.length>0){var e=this.at(0);e.set({network_validation_performed:!1}),this._performNetworkValidation(e)}else Sponsorpay.Tracker.track("OFFERS_EMPTY",this),Sponsorpay.Tracker.plot("FILL_NO",this),this.weDoNotHaveOffers()},_performNetworkValidation:function(e){var t=this,n=new Sponsorpay.Lib.NetworkValidator(t._getXDM(),t.params);n.bind("success",function(e){Sponsorpay.Tracker.track("OFFERS_OK",t),Sponsorpay.Tracker.plot("FILL_YES",t),t.weDoHaveOffers()}),n.bind("failure",function(e){var n;switch(e.getValidator()){case"GAMBIT":n="WARNING_GAMBIT_EMPTY";break;case"JUNGROUP":n="WARNING_JUNGROUP_EMPTY";break;case"VAST":n="WARNING_VAST_EMPTY";break;case"VISIBLE MEASURES":n="WARNING_VISIBLE_MEASURES_EMPTY";break;case"UNRULY":n="WARNING_UNRULY_EMPTY"}n&&Sponsorpay.Tracker.plot(n,t),t.remove(e),t.trigger("check-again")}),n.bind("error",function(e,n){var r;switch(e.getValidator()){case"GAMBIT":r="ERROR_GAMBIT";break;case"JUNGROUP":r="ERROR_JUNGROUP";break;case"VAST":r="ERROR_VAST";break;case"VISIBLE MEASURES":r="ERROR_VISIBLE_MEASURES";break;case"UNRULY":r="ERROR_UNRULY"}r&&Sponsorpay.Tracker.plot(r,t),t.remove(e),t.trigger("check-again")}),n.bind("performed",function(e){e&&e.set({network_validation_performed:!0})}),n.perform(e)},_getXDM:function(){return this.xdm?this.xdm.next?this.xdm.next():null:null},weDoHaveOffers:function(){if(this.callbacks.callbackOffersAvailable!==null&&typeof this.callbacks.callbackOffersAvailable=="function"){var e={id:this.wrapperView.currentOffer().get("id"),icon_small:this.wrapperView.currentOffer().get("trigger_banner_small"),icon_medium:this.wrapperView.currentOffer().get("trigger_banner_medium")};this.callbacks.callbackOffersAvailable.call(undefined,e),Sponsorpay.logger.save({key:"callback:on:start",value:this.callbacks.callbackOffersAvailable,executed:!0})}this.processed=!0,this.trigger("offersLoaded")},weDoNotHaveOffers:function(){this.callbacks.callbackNoOffers!==null&&typeof this.callbacks.callbackNoOffers=="function"&&(this.callbacks.callbackNoOffers.call(),Sponsorpay.logger.save({key:"callback:no:offers",value:this.callbacks.callbackNoOffers,executed:!0})),this.processed=!0,this.trigger("offersEmpty")}}),Sponsorpay.Views.Brandengage={},Sponsorpay.Views.Brandengage._WrapperBase=Sponsorpay.Backbone.View.extend({initialize:function(){this.params=this.options.params,this.userInitiatedShutdown=!1,this.shutdownInProgress=!1,this.shutdownComplete=!1,this.closingInProgress=!1,this.urlFlags="",this.collection===undefined&&this._setCollection()},render:function(){},shutDown:function(){return this.shutdownInProgress||this.shutdownComplete?!1:this.shutdownInProgress=!0},closeUp:function(){return this.closingInProgress?!1:this.closingInProgress=!0},getNameForCookie:function(e){var t=this.currentOffer();return!t||!t.id?null:t.id+"_"+e},_setCollection:function(e){var e=e||null,t=this.params.attributes;this.collection=new Sponsorpay.Collections.OffersCollection(e,{params:{endpoint:t.endpoint,apiHost:t.apiHost,appid:t.appid,uid:t.uid,limit:t.pagination.offersPerPage,integration:t.integration,width:this.params.calculateWidth
(),height:this.params.calculateHeight(),er:t.exchangeRate,currency:t.currency,ts:t.timeStamp,digest:t.digest,year:t.year,gender:t.gender,ps_time:t.psTime,text_claim_button:t.textClaimButton,sp_dbg:t.sp_dbg,pub0:t.pub0,pub1:t.pub1,pub2:t.pub2,pub3:t.pub3,pub4:t.pub4,pub5:t.pub5,pub6:t.pub6,pub7:t.pub7,pub8:t.pub8,pub9:t.pub9,tracking:t.tracking,lpid:t.lpid,gm:t.gm,cc:t.cc,sweepx:t.sweepx,sig:t.sig},callbacks:{callbackOffersAvailable:this.params.get("callbackOffersAvailable"),callbackNoOffers:this.params.get("callbackNoOffers")}}),this.collection.wrapperView=this},videoUrlFlags:function(){var e=[],t=this.params.get("branding");return t===!1?e.push("SP:F"):t===null?e.push("SP:T"):t&&t.match(/^http[s]?:\/\//i)!==null&&(e.push("SP:C"),e.push("URL:"+t)),e.push("DI:"+(this.params.get("displayInstructions")===!0?"T":"F")),e.push("DR:"+(this.params.get("displayReward")===!0?"T":"F")),e.push("RB:"+(this.params.get("displayRewardButton")===!0?"T":"F")),e.push("PP:"+(this.params.get("displayPrivacyPolicy")?"T":"F")),this.urlFlags=e.join(";")},renderNextOffer:function(){this.prevOffer(),this.render()},renderPrevOffer:function(){this.nextOffer(),this.render()},currentOffer:function(){var e=this.offerAt(this.currentOfferIndex);if(!e)return null;var t={integration:"video_iframe",show:this.urlFlags==""?this.videoUrlFlags():this.urlFlags,width:this._getWidth(),height:this._getHeight(),displayFormat:this.params.get("displayFormat"),next_offer:null};return e.forceUrl({params:t}),this.currentOfferUrl=e.get("url"),e},offerAt:function(e){return this.collection.at(e)},nextOffer:function(){var e=this.currentOfferIndex;e+1>this.collection.length-1?this.reset():this.currentOfferIndex=e+1},prevOffer:function(){var e=this.currentOfferIndex;e-1<0?this.currentOfferIndex=this.collection.length-1:this.currentOfferIndex=e-1},reset:function(){this.currentOfferIndex=0},_getLeft:function(){var e=this._getWindowWidth()/2-this._getWidth()/2;return e<0&&(e=10),e},_getTop:function(){if(this.params.get("verticalOffset")!==null)return parseInt(this.params.get("verticalOffset"),10);var e=this._getWindowHeight()/2-this._getHeight()/2;return e<0&&(e=10),e},_getWidth:function(){var e=this.offerAt(this.currentOfferIndex).get("width")+this.params.get("extraWidth");return Sponsorpay.logger.save({key:"video:width",value:e}),e},_getHeight:function(){var e=this.offerAt(this.currentOfferIndex).get("height")+this.params.get("extraHeight");return Sponsorpay.logger.save({key:"video:height",value:e}),e},_getWindowWidth:function(){return typeof window.innerWidth!="undefined"&&window.innerWidth>0?window.innerWidth:document.documentElement.clientWidth},_getWindowHeight:function(){return typeof window.innerHeight!="undefined"&&window.innerHeight>0?window.innerHeight:document.documentElement.clientHeight},_getSessionId:function(){return this.collection.metainfo?this.collection.metainfo.session_id:""},callCallbackOnClose:function(){Sponsorpay._.isFunction(this.params.get("callbackOnClose"))&&(Sponsorpay.logger.save({key:"callback:on:close",value:this.params.get("callbackOnClose"),executed:!0}),this.params.get("callbackOnClose").call())}}),Sponsorpay.Views.Brandengage.WrapperDedicated=Sponsorpay.Views.Brandengage._WrapperBase.extend({template:Sponsorpay._.template(Sponsorpay.Templates.brandengage_dedicated_wrapper_tmpl),events:{"click #nextOfferBtn":"renderNextOffer","click #prevOfferBtn":"renderPrevOffer"},initialize:function(){Sponsorpay.Views.Brandengage._WrapperBase.prototype.initialize.apply(this),this.setElement(this.params.get("where")),Sponsorpay.$(this.params.get("where")+" #_sp_center").remove(),Sponsorpay._.bindAll(this),this.collection.bind("offersLoaded",this.render),this.collection.bind("offersEmpty",this.renderFallback),this.prepareWrapper(),this.currentOfferIndex=0,this._rendered=!1,this._renderedWithFallback=!1},showUp:function(){this._rendered?this._renderedWithFallback?Sponsorpay.$(this.params.get("where")+" #_sp_center").show():(Sponsorpay.Tracker.plot("CONTAINER_LOAD_TRY",this.collection),this.trigger("renderOffer"),Sponsorpay.$(this.params.get("where")+" #_sp_center").show(),Sponsorpay.Tracker.plot("CONTAINER_IMPRESSION",this.collection)):this.bind("viewIsPrepared",this.showUp)},shutDown:function(){if(!Sponsorpay.Views.Brandengage._WrapperBase.prototype.shutDown.call(this))return;Sponsorpay.$(this.params.get("where")+" #_sp_center").hide(),this.callCallbackOnClose(),Sponsorpay.Tracker.plot("CONTAINER_CLOSE",this.collection);var e=Sponsorpay.$(this.params.get("where")+" #_sp_wiframe").get(0);e&&Sponsorpay.Messenger.post("sponsorpay_shutdown_"+this._getSessionId(),{target:e.contentWindow}),this.shutdownComplete=!0},closeUp:function(){if(!Sponsorpay.Views.Brandengage._WrapperBase.prototype.closeUp.call(this))return;var e=this,t,n=Sponsorpay.$(this.params.get("where")+" #_sp_wiframe").get(0);if(n){t=setTimeout(function(){e.shutDown()},6e3);try{Sponsorpay.Messenger.post("sponsorpay_close_"+this._getSessionId(),{target:n.contentWindow,data:{action:!0,integration_type:this.params.get("type")},success:function(){clearTimeout(t),e.shutDown()}})}catch(r){}}else this.shutDown();return!1},prepareWrapper:function(){var e=this.params;this.$el.width(e.get("width")),this.$el.height(e.get("height")),this.$el.append(this.template({width:e.get("width")+"px",height:e.get("height")+"px"}))},renderFallback:function(){var e=new Sponsorpay.Views.BrandengageDedicatedFallbackView({parentView:this,el:this.params.get("where")+" #_sp_center"});return e.render(),this._rendered=!0,this._renderedWithFallback=!0,this.trigger("viewIsPrepared"),this},render:function(){return Sponsorpay.Views.Brandengage._WrapperBase.prototype.render.apply(this),this.offerView=new(Sponsorpay.Views["Brandengage"+(this.currentOffer().get("video_type")==="custom_campaign"?"Custom":"Video")+"View"])({model:this.currentOffer(),parentView:this,el:this.params.get("where")+" #_sp_center"}),this._rendered=!0,this._renderedWithFallback=!1,this.bind("renderOffer",this.offerView.render),this.trigger("viewIsPrepared"),this}}),Sponsorpay.Views.Brandengage.WrapperLightbox=Sponsorpay.Views.Brandengage._WrapperBase.extend({initialize:function(){Sponsorpay.Views.Brandengage._WrapperBase.prototype.initialize.apply(this),this.setElement(this.params.get("where")||"body"),Sponsorpay.$("#sp_lightbox").remove(),Sponsorpay.$("#sp_fade_background").hide(),Sponsorpay._.bindAll(this),this.collection.bind("offersLoaded",this.render),this.currentOfferIndex=0,Sponsorpay.$(window).bind("resize",this.centerContent)},shutDown:function(){if(!Sponsorpay.Views.Brandengage._WrapperBase.prototype.shutDown.call(this))return;Sponsorpay.$("#sp_fade_background").hide(),Sponsorpay.$("#sp_lightbox").hide(),this.callCallbackOnClose(),Sponsorpay.Tracker.plot("CONTAINER_CLOSE",this.collection);var e=Sponsorpay.$("#sp_lightbox #_sp_wiframe").get(0);e&&Sponsorpay.Messenger.post("sponsorpay_shutdown_"+this._getSessionId(),{target:e.contentWindow}),this.shutdownComplete=!0},centerContent:function(){if(!this.currentOffer())return;this._center(),this.params.get("greyOut")&&e("#sp_fade_background").css("height",e(document).height())},showUp:function(){this.closingInProgress=!1,this.shutdownInProgress=!1,this.shutdownComplete=!1,this._rendered?(Sponsorpay.Tracker.plot("CONTAINER_LOAD_TRY",this.collection),Sponsorpay.$("#sp_close_x").unbind("click"),Sponsorpay.$("#sp_fade_background").unbind("click"),this.params.get("greyOut")&&(Sponsorpay.$("#sp_fade_background").css("height",Sponsorpay.$(document).height()+"px"),Sponsorpay.$("#sp_fade_background").show()),Sponsorpay.$("#sp_lightbox").show(),this.trigger("renderOffer"),Sponsorpay.$("body").off("click","#sp_fade_background").on("click","#sp_fade_background",null,Sponsorpay.$.proxy(function(e){this.closeUp(e)},this)),Sponsorpay.$("#_sp_main_content").off("click","#sp_close_x").on("click","#sp_close_x",null,Sponsorpay.$.proxy(function(e){this.closeUp(e)},this)),Sponsorpay.Tracker.plot("CONTAINER_IMPRESSION",this.collection)):this.bind("viewIsPrepared",this.showUp)},closeUp:function(e){if(!Sponsorpay.Views.Brandengage._WrapperBase.prototype.closeUp.call(this))return;var t=this;Sponsorpay.$("body").off("click","#sp_fade_background"),Sponsorpay.$("#_sp_main_content").off("click","#sp_close_x");if(!e)return this.shutDown(),!1;this.userInitiatedShutdown=!0,e.preventDefault();var n,r=Sponsorpay.$("#sp_lightbox #_sp_wiframe").get(0);if(r){n=setTimeout(function(){t.shutDown()},6e3);try{Sponsorpay.Messenger.post("sponsorpay_close_"+this._getSessionId(),{target:r.contentWindow,data:{action:!0,integration_type:this.params.get("type")},success:function(e){clearTimeout(n),e||t.shutDown()}})}catch(e){}}else this.shutDown();return!1},prepareWrapper:function(){var e=Sponsorpay.$(this.el);Sponsorpay.$("#sp_lightbox").remove(),this.params.get("greyOut")===!0&&e.append(Sponsorpay._.template(Sponsorpay.Templates.brandengage_lightbox_fade_tmpl)({backgroundColor:"#FFFFFF",opacity:.5,alpha:50,apiHost:this.params.get("apiHost")}));var t={lightbox_width:this._getLightboxWidth()+"px",lightbox_height:this._getLightboxHeight()+"px",enable_close:this.params.get("enableClose"),width:this.params.get("width")+"px",height:this.params.get("height")+"px",background_color:"#FFFFFF",apiHost:this.params.get("apiHost")},n;n=Sponsorpay._.template(Sponsorpay.Templates.brandengage_lightbox_wrapper_tmpl),e.append(n(t)),this._center()},_getLightboxWidth:function(){return this.currentOffer().get("width")+this.params.get("extraWidth")},_getLightboxHeight:function(){return this.currentOffer().get("height")+this.params.get("extraHeight")},_getLeft:function(){var e=this._getWindowWidth()/2-this._getLightboxWidth()/2;return e<0&&(e=10),e},_getTop:function(){if(typeof this.params.get("verticalOffset")!="undefined")return parseInt(this.params.get("verticalOffset"),10);var e=this._getWindowHeight()/2-this._getLightboxHeight()/2;return e<0&&(e=10),e},_center:function(){var e=Sponsorpay.$("#_sp_overlay_iframe"),t=Sponsorpay.$("#_sp_content"),n=(parseInt(e.css("border-left"),10)+parseInt(e.css("border-right"),10))/2+(parseInt(t.css("padding-left"),10)+parseInt(t.css("padding-right"),10))/2>>0,r=(parseInt(e.css("border-top"),10)+parseInt(e.css("border-bottom"),10))/2+(parseInt(t.css("padding-top"),10)+parseInt(t.css("padding-bottom"),10))/2>>0;e.css({left:this._getLeft()-n,top:this._getTop()-r})},render:function(){return Sponsorpay.Views.Brandengage._WrapperBase.prototype.render.apply(this),this.prepareWrapper(),this.offerView=new(Sponsorpay.Views["Brandengage"+(this.currentOffer().get("video_type")==="custom_campaign"?"Custom":"Video")+"View"])({model:this.currentOffer(),parentView:this,noPadding:!0,el:"#_sp_content #_sp_main_content #_sp_center"}),this._rendered=!0,this.bind("renderOffer",this.offerView.render),this.trigger("viewIsPrepared"),this}}),Sponsorpay.Views.BrandengageView=Sponsorpay.Backbone.View.extend({initialize:function(){Sponsorpay._.bindAll(this),this.parentView=this.options.parentView,this.noPadding=this.options.noPadding,this.parentParams=this.parentView.params,this.sessionId=this.parentView.collection.metainfo.session_id,this.listenToCallbackOnConversion(),this.listenToCallbackOnSuccess()},render:function(){var e=this,t=parseInt(this.model.get("width")+this.parentParams.get("extraWidth"),10),n=parseInt(this.model.get("height")+this.parentParams.get("extraHeight"),10);return this.$el.html(this.template({url:this.model.get("url"),top:this.noPadding===!0?"0px":this.parentParams.get("height")/2-n/2+"px",left:this.noPadding===!0?"0px":this.parentParams.get("type")==="dedicated"?this.parentParams.get("width")/2-t/2+"px":this.parentParams.get("width")/2-parseInt(this.model.get("width"),10)/2+"px",iframeWidth:t+"px",iframeHeight:n+"px"})),this},listenToCallbackOnConversion:function(){var e=this.parentView.collection,t=this;this.model.set({callback_on_conversion_fired:!1}),Sponsorpay.Messenger.unbind("sponsorpay"),Sponsorpay.Messenger.bindOnce("sponsorpay_"+this.sessionId,Sponsorpay.$.proxy(function(n){if(t.model.get("callback_on_conversion_fired")){Sponsorpay.Tracker.plot("WARNING_COC_FAKED",e);return}this._callbackOnConversion(),this._discardOffer(),this.parentView&&this.parentView.userInitiatedShutdown&&this.parentView.shutDown()},this))},listenToCallbackOnSuccess:function(){Sponsorpay.Messenger.bindOnce("sponsorpay_success_"+this.sessionId,Sponsorpay.$.proxy(function(e){this.parentView&&this.parentView.shutDown()},this))},_discardOffer:function(){this.parentView.collection.remove(this.model)},_callbackOnConversion:function(){var e=this.parentParams.get("callbackOnConversion");this.model.set({callback_on_conversion_fired:!0}),Sponsorpay._.isFunction(e)&&(Sponsorpay.Tracker.plot("OFFER_FIRECOC",this.parentView.collection),e.call(),Sponsorpay.logger.save({key:"callback:on:conversion",value:e,executed:!0}))}}),Sponsorpay.Views.BrandengageVideoView=Sponsorpay.Views.BrandengageView.extend({template:Sponsorpay._.template(Sponsorpay.Templates.brandengage_video_offer_tmpl),initialize:function(){Sponsorpay.Views.BrandengageView.prototype.initialize.apply(this),this.steppySceneIndex=-1,this.listenToGetVastXml(),this.listenToGetGambitJSON(),this.listenToSteppyAnswer(),this.listenToSteppyActivate(),this.listenToRewardButtonClick()},listenToSteppyAnswer:function(){var t=this.model;Sponsorpay.Messenger.bindOnce("sponsorpay_steppy_get_out_"+this.sessionId,e.proxy(function(e){this.model.collection.showNextOffer()},this))},listenToSteppyActivate:function(){Sponsorpay.Messenger.bindOnce("sponsorpay_steppy_activate_"+this.sessionId,e.proxy(function(e){this.steppySceneIndex=parseInt(e,10)},this))},listenToGetVastXml:function(){var e=this.model;Sponsorpay.Messenger.bindOnce("sponsorpay_vast_xml_"+this.sessionId,function(t){return Sponsorpay.logger.save({key:"vast:xml:get",value:e.get("vastXML"),executed:!0}),e.get("vastXML")})},listenToRewardButtonClick:function(){Sponsorpay.Messenger.bindOnce("sponsorpay_reward_click_"+this.sessionId,e.proxy(function(e){e=="disabled"&&Sponsorpay.Tracker.plot("REWARD_BUTTON_"+(this.steppySceneIndex<0?1:this.steppySceneIndex)+"_DISABLED_CLICK",this.model.collection)},this))},listenToGetGambitJSON:function(){var t=this.model;Sponsorpay.Messenger.bindOnce("sponsorpay_gambit_json_"+this.sessionId,e.proxy(function(e){return Sponsorpay.logger.save({key:"gambit:json:get",value:t.get("gambitJSON"),executed:!0}),t.get("gambitJSON")},this))}}),Sponsorpay.Views.BrandengageCustomView=Sponsorpay.Views.BrandengageView.extend({template:Sponsorpay._.template(Sponsorpay.Templates.brandengage_custom_offer_tmpl),initialize:function(){Sponsorpay.Views.BrandengageView.prototype.initialize.apply(this)}}),Sponsorpay.Views.BrandengageDedicatedFallbackView=Sponsorpay.Backbone.View.extend({template:Sponsorpay._.template(Sponsorpay.Templates.brandengage_dedicated_fallback_tmpl),initialize:function(){Sponsorpay._.bindAll(this),this.parentView=this.options.parentView,this.parentParams=this.parentView.params},render:function(){var e=this.parentView.collection.metainfo?this.parentView.collection.metainfo.session_id:"99999";return this.$el.html(this.template({url:window.location.protocol+"//"+this.parentParams.get("apiHost")+"/"+e+"/web/video_none",width:this.parentParams.get("width")-16+"px",height:this.parentParams.get("height")-16+"px"})),this}}),Sponsorpay.Views.Brandengage.createWrapper=function(e){Sponsorpay.logger.save({key:"params",value:e});if(!e||!Sponsorpay.$.isPlainObject(e)||Sponsorpay._.isEmpty(e))throw new Error("Can't create a widget without or with wrong parameters");if(!e.type)throw new Error("Can't create a widget of unknown type");var t=e.type.charAt(0).toUpperCase()+e.type.slice(1),n;if(Sponsorpay.Models.Brandengage["Params"+t]===undefined||Sponsorpay.Views.Brandengage["Wrapper"+t]===undefined)throw new Error("Can't create a widget of type "+e.type);return n=new Sponsorpay.Models.Brandengage["Params"+t](e),new Sponsorpay.Views.Brandengage["Wrapper"+t]({params:n})},SPJSLoaded=!0}});