/*! jQuery v@1.8.1 jquery.com | jquery.org/license */
(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(I,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a){if(b==="data"&&p.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a))return;var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function bE(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c==="input"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function bF(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bY(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bW.length;while(e--){b=bW[e]+c;if(b in a)return b}return d}function bZ(a,b){return a=b||a,p.css(a,"display")==="none"||!p.contains(a.ownerDocument,a)}function b$(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style)continue;e[f]=p._data(c,"olddisplay"),b?(!e[f]&&c.style.display==="none"&&(c.style.display=""),c.style.display===""&&bZ(c)&&(e[f]=p._data(c,"olddisplay",cc(c.nodeName)))):(d=bH(c,"display"),!e[f]&&d!=="none"&&p._data(c,"olddisplay",d))}for(f=0;f<g;f++){c=a[f];if(!c.style)continue;if(!b||c.style.display==="none"||c.style.display==="")c.style.display=b?e[f]||"":"none"}return a}function b_(a,b,c){var d=bP.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function ca(a,b,c,d){var e=c===(d?"border":"content")?4:b==="width"?1:0,f=0;for(;e<4;e+=2)c==="margin"&&(f+=p.css(a,c+bV[e],!0)),d?(c==="content"&&(f-=parseFloat(bH(a,"padding"+bV[e]))||0),c!=="margin"&&(f-=parseFloat(bH(a,"border"+bV[e]+"Width"))||0)):(f+=parseFloat(bH(a,"padding"+bV[e]))||0,c!=="padding"&&(f+=parseFloat(bH(a,"border"+bV[e]+"Width"))||0));return f}function cb(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&p.css(a,"boxSizing")==="border-box";if(d<=0||d==null){d=bH(a,b);if(d<0||d==null)d=a.style[b];if(bQ.test(d))return d;e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+ca(a,b,c||(f?"border":"content"),e)+"px"}function cc(a){if(bS[a])return bS[a];var b=p("<"+a+">").appendTo(e.body),c=b.css("display");b.remove();if(c==="none"||c===""){bI=e.body.appendChild(bI||p.extend(e.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement)bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write("<!doctype html><html><body>"),bJ.close();b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,"display"),e.body.removeChild(bI)}return bS[a]=c,c}function ci(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||ce.test(a)?d(a,e):ci(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&p.type(b)==="object")for(e in b)ci(a+"["+e+"]",b[e],c,d);else d(a,b)}function cz(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;h<i;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function cA(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h,i=a[f],j=0,k=i?i.length:0,l=a===cv;for(;j<k&&(l||!h);j++)h=i[j](c,d,e),typeof h=="string"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cA(a,c,d,e,h,g)));return(l||!h)&&!g["*"]&&(h=cA(a,c,d,e,"*",g)),h}function cB(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function cC(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);while(j[0]==="*")j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function cD(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if(e!=="*"){if(h!=="*"&&h!==e){c=i[h+" "+e]||i["* "+e];if(!c)for(d in i){f=d.split(" ");if(f[1]===e){c=i[h+" "+f[0]]||i["* "+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function cL(){try{return new a.XMLHttpRequest}catch(b){}}function cM(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cU(){return setTimeout(function(){cN=b},0),cN=p.now()}function cV(a,b){p.each(b,function(b,c){var d=(cT[b]||[]).concat(cT["*"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function cW(a,b,c){var d,e=0,f=0,g=cS.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){var b=cN||cU(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++)j.tweens[e].run(d);return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cN||cU(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;cX(k,j.opts.specialEasing);for(;e<g;e++){d=cS[e].call(j,a,k,j.opts);if(d)return d}return cV(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cX(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function cY(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bZ(a);c.queue||(j=p._queueHooks(a,"fx"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,"fx").length||j.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],p.css(a,"display")==="inline"&&p.css(a,"float")==="none"&&(!p.support.inlineBlockNeedsLayout||cc(a.nodeName)==="inline"?m.display="inline-block":m.zoom=1)),c.overflow&&(m.overflow="hidden",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){f=b[d];if(cP.exec(f)){delete b[d];if(f===(q?"hide":"show"))continue;o.push(d)}}g=o.length;if(g){h=p._data(a,"fxshow")||p._data(a,"fxshow",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in n)p.style(a,b,n[b])});for(d=0;d<g;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start=e==="width"||e==="height"?1:0))}}function cZ(a,b,c,d,e){return new cZ.prototype.init(a,b,c,d,e)}function c$(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b)c=bV[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function da(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener("DOMContentLoaded",D,!1),p.ready()):e.readyState==="complete"&&(e.detachEvent("onreadystatechange",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1])return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return d.find(a);this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:"",jquery:"1.8.1",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c in a){d=h[c],e=a[c];if(h===e)continue;k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}return h},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady)return;if(!e.body)return setTimeout(p.ready,1);p.isReady=!0;if(a!==!0&&--p.readyWait>0)return;d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger("ready").off("ready")},isFunction:function(a){return p.type(a)==="function"},isArray:Array.isArray||function(a){return p.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||"object"},isPlainObject:function(a){if(!a||p.type(a)!=="object"||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return!a||typeof a!="string"?null:(typeof b=="boolean"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!="string")return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(w.test(b.replace(y,"@").replace(z,"]").replace(x,"")))return(new Function("return "+b))();p.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||typeof c!="string")return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,"ms-").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;f<g;)if(c.call(a[f],f,a[f++])===!1)break;return a},trim:o&&!o.call("﻿ ")?function(a){return a==null?"":o.call(a)}:function(a){return a==null?"":a.toString().replace(t,"")},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=p.type(a),a.length==null||c==="string"||c==="function"||c==="regexp"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(l)return l.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d=="number")for(;f<d;f++)a[e++]=c[f];else while(c[f]!==b)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i=="number"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),e!=null&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c=="string"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)))},f.guid=a.guid=a.guid||f.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d=="object"){for(k in d)p.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),c=null));if(c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState==="complete")setTimeout(p.ready,1);else if(e.addEventListener)e.addEventListener("DOMContentLoaded",D,!1),a.addEventListener("load",p.ready,!1);else{e.attachEvent("onreadystatechange",D),a.attachEvent("onload",p.ready);var c=!1;try{c=a.frameElement==null&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(g,50)}p.ready()}}()}}return d.promise(b)},p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){a=typeof a=="string"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++)if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){var e=p.type(c);e==="function"&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&e!=="string"&&d(c)})})(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1)i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return p.inArray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return typeof a=="object"?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length||!d)return{};f=e.createElement("select"),g=f.appendChild(e.createElement("option")),h=n.getElementsByTagName("input")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value==="on",optSelected:g.selected,getSetAttribute:n.className!=="t",enctype:!!e.createElement("form").enctype,html5Clone:e.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:e.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick"),n.detachEvent("onclick",m)),h=e.createElement("input"),h.value="t",h.setAttribute("type","radio"),b.radioValue=h.value==="t",h.setAttribute("checked","checked"),h.setAttribute("name","t"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})j="on"+k,l=j in n,l||(n.setAttribute(j,"return;"),l=typeof n[j]=="function"),b[k+"Bubbles"]=l;return p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];if(!i)return;c=e.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",i.insertBefore(c,i.firstChild),d=e.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",l=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!=="1%",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:"4px"}).width==="4px",g=e.createElement("div"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!="undefined"&&(d.innerHTML="",d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a))return;var f,g,h=p.expando,i=typeof c=="string",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b)return;l||(j?a[h]=l=p.deletedIds.pop()||++p.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c=="object"||typeof c=="function")e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a))return;var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i])return;if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?K:p.isEmptyObject)(d))return}}if(!c){delete h[i].data;if(!K(h[i]))return}g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf("data-")===0&&(g=p.camelCase(g.substring(5)),J(i,g,k[g]));p._data(i,"parsedAttrs",!0)}}return k}return typeof a=="object"?this.each(function(){p.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",p.access(this,function(c){if(c===b)return k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d),p.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.length,e=c.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),a==="fx"&&b[0]!=="inprogress"&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof a!="string"&&(c=a,a=b),a=a||"fx";while(h--)d=p._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=p.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(" "+e.className+" ").replace(O," ");for(f=0,g=c.length;f<g;f++)while(d.indexOf(" "+c[f]+" ")>-1)d=d.replace(" "+c[f]+" "," ");e.className=a?p.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&p._data(this,"__className__",this.className),this.className=this.className||a===!1?"":p._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(P,""):d==null?"":d);return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a,f==null?f="":typeof f=="number"?f+="":p.isArray(f)&&(f=p.map(f,function(a){return a==null?"":a+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,f,"value")===b)this.value=f})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0)return null;c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,"optgroup"))){b=p(e).val();if(i)return b;g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=p.makeArray(b);return p(a).find("option").each(function(){this.selected=p.inArray(p(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;if(e&&p.isFunction(p.fn[c]))return p(a)[c](d);if(typeof a.getAttribute=="undefined")return p.prop(a,c,d);h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d)}return g&&"get"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++)e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,""),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");else if(!p.support.radioValue&&b==="radio"&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return L&&p.nodeName(a,"button")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,"button"))return L.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2)return;return g=h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(N[c]?d.value!=="":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){b===""&&(b="false"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype="encoding"),p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return a.checked=p.inArray(p(a).val(),b)>=0}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!="undefined"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(" ");for(j=0;j<c.length;j++){k=W.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events))return;b=p.trim(_(b||"")).split(" ");for(f=0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m)p.event.remove(a,h+b[f],c,d,!0);continue}n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(l=0;l<o.length;l++)q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d==="**"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h])}p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||f.nodeType!==3&&f.nodeType!==8){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered))return;s.indexOf("!")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(".")>=0&&(t=s.split("."),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s])return;c=typeof c=="object"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=s.indexOf(":")<0?"on"+s:"";if(!f){h=p.cache;for(j in h)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}c.result=b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1)return;q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply(k,d)===!1&&c.preventDefault();return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!=="click"||!p.nodeName(f,"a"))&&p.acceptData(f)&&m&&f[s]&&(s!=="focus"&&s!=="blur"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n=(p._data(this,"events")||{})[c.type]||[],o=n.delegateCount,q=[].slice.call(arguments),r=!c.exclusive&&!c.namespace,s=p.event.special[c.type]||{},t=[];q[0]=c,c.delegateTarget=this;if(s.preDispatch&&s.preDispatch.call(this,c)===!1)return;if(o&&(!c.button||c.type!=="click"))for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||c.type!=="click"){h={},j=[];for(d=0;d<o;d++)k=n[d],l=k.selector,h[l]===b&&(h[l]=p(l,this).index(f)>=0),h[l]&&j.push(k);j.length&&t.push({elem:f,matches:j})}n.length>o&&t.push({elem:this,matches:n.slice(o)});for(d=0;d<t.length&&!c.isPropagationStopped();d++){i=t[d],c.currentTarget=i.elem;for(e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++){k=i.matches[e];if(r||!c.namespace&&!k.namespace||c.namespace_re&&c.namespace_re.test(k.namespace))c.data=k.data,c.handleObj=k,g=((p.event.special[k.origType]||{}).handle||k.handler).apply(i.elem,q),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation()))}}return s.postDispatch&&s.postDispatch.call(this,c),c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando])return a;var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]=="undefined"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this instanceof p.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0;else return new p.Event(a,b)},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;d&&!p._data(d,"_submit_attached")&&(p.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),p._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")p.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,a,!0)});return!1}p.event.add(this,"beforeactivate._change",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,"_change_attached")&&(p.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0)}),p._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){c++===0&&e.addEventListener(a,d,!0)},teardown:function(){--c===0&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=ba;else if(!e)return this;return f===1&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if(typeof a=="object"){for(f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;return p._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function $(a,b,c,d){c=c||[],b=b||q;var e,f,g,j,k=b.nodeType;if(k!==1&&k!==9)return[];if(!a||typeof a!="string")return c;g=h(b);if(!g&&!d)if(e=L.exec(a))if(j=e[1]){if(k===9){f=b.getElementById(j);if(!f||!f.parentNode)return c;if(f.id===j)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(j))&&i(b,f)&&f.id===j)return c.push(f),c}else{if(e[2])return u.apply(c,t.call(b.getElementsByTagName(a),0)),c;if((j=e[3])&&X&&b.getElementsByClassName)return u.apply(c,t.call(b.getElementsByClassName(j),0)),c}return bk(a,b,c,d,g)}function _(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function ba(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function bb(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}function bc(a,b,c,d){var e,g,h,i,j,k,l,m,n,p,r=!c&&b!==q,s=(r?"<s>":"")+a.replace(H,"$1<s>"),u=y[o][s];if(u)return d?0:t.call(u,0);j=a,k=[],m=0,n=f.preFilter,p=f.filter;while(j){if(!e||(g=I.exec(j)))g&&(j=j.slice(g[0].length),h.selector=l),k.push(h=[]),l="",r&&(j=" "+j);e=!1;if(g=J.exec(j))l+=g[0],j=j.slice(g[0].length),e=h.push({part:g.pop().replace(H," "),string:g[0],captures:g});for(i in p)(g=S[i].exec(j))&&(!n[i]||(g=n[i](g,b,c)))&&(l+=g[0],j=j.slice(g[0].length),e=h.push({part:i,string:g.shift(),captures:g}));if(!e)break}return l&&(h.selector=l),d?j.length:j?$.error(a):t.call(y(s,k),0)}function bd(a,b,e,f){var g=b.dir,h=s++;return a||(a=function(a){return a===e}),b.first?function(b){while(b=b[g])if(b.nodeType===1)return a(b)&&b}:f?function(b){while(b=b[g])if(b.nodeType===1&&a(b))return b}:function(b){var e,f=h+"."+c,i=f+"."+d;while(b=b[g])if(b.nodeType===1){if((e=b[o])===i)return b.sizset;if(typeof e=="string"&&e.indexOf(f)===0){if(b.sizset)return b}else{b[o]=i;if(a(b))return b.sizset=!0,b;b.sizset=!1}}}}function be(a,b){return a?function(c){var d=b(c);return d&&a(d===!0?c:d)}:b}function bf(a,b,c){var d,e,g=0;for(;d=a[g];g++)f.relative[d.part]?e=bd(e,f.relative[d.part],b,c):e=be(e,f.filter[d.part].apply(null,d.captures.concat(b,c)));return e}function bg(a){return function(b){var c,d=0;for(;c=a[d];d++)if(c(b))return!0;return!1}}function bh(a,b,c,d){var e=0,f=b.length;for(;e<f;e++)$(a,b[e],c,d)}function bi(a,b,c,d,e,g){var h,i=f.setFilters[b.toLowerCase()];return i||$.error(b),(a||!(h=e))&&bh(a||"*",d,h=[],e),h.length>0?i(h,c,g):[]}function bj(a,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s=0,t=a.length,v=S.POS,w=new RegExp("^"+v.source+"(?!"+A+")","i"),x=function(){var a=1,c=arguments.length-2;for(;a<c;a++)arguments[a]===b&&(n[a]=b)};for(;s<t;s++){f=a[s],g="",m=e;for(h=0,i=f.length;h<i;h++){j=f[h],k=j.string;if(j.part==="PSEUDO"){v.exec(""),l=0;while(n=v.exec(k)){o=!0,p=v.lastIndex=n.index+n[0].length;if(p>l){g+=k.slice(l,n.index),l=p,q=[c],J.test(g)&&(m&&(q=m),m=e);if(r=O.test(g))g=g.slice(0,-5).replace(J,"$&*"),l++;n.length>1&&n[0].replace(w,x),m=bi(g,n[1],n[2],q,m,r)}g=""}}o||(g+=k),o=!1}g?J.test(g)?bh(g,m||[c],d,e):$(g,c,d,e?e.concat(m):m):u.apply(d,m)}return t===1?d:$.uniqueSort(d)}function bk(a,b,e,g,h){a=a.replace(H,"$1");var i,k,l,m,n,o,p,q,r,s,v=bc(a,b,h),w=b.nodeType;if(S.POS.test(a))return bj(v,b,e,g);if(g)i=t.call(g,0);else if(v.length===1){if((o=t.call(v[0],0)).length>2&&(p=o[0]).part==="ID"&&w===9&&!h&&f.relative[o[1].part]){b=f.find.ID(p.captures[0].replace(R,""),b,h)[0];if(!b)return e;a=a.slice(o.shift().string.length)}r=(v=N.exec(o[0].string))&&!v.index&&b.parentNode||b,q="";for(n=o.length-1;n>=0;n--){p=o[n],s=p.part,q=p.string+q;if(f.relative[s])break;if(f.order.test(s)){i=f.find[s](p.captures[0].replace(R,""),r,h);if(i==null)continue;a=a.slice(0,a.length-q.length)+q.replace(S[s],""),a||u.apply(e,t.call(i,0));break}}}if(a){k=j(a,b,h),c=k.dirruns++,i==null&&(i=f.find.TAG("*",N.test(a)&&b.parentNode||b));for(n=0;m=i[n];n++)d=k.runs++,k(m)&&e.push(m)}return e}var c,d,e,f,g,h,i,j,k,l,m=!0,n="undefined",o=("sizcache"+Math.random()).replace(".",""),q=a.document,r=q.documentElement,s=0,t=[].slice,u=[].push,v=function(a,b){return a[o]=b||!0,a},w=function(){var a={},b=[];return v(function(c,d){return b.push(c)>f.cacheLength&&delete a[b.shift()],a[c]=d},a)},x=w(),y=w(),z=w(),A="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",C=B.replace("w","w#"),D="([*^$|!~]?=)",E="\\["+A+"*("+B+")"+A+"*(?:"+D+A+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+C+")|)|)"+A+"*\\]",F=":("+B+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+E+")|[^:]|\\\\.)*|.*))\\)|)",G=":(nth|eq|gt|lt|first|last|even|odd)(?:\\(((?:-\\d)?\\d*)\\)|)(?=[^-]|$)",H=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g"),I=new RegExp("^"+A+"*,"+A+"*"),J=new RegExp("^"+A+"*([\\x20\\t\\r\\n\\f>+~])"+A+"*"),K=new RegExp(F),L=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,M=/^:not/,N=/[\x20\t\r\n\f]*[+~]/,O=/:not\($/,P=/h\d/i,Q=/input|select|textarea|button/i,R=/\\(?!\\)/g,S={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+E),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),POS:new RegExp(G,"ig"),needsContext:new RegExp("^"+A+"*[>+~]|"+G,"i")},T=function(a){var b=q.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}},U=T(function(a){return a.appendChild(q.createComment("")),!a.getElementsByTagName("*").length}),V=T(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==n&&a.firstChild.getAttribute("href")==="#"}),W=T(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return b!=="boolean"&&b!=="string"}),X=T(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",a.getElementsByClassName("e").length===2)}),Y=T(function(a){a.id=o+0,a.innerHTML="<a name='"+o+"'></a><div name='"+o+"'></div>",r.insertBefore(a,r.firstChild);var b=q.getElementsByName&&q.getElementsByName(o).length===2+q.getElementsByName(o+0).length;return e=!q.getElementById(o),r.removeChild(a),b});try{t.call(r.childNodes,0)[0].nodeType}catch(Z){t=function(a){var b,c=[];for(;b=this[a];a++)c.push(b);return c}}$.matches=function(a,b){return $(a,null,null,b)},$.matchesSelector=function(a,b){return $(b,null,null,[a]).length>0},g=$.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=g(a)}else if(e===3||e===4)return a.nodeValue}else for(;b=a[d];d++)c+=g(b);return c},h=$.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},i=$.contains=r.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:r.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},$.attr=function(a,b){var c,d=h(a);return d||(b=b.toLowerCase()),f.attrHandle[b]?f.attrHandle[b](a):W||d?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]=="boolean"?a[b]?b:null:c.specified?c.value:null:null)},f=$.selectors={cacheLength:50,createPseudo:v,match:S,order:new RegExp("ID|TAG"+(Y?"|NAME":"")+(X?"|CLASS":"")),attrHandle:V?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:e?function(a,b,c){if(typeof b.getElementById!==n&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==n&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==n&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:U?function(a,b){if(typeof b.getElementsByTagName!==n)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if(a==="*"){var d,e=[],f=0;for(;d=c[f];f++)d.nodeType===1&&e.push(d);return e}return c},NAME:function(a,b){if(typeof b.getElementsByName!==n)return b.getElementsByName(name)},CLASS:function(a,b,c){if(typeof b.getElementsByClassName!==n&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(R,""),a[3]=(a[4]||a[5]||"").replace(R,""),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]==="nth"?(a[2]||$.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]==="even"||a[2]==="odd")),a[4]=+(a[6]+a[7]||a[2]==="odd")):a[2]&&$.error(a[0]),a},PSEUDO:function(a,b,c){var d,e;if(S.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(d=a[4])K.test(d)&&(e=bc(d,b,c,!0))&&(e=d.indexOf(")",d.length-e)-d.length)&&(d=d.slice(0,e),a[0]=a[0].slice(0,e)),a[2]=d;return a.slice(0,3)}},filter:{ID:e?function(a){return a=a.replace(R,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(R,""),function(b){var c=typeof b.getAttributeNode!==n&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return a==="*"?function(){return!0}:(a=a.replace(R,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=x[o][a];return b||(b=x(a,new RegExp("(^|"+A+")"+a+"("+A+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==n&&a.getAttribute("class")||"")}},ATTR:function(a,b,c){return b?function(d){var e=$.attr(d,a),f=e+"";if(e==null)return b==="!=";switch(b){case"=":return f===c;case"!=":return f!==c;case"^=":return c&&f.indexOf(c)===0;case"*=":return c&&f.indexOf(c)>-1;case"$=":return c&&f.substr(f.length-c.length)===c;case"~=":return(" "+f+" ").indexOf(c)>-1;case"|=":return f===c||f.substr(0,c.length+1)===c+"-"}}:function(b){return $.attr(b,a)!=null}},CHILD:function(a,b,c,d){if(a==="nth"){var e=s++;return function(a){var b,f,g=0,h=a;if(c===1&&d===0)return!0;b=a.parentNode;if(b&&(b[o]!==e||!a.sizset)){for(h=b.firstChild;h;h=h.nextSibling)if(h.nodeType===1){h.sizset=++g;if(h===a)break}b[o]=e}return f=a.sizset-d,c===0?f===0:f%c===0&&f/c>=0}}return function(b){var c=b;switch(a){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(a==="first")return!0;c=b;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b,c,d){var e,g=f.pseudos[a]||f.pseudos[a.toLowerCase()];return g||$.error("unsupported pseudo: "+a),g[o]?g(b,c,d):g.length>1?(e=[a,a,"",b],function(a){return g(a,0,e)}):g}},pseudos:{not:v(function(a,b,c){var d=j(a.replace(H,"$1"),b,c);return function(a){return!d(a)}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!f.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>"@"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},contains:v(function(a){return function(b){return(b.textContent||b.innerText||g(b)).indexOf(a)>-1}}),has:v(function(a){return function(b){return $(a,b).length>0}}),header:function(a){return P.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()==="input"&&(b=a.type)==="text"&&((c=a.getAttribute("type"))==null||c.toLowerCase()===b)},radio:_("radio"),checkbox:_("checkbox"),file:_("file"),password:_("password"),image:_("image"),submit:ba("submit"),reset:ba("reset"),button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},input:function(a){return Q.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){var d=[],e=c?1:0,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},odd:function(a,b,c){var d=[],e=c?0:1,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)},eq:function(a,b,c){var d=a.splice(+b,1);return c?a:d}}},k=r.compareDocumentPosition?function(a,b){return a===b?(l=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b)return l=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,h=b.parentNode,i=g;if(g===h)return bb(a,b);if(!g)return-1;if(!h)return 1;while(i)e.unshift(i),i=i.parentNode;i=h;while(i)f.unshift(i),i=i.parentNode;c=e.length,d=f.length;for(var j=0;j<c&&j<d;j++)if(e[j]!==f[j])return bb(e[j],f[j]);return j===c?bb(a,f[j],-1):bb(e[j],b,1)},[0,0].sort(k),m=!l,$.uniqueSort=function(a){var b,c=1;l=m,a.sort(k);if(l)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a},$.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},j=$.compile=function(a,b,c){var d,e,f,g=z[o][a];if(g&&g.context===b)return g;d=bc(a,b,c);for(e=0,f=d.length;e<f;e++)d[e]=bf(d[e],b,c);return g=z(a,bg(d)),g.context=b,g.runs=g.dirruns=0,g},q.querySelectorAll&&function(){var a,b=bk,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[],f=[":active"],g=r.matchesSelector||r.mozMatchesSelector||r.webkitMatchesSelector||r.oMatchesSelector||r.msMatchesSelector;T(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+A+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),T(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+A+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=e.length&&new RegExp(e.join("|")),bk=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a)))if(d.nodeType===9)try{return u.apply(f,t.call(d.querySelectorAll(a),0)),f}catch(i){}else if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var j,k,l,m=d.getAttribute("id"),n=m||o,p=N.test(a)&&d.parentNode||d;m?n=n.replace(c,"\\$&"):d.setAttribute("id",n),j=bc(a,d,h),n="[id='"+n+"']";for(k=0,l=j.length;k<l;k++)j[k]=n+j[k].selector;try{return u.apply(f,t.call(p.querySelectorAll(j.join(",")),0)),f}catch(i){}finally{m||d.removeAttribute("id")}}return b(a,d,f,g,h)},g&&(T(function(b){a=g.call(b,"div");try{g.call(b,"[test!='']:sizzle"),f.push(S.PSEUDO.source,S.POS.source,"!=")}catch(c){}}),f=new RegExp(f.join("|")),$.matchesSelector=function(b,c){c=c.replace(d,"='$1']");if(!h(b)&&!f.test(c)&&(!e||!e.test(c)))try{var i=g.call(b,c);if(i||a||b.document&&b.document.nodeType!==11)return i}catch(j){}return $(c,null,null,[b]).length>0})}(),f.setFilters.nth=f.setFilters.eq,f.filters=f.pseudos,$.attr=p.attr,p.find=$,p.expr=$.selectors,p.expr[":"]=p.expr.pseudos,p.unique=$.uniqueSort,p.text=$.getText,p.isXMLDoc=$.isXML,p.contains=$.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\[\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!="string")return p(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});g=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(bj(this,a,!1),"not",a)},filter:function(a){return this.pushStack(bj(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!="string"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?typeof a=="string"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return bi(a,"nextSibling")},prev:function(a){return bi(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d=="string"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(","))}}),p.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bl="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bm=/ jQuery\d+="(?:null|\d+)"/g,bn=/^\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bp=/<([\w:]+)/,bq=/<tbody/i,br=/<|&#?\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp("<(?:"+bl+")[\\s/>]","i"),bv=/^(?:checkbox|radio)$/,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bA=bk(e),bB=bA.appendChild(e.createElement("div"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,"X<div>","</div>"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++)if(!a||p.filter(a,[c]).length)!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName("*"));while(a.firstChild)a.removeChild(a.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bm,""):b;if(typeof a=="string"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bo,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j=="string"&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,"tr");for(h=e.cacheable||l-1;i<l;i++)d.call(c&&p.nodeName(this[i],"table")?bC(this[i],"tbody"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,a.length===1&&typeof i=="string"&&i.length<512&&c===e&&i.charAt(0)==="<"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1)return g[b](this[0]),this;for(;e<h;e++)d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f)e[f]&&bE(d[f],e[f])}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f)bD(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=b===e&&bA,t=[];if(!b||typeof b.createDocumentFragment=="undefined")b=e;for(f=0;(h=a[f])!=null;f++){typeof h=="number"&&(h+="");if(!h)continue;if(typeof h=="string")if(!br.test(h))h=b.createTextNode(h);else{s=s||bk(b),l=b.createElement("div"),s.appendChild(l),h=h.replace(bo,"<$1></$2>"),i=(bp.exec(h)||["",""])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--)l=l.lastChild;if(!p.support.tbody){m=bq.test(h),n=i==="table"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]==="<table>"&&!m?l.childNodes:[];for(g=n.length-1;g>=0;--g)p.nodeName(n[g],"tbody")&&!n[g].childNodes.length&&n[g].parentNode.removeChild(n[g])}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l.parentNode.removeChild(l)}h.nodeType?t.push(h):p.merge(t,h)}l&&(h=l=s=null);if(!p.support.appendChecked)for(f=0;(h=t[f])!=null;f++)p.nodeName(h,"input")?bG(h):typeof h.getElementsByTagName!="undefined"&&p.grep(h.getElementsByTagName("input"),bG);if(c){q=function(a){if(!a.type||bx.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(f=0;(h=t[f])!=null;f++)if(!p.nodeName(h,"script")||!q(h))c.appendChild(h),typeof h.getElementsByTagName!="undefined"&&(r=p.grep(p.merge([],h.getElementsByTagName("script")),q),t.splice.apply(t,[f+1,0].concat(r)),f+=r.length)}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++)if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\([^)]*\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^(none|table(?!-c[ea]).+)/,bO=/^margin/,bP=new RegExp("^("+q+")(.*)$","i"),bQ=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bR=new RegExp("^([-+])=("+q+")","i"),bS={},bT={position:"absolute",visibility:"hidden",display:"block"},bU={letterSpacing:0,fontWeight:400},bV=["Top","Right","Bottom","Left"],bW=["Webkit","O","Moz","ms"],bX=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return b$(this,!0)},hide:function(){return b$(this)},toggle:function(a,b){var c=typeof a=="boolean";return p.isFunction(a)&&p.isFunction(b)?bX.apply(this,arguments):this.each(function(){(c?a:bZ(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,"opacity");return c===""?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bY(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d,g==="string"&&(f=bR.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!p.cssNumber[i]&&(d+="px");if(!h||!("set"in h)||(d=h.set(a,d,e))!==b)try{j[c]=d}catch(k){}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bY(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f==="normal"&&c in bU&&(f=bU[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h[c],d===""&&!p.contains(b.ownerDocument,b)&&(d=p.style(b,c)),bQ.test(d)&&bO.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bQ.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),e===""?"auto":e}),p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth===0&&bN.test(bH(a,"display"))?p.swap(a,bT,function(){return cb(a,b,d)}):cb(a,b,d)},set:function(a,c,d){return b_(a,c,d?ca(a,b,d,p.support.boxSizing&&p.css(a,"boxSizing")==="border-box"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bK.test(f)?f.replace(bK,e):f+" "+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b)return bH(a,"marginRight")})}}),!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bQ.test(d)?p(a).position()[b]+"px":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,"display"))==="none"},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bV[d]+b]=e[d]||e[d-2]||e[0];return f}},bO.test(a)||(p.cssHooks[a+b].set=b_)});var cd=/%20/g,ce=/\[\]$/,cf=/\r?\n/g,cg=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ch=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ch.test(this.nodeName)||cg.test(this.type))}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(cf,"\r\n")}}):{name:b.name,value:c.replace(cf,"\r\n")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(d in a)ci(d,a[d],c,f);return e.join("&").replace(cd,"+")};var cj,ck,cl=/#.*$/,cm=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,cn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,co=/^(?:GET|HEAD)$/,cp=/^\/\//,cq=/\?/,cr=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cs=/([?&])_=[^&]*/,ct=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,cu=p.fn.load,cv={},cw={},cx=["*/"]+["*"];try{cj=f.href}catch(cy){cj=e.createElement("a"),cj.href="",cj=cj.href}ck=ct.exec(cj.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!="string"&&cu)return cu.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):c&&typeof c=="object"&&(f="POST"),p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p("<div>").append(a.replace(cr,"")).find(e):a)}),this},p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?cB(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cB(a,b),a},ajaxSettings:{url:cj,isLocal:cn.test(ck[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cx},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cz(cv),ajaxTransport:cz(cw),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2)return;v=2,h&&clearTimeout(h),g=b,e=i||"",x.readyState=a>0?4:0,f&&(u=cC(l,x,f));if(a>=200&&a<300||a===304)l.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(p.lastModified[d]=w),w=x.getResponseHeader("Etag"),w&&(p.etag[d]=w)),a===304?(y="notmodified",k=!0):(k=cD(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y="error",a<0&&(a=0)}x.status=a,x.statusText=""+(c||y),k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger("ajaxComplete",[x,l]),--p.active||p.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return v===2?e:null},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=cm.exec(e))f[c[1].toLowerCase()]=c[2]}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(v<2)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b)}return this},l.url=((a||l.url)+"").replace(cl,"").replace(cp,ck[1]+"//"),l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s),l.crossDomain==null&&(i=ct.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]==ck[1]&&i[2]==ck[2]&&(i[3]||(i[1]==="http:"?80:443))==(ck[3]||(ck[1]==="http:"?80:443)))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=p.param(l.data,l.traditional)),cA(cv,l,c,x);if(v===2)return x;j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!co.test(l.type),j&&p.active++===0&&p.event.trigger("ajaxStart");if(!l.hasContent){l.data&&(l.url+=(cq.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url;if(l.cache===!1){var z=p.now(),A=l.url.replace(cs,"$1_="+z);l.url=A+(A===l.url?(cq.test(l.url)?"&":"?")+"_="+z:"")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&x.setRequestHeader("If-None-Match",p.etag[d])),x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+cx+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)x.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&v!==2){w="abort";for(k in{success:1,error:1,complete:1})x[k](l[k]);g=cA(cw,l,c,x);if(!g)y(-1,"No Transport");else{x.readyState=1,j&&n.trigger("ajaxSend",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort("timeout")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2)y(-1,B);else throw B}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var cE=[],cF=/\?/,cG=/(=)\?(?=&|$)|\?\?/,cH=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cE.pop()||p.expando+"_"+cH++;return this[a]=!0,a}}),p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cG.test(j),m=k&&!l&&typeof i=="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&cG.test(i);if(c.dataTypes[0]==="jsonp"||l||m)return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cG,"$1"+f):m?c.data=i.replace(cG,"$1"+f):k&&(c.url+=(cF.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||p.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cE.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),"script"}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){c=e.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cI,cJ=a.ActiveXObject?function(){for(var a in cI)cI[a](0,1)}:!1,cK=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cL()||cM()}:cL,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=p.noop,cJ&&delete cI[g]);if(e)i.readyState!==4&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cK,cJ&&(cI||(cI={},p(a).unload(cJ)),cI[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cN,cO,cP=/^(?:toggle|show|hide)$/,cQ=new RegExp("^(?:([-+])=|)("+q+")([a-z%]*)$","i"),cR=/queueHooks$/,cS=[cY],cT={"*":[function(a,b){var c,d,e,f=this.createTween(a,b),g=cQ.exec(b),h=f.cur(),i=+h||0,j=1;if(g){c=+g[2],d=g[3]||(p.cssNumber[a]?"":"px");if(d!=="px"&&i){i=p.css(f.elem,a,!0)||c||1;do e=j=j||".5",i=i/j,p.style(f.elem,a,i+d),j=f.cur()/h;while(j!==1&&j!==e)}f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return f}]};p.Animation=p.extend(cW,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],cT[c]=cT[c]||[],cT[c].unshift(b)},prefilter:function(a,b){b?cS.unshift(a):cS.push(a)}}),p.Tween=cZ,cZ.prototype={constructor:cZ,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){var a=cZ.propHooks[this.prop];return a&&a.get?a.get(this):cZ.propHooks._default.get(this)},run:function(a){var b,c=cZ.propHooks[this.prop];return this.options.duration?this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cZ.propHooks._default.set(this),this}},cZ.prototype.init.prototype=cZ.prototype,cZ.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cZ.propHooks.scrollTop=cZ.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d=="boolean"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(c$(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bZ).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cW(this,p.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cR.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:c$("show"),slideUp:c$("hide"),slideToggle:c$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&typeof a=="object"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},p.timers=[],p.fx=cZ.prototype.init,p.fx.tick=function(){var a,b=p.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cO&&(cO=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cO),cO=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c_=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j,k,l,m=this[0],n=m&&m.ownerDocument;if(!n)return;return(e=n.body)===m?p.offset.bodyOffset(m):(d=n.documentElement,p.contains(d,m)?(c=m.getBoundingClientRect(),f=da(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,k=c.top+i-g,l=c.left+j-h,{top:k,left:l}):{top:0,left:0})},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");d==="static"&&(a.style.position="relative");var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),i=(d==="absolute"||d==="fixed")&&p.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0])return;var a=this[0],b=this.offsetParent(),c=this.offset(),d=c_.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,"marginTop"))||0,c.left-=parseFloat(p.css(a,"marginLeft"))||0,d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c_.test(a.nodeName)&&p.css(a,"position")==="static")a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=da(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!="boolean"),h=d||(e===!0||f===!0?"margin":"border");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement["client"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=p,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);
window.Jidz=iAdvize.$=$.noConflict(true);// jQuery MouseWheel from https://github.com/vitch/jScrollPane/blob/master/script/jquery.mousewheel.js
(function(d){function e(a){var b=a||window.event,c=[].slice.call(arguments,1),f=0,e=0,g=0,a=d.event.fix(b);a.type="mousewheel";b.wheelDelta&&(f=b.wheelDelta/120);b.detail&&(f=-b.detail/3);g=f;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(g=0,e=-1*f);void 0!==b.wheelDeltaY&&(g=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(e=-1*b.wheelDeltaX/120);c.unshift(a,f,e,g);return(d.event.dispatch||d.event.handle).apply(this,c)}var c=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks)for(var h=c.length;h;)d.event.fixHooks[c[--h]]= d.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],e,!1);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(iAdvize.$);

/*!
 * jScrollPane - v2.0.0beta12 - 2012-07-24
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
(function(b,a,c){b.fn.jScrollPane=function(e){function d(D,O){var ay,Q=this,Y,aj,v,al,T,Z,y,q,az,aE,au,i,I,h,j,aa,U,ap,X,t,A,aq,af,am,G,l,at,ax,x,av,aH,f,L,ai=true,P=true,aG=false,k=false,ao=D.clone(false,false).empty(),ac=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";aH=D.css("paddingTop")+" "+D.css("paddingRight")+" "+D.css("paddingBottom")+" "+D.css("paddingLeft");f=(parseInt(D.css("paddingLeft"),10)||0)+(parseInt(D.css("paddingRight"),10)||0);function ar(aQ){var aL,aN,aM,aJ,aI,aP,aO=false,aK=false;ay=aQ;if(Y===c){aI=D.scrollTop();aP=D.scrollLeft();D.css({overflow:"hidden",padding:0});aj=D.innerWidth()+f;v=D.innerHeight();D.width(aj);Y=b('<div class="jspPane" />').css("padding",aH).append(D.children());al=b('<div class="jspContainer" />').css({width:aj+"px",height:v+"px"}).append(Y).appendTo(D)}else{D.css("width","");aO=ay.stickToBottom&&K();aK=ay.stickToRight&&B();aJ=D.innerWidth()+f!=aj||D.outerHeight()!=v;if(aJ){aj=D.innerWidth()+f;v=D.innerHeight();al.css({width:aj+"px",height:v+"px"})}if(!aJ&&L==T&&Y.outerHeight()==Z){D.width(aj);return}L=T;Y.css("width","");D.width(aj);al.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}Y.css("overflow","auto");if(aQ.contentWidth){T=aQ.contentWidth}else{T=Y[0].scrollWidth}Z=Y[0].scrollHeight;Y.css("overflow","");y=T/aj;q=Z/v;az=q>1;aE=y>1;if(!(aE||az)){D.removeClass("jspScrollable");Y.css({top:0,width:al.width()-f});n();E();R();w()}else{D.addClass("jspScrollable");aL=ay.maintainPosition&&(I||aa);if(aL){aN=aC();aM=aA()}aF();z();F();if(aL){N(aK?(T-aj):aN,false);M(aO?(Z-v):aM,false)}J();ag();an();if(ay.enableKeyboardNavigation){S()}if(ay.clickOnTrack){p()}C();if(ay.hijackInternalLinks){m()}}if(ay.autoReinitialise&&!av){av=setInterval(function(){ar(ay)},ay.autoReinitialiseDelay)}else{if(!ay.autoReinitialise&&av){clearInterval(av)}}aI&&D.scrollTop(0)&&M(aI,false);aP&&D.scrollLeft(0)&&N(aP,false);D.trigger("jsp-initialised",[aE||az])}function aF(){if(az){al.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />')));U=al.find(">.jspVerticalBar");ap=U.find(">.jspTrack");au=ap.find(">.jspDrag");if(ay.showArrows){aq=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",aD(0,-1)).bind("click.jsp",aB);af=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",aD(0,1)).bind("click.jsp",aB);if(ay.arrowScrollOnHover){aq.bind("mouseover.jsp",aD(0,-1,aq));af.bind("mouseover.jsp",aD(0,1,af))}ak(ap,ay.verticalArrowPositions,aq,af)}t=v;al.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){t-=b(this).outerHeight()});au.hover(function(){au.addClass("jspHover")},function(){au.removeClass("jspHover")}).bind("mousedown.jsp",function(aI){b("html").bind("dragstart.jsp selectstart.jsp",aB);au.addClass("jspActive");var s=aI.pageY-au.position().top;b("html").bind("mousemove.jsp",function(aJ){V(aJ.pageY-s,false)}).bind("mouseup.jsp mouseleave.jsp",aw);return false});o()}}function o(){ap.height(t+"px");I=0;X=ay.verticalGutter+ap.outerWidth();Y.width(aj-X-f);try{if(U.position().left===0){Y.css("margin-left",X+"px")}}catch(s){}}function z(){if(aE){al.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />')));am=al.find(">.jspHorizontalBar");G=am.find(">.jspTrack");h=G.find(">.jspDrag");if(ay.showArrows){ax=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",aD(-1,0)).bind("click.jsp",aB);x=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",aD(1,0)).bind("click.jsp",aB);if(ay.arrowScrollOnHover){ax.bind("mouseover.jsp",aD(-1,0,ax));x.bind("mouseover.jsp",aD(1,0,x))}ak(G,ay.horizontalArrowPositions,ax,x)}h.hover(function(){h.addClass("jspHover")},function(){h.removeClass("jspHover")}).bind("mousedown.jsp",function(aI){b("html").bind("dragstart.jsp selectstart.jsp",aB);h.addClass("jspActive");var s=aI.pageX-h.position().left;b("html").bind("mousemove.jsp",function(aJ){W(aJ.pageX-s,false)}).bind("mouseup.jsp mouseleave.jsp",aw);return false});l=al.innerWidth();ah()}}function ah(){al.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){l-=b(this).outerWidth()});G.width(l+"px");aa=0}function F(){if(aE&&az){var aI=G.outerHeight(),s=ap.outerWidth();t-=aI;b(am).find(">.jspCap:visible,>.jspArrow").each(function(){l+=b(this).outerWidth()});l-=s;v-=s;aj-=aI;G.parent().append(b('<div class="jspCorner" />').css("width",aI+"px"));o();ah()}if(aE){Y.width((al.outerWidth()-f)+"px")}Z=Y.outerHeight();q=Z/v;if(aE){at=Math.ceil(1/y*l);if(at>ay.horizontalDragMaxWidth){at=ay.horizontalDragMaxWidth}else{if(at<ay.horizontalDragMinWidth){at=ay.horizontalDragMinWidth}}h.width(at+"px");j=l-at;ae(aa)}if(az){A=Math.ceil(1/q*t);if(A>ay.verticalDragMaxHeight){A=ay.verticalDragMaxHeight}else{if(A<ay.verticalDragMinHeight){A=ay.verticalDragMinHeight}}au.height(A+"px");i=t-A;ad(I)}}function ak(aJ,aL,aI,s){var aN="before",aK="after",aM;if(aL=="os"){aL=/Mac/.test(navigator.platform)?"after":"split"}if(aL==aN){aK=aL}else{if(aL==aK){aN=aL;aM=aI;aI=s;s=aM}}aJ[aN](aI)[aK](s)}function aD(aI,s,aJ){return function(){H(aI,s,this,aJ);this.blur();return false}}function H(aL,aK,aO,aN){aO=b(aO).addClass("jspActive");var aM,aJ,aI=true,s=function(){if(aL!==0){Q.scrollByX(aL*ay.arrowButtonSpeed)}if(aK!==0){Q.scrollByY(aK*ay.arrowButtonSpeed)}aJ=setTimeout(s,aI?ay.initialDelay:ay.arrowRepeatFreq);aI=false};s();aM=aN?"mouseout.jsp":"mouseup.jsp";aN=aN||b("html");aN.bind(aM,function(){aO.removeClass("jspActive");aJ&&clearTimeout(aJ);aJ=null;aN.unbind(aM)})}function p(){w();if(az){ap.bind("mousedown.jsp",function(aN){if(aN.originalTarget===c||aN.originalTarget==aN.currentTarget){var aL=b(this),aO=aL.offset(),aM=aN.pageY-aO.top-I,aJ,aI=true,s=function(){var aR=aL.offset(),aS=aN.pageY-aR.top-A/2,aP=v*ay.scrollPagePercent,aQ=i*aP/(Z-v);if(aM<0){if(I-aQ>aS){Q.scrollByY(-aP)}else{V(aS)}}else{if(aM>0){if(I+aQ<aS){Q.scrollByY(aP)}else{V(aS)}}else{aK();return}}aJ=setTimeout(s,aI?ay.initialDelay:ay.trackClickRepeatFreq);aI=false},aK=function(){aJ&&clearTimeout(aJ);aJ=null;b(document).unbind("mouseup.jsp",aK)};s();b(document).bind("mouseup.jsp",aK);return false}})}if(aE){G.bind("mousedown.jsp",function(aN){if(aN.originalTarget===c||aN.originalTarget==aN.currentTarget){var aL=b(this),aO=aL.offset(),aM=aN.pageX-aO.left-aa,aJ,aI=true,s=function(){var aR=aL.offset(),aS=aN.pageX-aR.left-at/2,aP=aj*ay.scrollPagePercent,aQ=j*aP/(T-aj);if(aM<0){if(aa-aQ>aS){Q.scrollByX(-aP)}else{W(aS)}}else{if(aM>0){if(aa+aQ<aS){Q.scrollByX(aP)}else{W(aS)}}else{aK();return}}aJ=setTimeout(s,aI?ay.initialDelay:ay.trackClickRepeatFreq);aI=false},aK=function(){aJ&&clearTimeout(aJ);aJ=null;b(document).unbind("mouseup.jsp",aK)};s();b(document).bind("mouseup.jsp",aK);return false}})}}function w(){if(G){G.unbind("mousedown.jsp")}if(ap){ap.unbind("mousedown.jsp")}}function aw(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(au){au.removeClass("jspActive")}if(h){h.removeClass("jspActive")}}function V(s,aI){if(!az){return}if(s<0){s=0}else{if(s>i){s=i}}if(aI===c){aI=ay.animateScroll}if(aI){Q.animate(au,"top",s,ad)}else{au.css("top",s);ad(s)}}function ad(aI){if(aI===c){aI=au.position().top}al.scrollTop(0);I=aI;var aL=I===0,aJ=I==i,aK=aI/i,s=-aK*(Z-v);if(ai!=aL||aG!=aJ){ai=aL;aG=aJ;D.trigger("jsp-arrow-change",[ai,aG,P,k])}u(aL,aJ);Y.css("top",s);D.trigger("jsp-scroll-y",[-s,aL,aJ]).trigger("scroll")}function W(aI,s){if(!aE){return}if(aI<0){aI=0}else{if(aI>j){aI=j}}if(s===c){s=ay.animateScroll}if(s){Q.animate(h,"left",aI,ae)}else{h.css("left",aI);ae(aI)}}function ae(aI){if(aI===c){aI=h.position().left}al.scrollTop(0);aa=aI;var aL=aa===0,aK=aa==j,aJ=aI/j,s=-aJ*(T-aj);if(P!=aL||k!=aK){P=aL;k=aK;D.trigger("jsp-arrow-change",[ai,aG,P,k])}r(aL,aK);Y.css("left",s);D.trigger("jsp-scroll-x",[-s,aL,aK]).trigger("scroll")}function u(aI,s){if(ay.showArrows){aq[aI?"addClass":"removeClass"]("jspDisabled");af[s?"addClass":"removeClass"]("jspDisabled")}}function r(aI,s){if(ay.showArrows){ax[aI?"addClass":"removeClass"]("jspDisabled");x[s?"addClass":"removeClass"]("jspDisabled")}}function M(s,aI){var aJ=s/(Z-v);V(aJ*i,aI)}function N(aI,s){var aJ=aI/(T-aj);W(aJ*j,s)}function ab(aV,aQ,aJ){var aN,aK,aL,s=0,aU=0,aI,aP,aO,aS,aR,aT;try{aN=b(aV)}catch(aM){return}aK=aN.outerHeight();aL=aN.outerWidth();al.scrollTop(0);al.scrollLeft(0);while(!aN.is(".jspPane")){s+=aN.position().top;aU+=aN.position().left;aN=aN.offsetParent();if(/^body|html$/i.test(aN[0].nodeName)){return}}aI=aA();aO=aI+v;if(s<aI||aQ){aR=s-ay.verticalGutter}else{if(s+aK>aO){aR=s-v+aK+ay.verticalGutter}}if(aR){M(aR,aJ)}aP=aC();aS=aP+aj;if(aU<aP||aQ){aT=aU-ay.horizontalGutter}else{if(aU+aL>aS){aT=aU-aj+aL+ay.horizontalGutter}}if(aT){N(aT,aJ)}}function aC(){return -Y.position().left}function aA(){return -Y.position().top}function K(){var s=Z-v;return(s>20)&&(s-aA()<10)}function B(){var s=T-aj;return(s>20)&&(s-aC()<10)}function ag(){al.unbind(ac).bind(ac,function(aL,aM,aK,aI){var aJ=aa,s=I;Q.scrollBy(aK*ay.mouseWheelSpeed,-aI*ay.mouseWheelSpeed,false);return aJ==aa&&s==I})}function n(){al.unbind(ac)}function aB(){return false}function J(){Y.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(s){ab(s.target,false)})}function E(){Y.find(":input,a").unbind("focus.jsp")}function S(){var s,aI,aK=[];aE&&aK.push(am[0]);az&&aK.push(U[0]);Y.focus(function(){D.focus()});D.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(aN){if(aN.target!==this&&!(aK.length&&b(aN.target).closest(aK).length)){return}var aM=aa,aL=I;switch(aN.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=aN.keyCode;aJ();break;case 35:M(Z-v);s=null;break;case 36:M(0);s=null;break}aI=aN.keyCode==s&&aM!=aa||aL!=I;return !aI}).bind("keypress.jsp",function(aL){if(aL.keyCode==s){aJ()}return !aI});if(ay.hideFocus){D.css("outline","none");if("hideFocus" in al[0]){D.attr("hideFocus",true)}}else{D.css("outline","");if("hideFocus" in al[0]){D.attr("hideFocus",false)}}function aJ(){var aM=aa,aL=I;switch(s){case 40:Q.scrollByY(ay.keyboardSpeed,false);break;case 38:Q.scrollByY(-ay.keyboardSpeed,false);break;case 34:case 32:Q.scrollByY(v*ay.scrollPagePercent,false);break;case 33:Q.scrollByY(-v*ay.scrollPagePercent,false);break;case 39:Q.scrollByX(ay.keyboardSpeed,false);break;case 37:Q.scrollByX(-ay.keyboardSpeed,false);break}aI=aM!=aa||aL!=I;return aI}}function R(){D.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function C(){if(location.hash&&location.hash.length>1){var aK,aI,aJ=escape(location.hash.substr(1));try{aK=b("#"+aJ+', a[name="'+aJ+'"]')}catch(s){return}if(aK.length&&Y.find(aJ)){if(al.scrollTop()===0){aI=setInterval(function(){if(al.scrollTop()>0){ab(aK,true);b(document).scrollTop(al.position().top);clearInterval(aI)}},50)}else{ab(aK,true);b(document).scrollTop(al.position().top)}}}}function m(){if(b(document.body).data("jspHijack")){return}b(document.body).data("jspHijack",true);b(document.body).delegate("a[href*=#]","click",function(s){var aI=this.href.substr(0,this.href.indexOf("#")),aK=location.href,aO,aP,aJ,aM,aL,aN;if(location.href.indexOf("#")!==-1){aK=location.href.substr(0,location.href.indexOf("#"))}if(aI!==aK){return}aO=escape(this.href.substr(this.href.indexOf("#")+1));aP;try{aP=b("#"+aO+', a[name="'+aO+'"]')}catch(aQ){return}if(!aP.length){return}aJ=aP.closest(".jspScrollable");aM=aJ.data("jsp");aM.scrollToElement(aP,true);if(aJ[0].scrollIntoView){aL=b(a).scrollTop();aN=aP.offset().top;if(aN<aL||aN>aL+b(a).height()){aJ[0].scrollIntoView()}}s.preventDefault()})}function an(){var aJ,aI,aL,aK,aM,s=false;al.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(aN){var aO=aN.originalEvent.touches[0];aJ=aC();aI=aA();aL=aO.pageX;aK=aO.pageY;aM=false;s=true}).bind("touchmove.jsp",function(aQ){if(!s){return}var aP=aQ.originalEvent.touches[0],aO=aa,aN=I;Q.scrollTo(aJ+aL-aP.pageX,aI+aK-aP.pageY);aM=aM||Math.abs(aL-aP.pageX)>5||Math.abs(aK-aP.pageY)>5;return aO==aa&&aN==I}).bind("touchend.jsp",function(aN){s=false}).bind("click.jsp-touchclick",function(aN){if(aM){aM=false;return false}})}function g(){var s=aA(),aI=aC();D.removeClass("jspScrollable").unbind(".jsp");D.replaceWith(ao.append(Y.children()));ao.scrollTop(s);ao.scrollLeft(aI);if(av){clearInterval(av)}}b.extend(Q,{reinitialise:function(aI){aI=b.extend({},ay,aI);ar(aI)},scrollToElement:function(aJ,aI,s){ab(aJ,aI,s)},scrollTo:function(aJ,s,aI){N(aJ,aI);M(s,aI)},scrollToX:function(aI,s){N(aI,s)},scrollToY:function(s,aI){M(s,aI)},scrollToPercentX:function(aI,s){N(aI*(T-aj),s)},scrollToPercentY:function(aI,s){M(aI*(Z-v),s)},scrollBy:function(aI,s,aJ){Q.scrollByX(aI,aJ);Q.scrollByY(s,aJ)},scrollByX:function(s,aJ){var aI=aC()+Math[s<0?"floor":"ceil"](s),aK=aI/(T-aj);W(aK*j,aJ)},scrollByY:function(s,aJ){var aI=aA()+Math[s<0?"floor":"ceil"](s),aK=aI/(Z-v);V(aK*i,aJ)},positionDragX:function(s,aI){W(s,aI)},positionDragY:function(aI,s){V(aI,s)},animate:function(aI,aL,s,aK){var aJ={};aJ[aL]=s;aI.animate(aJ,{duration:ay.animateDuration,easing:ay.animateEase,queue:false,step:aK})},getContentPositionX:function(){return aC()},getContentPositionY:function(){return aA()},getContentWidth:function(){return T},getContentHeight:function(){return Z},getPercentScrolledX:function(){return aC()/(T-aj)},getPercentScrolledY:function(){return aA()/(Z-v)},getIsScrollableH:function(){return aE},getIsScrollableV:function(){return az},getContentPane:function(){return Y},scrollToBottom:function(s){V(i,s)},hijackInternalLinks:b.noop,destroy:function(){g()}});ar(O)}e=b.extend({},b.fn.jScrollPane.defaults,e);b.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){e[this]=e[this]||e.speed});return this.each(function(){var f=b(this),g=f.data("jsp");if(g){g.reinitialise(e)}else{b("script",f).filter('[type="text/javascript"],:not([type])').remove();g=new d(f,e);f.data("jsp",g)}})};b.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(iAdvize.$,this);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> */
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();
/*	flensedCore 1.0 <http://www.flensed.com/> | Copyright (c) 2008-2010 Kyle Simpson, Getify Solutions, Inc. | This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> */
(function(B){var H=B,L=B.document,N="undefined",M=true,C=false,E="",F="object",D="string",G=null,J=null,I=null,K=B.parseInt,A=B.setTimeout;if(typeof B.flensed===N){B.flensed={}}else{if(typeof B.flensed.ua!==N){return}}G=B.flensed;A(function(){var P="flensed.js",U=C,R=L.getElementsByTagName("script"),T=R.length;try{G.base_path.toLowerCase();U=M}catch(S){G.base_path=E}if((typeof R!==N)&&(R!==null)){if(!U){var O=0;for(var Q=0;Q<T;Q++){if(typeof R[Q].src!==N){if((O=R[Q].src.indexOf(P))>=0){G.base_path=R[Q].src.substr(0,O);break}}}}}},0);G.parseXMLString=function(P){var O=null;if(H.ActiveXObject){O=new B.ActiveXObject("Microsoft.XMLDOM");O.async=C;O.loadXML(P)}else{var Q=new B.DOMParser();O=Q.parseFromString(P,"text/xml")}return O};G.getObjectById=function(O){try{if(L.layers){return L.layers[O]}else{if(L.all){return L.all[O]}else{if(L.getElementById){return L.getElementById(O)}}}}catch(P){}return null};G.createCSS=function(T,P,U,S){if(G.ua.ie&&G.ua.mac){return}var R=L.getElementsByTagName("head")[0];if(!R){return}var O=(U&&typeof U===D)?U:"screen";if(S){J=null;I=null}if(!J||I!==O){var Q=L.createElement("style");Q.setAttribute("type","text/css");Q.setAttribute("media",O);J=R.appendChild(Q);if(G.ua.ie&&G.ua.win&&typeof L.styleSheets!==N&&L.styleSheets.length>0){J=L.styleSheets[L.styleSheets.length-1]}I=O}if(G.ua.ie&&G.ua.win){if(J&&typeof J.addRule===F){J.addRule(T,P)}}else{if(J&&typeof L.createTextNode!==N){J.appendChild(L.createTextNode(T+" {"+P+"}"))}}};G.bindEvent=function(R,O,Q){O=O.toLowerCase();try{if(typeof R.addEventListener!==N){R.addEventListener(O.replace(/^on/,E),Q,C)}else{if(typeof R.attachEvent!==N){R.attachEvent(O,Q)}}}catch(P){}};G.unbindEvent=function(R,O,Q){O=O.toLowerCase();try{if(typeof R.removeEventListener!==N){R.removeEventListener(O.replace(/^on/,E),Q,C)}else{if(typeof R.detachEvent!==N){R.detachEvent(O,Q)}}}catch(P){}};G.throwUnhandledError=function(O){throw new B.Error(O)};G.error=function(R,P,Q,O){return{number:R,name:P,description:Q,message:Q,srcElement:O,toString:function(){return R+", "+P+", "+Q}}};G.ua=function(){var U="Shockwave Flash",O="ShockwaveFlash.ShockwaveFlash",Y="application/x-shockwave-flash",P=B.navigator,V=typeof L.getElementById!==N&&typeof L.getElementsByTagName!==N&&typeof L.createElement!==N,f=[0,0,0],X=null;if(typeof P.plugins!==N&&typeof P.plugins[U]===F){X=P.plugins[U].description;if(X&&!(typeof P.mimeTypes!==N&&P.mimeTypes[Y]&&!P.mimeTypes[Y].enabledPlugin)){X=X.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=K(X.replace(/^(.*)\..*$/,"$1"),10);f[1]=K(X.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/r/.test(X)?K(X.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof H.ActiveXObject!==N){try{var Z=new B.ActiveXObject(O);if(Z){X=Z.GetVariable("$version");if(X){X=X.split(" ")[1].split(",");f=[K(X[0],10),K(X[1],10),K(X[2],10)]}}}catch(T){}}}var e=P.userAgent.toLowerCase(),S=P.platform.toLowerCase(),c=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):C,Q=C,R=0,b=S?/win/.test(S):/win/.test(e),W=S?/mac/.test(S):/mac/.test(e);/*@cc_on Q=M;try{R=K(e.match(/msie (\d+)/)[1],10);}catch(e2){}@if(@_win32)b=M;@elif(@_mac)W=M;@end @*/return{w3cdom:V,pv:f,webkit:c,ie:Q,ieVer:R,win:b,mac:W}}()})(window);
/*	CheckPlayer 1.0.2 <http://checkplayer.flensed.com/>	| Copyright (c) 2008-2010 Kyle Simpson, Getify Solutions, Inc. | This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> */
(function(R){var E=R,V=R.document,N="undefined",G=true,X=false,W="",H="object",O="function",T="string",M="div",D="onunload",J="none",U=null,P=null,I=null,L=null,K="flensed.js",F="checkplayer.js",B="swfobject.js",C=R.setTimeout,A=R.clearTimeout,S=R.setInterval,Q=R.clearInterval;if(typeof R.flensed===N){R.flensed={}}if(typeof R.flensed.checkplayer!==N){return }P=R.flensed;C(function(){var Y=X,i=V.getElementsByTagName("script"),d=i.length;try{P.base_path.toLowerCase();Y=G}catch(b){P.base_path=""}function g(o,n,p){for(var m=0;m<d;m++){if(typeof i[m].src!==N){if(i[m].src.indexOf(o)>=0){break}}}var l=V.createElement("script");l.setAttribute("src",P.base_path+o);if(typeof n!==N){l.setAttribute("type",n)}if(typeof p!==N){l.setAttribute("language",p)}V.getElementsByTagName("head")[0].appendChild(l)}if((typeof i!==N)&&(i!==null)){if(!Y){var j=0;for(var c=0;c<d;c++){if(typeof i[c].src!==N){if(((j=i[c].src.indexOf(K))>=0)||((j=i[c].src.indexOf(F))>=0)){P.base_path=i[c].src.substr(0,j);break}}}}}try{R.swfobject.getObjectById("a")}catch(h){g(B,"text/javascript")}try{P.ua.pv.join(".")}catch(f){g(K,"text/javascript")}function Z(){A(a);try{E.detachEvent(D,arguments.callee)}catch(k){}}try{E.attachEvent(D,Z)}catch(e){}var a=C(function(){Z();try{R.swfobject.getObjectById("a");P.ua.pv.join(".")}catch(k){throw new R.Error("CheckPlayer dependencies failed to load.")}},20000)},0);P.checkplayer=function(x,AI,o,AB){if(typeof I._ins!==N){if(I._ins.ready()){setTimeout(function(){AI(I._ins)},0)}return I._ins}var a="6.0.65",z=[],i=null,f=X,g=null,AK=null,s=W,d=X,l=null,b=[],r={},AA=[],e=null,AG=null,AF=null,m=null,h=X,AH=null,k=X,t=X,p=X,AE=null;var Z=function(){if((typeof x!==N)&&(x!==null)&&(x!==X)){AG=x+W}else{AG="0.0.0"}if(typeof AI===O){AF=AI}if(typeof o!==N){h=!(!o)}if(typeof AB===O){m=AB}function AM(){A(g);try{E.detachEvent(D,AM)}catch(AP){}}try{E.attachEvent(D,AM)}catch(AN){}(function AO(){try{P.bindEvent(E,D,y)}catch(AP){g=C(arguments.callee,25);return }AM();AH=P.ua.pv.join(".");g=C(AD,1)})()}();function AD(){try{e=V.getElementsByTagName("body")[0]}catch(AN){}if((typeof e===N)||(e===null)){g=C(AD,25);return }try{R.swfobject.getObjectById("a");L=R.swfobject}catch(AM){g=C(AD,25);return }t=L.hasFlashPlayerVersion(a);k=L.hasFlashPlayerVersion(AG);AJ();if(typeof AF===O){AF(j)}d=G;if(k){u()}else{if(h&&!f){v()}}}function y(){if(typeof E.detachEvent!==N){E.detachEvent(D,y)}I._ins=null;if((typeof l!==N)&&(l!==null)){try{l.updateSWFCallback=null;AC=null}catch(AP){}l=null}try{for(var AO in j){if(j[AO]!==Object.prototype[AO]){try{j[AO]=null}catch(AN){}}}}catch(AM){}j=null;e=null;Y();AA=null;AF=null;m=null;try{for(var AS in I){if(I[AS]!==Object.prototype[AS]){try{I[AS]=null}catch(AR){}}}}catch(AQ){}I=null;P.checkplayer=null;P=null;R=null}function AL(AN,AO,AM){AA[AA.length]={func:AN,funcName:AO,args:AM}}function u(){if(!d){i=C(u,25);return }var AO=0;try{AO=AA.length}catch(AP){}for(var AN=0;AN<AO;AN++){try{AA[AN].func.apply(j,AA[AN].args);AA[AN]=X}catch(AM){k=X;AJ();if(typeof AF===O){AF(j)}else{throw new R.Error("checkplayer::"+AA[AN].funcName+"() call failed.")}}}AA=null}function Y(){A(g);g=null;A(i);i=null;for(var AN in r){if(r[AN]!==Object.prototype[AN]){Q(r[AN]);r[AN]=X}}for(var AM in z){if(z[AM]!==Object.prototype[AM]){A(z[AM]);z[AM]=X}}}function AJ(){try{j.playerVersionDetected=AH;j.checkPassed=k;j.updateable=t;j.updateStatus=p;j.updateControlsContainer=AE}catch(AM){}}function n(AS,AN){var AP=AN?"visible":"hidden";var AR=P.getObjectById(AS);try{if(AR!==null&&(typeof AR.style!==N)&&(AR.style!==null)){AR.style.visibility=AP}else{try{P.createCSS("#"+AS,"visibility:"+AP)}catch(AQ){}}}catch(AO){try{P.createCSS("#"+AS,"visibility:"+AP)}catch(AM){}}}function v(){var AR=e;if((typeof AR===N)||(AR===null)){z[z.length]=C(v,25);return }try{L.getObjectById("a")}catch(AQ){z[z.length]=C(v,25);return }if(!f){f=G;Y();if(t){s="CheckPlayerUpdate";AK=s+"SWF";P.createCSS("#"+s,"width:221px;height:145px;position:absolute;left:5px;top:5px;border:none;background-color:#000000;display:block;");P.createCSS("#"+AK,"display:inline;position:absolute;left:1px;top:1px;");AE=V.createElement(M);AE.id=s;AR.appendChild(AE);n(AE.id,X);AJ();var AT=null;try{AT=E.top.location.toString()}catch(AM){AT=E.location.toString()}var AO={swfId:AK,MMredirectURL:AT.replace(/&/g,"%26"),MMplayerType:(P.ua.ie&&P.ua.win?"ActiveX":"PlugIn"),MMdoctitle:V.title.slice(0,47)+" - Flash Player Installation"};var AS={allowScriptAccess:"always"};var AP={id:AK,name:AK};try{q(P.base_path+"updateplayer.swf",{appendToId:s},"219","143",AO,AS,AP,{swfTimeout:3000,swfCB:c},G)}catch(AN){w();return }}else{w()}}}function w(AM){if(typeof AM===N){AM="Flash Player not detected or not updateable."}p=I.UPDATE_FAILED;AJ();if(typeof m===O){m(j)}else{throw new R.Error("checkplayer::UpdatePlayer(): "+AM)}}function c(AM){if(AM.status===I.SWF_LOADED){A(r["continueUpdate_"+AK]);r["continueUpdate_"+AK]=X;l=AM.srcElem;l.updateSWFCallback=AC;p=I.UPDATE_INIT;AJ();if(typeof m===O){m(j)}n(AE.id,G)}else{if(AM.status===I.SWF_FAILED||AM.status===I.SWF_TIMEOUT){w()}}}function AC(AN){try{if(AN===0){p=I.UPDATE_SUCCESSFUL;AE.style.display=J;try{E.open(W,"_self",W);E.close();R.self.opener=E;R.self.close()}catch(AO){}}else{if(AN===1){p=I.UPDATE_CANCELED;AE.style.display=J}else{if(AN===2){AE.style.display=J;w("The Flash Player update failed.");return }else{if(AN===3){AE.style.display=J;w("The Flash Player update timed out.");return }}}}}catch(AM){}AJ();if(typeof m===O){m(j)}}function q(Af,AS,AU,AN,AP,AR,AW,Ad,Ab){if(AS!==null&&(typeof AS===T||typeof AS.replaceId===T)){n(((typeof AS===T)?AS:AS.replaceId),X)}if(!d&&!Ab){AL(q,"DoSWF",arguments);return }if(k||Ab){AU+=W;AN+=W;var AZ=(typeof AW===H)?AW:{};AZ.data=Af;AZ.width=AU;AZ.height=AN;var AY=(typeof AR===H)?AR:{};if(typeof AP===H){for(var Ac in AP){if(AP[Ac]!==Object.prototype[Ac]){if(typeof AY.flashvars!==N){AY.flashvars+="&"+Ac+"="+AP[Ac]}else{AY.flashvars=Ac+"="+AP[Ac]}}}}var Ae=null;if(typeof AW.id!==N){Ae=AW.id}else{if(AS!==null&&(typeof AS===T||typeof AS.replaceId===T)){Ae=((typeof AS===T)?AS:AS.replaceId)}else{Ae="swf_"+b.length}}var Ag=null;if(AS===null||AS===X||typeof AS.appendToId===T){var AO=null;if(AS!==null&&AS!==X&&typeof AS.appendToId===T){AO=P.getObjectById(AS.appendToId)}else{AO=e}var AT=V.createElement(M);Ag=(AT.id=Ae);AO.appendChild(AT)}else{Ag=((typeof AS.replaceId===T)?AS.replaceId:AS)}var AX=function(){},Aa=0,AM=W,AV=null;if(typeof Ad!==N&&Ad!==null){if(typeof Ad===H){if(typeof Ad.swfCB!==N&&Ad.swfCB!==null){AX=Ad.swfCB}if(typeof Ad.swfTimeout!==N&&(R.parseInt(Ad.swfTimeout,10)>0)){Aa=Ad.swfTimeout}if(typeof Ad.swfEICheck!==N&&Ad.swfEICheck!==null&&Ad.swfEICheck!==W){AM=Ad.swfEICheck}}else{if(typeof Ad===O){AX=Ad}}}try{AV=L.createSWF(AZ,AY,Ag)}catch(AQ){}if(AV!==null){b[b.length]=Ae;if(typeof AX===O){AX({status:I.SWF_INIT,srcId:Ae,srcElem:AV});r[Ae]=S(function(){var Ai=P.getObjectById(Ae);if((typeof Ai!==N)&&(Ai!==null)&&(Ai.nodeName==="OBJECT"||Ai.nodeName==="EMBED")){var Ah=0;try{Ah=Ai.PercentLoaded()}catch(Aj){}if(Ah>0){if(Aa>0){A(r["DoSWFtimeout_"+Ae]);r["DoSWFtimeout_"+Ae]=X}if(Ah<100){C(function(){AX({status:I.SWF_LOADING,srcId:Ae,srcElem:Ai})},1)}else{Q(r[Ae]);r[Ae]=X;C(function(){AX({status:I.SWF_LOADED,srcId:Ae,srcElem:Ai})},1);if(AM!==W){var Ak=X;r[Ae]=S(function(){if(!Ak&&typeof Ai[AM]===O){Ak=G;try{Ai[AM]();Q(r[Ae]);r[Ae]=X;AX({status:I.SWF_EI_READY,srcId:Ae,srcElem:Ai})}catch(Al){}Ak=X}},25)}}}}},50);if(Aa>0){r["DoSWFtimeout_"+Ae]=C(function(){var Ai=P.getObjectById(Ae);if((typeof Ai!==N)&&(Ai!==null)&&(Ai.nodeName==="OBJECT"||Ai.nodeName==="EMBED")){var Ah=0;try{Ah=Ai.PercentLoaded()}catch(Aj){}if(Ah<=0){Q(r[Ae]);r[Ae]=X;if(P.ua.ie&&P.ua.win&&Ai.readyState!==4){Ai.id="removeSWF_"+Ai.id;Ai.style.display=J;r[Ai.id]=S(function(){if(Ai.readyState===4){Q(r[Ai.id]);r[Ai.id]=X;L.removeSWF(Ai.id)}},500)}else{L.removeSWF(Ai.id)}r[Ae]=X;r["DoSWFtimeout_"+Ae]=X;AX({status:I.SWF_TIMEOUT,srcId:Ae,srcElem:Ai})}}},Aa)}}}else{if(typeof AX===O){AX({status:I.SWF_FAILED,srcId:Ae,srcElem:null})}else{throw new R.Error("checkplayer::DoSWF(): SWF could not be loaded.")}}}else{if(typeof AX===O){AX({status:I.SWF_FAILED,srcId:Ae,srcElem:null})}else{throw new R.Error("checkplayer::DoSWF(): Minimum Flash Version not detected.")}}}var j={playerVersionDetected:AH,versionChecked:AG,checkPassed:k,UpdatePlayer:v,DoSWF:function(AR,AS,AP,AQ,AN,AM,AO,AT){q(AR,AS,AP,AQ,AN,AM,AO,AT,X)},ready:function(){return d},updateable:t,updateStatus:p,updateControlsContainer:AE};I._ins=j;return j};I=P.checkplayer;I.UPDATE_INIT=1;I.UPDATE_SUCCESSFUL=2;I.UPDATE_CANCELED=3;I.UPDATE_FAILED=4;I.SWF_INIT=5;I.SWF_LOADING=6;I.SWF_LOADED=7;I.SWF_FAILED=8;I.SWF_TIMEOUT=9;I.SWF_EI_READY=10;I.module_ready=function(){}})(window);
/*	flXHR 1.0.5 <http://flxhr.flensed.com/> | Copyright (c) 2008-2010 Kyle Simpson, Getify Solutions, Inc. | This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> */
(function(c){var E=c,h=c.document,z="undefined",a=true,L=false,g="",o="object",k="function",N="string",l="div",e="onunload",H=null,y=null,K=null,q=null,x=0,i=[],m=null,r=null,G="flXHR.js",n="flensed.js",P="flXHR.vbs",j="checkplayer.js",A="flXHR.swf",u=c.parseInt,w=c.setTimeout,f=c.clearTimeout,s=c.setInterval,v=c.clearInterval,O="instanceId",J="readyState",D="onreadystatechange",M="ontimeout",C="onerror",d="binaryResponseBody",F="xmlResponseText",I="loadPolicyURL",b="noCacheHeader",p="sendTimeout",B="appendToId",t="swfIdPrefix";if(typeof c.flensed===z){c.flensed={}}if(typeof c.flensed.flXHR!==z){return}y=c.flensed;w(function(){var Q=L,ab=h.getElementsByTagName("script"),V=ab.length;try{y.base_path.toLowerCase();Q=a}catch(T){y.base_path=g}function Z(ai,ah,aj){for(var ag=0;ag<V;ag++){if(typeof ab[ag].src!==z){if(ab[ag].src.indexOf(ai)>=0){break}}}var af=h.createElement("script");af.setAttribute("src",y.base_path+ai);if(typeof ah!==z){af.setAttribute("type",ah)}if(typeof aj!==z){af.setAttribute("language",aj)}h.getElementsByTagName("head")[0].appendChild(af)}if((typeof ab!==z)&&(ab!==null)){if(!Q){var ac=0;for(var U=0;U<V;U++){if(typeof ab[U].src!==z){if(((ac=ab[U].src.indexOf(n))>=0)||((ac=ab[U].src.indexOf(G))>=0)){y.base_path=ab[U].src.substr(0,ac);break}}}}}try{y.checkplayer.module_ready()}catch(aa){Z(j,"text/javascript")}var ad=null;(function ae(){try{y.ua.pv.join(".")}catch(af){ad=w(arguments.callee,25);return}if(y.ua.win&&y.ua.ie){Z(P,"text/vbscript","vbscript")}y.binaryToString=function(aj,ai){ai=(((y.ua.win&&y.ua.ie)&&typeof ai!==z)?(!(!ai)):!(y.ua.win&&y.ua.ie));if(!ai){try{return flXHR_vb_BinaryToString(aj)}catch(al){}}var am=g,ah=[];try{for(var ak=0;ak<aj.length;ak++){ah[ah.length]=String.fromCharCode(aj[ak])}am=ah.join(g)}catch(ag){}return am};y.bindEvent(E,e,function(){try{c.flensed.unbindEvent(E,e,arguments.callee);for(var ai in r){if(r[ai]!==Object.prototype[ai]){try{r[ai]=null}catch(ah){}}}y.flXHR=null;r=null;y=null;q=null;K=null}catch(ag){}})})();function Y(){f(ad);try{E.detachEvent(e,Y)}catch(af){}}if(ad!==null){try{E.attachEvent(e,Y)}catch(X){}}var S=null;function R(){f(S);try{E.detachEvent(e,R)}catch(af){}}try{E.attachEvent(e,R)}catch(W){}S=w(function(){R();try{y.checkplayer.module_ready()}catch(af){throw new c.Error("flXHR dependencies failed to load.")}},20000)},0);y.flXHR=function(aR){var ab=L;if(aR!==null&&typeof aR===o){if(typeof aR.instancePooling!==z){ab=!(!aR.instancePooling);if(ab){var aG=function(){for(var a0=0;a0<i.length;a0++){var a1=i[a0];if(a1[J]===4){a1.Reset();a1.Configure(aR);return a1}}return null}();if(aG!==null){return aG}}}}var aW=++x,ai=[],af=null,ah=null,X=null,Y=null,aM=-1,aF=0,aa=null,ac=null,ao=null,aE=null,aw=null,aV=null,ak=null,Q=null,aL=null,Z=a,aB=L,aY="flXHR_"+aW,au=a,aC=L,aA=a,aJ=L,S="flXHR_swf",ae="flXHRhideSwf",V=null,aH=-1,T=g,aK=null,aD=null,aO=null;var U=function(){if(typeof aR===o&&aR!==null){if((typeof aR[O]!==z)&&(aR[O]!==null)&&(aR[O]!==g)){aY=aR[O]}if((typeof aR[t]!==z)&&(aR[t]!==null)&&(aR[t]!==g)){S=aR[t]}if((typeof aR[B]!==z)&&(aR[B]!==null)&&(aR[B]!==g)){V=aR[B]}if((typeof aR[I]!==z)&&(aR[I]!==null)&&(aR[I]!==g)){T=aR[I]}if(typeof aR[b]!==z){au=!(!aR[b])}if(typeof aR[d]!==z){aC=!(!aR[d])}if(typeof aR[F]!==z){aA=!(!aR[F])}if(typeof aR.autoUpdatePlayer!==z){aJ=!(!aR.autoUpdatePlayer)}if((typeof aR[p]!==z)&&((H=u(aR[p],10))>0)){aH=H}if((typeof aR[D]!==z)&&(aR[D]!==null)){aK=aR[D]}if((typeof aR[C]!==z)&&(aR[C]!==null)){aD=aR[C]}if((typeof aR[M]!==z)&&(aR[M]!==null)){aO=aR[M]}}Y=S+"_"+aW;function a0(){f(af);try{E.detachEvent(e,a0)}catch(a3){}}try{E.attachEvent(e,a0)}catch(a1){}(function a2(){try{y.bindEvent(E,e,aI)}catch(a3){af=w(arguments.callee,25);return}a0();af=w(aT,1)})()}();function aT(){if(V===null){Q=h.getElementsByTagName("body")[0]}else{Q=y.getObjectById(V)}try{Q.nodeName.toLowerCase();y.checkplayer.module_ready();K=y.checkplayer}catch(a1){af=w(aT,25);return}if((q===null)&&(typeof K._ins===z)){try{q=new K(r.MIN_PLAYER_VERSION,aU,L,aq)}catch(a0){aP(r.DEPENDENCY_ERROR,"flXHR: checkplayer Init Failed","The initialization of the 'checkplayer' library failed to complete.");return}}else{q=K._ins;ag()}}function ag(){if(q===null||!q.checkPassed){af=w(ag,25);return}if(m===null&&V===null){y.createCSS("."+ae,"left:-1px;top:0px;width:1px;height:1px;position:absolute;");m=a}var a4=h.createElement(l);a4.id=Y;a4.className=ae;Q.appendChild(a4);Q=null;var a1={},a5={allowScriptAccess:"always"},a2={id:Y,name:Y,styleclass:ae},a3={swfCB:aS,swfEICheck:"reset"};try{q.DoSWF(y.base_path+A,Y,"1","1",a1,a5,a2,a3)}catch(a0){aP(r.DEPENDENCY_ERROR,"flXHR: checkplayer Call Failed","A call to the 'checkplayer' library failed to complete.");return}}function aS(a0){if(a0.status!==K.SWF_EI_READY){return}R();aV=y.getObjectById(Y);aV.setId(Y);if(T!==g){aV.loadPolicy(T)}aV.autoNoCacheHeader(au);aV.returnBinaryResponseBody(aC);aV.doOnReadyStateChange=al;aV.doOnError=aP;aV.sendProcessed=ap;aV.chunkResponse=ay;aM=0;ax();aX();if(typeof aK===k){try{aK(ak)}catch(a1){aP(r.HANDLER_ERROR,"flXHR::onreadystatechange(): Error","An error occurred in the handler function. ("+a1.message+")");return}}at()}function aI(){try{c.flensed.unbindEvent(E,e,aI)}catch(a3){}try{for(var a4=0;a4<i.length;a4++){if(i[a4]===ak){i[a4]=L}}}catch(bb){}try{for(var a6 in ak){if(ak[a6]!==Object.prototype[a6]){try{ak[a6]=null}catch(ba){}}}}catch(a9){}ak=null;R();if((typeof aV!==z)&&(aV!==null)){try{aV.abort()}catch(a8){}try{aV.doOnReadyStateChange=null;al=null}catch(a7){}try{aV.doOnError=null;doOnError=null}catch(a5){}try{aV.sendProcessed=null;ap=null}catch(a2){}try{aV.chunkResponse=null;ay=null}catch(a1){}aV=null;try{c.swfobject.removeSWF(Y)}catch(a0){}}aQ();aK=null;aD=null;aO=null;ao=null;aa=null;aL=null;Q=null}function ay(){if(aC&&typeof arguments[0]!==z){aL=((aL!==null)?aL:[]);aL=aL.concat(arguments[0])}else{if(typeof arguments[0]===N){aL=((aL!==null)?aL:g);aL+=arguments[0]}}}function al(){if(typeof arguments[0]!==z){aM=arguments[0]}if(aM===4){R();if(aC&&aL!==null){try{ac=y.binaryToString(aL,a);try{aa=flXHR_vb_StringToBinary(ac)}catch(a2){aa=aL}}catch(a1){}}else{ac=aL}aL=null;if(ac!==g){if(aA){try{ao=y.parseXMLString(ac)}catch(a0){ao={}}}}}if(typeof arguments[1]!==z){aE=arguments[1]}if(typeof arguments[2]!==z){aw=arguments[2]}ad(aM)}function ad(a0){aF=a0;ax();aX();ak[J]=Math.max(0,a0);if(typeof aK===k){try{aK(ak)}catch(a1){aP(r.HANDLER_ERROR,"flXHR::onreadystatechange(): Error","An error occurred in the handler function. ("+a1.message+")");return}}}function aP(){R();aQ();aB=a;var a3;try{a3=new y.error(arguments[0],arguments[1],arguments[2],ak)}catch(a4){function a1(){this.number=0;this.name="flXHR Error: Unknown";this.description="Unknown error from 'flXHR' library.";this.message=this.description;this.srcElement=ak;var a8=this.number,a7=this.name,ba=this.description;function a9(){return a8+", "+a7+", "+ba}this.toString=a9}a3=new a1()}var a5=L;try{if(typeof aD===k){aD(a3);a5=a}}catch(a0){var a2=a3.toString();function a6(){this.number=r.HANDLER_ERROR;this.name="flXHR::onerror(): Error";this.description="An error occured in the handler function. ("+a0.message+")\nPrevious:["+a2+"]";this.message=this.description;this.srcElement=ak;var a8=this.number,a7=this.name,ba=this.description;function a9(){return a8+", "+a7+", "+ba}this.toString=a9}a3=new a6()}if(!a5){w(function(){y.throwUnhandledError(a3.toString())},1)}}function W(){am();aB=a;if(typeof aO===k){try{aO(ak)}catch(a0){aP(r.HANDLER_ERROR,"flXHR::ontimeout(): Error","An error occurred in the handler function. ("+a0.message+")");return}}else{aP(r.TIMEOUT_ERROR,"flXHR: Operation Timed out","The requested operation timed out.")}}function R(){f(af);af=null;f(X);X=null;f(ah);ah=null}function aZ(a1,a2,a0){ai[ai.length]={func:a1,funcName:a2,args:a0};Z=L}function aQ(){if(!Z){Z=a;var a1=ai.length;for(var a0=0;a0<a1;a0++){try{ai[a0]=L}catch(a2){}}ai=[]}}function at(){if(aM<0){ah=w(at,25);return}if(!Z){for(var a0=0;a0<ai.length;a0++){try{if(ai[a0]!==L){ai[a0].func.apply(ak,ai[a0].args);ai[a0]=L}}catch(a1){aP(r.HANDLER_ERROR,"flXHR::"+ai[a0].funcName+"(): Error","An error occurred in the "+ai[a0].funcName+"() function.");return}}Z=a}}function aX(){try{ak[O]=aY;ak[J]=aF;ak.status=aE;ak.statusText=aw;ak.responseText=ac;ak.responseXML=ao;ak.responseBody=aa;ak[D]=aK;ak[C]=aD;ak[M]=aO;ak[I]=T;ak[b]=au;ak[d]=aC;ak[F]=aA}catch(a0){}}function ax(){try{aY=ak[O];if(ak.timeout!==null&&(H=u(ak.timeout,10))>0){aH=H}aK=ak[D];aD=ak[C];aO=ak[M];if(ak[I]!==null){if((ak[I]!==T)&&(aM>=0)){aV.loadPolicy(ak[I])}T=ak[I]}if(ak[b]!==null){if((ak[b]!==au)&&(aM>=0)){aV.autoNoCacheHeader(ak[b])}au=ak[b]}if(ak[d]!==null){if((ak[d]!==aC)&&(aM>=0)){aV.returnBinaryResponseBody(ak[d])}aC=ak[d]}if(aA!==null){aA=!(!ak[F])}}catch(a0){}}function aN(){am();try{aV.reset()}catch(a0){}aE=null;aw=null;ac=null;ao=null;aa=null;aL=null;aB=L;aX();T=g;ax()}function aU(a0){if(a0.checkPassed){ag()}else{if(!aJ){aP(r.PLAYER_VERSION_ERROR,"flXHR: Insufficient Flash Player Version","The Flash Player was either not detected, or the detected version ("+a0.playerVersionDetected+") was not at least the minimum version ("+r.MIN_PLAYER_VERSION+") needed by the 'flXHR' library.")}else{q.UpdatePlayer()}}}function aq(a0){if(a0.updateStatus===K.UPDATE_CANCELED){aP(r.PLAYER_VERSION_ERROR,"flXHR: Flash Player Update Canceled","The Flash Player was not updated.")}else{if(a0.updateStatus===K.UPDATE_FAILED){aP(r.PLAYER_VERSION_ERROR,"flXHR: Flash Player Update Failed","The Flash Player was either not detected or could not be updated.")}}}function ap(){if(aH!==null&&aH>0){X=w(W,aH)}}function am(){R();aQ();ax();aM=0;aF=0;try{aV.abort()}catch(a0){aP(r.CALL_ERROR,"flXHR::abort(): Failed","The abort() call failed to complete.")}aX()}function av(){ax();if(typeof arguments[0]===z||typeof arguments[1]===z){aP(r.CALL_ERROR,"flXHR::open(): Failed","The open() call requires 'method' and 'url' parameters.")}else{if(aM>0||aB){aN()}if(aF===0){al(1)}else{aM=1}var a7=arguments[0],a6=arguments[1],a5=(typeof arguments[2]!==z)?arguments[2]:a,ba=(typeof arguments[3]!==z)?arguments[3]:g,a9=(typeof arguments[4]!==z)?arguments[4]:g;try{aV.autoNoCacheHeader(au);aV.open(a7,a6,a5,ba,a9)}catch(a8){aP(r.CALL_ERROR,"flXHR::open(): Failed","The open() call failed to complete.")}}}function az(){ax();if(aM<=1&&!aB){var a1=(typeof arguments[0]!==z)?arguments[0]:g;if(aF===1){al(2)}else{aM=2}try{aV.autoNoCacheHeader(au);aV.send(a1)}catch(a2){aP(r.CALL_ERROR,"flXHR::send(): Failed","The send() call failed to complete.")}}else{aP(r.CALL_ERROR,"flXHR::send(): Failed","The send() call cannot be made at this time.")}}function aj(){ax();if(typeof arguments[0]===z||typeof arguments[1]===z){aP(r.CALL_ERROR,"flXHR::setRequestHeader(): Failed","The setRequestHeader() call requires 'name' and 'value' parameters.")}else{if(!aB){var a3=(typeof arguments[0]!==z)?arguments[0]:g,a2=(typeof arguments[1]!==z)?arguments[1]:g;try{aV.setRequestHeader(a3,a2)}catch(a4){aP(r.CALL_ERROR,"flXHR::setRequestHeader(): Failed","The setRequestHeader() call failed to complete.")}}}}function an(){ax();return g}function ar(){ax();return[]}ak={readyState:aF,responseBody:aa,responseText:ac,responseXML:ao,status:aE,statusText:aw,timeout:aH,open:function(){ax();if(ak[J]===0){ad(1)}if(!Z||aM<0){aZ(av,"open",arguments);return}av.apply({},arguments)},send:function(){ax();if(ak[J]===1){ad(2)}if(!Z||aM<0){aZ(az,"send",arguments);return}az.apply({},arguments)},abort:am,setRequestHeader:function(){ax();if(!Z||aM<0){aZ(aj,"setRequestHeader",arguments);return}aj.apply({},arguments)},getResponseHeader:an,getAllResponseHeaders:ar,onreadystatechange:aK,ontimeout:aO,instanceId:aY,loadPolicyURL:T,noCacheHeader:au,binaryResponseBody:aC,xmlResponseText:aA,onerror:aD,Configure:function(a0){if(typeof a0===o&&a0!==null){if((typeof a0[O]!==z)&&(a0[O]!==null)&&(a0[O]!==g)){aY=a0[O]}if(typeof a0[b]!==z){au=!(!a0[b]);if(aM>=0){aV.autoNoCacheHeader(au)}}if(typeof a0[d]!==z){aC=!(!a0[d]);if(aM>=0){aV.returnBinaryResponseBody(aC)}}if(typeof a0[F]!==z){aA=!(!a0[F])}if((typeof a0[D]!==z)&&(a0[D]!==null)){aK=a0[D]}if((typeof a0[C]!==z)&&(a0[C]!==null)){aD=a0[C]}if((typeof a0[M]!==z)&&(a0[M]!==null)){aO=a0[M]}if((typeof a0[p]!==z)&&((H=u(a0[p],10))>0)){aH=H}if((typeof a0[I]!==z)&&(a0[I]!==null)&&(a0[I]!==g)&&(a0[I]!==T)){T=a0[I];if(aM>=0){aV.loadPolicy(T)}}aX()}},Reset:aN,Destroy:aI};if(ab){i[i.length]=ak}return ak};r=y.flXHR;r.HANDLER_ERROR=10;r.CALL_ERROR=11;r.TIMEOUT_ERROR=12;r.DEPENDENCY_ERROR=13;r.PLAYER_VERSION_ERROR=14;r.SECURITY_ERROR=15;r.COMMUNICATION_ERROR=16;r.MIN_PLAYER_VERSION="9.0.124";r.module_ready=function(){}})(window);"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,s,r,a,o=gap,h=e[t];switch(h&&"object"==typeof h&&typeof h.toJSON=="function"&&(h=h.toJSON(t)),"function"==typeof rep&&(h=rep.call(e,t,h)),typeof h){case"string":return quote(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(gap+=indent,a=[],Object.prototype.toString.apply(h)==="[object Array]"){for(r=h.length,n=0;r>n;n+=1)a[n]=str(n,h)||"null";return s=a.length===0?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,s}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)typeof rep[n]=="string"&&(i=rep[n],s=str(i,h),s&&a.push(quote(i)+(gap?": ":":")+s));else for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(s=str(i,h),s&&a.push(quote(i)+(gap?": ":":")+s));return s=a.length===0?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,s}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||typeof e.length!="number"))throw new Error("JSON.stringify");return str("",{"":t})}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,s=t[e];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i=walk(s,n),void 0!==i?s[n]=i:delete s[n]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;return function(){return e.apply(t,arguments)}}),Function.prototype.prependArg||(Function.prototype.prependArg=function(t){var e=this;return function(){for(var n=[t],i=0;i<arguments.length;i++)n.push(arguments[i]);return e.apply(this,n)}});var StropheIndexOf=function(t,e){var n=t.length,i=Number(arguments[2])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=n);n>i;i++)if(i in t&&t[i]===e)return i;return-1};(function(t){function e(t,e){return new r.Builder(t,e)}function n(t){return new r.Builder("message",t)}function i(t){return new r.Builder("iq",t)}function s(t){return new r.Builder("presence",t)}var r;r={VERSION:"",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas"},addNamespace:function(t,e){r.NS[t]=e},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,forEachChild:function(t,e,n){var i,s;for(i=0;i<t.childNodes.length;i++)s=t.childNodes[i],s.nodeType!=r.ElementType.NORMAL||e&&!this.isTagEqual(s,e)||n(s)},isTagEqual:function(t,e){return t.tagName.toLowerCase()==e.toLowerCase()},_xmlGenerator:null,_makeGenerator:function(){var t;return window.ActiveXObject?(t=this._getIEXmlDom(),t.appendChild(t.createElement("strophe"))):t=document.implementation.createDocument("jabber:client","strophe",null),t},xmlGenerator:function(){return r._xmlGenerator||(r._xmlGenerator=r._makeGenerator()),r._xmlGenerator},_getIEXmlDom:function(){for(var t=null,e=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<e.length&&null===t;n++)try{t=new ActiveXObject(e[n])}catch(i){t=null}return t},xmlElement:function(t){if(!t)return null;var e,n,i,s=r.xmlGenerator().createElement(t);for(e=1;e<arguments.length;e++)if(arguments[e])if(typeof arguments[e]=="string"||typeof arguments[e]=="number")s.appendChild(r.xmlTextNode(arguments[e]));else if(typeof arguments[e]=="object"&&typeof arguments[e].sort=="function")for(n=0;n<arguments[e].length;n++)typeof arguments[e][n]=="object"&&typeof arguments[e][n].sort=="function"&&s.setAttribute(arguments[e][n][0],arguments[e][n][1]);else if(typeof arguments[e]=="object")for(i in arguments[e])arguments[e].hasOwnProperty(i)&&s.setAttribute(i,arguments[e][i]);return s},xmlescape:function(t){return t=t.replace(/\&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")},xmlTextNode:function(t){return t=r.xmlescape(t),r.xmlGenerator().createTextNode(t)},getText:function(t){if(!t)return null;var e="";t.childNodes.length===0&&t.nodeType==r.ElementType.TEXT&&(e+=t.nodeValue);for(var n=0;n<t.childNodes.length;n++)t.childNodes[n].nodeType==r.ElementType.TEXT&&(e+=t.childNodes[n].nodeValue);return e},copyElement:function(t){var e,n;if(t.nodeType==r.ElementType.NORMAL){for(n=r.xmlElement(t.tagName),e=0;e<t.attributes.length;e++)n.setAttribute(t.attributes[e].nodeName.toLowerCase(),t.attributes[e].value);for(e=0;e<t.childNodes.length;e++)n.appendChild(r.copyElement(t.childNodes[e]))}else t.nodeType==r.ElementType.TEXT&&(n=r.xmlTextNode(t.nodeValue));return n},escapeNode:function(t){return t.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(t){return t.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(t){return t.indexOf("@")<0?null:t.split("@")[0]},getDomainFromJid:function(t){var e=r.getBareJidFromJid(t);if(e.indexOf("@")<0)return e;var n=e.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(t){var e=t.split("/");return e.length<2?null:(e.splice(0,1),e.join("/"))},getBareJidFromJid:function(t){return t?t.split("/")[0]:null},log:function(){},debug:function(t){this.log(this.LogLevel.DEBUG,t)},info:function(t){this.log(this.LogLevel.INFO,t)},warn:function(t){this.log(this.LogLevel.WARN,t)},error:function(t){this.log(this.LogLevel.ERROR,t)},fatal:function(t){this.log(this.LogLevel.FATAL,t)},serialize:function(t){var e;if(!t)return null;typeof t.tree=="function"&&(t=t.tree());var n,i,s=t.nodeName;for(t.getAttribute("_realname")&&(s=t.getAttribute("_realname")),e="<"+s,n=0;n<t.attributes.length;n++)t.attributes[n].nodeName!="_realname"&&(e+=" "+t.attributes[n].nodeName.toLowerCase()+"='"+t.attributes[n].value.replace(/&/g,"&amp;").replace(/\'/g,"&apos;").replace(/</g,"&lt;")+"'");if(t.childNodes.length>0){for(e+=">",n=0;n<t.childNodes.length;n++)i=t.childNodes[n],i.nodeType==r.ElementType.NORMAL?e+=r.serialize(i):i.nodeType==r.ElementType.TEXT&&(e+=i.nodeValue);e+="</"+s+">"}else e+="/>";return e},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(t,e){r._connectionPlugins[t]=e}},r.Builder=function(t,e){("presence"==t||"message"==t||"iq"==t)&&(e&&!e.xmlns?e.xmlns=r.NS.CLIENT:e||(e={xmlns:r.NS.CLIENT})),this.nodeTree=r.xmlElement(t,e),this.node=this.nodeTree},r.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return r.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(t){for(var e in t)t.hasOwnProperty(e)&&this.node.setAttribute(e,t[e]);return this},c:function(t,e){var n=r.xmlElement(t,e);return this.node.appendChild(n),this.node=n,this},cnode:function(t){return this.node.appendChild(t),this.node=t,this},t:function(t){var e=r.xmlTextNode(t);return this.node.appendChild(e),this}},r.Handler=function(t,e,n,i,s,a,o){this.handler=t,this.ns=e,this.name=n,this.type=i,this.id=s,this.options=o||{matchbare:!1},this.options.matchBare||(this.options.matchBare=!1),this.from=this.options.matchBare?a?r.getBareJidFromJid(a):null:a,this.user=!0},r.Handler.prototype={isMatch:function(t){var e,n=null;if(n=this.options.matchBare?r.getBareJidFromJid(t.getAttribute("from")):t.getAttribute("from"),e=!1,this.ns){var i=this;r.forEachChild(t,null,function(t){t.getAttribute("xmlns")==i.ns&&(e=!0)}),e=e||t.getAttribute("xmlns")==this.ns}else e=!0;return!e||this.name&&!r.isTagEqual(t,this.name)||this.type&&t.getAttribute("type")!=this.type||this.id&&t.getAttribute("id")!=this.id||this.from&&n!=this.from?!1:!0},run:function(t){var e=null;try{e=this.handler(t)}catch(n){throw n.sourceURL?r.fatal("error: "+this.handler+" "+n.sourceURL+":"+n.line+" - "+n.name+": "+n.message):n.fileName?("undefined"!=typeof console&&(console.trace(),console.error(this.handler," - error - ",n,n.message)),r.fatal("error: "+this.handler+" "+n.fileName+":"+n.lineNumber+" - "+n.name+": "+n.message)):r.fatal("error: "+this.handler),n}return e},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},r.TimedHandler=function(t,e){this.period=t,this.handler=e,this.lastCalled=(new Date).getTime(),this.user=!0},r.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},r.Request=function(t,e,n,i){this.id=++r._requestId,this.xmlData=t,this.data=r.serialize(t),this.origFunc=e,this.func=e,this.rid=n,this.date=0/0,this.sends=i||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var t=new Date;return(t-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var t=new Date;return(t-this.dead)/1e3},this.xhr=this._newXHR()},r.Request.prototype={getResponse:function(){var t=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(t=this.xhr.responseXML.documentElement,t.tagName=="parsererror")throw r.error("invalid response received"),r.error("responseText: "+this.xhr.responseText),r.error("responseXML: "+r.serialize(this.xhr.responseXML)),"parsererror"}else this.xhr.responseText&&(r.error("invalid response received"),r.error("responseText: "+this.xhr.responseText),r.error("responseXML: "+r.serialize(this.xhr.responseXML)));return t},_newXHR:function(){var t=null;return window.XMLHttpRequest?(t=new XMLHttpRequest,t.overrideMimeType&&t.overrideMimeType("text/xml")):window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t.onreadystatechange=this.func.prependArg(this),t}},r.Connection=function(t){this.service=t,this.jid="",this.rid=Math.floor(Math.random()*4294967295),this.sid=null,this.streamId=null,this.features=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this.paused=!1,this.hold=1,this.wait=60,this.window=3,this._data=[],this._requests=[],this._uniqueId=Math.round(Math.random()*1e4),this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var e in r._connectionPlugins)if(r._connectionPlugins.hasOwnProperty(e)){var n=r._connectionPlugins[e],i=function(){};i.prototype=n,this[e]=new i,this[e].init(this)}},r.Connection.prototype={reset:function(){this.rid=Math.floor(Math.random()*4294967295),this.sid=null,this.streamId=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this._requests=[],this._uniqueId=Math.round(Math.random()*1e4)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(t){return"string"==typeof t||"number"==typeof t?++this._uniqueId+":"+t:++this._uniqueId+""},connect:function(t,e,n,i,s){this.jid=t,this.pass=e,this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.errors=0,this.wait=i||this.wait,this.hold=s||this.hold,this.domain=r.getDomainFromJid(this.jid);var a=this._buildBody().attrs({to:this.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":r.NS.BOSH});this._changeConnectStatus(r.Status.CONNECTING,null),this._requests.push(new r.Request(a.tree(),this._onRequestStateChange.bind(this).prependArg(this._connect_cb.bind(this)),a.tree().getAttribute("rid"))),this._throttledRequestHandler()},attach:function(t,e,n,i,s,a,o){this.jid=t,this.sid=e,this.rid=n,this.connect_callback=i,this.domain=r.getDomainFromJid(this.jid),this.authenticated=!0,this.connected=!0,this.wait=s||this.wait,this.hold=a||this.hold,this.window=o||this.window,this._changeConnectStatus(r.Status.ATTACHED,null)},xmlInput:function(){},xmlOutput:function(){},rawInput:function(){},rawOutput:function(){},send:function(t){if(null!==t){if(typeof t.sort=="function")for(var e=0;e<t.length;e++)this._queueData(t[e]);else typeof t.tree=="function"?this._queueData(t.tree()):this._queueData(t);this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(t,e,n,i){var s=null,r=this;typeof t.tree=="function"&&(t=t.tree());var a=t.getAttribute("id");a||(a=this.getUniqueId("sendIQ"),t.setAttribute("id",a));var o=this.addHandler(function(t){s&&r.deleteTimedHandler(s);var i=t.getAttribute("type");if("result"==i)e&&e(t);else{if("error"!=i)throw{name:"StropheError",message:"Got bad IQ type of "+i};n&&n(t)}},null,"iq",null,a);return i&&(s=this.addTimedHandler(i,function(){return r.deleteHandler(o),n&&n(null),!1})),this.send(t),a},_queueData:function(t){if(null===t||!t.tagName||!t.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(t)},_sendRestart:function(){this._data.push("restart"),this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(t,e){var n=new r.TimedHandler(t,e);return this.addTimeds.push(n),n},deleteTimedHandler:function(t){this.removeTimeds.push(t)},addHandler:function(t,e,n,i,s,a,o){var h=new r.Handler(t,e,n,i,s,a,o);return this.addHandlers.push(h),h},deleteHandler:function(t){this.removeHandlers.push(t)},disconnect:function(t){this._changeConnectStatus(r.Status.DISCONNECTING,t),r.info("Disconnect was called because: "+t),this.connected&&(this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._sendTerminate())},_changeConnectStatus:function(t,e){for(var n in r._connectionPlugins)if(r._connectionPlugins.hasOwnProperty(n)){var i=this[n];if(i.statusChanged)try{i.statusChanged(t,e)}catch(s){r.error(""+n+" plugin caused an exception "+"changing status: "+s)}}if(this.connect_callback)try{this.connect_callback(t,e)}catch(a){r.error("User connection callback caused an exception: "+a)}},_buildBody:function(){var t=e("body",{rid:this.rid++,xmlns:r.NS.HTTPBIND});return this.sid!==null&&t.attrs({sid:this.sid}),t},_removeRequest:function(t){r.debug("removing request");var e;for(e=this._requests.length-1;e>=0;e--)t==this._requests[e]&&this._requests.splice(e,1);t.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(t){var e=this._requests[t];e.dead===null&&(e.dead=new Date),this._processRequest(t)},_processRequest:function(t){var e=this._requests[t],n=-1;try{e.xhr.readyState==4&&(n=e.xhr.status)}catch(i){r.error("caught an error in _requests["+t+"], reqStatus: "+n)}if("undefined"==typeof n&&(n=-1),e.sends>2)return this._onDisconnectTimeout(),void 0;var s=e.age(),a=!isNaN(s)&&s>Math.floor(r.TIMEOUT*this.wait),o=e.dead!==null&&e.timeDead()>Math.floor(r.SECONDARY_TIMEOUT*this.wait),h=e.xhr.readyState==4&&(1>n||n>=500);if((a||o||h)&&(o&&r.error("Request "+this._requests[t].id+" timed out (secondary), restarting"),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){},this._requests[t]=new r.Request(e.xmlData,e.origFunc,e.rid,e.sends),e=this._requests[t]),e.xhr.readyState===0){r.debug("request id "+e.id+"."+e.sends+" posting"),e.date=new Date;try{e.xhr.open("POST",this.service,!0)}catch(l){return r.error("XHR open failed."),this.connected||this._changeConnectStatus(r.Status.CONNFAIL,"bad-service"),this.disconnect(),void 0}var u=function(){e.xhr.send(e.data)};if(e.sends>1){var d=Math.pow(e.sends,3)*1e3;setTimeout(u,d)}else u();e.sends++,this.xmlOutput(e.xmlData),this.rawOutput(e.data)}else r.debug("_processRequest: "+(0===t?"first":"second")+" request has readyState of "+e.xhr.readyState)},_throttledRequestHandler:function(){this.paused||(this._requests?r.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):r.debug("_throttledRequestHandler called with undefined requests"),this._requests&&this._requests.length!==0&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window-1&&this._processRequest(1)))},_onRequestStateChange:function(t,e){if(r.debug("request id "+e.id+"."+e.sends+" state changed to "+e.xhr.readyState),e.abort)return e.abort=!1,void 0;var n;if(e.xhr.readyState==4){n=0;try{n=e.xhr.status}catch(i){}if("undefined"==typeof n&&(n=0),this.disconnecting&&n>=400)return this._hitError(n),void 0;var s=this._requests[0]==e,a=this._requests[1]==e;(n>0&&500>n||e.sends>2||this.paused)&&(this._removeRequest(e),r.debug("request id "+e.id+" should now be removed")),200==n?((a||s&&this._requests.length>0&&this._requests[0].age()>Math.floor(r.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),r.debug("request id "+e.id+"."+e.sends+" got 200"),t(e),this.errors=0):(r.error("request id "+e.id+"."+e.sends+" error "+n+" happened"),(0===n||n>=400&&600>n||n>=12e3)&&(this._hitError(n),(0===n||n>=400&&500>n)&&(this._changeConnectStatus(r.Status.DISCONNECTING,null),this._doDisconnect()))),n>0&&500>n||e.sends>2||this._throttledRequestHandler()}},_hitError:function(t){this.errors++,r.warn("request errored, status: "+t+", number of errors: "+this.errors),this.errors>4&&this._onDisconnectTimeout()},_doDisconnect:function(){r.info("_doDisconnect was called"),this.authenticated=!1,this.disconnecting=!1,this.sid=null,this.streamId=null,this.rid=Math.floor(Math.random()*4294967295),this.connected&&(this._changeConnectStatus(r.Status.DISCONNECTED,null),this.connected=!1),this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[]},_dataRecv:function(t){try{var e=t.getResponse()}catch(n){if("parsererror"!=n)throw n;this.disconnect("strophe-parsererror")}if(null!==e){this.xmlInput(e),this.rawInput(r.serialize(e));for(var i,s;this.removeHandlers.length>0;)s=this.removeHandlers.pop(),i=StropheIndexOf(this.handlers,s),i>=0&&this.handlers.splice(i,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._requests.length===0)return this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null,this._doDisconnect(),void 0;var a,o,h=e.getAttribute("type");if(null!==h&&"terminate"==h){if(this.disconnecting)return;return a=e.getAttribute("condition"),o=e.getElementsByTagName("conflict"),null!==a?("remote-stream-error"==a&&o.length>0&&(a="conflict"),this._changeConnectStatus(r.Status.CONNFAIL,a)):this._changeConnectStatus(r.Status.CONNFAIL,"unknown"),this.disconnect(),void 0}var l=this;r.forEachChild(e,null,function(t){var e,n;for(n=l.handlers,l.handlers=[],e=0;e<n.length;e++){var i=n[e];!i.isMatch(t)||!l.authenticated&&i.user?l.handlers.push(i):i.run(t)&&l.handlers.push(i)}})}},_sendTerminate:function(){r.info("_sendTerminate was called");var t=this._buildBody().attrs({type:"terminate"});this.authenticated&&t.c("presence",{xmlns:r.NS.CLIENT,type:"unavailable"}),this.disconnecting=!0;var e=new r.Request(t.tree(),this._onRequestStateChange.bind(this).prependArg(this._dataRecv.bind(this)),t.tree().getAttribute("rid"));this._requests.push(e),this._throttledRequestHandler()},_connect_cb:function(t){r.info("_connect_cb was called"),this.connected=!0;var n=t.getResponse();if(n){this.xmlInput(n),this.rawInput(r.serialize(n));var s,a,o=n.getAttribute("type");if(null!==o&&"terminate"==o)return s=n.getAttribute("condition"),a=n.getElementsByTagName("conflict"),null!==s?("remote-stream-error"==s&&a.length>0&&(s="conflict"),this._changeConnectStatus(r.Status.CONNFAIL,s)):this._changeConnectStatus(r.Status.CONNFAIL,"unknown"),void 0;this.sid||(this.sid=n.getAttribute("sid")),this.stream_id||(this.stream_id=n.getAttribute("authid"));var h=n.getAttribute("requests");h&&(this.window=parseInt(h,10));var l=n.getAttribute("hold");l&&(this.hold=parseInt(l,10));var u=n.getAttribute("wait");u&&(this.wait=parseInt(u,10));var d,c,f=!1,p=!1,m=!1,g=n.getElementsByTagName("mechanism");if(!(g.length>0)){var _=this._buildBody();return this._requests.push(new r.Request(_.tree(),this._onRequestStateChange.bind(this).prependArg(this._connect_cb.bind(this)),_.tree().getAttribute("rid"))),this._throttledRequestHandler(),void 0}for(d=0;d<g.length;d++)c=r.getText(g[d]),"DIGEST-MD5"==c?p=!0:"PLAIN"==c?f=!0:"ANONYMOUS"==c&&(m=!0);r.getNodeFromJid(this.jid)===null&&m?(this._changeConnectStatus(r.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(e("auth",{xmlns:r.NS.SASL,mechanism:"ANONYMOUS"}).tree())):r.getNodeFromJid(this.jid)===null?(this._changeConnectStatus(r.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect()):(this._changeConnectStatus(r.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(i({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:r.NS.AUTH}).c("username",{}).t(r.getNodeFromJid(this.jid)).tree()))}},_quote:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},_auth1_cb:function(){var t=i({type:"set",id:"_auth_2"}).c("query",{xmlns:r.NS.AUTH}).c("username",{}).t(r.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return r.getResourceFromJid(this.jid)||(this.jid=r.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(r.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(){return r.info("SASL authentication succeeded."),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._addSysHandler(this._sasl_auth1_cb.bind(this),null,"stream:features",null,null),this._sendRestart(),!1},_sasl_auth1_cb:function(t){this.features=t;var e,n;for(e=0;e<t.childNodes.length;e++)n=t.childNodes[e],n.nodeName=="bind"&&(this.do_bind=!0),n.nodeName=="session"&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(r.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var s=r.getResourceFromJid(this.jid);return s?this.send(i({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:r.NS.BIND}).c("resource",{}).t(s).tree()):this.send(i({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:r.NS.BIND}).tree()),!1},_sasl_bind_cb:function(t){if(t.getAttribute("type")=="error")return r.info("SASL binding failed."),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1;var e,n=t.getElementsByTagName("bind");return n.length>0?(e=n[0].getElementsByTagName("jid"),e.length>0&&(this.jid=r.getText(e[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(i({type:"set",id:"_session_auth_2"}).c("session",{xmlns:r.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(r.Status.CONNECTED,null))),void 0):(r.info("SASL binding failed."),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(t){if(t.getAttribute("type")=="result")this.authenticated=!0,this._changeConnectStatus(r.Status.CONNECTED,null);else if(t.getAttribute("type")=="error")return r.info("Session creation failed."),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1},_auth2_cb:function(t){return t.getAttribute("type")=="result"?(this.authenticated=!0,this._changeConnectStatus(r.Status.CONNECTED,null)):t.getAttribute("type")=="error"&&(this._changeConnectStatus(r.Status.AUTHFAIL,null),this.disconnect()),!1},_addSysTimedHandler:function(t,e){var n=new r.TimedHandler(t,e);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(t,e,n,i,s){var a=new r.Handler(t,e,n,i,s);return a.user=!1,this.addHandlers.push(a),a},_onDisconnectTimeout:function(){r.info("_onDisconnectTimeout was called");for(var t;this._requests.length>0;)t=this._requests.pop(),t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){};return this._doDisconnect(),!1},_onIdle:function(){for(var t,e,n,i;this.removeTimeds.length>0;)e=this.removeTimeds.pop(),t=StropheIndexOf(this.timedHandlers,e),t>=0&&this.timedHandlers.splice(t,1);for(;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());var s=(new Date).getTime();for(i=[],t=0;t<this.timedHandlers.length;t++)e=this.timedHandlers[t],(this.authenticated||!e.user)&&(n=e.lastCalled+e.period,0>=n-s?e.run()&&i.push(e):i.push(e));this.timedHandlers=i;var a,o;if(this.authenticated&&this._requests.length===0&&this._data.length===0&&!this.disconnecting&&(r.info("no requests during idle cycle, sending blank request"),this._data.push(null)),this._requests.length<2&&this._data.length>0&&!this.paused){for(a=this._buildBody(),t=0;t<this._data.length;t++)this._data[t]!==null&&(this._data[t]==="restart"?a.attrs({to:this.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":r.NS.BOSH}):a.cnode(this._data[t]).up());delete this._data,this._data=[],this._requests.push(new r.Request(a.tree(),this._onRequestStateChange.bind(this).prependArg(this._dataRecv.bind(this)),a.tree().getAttribute("rid"))),this._processRequest(this._requests.length-1)}this._requests.length>0&&(o=this._requests[0].age(),this._requests[0].dead!==null&&this._requests[0].timeDead()>Math.floor(r.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),o>Math.floor(r.TIMEOUT*this.wait)&&(r.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(r.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)}},t&&t(r,e,n,i,s)})(function(){window.Strophe=arguments[0],window.$build=arguments[1],window.$msg=arguments[2],window.$iq=arguments[3],window.$pres=arguments[4]}),function(t){var e=t.setTimeout,n=t.document,i=0;t.jXHR=function(){function s(){try{c.parentNode.removeChild(c)}catch(t){}}function r(){d=!1,u="",f=0,s(),c=null,l(0)}function a(t){try{p.onerror.call(p,t,u)}catch(e){}}function o(){if(!(this.readyState&&this.readyState!=="complete"&&this.readyState!=="loaded"||d)){this.onload=this.onreadystatechange=null,d=!0,p.readyState!==4&&a("handleScriptLoad: Script failed to load ["+u+"]."),s();try{Jidz(".scriptpart").remove()}catch(t){}}}function h(t){var e=null;if(window.DOMParser){var n=new DOMParser;e=n.parseFromString(t,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t);return e}function l(t,e){e=e||[],p.readyState=t,4==t&&(p.responseText=e[0].reply,p.responseXML=h(e[0].reply)),-1==t&&(p.readyState=4,p.responseText="<body xmlns='http://jabber.org/protocol/httpbind' type='terminate' condition='item-not-found' />",p.responseXML=h(p.responseText)),typeof p.onreadystatechange=="function"&&p.onreadystatechange.apply(p,e)}var u,d,c,f,p=null;return p={_handleScriptLoad:o,_fireReadyStateChange:l,onerror:null,onreadystatechange:null,readyState:0,status:200,responseBody:null,responseText:null,responseXML:null,open:function(e,n){r();var s="cb"+i++;(function(e){t.jXHR[e]=function(){try{l.call(p,4,arguments)}catch(t){p.readyState=-1,a("Script failed to run ["+u+"].")}}})(s),u=n+"?callback=?jXHR&data=",u=u.replace(/=\?jXHR/,"=jXHR."+s),l(1)},partNum:{},sendPart:function(t,e){e in this.partNum||(this.partNum[e]=-1),this.partNum[e]++,iAdvize.util.warn("sending part: "+this.partNum[e]);var i=u+encodeURIComponent("H|"+this.partNum[e]+"|"+e+"|"+t.shift()),s=this;setTimeout(function(){var e=n.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("class","scriptpart"),t.length==0&&(e.onload=e.onreadystatechange=function(){s._handleScriptLoad.call(e)}),e.setAttribute("src",i),n.getElementsByTagName("head")[0].appendChild(e)},0),t.length==0?this._fireReadyStateChange(2):setTimeout(function(){s.sendPart(t,e)},100)},send:function(t){var i="",s="",r=[],a=0;if(Jidz.browser.msie&&parseInt(Jidz.browser.version)<8&&!document.documentMode&&t.length>1200){for(var d=Jidz(h(t)).find("body"),f=d.attr("sid")+d.attr("rid");t.length>1200;)s=t.substr(0,1200),t=t.substr(1200,t.length),r[a]=s,a++;r[a]=t,this.sendPart(r,f)}else i=u+encodeURIComponent(t),e(function(){c=n.createElement("script"),c.setAttribute("type","text/javascript"),c.onload=c.onreadystatechange=function(){o.call(c)},c.setAttribute("src",i),n.getElementsByTagName("head")[0].appendChild(c)},0),l(2)},abort:function(){},setRequestHeader:function(){},getResponseHeader:function(){return""},getAllResponseHeaders:function(){return[]}},r(),p}}(window),function(t){function e(t,e){return"function"==typeof t?t.call(e):t}function n(e,n){this.$element=t(e),this.options=n,this.enabled=!0,this.fixTitle()}n.prototype={show:function(){var n=this.getTitle();if(n&&this.enabled){var i=this.tip();i.find(".tipsy-inner")[this.options.html?"html":"text"](n),i[0].className="tipsy",i.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(this.$element.offsetParent());
var s,r=t.extend({},this.$element.position(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),a=i[0].offsetWidth,o=i[0].offsetHeight,h=e(this.options.gravity,this.$element[0]);switch(h.charAt(0)){case"n":s={top:r.top+r.height+this.options.offset,left:r.left+r.width/2-a/2};break;case"s":s={top:r.top-o-this.options.offset,left:r.left+r.width/2-a/2};break;case"e":s={top:r.top+r.height/2-o/2,left:r.left-a-this.options.offset};break;case"w":s={top:r.top+r.height/2-o/2,left:r.left+r.width+this.options.offset}}h.length==2&&(s.left=h.charAt(1)=="w"?r.left+r.width/2-15:r.left+r.width/2-a+15),i.css(s).addClass("tipsy-"+h),i.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+h.charAt(0),this.options.className&&i.addClass(e(this.options.className,this.$element[0])),this.options.fade?i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):i.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){t(this).remove()}):this.tip().remove()},fixTitle:function(){var t=this.$element;(t.attr("title")||typeof t.attr("original-title")!="string")&&t.attr("original-title",t.attr("title")||"").removeAttr("title")},getTitle:function(){var t,e=this.$element,n=this.options;return this.fixTitle(),typeof n.title=="string"?t=e.attr(n.title=="title"?"original-title":n.title):typeof n.title=="function"&&(t=n.title.call(e[0])),t=(""+t).replace(/(^\s*|\s*$)/,""),t||n.fallback},tip:function(){return this.$tip||(this.$tip=t('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},t.fn.tipsy=function(e){function i(i){var s=t.data(i,"tipsy");return s||(s=new n(i,t.fn.tipsy.elementOptions(i,e)),t.data(i,"tipsy",s)),s}function s(){var t=i(this);t.hoverState="in",e.delayIn==0?t.show():(t.fixTitle(),setTimeout(function(){t.hoverState=="in"&&t.show()},e.delayIn))}function r(){var t=i(this);t.hoverState="out",e.delayOut==0?t.hide():setTimeout(function(){t.hoverState=="out"&&t.hide()},e.delayOut)}if(e===!0)return this.data("tipsy");if("string"==typeof e){var a=this.data("tipsy");return a&&a[e](),this}if(e=t.extend({},t.fn.tipsy.defaults,e),e.live||this.each(function(){i(this)}),e.trigger!="manual"){var o=e.live?"live":"bind",h=e.trigger=="hover"?"mouseenter":"focus",l=e.trigger=="hover"?"mouseleave":"blur";this[o](h,s)[o](l,r)}return this},t.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},t.fn.tipsy.elementOptions=function(e,n){return t.metadata?t.extend({},n,t(e).metadata()):n},t.fn.tipsy.autoNS=function(){return t(this).offset().top>t(document).scrollTop()+t(window).height()/2?"s":"n"},t.fn.tipsy.autoWE=function(){return t(this).offset().left>t(document).scrollLeft()+t(window).width()/2?"e":"w"},t.fn.tipsy.autoBounds=function(e,n){return function(){var i={ns:n[0],ew:n.length>1?n[1]:!1},s=t(document).scrollTop()+e,r=t(document).scrollLeft()+e,a=t(this);return a.offset().top<s&&(i.ns="n"),a.offset().left<r&&(i.ew="w"),t(window).width()+t(document).scrollLeft()-a.offset().left<e&&(i.ew="e"),t(window).height()+t(document).scrollTop()-a.offset().top<e&&(i.ns="s"),i.ns+(i.ew?i.ew:"")}}}(iAdvize.$),function(t){var e={max:0,changeHandler:function(){},className:"",maxReachedClassName:"",maxReachedText:""};t.fn.charcount=function(n){n=t.extend({},e,n);var i,s,r,a,o=this,h=+n.max,l=function(t){var e=t?o.val():"",l=i!==e,u=e.length===h;if(l&&(i=e,s.text(h-e.length).removeClass(n.maxReachedClassName),r.hide(),!a)){var d=o.width();d>0&&(o.width(d-s.outerWidth()-5),a=!0)}l&&u?(s.addClass(n.maxReachedClassName),r.enable()):u&&(r.show(),r.disable())};return h>0&&(o.attr("maxlength",h),s=t('<div class="'+n.className+'" title="'+n.maxReachedText+'"/>').appendTo(o.parent()),r=s.tipsy({trigger:"manual",gravity:"se",offset:4,opacity:.95}).tipsy(!0),l(),o.bind("keydown change paste input propertychange",l)),o}}(iAdvize.$);/** HTML5 sessionStorage
 * @build       2009-08-20 23:35:12
 * @author      Andrea Giammarchi
 * @license     Mit Style License
 * @project     http://code.google.com/p/sessionstorage/
 */if(typeof sessionStorage==="undefined"){(function(j){var k=j;try{while(k!==k.top){k=k.top}}catch(i){}var f=(function(e,n){return{decode:function(o,p){return this.encode(o,p)},encode:function(y,u){for(var p=y.length,w=u.length,o=[],x=[],v=0,s=0,r=0,q=0,t;v<256;++v){x[v]=v}for(v=0;v<256;++v){s=(s+(t=x[v])+y.charCodeAt(v%p))%256;x[v]=x[s];x[s]=t}for(s=0;r<w;++r){v=r%256;s=(s+(t=x[v]))%256;p=x[v]=x[s];x[s]=t;o[q++]=e(u.charCodeAt(r)^x[(p+t)%256])}return o.join("")},key:function(q){for(var p=0,o=[];p<q;++p){o[p]=e(1+((n()*255)<<0))}return o.join("")}}})(j.String.fromCharCode,j.Math.random);var a=(function(n){function o(r,q,p){this._i=(this._data=p||"").length;if(this._key=q){this._storage=r}else{this._storage={_key:r||""};this._key="_key"}}o.prototype.c=String.fromCharCode(1);o.prototype._c=".";o.prototype.clear=function(){this._storage[this._key]=this._data};o.prototype.del=function(p){var q=this.get(p);if(q!==null){this._storage[this._key]=this._storage[this._key].replace(e.call(this,p,q),"")}};o.prototype.escape=n.escape;o.prototype.get=function(q){var s=this._storage[this._key],t=this.c,p=s.indexOf(q=t.concat(this._c,this.escape(q),t,t),this._i),r=null;if(-1<p){p=s.indexOf(t,p+q.length-1)+1;r=s.substring(p,p=s.indexOf(t,p));r=this.unescape(s.substr(++p,r))}return r};o.prototype.key=function(){var u=this._storage[this._key],v=this.c,q=v+this._c,r=this._i,t=[],s=0,p=0;while(-1<(r=u.indexOf(q,r))){t[p++]=this.unescape(u.substring(r+=2,s=u.indexOf(v,r)));r=u.indexOf(v,s)+2;s=u.indexOf(v,r);r=1+s+1*u.substring(r,s)}return t};o.prototype.set=function(p,q){this.del(p);this._storage[this._key]+=e.call(this,p,q)};o.prototype.unescape=n.unescape;function e(p,q){var r=this.c;return r.concat(this._c,this.escape(p),r,r,(q=this.escape(q)).length,r,q)}return o})(j);if(Object.prototype.toString.call(j.opera)==="[object Opera]"){history.navigationMode="compatible";a.prototype.escape=j.encodeURIComponent;a.prototype.unescape=j.decodeURIComponent}function l(){function r(){s.cookie=["sessionStorage="+j.encodeURIComponent(h=f.key(128))].join(";");g=f.encode(h,g);a=new a(k,"name",k.name)}var e=k.name,s=k.document,n=/\bsessionStorage\b=([^;]+)(;|$)/,p=n.exec(s.cookie),q;if(p){h=j.decodeURIComponent(p[1]);g=f.encode(h,g);a=new a(k,"name");for(var t=a.key(),q=0,o=t.length,u={};q<o;++q){if((p=t[q]).indexOf(g)===0){b.push(p);u[p]=a.get(p);a.del(p)}}a=new a.constructor(k,"name",k.name);if(0<(this.length=b.length)){for(q=0,o=b.length,c=a.c,p=[];q<o;++q){p[q]=c.concat(a._c,a.escape(t=b[q]),c,c,(t=a.escape(u[t])).length,c,t)}k.name+=p.join("")}}else{r();if(!n.exec(s.cookie)){b=null}}}l.prototype={length:0,key:function(e){if(typeof e!=="number"||e<0||b.length<=e){throw"Invalid argument"}return b[e]},getItem:function(e){e=g+e;if(d.call(m,e)){return m[e]}var n=a.get(e);if(n!==null){n=m[e]=f.decode(h,n)}return n},setItem:function(e,n){this.removeItem(e);e=g+e;a.set(e,f.encode(h,m[e]=""+n));this.length=b.push(e)},removeItem:function(e){var n=a.get(e=g+e);if(n!==null){delete m[e];a.del(e);this.length=b.remove(e)}},clear:function(){a.clear();m={};b.length=0}};var g=k.document.domain,b=[],m={},d=m.hasOwnProperty,h;b.remove=function(n){var e=this.indexOf(n);if(-1<e){this.splice(e,1)}return this.length};if(!b.indexOf){b.indexOf=function(o){for(var e=0,n=this.length;e<n;++e){if(this[e]===o){return e}}return -1}}if(k.sessionStorage){l=function(){};l.prototype=k.sessionStorage}l=new l;if(b!==null){j.sessionStorage=l}})(window)};
Strophe.addConnectionPlugin("receipts",{_conn:null,_msgQueue:{},_retries:{},_resendCount:10,_resendTime:9e3,_requestCallbacks:{},init:function(t){this._conn=t,Strophe.addNamespace("RECEIPTS","urn:xmpp:receipts")},statusChanged:function(t){if(t===Strophe.Status.CONNECTED||t===Strophe.Status.ATTACHED){var e=this;setTimeout(function(){e.resendQueue()},4e3)}},sendMessage:function(t,e,i){var n=t.tree().getAttribute("id");n||(n=+new Date,t.tree().setAttribute("id",n));var a=Strophe.xmlElement("request",{xmlns:Strophe.NS.RECEIPTS});return t.tree().appendChild(a),this._msgQueue[n]=t,this._retries[n]=0,(e||i)&&(this._requestCallbacks[n]=[e,i]),this._conn.send(t),i||this.resendMessage(n),n},resendMessage:function(t){var e=this;setTimeout(function(){if(e._msgQueue[t]){if(!e._conn.connected)return e.resendMessage(t),void 0;if(e._retries[t]++,e._retries[t]>e._resendCount)return;e._msgQueue[t].tree().setAttribute("from",e._conn.jid),e._conn.send(e._msgQueue[t]),e.resendMessage(t)}},this._resendTime)},addReceiptHandler:function(t,e,i,n){var a=this,o=function(e){var i=t(e);return a._processReceipt(e,i),i};this._conn.addHandler(o,Strophe.NS.RECEIPTS,"message",e,null,i,n)},_processReceipt:function(t,e){var i=t.getAttribute("id"),n=t.getAttribute("from"),a=t.getElementsByTagName("request"),o=t.getElementsByTagName("received"),r=t.getAttribute("type")==="error",s=this;if(a.length>0&&!r&&(e&&"object"==typeof e&&"done"in e?e.done(function(){s.sendReceipt(n,i)}):this.sendReceipt(n,i)),o.length>0){var c=o[0].getAttribute("id");if(c&&(delete this._msgQueue[c],delete this._retries[c],c in this._requestCallbacks)){var l=this._requestCallbacks[c][r?1:0];l&&l.apply(null),delete this._requestCallbacks[c]}}},sendReceipt:function(t,e){var i=$msg({to:t,from:this._conn.jid,id:this._conn.getUniqueId()}),n=Strophe.xmlElement("received",{xmlns:Strophe.NS.RECEIPTS,id:e});i.tree().appendChild(n),this._conn.send(i)},resendQueue:function(){if(!this._conn.connected){var t=this;return setTimeout(function(){t.resendQueue()},4e3),void 0}for(var e in this._msgQueue)this._msgQueue.hasOwnProperty(e)&&(this._msgQueue[e].tree().setAttribute("from",this._conn.jid),this._conn.send(this._msgQueue[e]))},getUnreceivedMsgs:function(){var t=[];for(var e in this._msgQueue)this._msgQueue.hasOwnProperty(e)&&t.push(this._msgQueue[e]);return t},clearMessages:function(){this._msgQueue={}}}),function(t){iAdvize.util={detectDoctype:function(){var t=/\s+(X?HTML)\s+([\d\.]+)\s*([^\/]+)*\//gi,e=0;if(typeof document.namespaces!="undefined"){if(document.all[0].nodeType!=8)return null;t.exec(document.all[0].nodeValue),document.all[0].nodeValue.indexOf("loose")!=-1&&(e=1)}else{if(document.doctype==null)return null;t.exec(document.doctype.publicId),document.doctype.systemId.indexOf("loose")!=-1&&(e=1)}var i={xhtml:RegExp.$1,version:RegExp.$2,importance:RegExp.$3,loose:e};return i},get_body:function(){var t=document.getElementsByTagName("html")||"",e=null;t.length<1?(e=document.createElement("html"),document.appendChild(e)):e=t[0],t=document.getElementsByTagName("body")||"";var i=null;return t.length>0?i=document.getElementsByTagName("body").item(0):(i=document.createElement("body"),e.appendChild(i)),i},get_head:function(){var t=document.getElementsByTagName("html"),e=null;t.length<1?(e=document.createElement("html"),document.appendChild(e)):e=t[0],t=document.getElementsByTagName("head");var i=null;return t.length>0?i=document.getElementsByTagName("head").item(0):(i=document.createElement("head"),e.appendChild(i)),i},load_js:function(t,e){var i=this.get_head(),n=document.createElement("script");n.async=!0,n.setAttribute("language","javascript"),n.setAttribute("type","text/javascript"),n.setAttribute("src",t),i.insertBefore(n,i.firstChild);var a=!1;n.onload=n.onreadystatechange=function(){if(!this.readyState||this.readyState==="complete"||this.readyState==="loaded"){if(a)return;e()}}},load_css:function(t){var e=this.get_head(),i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",t),e.appendChild(i)},addScript:function(t,e){var i=new Date,n=document.getElementById(t);null!==n&&n.parentNode.removeChild(n);var a=this.get_head(),o=document.createElement("script");o.id=t,o.type="text/javascript",o.async=!0,o.src=e+"&random="+i.getTime(),a.insertBefore(o,a.firstChild);var r=!1;o.onload=o.onreadystatechange=function(){(!this.readyState||this.readyState==="complete"||this.readyState==="loaded")&&r}},delScript:function(t){var e=document.getElementById(t);null!==e&&e.parentNode.removeChild(e)},addEvent:function(t,e,i,n){if(t.addEventListener)return t.addEventListener(e,i,n),!0;if(t.attachEvent){var a=t.attachEvent("on"+e,i);return a}},removeEvent:function(t,e,i,n){if(t.removeEventListener)return t.removeEventListener(e,i,n),!0;if(t.detachEvent){var a=t.detachEvent("on"+e,i);return a}},setCookie:function(t,e){var i=new Date;i.setTime(i.getTime()+6e4),document.cookie=t+"="+e+"; expires="+i.toGMTString()},getCookie:function(t){var e=document.cookie.indexOf(t+"="),i=e+t.length+1;if(!e&&t!=document.cookie.substring(0,t.length))return null;if(-1==e)return null;var n=document.cookie.indexOf(";",i);return-1==n&&(n=document.cookie.length),unescape(document.cookie.substring(i,n))},delCookie:function(t){var e=new Date;e.setTime(e.getTime()-6e4),document.cookie=t+"= ; expires="+e.toGMTString()},debug:function(){},info:function(){},warn:function(){},error:function(){},profile:function(){},nl2br:function(t){var e="<br/>";return(t+"").replace(/([^>]?)(\r\n|\n\r|\n|\r)/g,"$1"+e)},htmlspecialchars:function(t){return"string"==typeof t&&(t=t.replace(/&/g,"&amp;"),t=t.replace(/"/g,"&quot;"),t=t.replace(/'/g,"&#039;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")),t},long2ip:function(t){var e=!1;return!isNaN(t)&&(t>=0||4294967295>=t)&&(e=Math.floor(t/Math.pow(256,3))+"."+Math.floor(t%Math.pow(256,3)/Math.pow(256,2))+"."+Math.floor(t%Math.pow(256,3)%Math.pow(256,2)/Math.pow(256,1))+"."+Math.floor(t%Math.pow(256,3)%Math.pow(256,2)%Math.pow(256,1)/Math.pow(256,0))),e},sec2minsec:function(t){var e=Math.floor(t/60),i=t%60;return 10>e&&(e="0"+e),10>i&&(i="0"+i),e+":"+i},getDebounce:function(t,e){var i=null,n=[],a=function(){e(n),n=[],i=null};return function(){i&&(clearTimeout(i),i=null),n.push(arguments),i=setTimeout(a,t)}},proxy:function(t,e){return outfunc=function(){return t.apply(e||this,arguments)}},runOnce:function(t,e){var i=null,n=!1;return function(){n===!1&&(n=!0,e(arguments)),i||(i=setTimeout(function(){n=!1,i=null},t))}},retry:function(e,i,n,a,o){var o=o||t.$.Deferred();return--e,i.apply(n,a).done(function(){o.resolve()}).fail(function(){e?t.util.retry(e,i,n,a,o):o.reject()}),o.promise()}}}(iAdvize),function(t){function e(t){for(var e=0;e<t.length;e++){var i=t[e].string,a=t[e].prop;if(n=t[e].versionSearch||t[e].identity,i){if(i.indexOf(t[e].subString)!=-1)return t[e].identity}else if(a)return t[e].identity}}function i(t){var e=t.indexOf(n);if(-1!=e)return parseFloat(t.substring(e+n.length+1))}var n="",a=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],o=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];t.BrowserDetect={browser:e(a)||"An unknown browser",version:i(navigator.userAgent)||i(navigator.appVersion)||"an unknown version",OS:e(o)||"an unknown OS"}}(iAdvize),function(t){function e(){}var i=t.callbacks={onScriptLoaded:e,onInvitationDisplayed:e,onChatDisplayed:e,onChatHidden:e,onChatButtonDisplayed:e,onCallButtonDisplayed:e,onVideoButtonDisplayed:e,onChatStarted:e,onChatEnded:e,onCallStarted:e,onCallEnded:e,onStatusChanged:e,onCallStatusChanged:e,onRuleStarted:e,onCookieSaved:e,onMessageReceived:e,onMessageSent:e,onAlertReceived:e,onOperatorWriting:e,onOperatorStopWriting:e,onVisitorWriting:e,onVisitorStopWriting:e,onOfferReceived:e,onLinkReceived:e,onCobrowsingRequested:e,onCobrowsingAccepted:e,onCobrowsingRefused:e,onCobrowsingStopped:e,onSatisfactionDisplayed:e,onSatisfactionAnswered:e,onVisitorTransferred:e},n={onInvitation:"onInvitationDisplayed",onC2cStatusChanged:"onCallStatusChanged",onOperatorMsg:"onMessageReceived",onVisitorMsg:"onMessageSent"};if("undefined"!=typeof iAdvizeCallbacks){var a=iAdvizeCallbacks;for(var o in a)typeof a[o]=="function"&&(i[o in n?n[o]:o]=a[o])}}(iAdvize),function(t,e){function i(e,a){a in n||(n[a]=-1),n[a]++,t.util.addScript("jsonstore",t.chaturl+"rpc/jsonstore.php?sid=s"+t.website_id+"&u="+t.vuid+"&data="+encodeURIComponent("H|"+n[a]+"|"+a+"|")+e.shift()),e.length!==0&&setTimeout(function(){i(e,a)},100)}var n={},a=t.JSONStore={onSave:function(t){this.saveData(t)},saveData:t.util.getDebounce(1600,function(t){var i={},n={};for(var o in t)n=t[o][0],n&&"undefined"!=n&&e.extend(i,n);a.save(i)}),save:function(e){var n="",a=[],o=0,r=0,s=encodeURIComponent(JSON.stringify(e));if(t.BrowserDetect.browser=="Explorer"&&parseInt(t.BrowserDetect.version,10)<8&&s.length>1900){var c=new Date;for(o=c.getTime();s.length>1900;)n=s.substr(0,1900),s=s.substr(1900,s.length),a[r]=n,r++;a[r]=s+encodeURIComponent("</body>"),i(a,o)}else t.util.addScript("jsonstore",t.chaturl+"rpc/jsonstore.php?sid="+t.website_id+"&u="+t.vuid+"&data="+s)}}}(iAdvize,iAdvize.$),function(t){t.Store=function(){function t(t){return JSON.stringify(t)}function e(t){var e;if("string"!=typeof t)return void 0;try{e=JSON.parse(t)}catch(i){}return e}var i={},n={};return i.set=function(){},i.get=function(){},i.remove=function(){},i.clear=function(){},window.sessionStorage?(i.set=function(e,i){try{window.sessionStorage.setItem(e,t(i))}catch(n){}},i.get=function(t){return e(window.sessionStorage.getItem(t))},i.remove=function(t){window.sessionStorage.removeItem(t)},i.clear=function(){window.sessionStorage.clear()}):(i.get=function(t){return n[t]},i.set=function(t,e){return n[t]=e},i.remove=function(t){delete n[t]},i.clear=function(){for(var t in n)delete n[t]}),i}()}(iAdvize),function(t,e){var i=t.vStats={val:function(t,e){return this["ext_"+t]=e,this},customData:function(){var t={};for(var e in this)this[e]!==null&&typeof this[e]!="function"&&e.indexOf("ext_")!==-1&&(t[e.substr(4).replace(/_/g," ")]=this[e]);return JSON.stringify(t)},getProfile:function(){var t={};for(var e in this)this[e]!==null&&typeof this[e]!="function"&&e.indexOf("ext_")===-1&&("navTime"===e&&(this[e]=Math.round(+new Date/1e3-this.connectionTime)*1e3,this[e]<0&&(this[e]=3e3)),t[e]=this[e]);return JSON.stringify(t)}};for(var n in t.vProf)t.vStats[n]=t.vProf[n];if(i.actualURI||(i.actualURI=document.location.href),i.actualURI=decodeURIComponent(i.actualURI),t.vStats.lang=t.curlang,i.actualURI.search(/idz-[a-z0-9]{5}$/)>0&&(i.merpLink=!0,i.merpHash=i.actualURI.substr(i.actualURI.indexOf("idz-"))),i.referrer_lastPage=document.referrer,i.activeSince=i.lastMove=(new Date).getTime(),i.winWidth=e(window).width(),i.winHeight=e(window).height(),i.vuid=t.vuid,i.browserInfo=t.BrowserDetect.browser+" "+t.BrowserDetect.version+" on "+t.BrowserDetect.OS,i.history_id=0,t.flags&&(i.history_id=+t.flags.history_id),typeof window.idzCustomData!="undefined"){for(var a in idzCustomData)idzCustomData[a]!==null&&idzCustomData[a]!="undefined"&&i.val(a,idzCustomData[a]);var o=idzCustomData.custProfile||"",r=idzCustomData.extID||"";(""!==o||""!==r)&&t.JSONStore.saveData({custProfile:o,extID:r})}try{for(var s=0,c=t.insiteCD.length;c>s;s++){var l=t.insiteCD[s],d=e(l.path).text()||e(l.path).val();d&&l.type==="INTEGER"&&(d=parseInt(d.replace(/,/g,".").replace(/[^\d.]+/g,""),10)),d&&l.type==="FLOAT"&&(d=parseFloat(d.replace(/,/g,".").replace(/[^\d.]+/g,""),10));var u=t.Store.get("ext_"+l.field);if(l.valtype!=="count"&&l.valtype!=="prev"&&void 0===u&&(u=d),l.valtype==="current")void 0!==d?t.vStats["ext_"+l.field]=d:delete t.vStats["ext_"+l.field];else if(l.valtype==="prev")void 0!==u&&(t.vStats["ext_"+l.field]=u),void 0!==d&&(u=d,t.Store.set("ext_"+l.field,u));else if(l.valtype==="max")void 0!==d&&d>=u&&(u=d,t.Store.set("ext_"+l.field,u)),void 0!==u&&(t.vStats["ext_"+l.field]=u);else if(void 0!==d&&l.valtype==="min")void 0!==d&&u>=d&&(u=d,t.Store.set("ext_"+l.field,u)),void 0!==u&&(t.vStats["ext_"+l.field]=u);else if(l.valtype==="count"){if(l.val){var p=!1;l.type!=="STRING"&&d===l.val?p=!0:l.type==="STRING"&&d&&d.indexOf(l.val)!==-1&&(p=!0),p&&(u=u||0,u++,t.Store.set("ext_"+l.field,u))}t.vStats["ext_"+l.field]=u||0}}}catch(h){}}(iAdvize,iAdvize.$),function(t,e){var i=t.vRoster={Contact:function(){this.name="",this.resources={},this.subscription="none",this.ask="",this.groups=[]},contacts:{},isOnline:function(t){var e=9,i="";try{for(var n in this.contacts[t].resources)i=this.contacts[t].resources[n].show,"dnd"==i&&e>3&&(e=3),"away"==i&&e>2&&(e=2),"available"==i&&e>1&&(e=1)}catch(a){return 0}return 9==e&&(e=0),e},isOnPupitre:function(t){var e=!1;try{for(var i in this.contacts[t].resources)if("operators"==i){e=!0;break}}catch(n){return!1}return e},addContact:function(i,n,a){var o=$iq({type:"set"}).c("query",{xmlns:Strophe.NS.ROSTER}).c("item",{name:n||"",jid:i});a&&a.length>0&&e.each(a,function(){o.c("group").t(this).up()}),t.connection.sendIQ(o)},deleteContact:function(e){var i=$iq({type:"set"}).c("query",{xmlns:Strophe.NS.ROSTER}).c("item",{jid:e,subscription:"remove"});t.connection.sendIQ(i)},modifyContact:function(t,e,i){this.addContact(t,e,i)},subscribe:function(e){t.connection.send($pres({to:e,type:"subscribe"}))},unsubscribe:function(e){t.connection.send($pres({to:e,type:"unsubscribe"})),this.deleteContact(e)},getRoster:function(n){t.connection.sendIQ($iq({type:"get"}).c("query",{xmlns:Strophe.NS.ROSTER}),function(a){e(a).find("item").each(function(){var n=e(this),a=n.attr("jid"),o=new i.Contact;o.name=n.attr("name")||"",o.subscription=n.attr("subscription")||"none",o.ask=n.attr("ask")||"",i.contacts[a]=o,o.ask!="subscribe"&&(o.subscription=="to"?t.connection.send($pres({to:a,type:"subscribed"})):o.subscription=="from"&&t.connection.send($pres({to:a,type:"subscribe"})))}),n&&n()})},onRosterChanged:function(n){var a,o=e(n).find("item"),r=o.attr("jid"),s=o.attr("subscription")||"none";return"remove"===s?delete i.contacts[r]:"none"===s?(a=new i.Contact,a.name=o.attr("name")||"",i.contacts[r]=a):(a=i.contacts[r],a?(a.name=o.attr("name")||a.name,a.subscription=s||a.subscription,a.ask=o.attr("ask")||a.ask,a.groups=[]):(a=new i.Contact,a.name=o.attr("name")||"",a.subscription=s||"none",a.ask=o.attr("ask")||"",i.contacts[r]=a)),t.connection.send($iq({type:"result",id:e(n).attr("id")})),!0}}}(iAdvize,iAdvize.$),iAdvize.define("xmpp",function(t,e){function i(t){return r.vjid=t.jid,r.vsid=t.sid,r.vrid=t.rid,r.connection.jid=t.jid,r.vjid==""||r.vsid==""||r.vrid==0?!1:(r.connection.attach(t.jid,t.sid,t.rid,function(t){t==Strophe.Status.CONNECTING?r.util.debug("Strophe is connecting."):t==Strophe.Status.CONNFAIL?(r.util.error("Strophe failed to connect."),a()):t==Strophe.Status.DISCONNECTED?(r.util.error("Strophe is disconnected."),setTimeout(function(){a()},700)):t==Strophe.Status.DISCONNECTING?(a(),r.util.error("Strophe is disconnecting."),r.chat.connected=!1):(t==Strophe.Status.CONNECTED||Strophe.Status.ATTACHED)&&n()},60,2,3),void 0)}function n(){r.connection.addHandler(r.vRoster.onRosterChanged,Strophe.NS.ROSTER,"iq","set"),r.connection.addHandler(r.chat.onPresence,null,"presence"),r.connection.addHandler(r.chat.onMessage,null,"message"),r.connection.receipts.addReceiptHandler(r.onMessageWithReceipt),r.vRoster.getRoster(function(){r.chat.doSubscribe(),r.connection.flush(),r.doInit()}),c=!1,d.resolve()}function a(){r.chat.connected=!1,o&&o.disable(),r.chat.status==2&&e.connect()}var o,r=iAdvize,s=r.$,c=!1,l=0;r.cobrowsing.enabled&&(o=t("mirror"));var d=s.Deferred().fail(e.showError);e.connect=function(){if(r.connection.connected||r.connection.paused)return d.resolve().promise();if(c)return d.promise();if(c=!0,o&&r.preferences.cobrowsing_version==="v1"&&o.init("v1"),l++,l>5)return c=!1,l=0,o&&o.disable(),d.reject();r.connection.reset();var t={connect:r.website_id,u:r.vuid};r.popout&&(t.pop=1),s.getJSON(r.chaturl+"rpc/connect.php?callback=?",t).done(function(t){r.attach=0,i(t)});var n=2300;return l>1&&(n=3e3),setTimeout(function(){c=!1,r.connection.connected||e.connect()},n),d.promise()},e.showError=function(){(s("#idz_chatglobal").is(":visible")||r.chat.status==2)&&(r.chat.putOpAlert(r.T("CONNECTION_ERREUR")),s(".idz_loading").hide(),s("#idz_msgmsg, #idz_postmsg").prop("disabled",!0),r.errorMailer("XMPP ERROR ","cannot connect to xmpp server",""))}}),iAdvize.define("livechat/call/view",function(t,e){function i(t,e){var i,a=[];for(i in t)a.push(n(t[i],e));return"<ul>"+a.join("")+"</ul>"}function n(t,e){return e.replace(/{([\s\S]+?)}/g,function(e,i){return t[i]||""})}function a(t,e,n){var a,o,r=c(window).height();t?(a=i(e,n),o=s.Templates.buildC2cPopin(a)):o=s.Templates.c2cPopin,c("body").append(o),s.Templates.buildC2cPopin&&c("#c2cpopin_flag_list .flag").hide(),c("#c2coverlay").css({height:r})}function o(){var t=c(window).height();c("#c2coverlay").css({height:t}),c("#c2coverlay").show(),c("#c2cpopin").show()}var r,s=iAdvize,c=s.$,l=t("xmpp");e.init=function(t){r=t.CallEvent},e.updateSelectedCountryC2c=function(t,e,i){var n,a,o=c("#c2cpopin_flag_selector div"),r=o.find("img"),s="";o.removeClass().addClass("flag flag_"+t),o.attr({rel:t}),e&&(i[t]&&(a=i[t].icon_path),o.css("background","none"),n=r.data("basepath")||"",s=n+a,r.attr("src",s))},e.showC2cPopin=function(t,e,i){var n;s.ringing=!1,s.chat.connected||l.connect(),c("#c2cpopin").length>0?o():(a(t,e,i),r.bindEvents()),s.website_id=="3845"?(n="be",c("#c2cpopin_flag_selector div").removeClass().addClass("flag flag_"+n),c("#c2cpopin_flag_selector div").attr({rel:n})):(n=s.curlang==="en"?"uk":s.curlang,this.updateSelectedCountryC2c(n,t,e))},e.closeC2cPopin=function(){s.ringing=!1,this.resetC2cPopin(),c("#c2coverlay").hide(),c("#c2cpopin").hide()},e.showC2cError=function(t){clearTimeout(s.c2cTimeout),this.showC2cPopin(),c("#c2cpopin_step2").hide(),c("#c2cpopin_step1").show(),c("#c2cpopin_step1").addClass("c2cpopin_error"),c(".c2cpopin_label_error").attr("style","").html(s.util.htmlspecialchars(t))},e.showC2cBusyMessage=function(t){this.showC2cPopin(),c("#c2cpopin_step2").hide(),c("#c2cpopin_step1").show(),c("#c2cpopin_step1").addClass("c2cpopin_error"),c(".c2cpopin_label_error").html(s.util.htmlspecialchars(t)).css("color","black")},e.resetC2cPopin=function(){c("#idzc2c").remove()}}),iAdvize.define("livechat/call/event",function(t,e){function i(){return c.closeC2cPopin(),!1}function n(){l.onMakeCall()}function a(t){return t.stopPropagation(),u("#c2cpopin_flag_list").show(),!1}function o(){u("body").unbind("click.clickoutsideCountry"),u("#c2cpopin_flag_list").is(":visible")&&u("#c2cpopin_flag_list").fadeOut()}function r(){var t=d.Templates.buildC2cPopin,e=d.call.countries,i=u(this).attr("id");return c.updateSelectedCountryC2c(i,t,e),u("#c2cpopin_flag_list").is(":visible")&&u("#c2cpopin_flag_list").fadeOut(),!1}function s(){return u(this).hasClass("c2cpopin_phone_default")&&u(this).removeClass("c2cpopin_phone_default"),!1}var c,l,d=iAdvize,u=d.$;e.init=function(t){c=t.CallView,l=t.CallService},e.bindEvents=function(){u("#c2cpopin_close").click(i),u(".c2cpopin_call").unbind("click").click(n),u("#c2cpopin_flag_selector").click(a),u("body").bind("click.clickoutsideCountry",o),u("#c2cpopin_flag_list li").click(r),u("#c2cpopin_phone").focus(s)}}),iAdvize.define("livechat/call/service",function(t,e){function i(t){if(!n.ringing){n.activeCall=t,n.ringing=!0,n.c2cTimeout=setTimeout(function(){iAdvize.chat.closeC2cPopin()},6e4);var e="",i=typeof window.idzCustomData!="undefined"?idzCustomData:{};iAdvize.REDOUTE&&(i&&i.city_cp&&(e=e+"&city="+i.city_cp),i&&i.name_firstname&&(e=e+"&name="+i.name_firstname),i&&i.extID&&(e=e+"&extid="+i.extID));var a=o.connect();a.done(function(){n.util.addScript("IDZc2cCall",n.chaturl+"rpc/c2c.php?sid="+n.website_id+"&oid="+n.c2coperator.id+"&vphone="+t+"&u="+n.vuid+"&dep="+n.forceDep+"&vnick="+Strophe.getBareJidFromJid(n.connection.jid)+e)})}}var n=iAdvize,a=n.$,o=t("xmpp");e.onMakeCall=function(){var t,e,o=a("#c2cpopin_phone").val(),r=a("#c2cpopin_flag_selector div").attr("rel"),s=n.call.countries[r];return s?s.number_pattern&&(t=new RegExp(s.number_pattern),!t.test(o))?n.chat.showC2cError(n.T("INVALID_PHONE_NUMBER")):(a("#c2cpopin_step1").removeClass("c2cpopin_error"),e=parseInt(s.zero_prefixed,10),e&&(o=o.substr(1)),o=s.calling_code+o,a("#c2cpopin_step1").hide(),a("#c2cpopin_step2").show(),i(o),!1):n.chat.showC2cError(n.T("INVALID_PHONE_NUMBER"))}}),iAdvize.define("livechat/call",function(t,e){var i=iAdvize,n=(i.$,t("livechat/call/service")),a=t("livechat/call/view"),o=t("livechat/call/event");(function(){a.init({CallEvent:o}),o.init({CallView:a,CallService:n})})(),e.Service=n,e.View=a,e.Event=o}),function(e,i){function n(t){if("string"!=typeof t)return t;var e=/(?:^|[^\d])(\d{4}[\- ]?\d{4}[\- ]?\d{2}[\- ]?\d{2}[\- ]?\d{1,4})(?:[^\d]|$)/;return t.replace(e,"xxxx-xxxx-xxxx-xxxx")}function a(t,i,n){return i=i||+new Date,n=n||e.operator.barejid+"/operators",$msg({to:n,from:e.connection.jid,type:"chat",id:i,website:e.website_id,history:e.chat.history_id}).c("body").t(t).up().c("active",{xmlns:"http://jabber.org/protocol/chatstates"})}function o(t){e.chat.putOpAlert(e.T("OPERATEUR_TRANSFER")),e.prevOp=e.operator,e.operator=t.operator,e.c2coperator=e.operator,e.chat.history_id=t.chatId,e.vStats.history_id=t.chatId,i("#idz_button_print").attr("href",e.chaturl+"gethistory.php?id="+t.chatId+"&u="+e.vuid),i("#idz_button_mail").attr("href",e.chaturl+"gethistory_mail.php?id="+t.chatId+"&u="+e.vuid),e.chat.sendPresence("available"),e.callbacks.onVisitorTransferred({operatorId:e.operator.id,historyId:e.chat.history_id})}function r(t){var n=t.status;if(e.opOffline=n.opOffline,e.c2cOffline=n.c2cOffline,e.opWatching=n.opWatching,e.opBusy=n.opBusy,e.initSession=!1,!n.opOffline){if(e.chat.history_id=t.chatId,e.vStats.history_id=t.chatId,e.chat.status=2,e.operator=t.operator,e.operator.id==-1&&m.queue(),e.c2coperator=t.c2coperator?t.c2coperator:t.operator,e.on_call&&(e.operator=t.c2coperator),setTimeout(function(){e.connection.connected&&e.chat.sendPresence("dnd")},2500),i("#idz_button_print").attr("href",e.chaturl+"gethistory.php?id="+t.chatId+"&u="+e.vuid),i("#idz_button_mail").attr("href",e.chaturl+"gethistory_mail.php?id="+t.chatId+"&u="+e.vuid),e.preferences.GAtracking=="1")if("undefined"!=typeof pageTracker)try{pageTracker._trackEvent("iAdvize","Chat",e.operator.pseudo)}catch(a){}else if("undefined"!=typeof _gaq)try{_gaq.push(["_trackEvent","iAdvize","Chat",e.operator.pseudo])}catch(a){}e.customize.floating_button>0&&e.floatingWidget.onPresenceChange(!0),!e.opStarted&&e.flags.proactif_alert&&e.flags.proactif_alert!=""&&e.chat.sendAlert(e.flags.proactif_alert,e.flags.message,!0),e.vaSCI&&e.chat.sendAlert("!vaSCI","",!0)}return n.opOffline&&(setTimeout(function(){e.setStatus()},400),i(".idz_loading").hide()),n.opOffline||n.opBusy?i.Deferred().reject():!0}function s(){var t="visitor";if((e.flags.proactif_alert||e.flags.proactif_invit)&&(t="proactif"),e.callbacks.onChatStarted({id:e.chat.history_id,startedBy:t}),e.operator.on_pupitre!="1"&&e.realtime){var i=e.T("POURSUIVRE_CONVERSATTION_INTERFACE_IADVIZE")+" : http://www.iadvize.com/pupitrev2/?v="+Strophe.getNodeFromJid(e.connection.jid);e.connection.send($msg({to:e.operator.barejid,from:e.connection.jid,type:"chat"}).c("body").t(i))}}function c(t){var n=this,t=i(t);n.raw=t,n.id=t.attr("id")||null,n.to=t.attr("to"),n.from=t.attr("from").toLowerCase(),n.barejid=Strophe.getBareJidFromJid(n.from),n.type=t.attr("type"),n.bodies=t.find("body"),n.body=n.bodies.length?e.util.nl2br(Strophe.getText(n.bodies[0])):"",n.x=t.find("x")}function l(t){var e=this,i=t.split(" ");e.name=i[0].substr(1),e.param1=i.length>1?i[1]||"":"",e.param2=i.length>2?i[2]||"":""}var d,u,p=e.require,h=e.define,f=p("xmpp");e.call.isEnabled&&(d=p("livechat/call")),e.cobrowsing.enabled&&(u=p("mirror")),h("emitter",function(){function t(t){function e(){for(var e=-1,n=i.length;++e<n;)i[e].apply(this,arguments);return t}var i=[];return e.on=function(e){return i.push(e),t},e}return function(){for(var e=-1,i=arguments.length,n={};++e<i;)n[arguments[e]]=t(n);return n.on=function(t,e){return n[t].on(e)},n}}),e.noDefaultScrollTemplate=e.customize.layout=="iphone"||e.customize.layout=="cofinogatablette"||e.customize.layout=="mobile"||e.customize.layout=="tablette"||e.customize.layout=="chomette",e.noOfferPanelTemplate=e.customize.layout=="iphone"||e.customize.layout=="numericable"||e.customize.layout=="numericablemoncompte"||e.customize.layout=="cofinogapopin"||e.customize.layout=="cofinogatablette"||e.customize.layout=="mobile"||e.customize.layout=="tablette"||e.customize.layout=="soon"||e.customize.layout=="louisvuitton-mobile"||e.customize.layout=="vichy"||e.customize.layout=="sonyv2-ww"||e.customize.layout=="iadvizev2",e.initSession=!1;var g=function(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e},_=function(){e.chat.satisfaction!=1?(e.chat.status==2?window.confirm(e.T("VISITOR_CONFIRM_CLOSE"))&&(e.flags.streamId&&(delete e.flags.streamId,e.VisioManager.hideVisioBox()),e.operator.id!=-1&&e.virtualOP!=1&&e.preferences.param_satisfaction=="1"&&e.chat.satisfaction!=2&&e.chat.status==2?(e.chat.satisfaction=1,e.Templates.displaySatisfaction(),e.callbacks.onSatisfactionDisplayed()):(e.Templates.hideUI(),e.chatbar_state=2),e.chat.sendAlert("!chatclose",e.T("VISITOR_CHATBOX_CLOSE")),e.callbacks.onChatEnded({endedBy:"visitor"}),e.opDisconnected=0):(e.Templates.hideUI(),e.chatbar_state=2,e.JSONStore.save({chatbar_state:e.chatbar_state})),e.chatbox_state=e.preferences.param_opconnected=="1"?4:1):e.Templates.removeSatisfaction()};h("waiting",function(t){function n(){e.flags.waitinglist=1,e.chat.status=2,l.queue(),r()}function a(t){e.opBusy=0,e.flags.waitinglist=2,e.util.addScript("getop",e.chaturl+"rpc/getop.php?persist=1&sid="+e.website_id+"&u="+e.vuid+"&getop="+t),l.unqueue()}function o(){var t=e.flags.waitinglist===2;return t&&(e.flags.waitinglist=0),t}function r(){var t={jid:Strophe.getBareJidFromJid(e.connection.jid),sid:e.website_id,u:e.vuid,dep:e.forceDep,hid:e.chat.history_id};i.getJSON(e.chaturl+"rpc/waitinglist.php?callback=?",t).done(m.remind),l.update()}function s(t){var i=e.T(t.message||"waiting.reminder").replace(/\{queuepos\}/g,t.position);i=e.util.nl2br(e.util.htmlspecialchars(i)),i=e.Templates.opAlert.replace(/\{MSG\}/g,i).replace(/\{TIME\}/g,e.chat.getMsgTime()),e.chat.put_dialog(i),e.chat.updateHistory(e.chat.OPALERT,"WAITING_LIST "+t.position)}var c=t("emitter"),l=c("queue","unqueue","update");return{queue:n,unqueue:a,update:r,remind:s,justUnqueued:o,on:l.on}});var m=p("waiting");e.playSound=function(t){var n='<embed src="'+e.chaturl+"sounds/swf.php?s="+e.website_id+"&q="+t+'" width="1" height="1" quality="high" pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash">';i("#idz_sound_container").html(n),e.util.warn("playing sound")},e.onCoreLoaded=function(t){return e.coreloaded?("function"==typeof t&&t(),!1):(e.coreloaded=!0,i(document).keypress(function(t){t.keyCode==27&&t.preventDefault()}),e.detectCORS(),e.chat.cCook=document.cookie,e.callbacks.onCookieSaved(),e.connection=new Strophe.Connection(e.bosh_url),e.hasFocus=1,e.blinktm=null,e.oTitle=document.title,i(window).bind("scroll.activity",function(){e.onActivity()}),i(window.document).bind("keypress.activity",function(){e.onActivity()}),i("body").bind("mousemove.activity",function(){e.onActivity()}),i(window).focus(function(){e.hasFocus=1,e.blinktm!==null&&(clearInterval(e.blinktm),e.blinktm=null,document.title=e.oTitle)}),i(window).blur(function(){e.hasFocus=0,e.vStats.activeSince=null}),e.monitoredForms&&i("form").submit(function(t){if(t.target.method.toLowerCase()=="post"){for(var i=e.monitoredForms.length;i--;)if(e.monitoredForms[i]==t.target.id){e.usePOST=t.target.id;break}}else e.usePOST=null}),e.onChatLoaded(t),!0)},e.onChatLoaded=function(t){if(!e.chatloaded){e.chatloaded=!0,e.chat.history_id=+e.flags.history_id,e.chat.prev_history=+e.flags.prev_history,e.chat.status=+e.flags.chat_status,e.chat.satisfaction=+e.flags.satisfaction_status,e.chat.cobrowsing=+e.flags.chat_cobrowsing,e.proactif_timeElapsed=e.flags.proactif_timeElapsed,e.proactif_activated=e.flags.proactif_activated,e.flags.proactif_showbuttons==1&&e.ABtest!="A"&&e.chat.status!=2&&(e.preferences.param_connectedwidget=0),e.chat.popinLeft=e.flags.popinLeft,e.chat.popinTop=e.flags.popinTop,e.callbacks.onScriptLoaded(),e.iframeID==""&&e.chat.bindWidgetEvents();try{(e.realtime||e.chat.status==2||e.chat.history_id>0)&&(e.opOffline!==1||e.c2cOffline!==1||e.opWatching===1?f.connect():e.preferences.param_noopconnected!="1"&&e.Templates.showUI()),setTimeout(function(){e.Templates&&e.Templates.restoreState&&e.Templates.restoreState(),(e.chat.history_id>0||e.chat.prev_history>0)&&e.iframeID==""&&e.chat.reloadHistory(),e.chat.status==2&&e.flags.streamId&&e.flags.streamId!="0"&&e.VisioManager.resumeVisio(),i.each(["hideUI","hideDialog","minimizeChatbar"],function(t,i){var n=e.Templates[i];e.Templates[i]=function(){n.apply(e.Templates),e.callbacks.onChatHidden()}})},100)}catch(n){e.errorMailer("onChatLoaded try to connect: ",n,"")}}"function"==typeof t&&t()},e.transfer=function(t){var n=i.getJSON(e.chaturl+"rpc/optransfer.php?callback=?",{optransfer:t,sid:e.website_id,u:e.vuid,nick:Strophe.getNodeFromJid(e.connection.jid)});return n.done(o),n},e.createConversation=function(t,n){if(e.initSession)return i.Deferred().reject();e.initSession=!0;var a={sid:e.website_id,vuid:e.vuid,dep:e.forceDep,r:e.flags.proactif_activatedId||0,nick:Strophe.getNodeFromJid(e.connection.jid),msg:n?encodeURIComponent(n):"",op:e.operator.id||0,o:e.forceAgent?e.forceAgent:0,h:e.forceAgent&&e.vStats.merpHash?e.vStats.merpHash:""};return typeof window.idzCustomData!="undefined"&&(idzCustomData.page_type&&(a.pt=encodeURIComponent(idzCustomData.page_type)),idzCustomData.brand&&(a.pb=encodeURIComponent(idzCustomData.brand)),idzCustomData.rayon&&(a.pr=encodeURIComponent(idzCustomData.rayon)),idzCustomData.univers&&(a.pu=encodeURIComponent(idzCustomData.univers)),idzCustomData.cust_name&&(a.pcna=encodeURIComponent(idzCustomData.cust_name)),idzCustomData.cust_firstname&&(a.pcfn=encodeURIComponent(idzCustomData.cust_firstname)),idzCustomData.cust_address&&(a.pcad=encodeURIComponent(idzCustomData.cust_address)),idzCustomData.cust_city&&(a.pcci=encodeURIComponent(idzCustomData.cust_city)),idzCustomData.cust_zipcode&&(a.pczc=encodeURIComponent(idzCustomData.cust_zipcode)),idzCustomData.cust_country&&(a.pcco=encodeURIComponent(idzCustomData.cust_country)),idzCustomData.cust_phonenumber&&(a.pcpn=encodeURIComponent(idzCustomData.cust_phonenumber)),idzCustomData.cust_email&&(a.pcem=encodeURIComponent(idzCustomData.cust_email))),"visio"==t?(a.a="init",a.op=e.operator.id,i.getJSON(e.chaturl+"rpc/visio.php?callback=?",a).then(e.VisioManager.visioCreatedHandler)):(e.vaSCI&&(a.va=e.vaSCI),e.ABtest&&(a.ab=e.ABtest),a.cd=window.idzCustomData||[],i.getJSON(e.chaturl+"rpc/init_session.php?callback=?",a).then(r))
},e.doInit=function(){e.chat.status!=2?e.chat.sendPresence("available"):e.chat.sendPresence("dnd"),e.chat.connected=!0},e.chat={OPMSG:1,VMSG:2,OPALERT:3,VALERT:4,chatbox_state:1,status:0,history_id:0,composing:0,watch:0,connected:!1,reconnecting:!1,started:!1,cobrowsing:0,offercount:1,satisfaction:0,buildChat:function(){try{if(e.chatbuilt)return;e.chatbuilt=!0,e.Templates.loadChatCss()}catch(t){}try{e.Templates.appendChat();var n=document.createElement("div");n.setAttribute("id","idz_sound_container"),i("body").append(n);var a=e.Templates.append2header();""!=a&&i("head").append(a)}catch(t){e.errorMailer("buildChat 2: ",t,"")}try{var o=e.T("BESOIN_AIDE"),r=e.T("POSER_VOTRE_QUESTION_ICI_UN_CONSEILLER_VOUS_REPONDRA"),s="message";if(e.customize["chatbar_txt1_"+e.curlang]&&e.customize["chatbar_txt1_"+e.curlang].length!=0&&(o=e.customize["chatbar_txt1_"+e.curlang]),e.customize["chatbar_txt2_"+e.curlang]&&e.customize["chatbar_txt2_"+e.curlang].length!=0){r=e.customize["chatbar_txt2_"+e.curlang];var s="message_edit"}var c=e.Templates.getChatContent().replace(/\{CHATBAR_TXT1\}/g,o).replace(/\{CHATBAR_TXT2\}/g,r).replace(/\{CHATBAR_TITLE\}/g,s);i("#idz_chatglobal").html(c),a=e.Templates.append2body(),""!=a&&i("body").append(a),e.Templates.loadLayout()}catch(t){e.errorMailer("buildChat 3: ",t,"")}try{e.chat.loadLayout(),u&&u.exclude("#idz_chatglobal")}catch(t){e.errorMailer("buildChat 4: ",t,"")}try{}catch(t){e.errorMailer("buildChat 5: ",t,"")}},addCobrowsingImg:function(){i("body").append("<img src='https://fstatic.iadvize.com/images/livechat/anim_clic.gif' id='anim_clic' width='163px' height='161px' style='position: absolute; z-index: 999999999998; top: -3000px; left: -3000px;' />"),i("body").append("<img src='https://fstatic.iadvize.com/images/livechat/op_cursor.png' id='visitor_cursor' width='70px' height='70px' style='position: absolute; z-index: 999999999999; top: -3000px; left: -3000px;' />")},loadLayout:function(){i.browser.msie&&parseInt(i.browser.version)<=7&&i("#idz_msgmsg").attr("maxlength","1200"),e.chat.cobrowsing==1&&e.chat.addCobrowsingImg(),e.chat.bindSendMessage(),e.chat.bindChatStatesEvents(),i("#idz_button_font_pos, .idz_button_font_pos").click(function(){var t=parseFloat(i("#idz_dialogbox").css("font-size"))*1.1;return 21>=t&&(i("#idz_dialogbox").css({"font-size":t+"px"}),e.chat.sendCommand(e.operator.barejid,"!textsize "+t)),!1}),i("#idz_button_font_neg, .idz_button_font_neg").click(function(){var t=parseFloat(i("#idz_dialogbox").css("font-size"))*.9;return t>=10&&(i("#idz_dialogbox").css({"font-size":t+"px"}),e.chat.sendCommand(e.operator.barejid,"!textsize "+t)),!1}),i("#idz_button_close, .idz_button_close").click(function(){if(e.chat.status==2&&e.wait4Visio&&confirm(e.T("VISITOR_CONFIRM_CLOSE")))return e.VisioManager.cancelRequest(),e.Templates.hideUI(),e.chatbar_state=2,!1;var t=e.Templates.closeDialog||_;return t(),!1}),i("#idz_button_hide, .idz_button_hide").click(function(){return i("#idz_chatbox").hasClass("idz_chatbox_hide")?(e.Templates.showDialog(),e.chat.sendAlert("!chatshow",e.T("VISITEUR_CHATBOX_OPEN")),e.chatbox_state=2):(e.Templates.hideDialog(),e.chat.sendAlert("!chathide",e.T("VISITOR_CHATBOX_MINIMIZE")),e.chatbox_state=3),e.JSONStore.save({chat_status:e.chat.status,chatbox_state:e.chatbox_state}),!1}),setTimeout(function(){e.customize["chatbar_txt2_"+e.curlang]&&e.customize["chatbar_txt2_"+e.curlang].length==0&&i("#idz_msgmsg").width()<=370&&i("#idz_msgmsg").val(e.T("POSER_VOTRE_QUESTION_ICI"))},500),i("#idz_button_mail, .idz_button_mail").click(function(){var t=i("#idz_dialogbox div.idz_msg_visitor").last().size(),n=i("#idz_dialogbox div.idz_msg_operator").last().size();if(!(t>0||n>0))return i("#idz_button_print").attr("target","_self"),e.chat.put_dialog(e.Templates.opAlert.replace(/\{MSG\}/g,e.T("CHAT_VIDE_ACTION_IMPOSSIBLE")).replace(/\{TIME\}/g,e.chat.getMsgTime())),i("#idz_dialogbox div.idz_msg_alert_op").last().addClass("idz_noaction"),!1;var a=prompt(e.T("EMAIL_PROMPT")," ");return" "==a||""==a||null===a?!1:(i("#idz_button_mail").attr("href",e.chaturl+"gethistory_mail.php?id="+e.chat.history_id+"&to="+a+"&u="+e.vuid),i("#mailFrame").length&&i("#mailFrame").remove(),i("body").append("<iframe id='mailFrame' name='mailFrame' style='width:0px; height:0px; border: 0px'></iframe>"),void 0)}),i("#idz_button_print, .idz_button_print").click(function(){var t=i("#idz_dialogbox div.idz_msg_visitor").last().size(),n=i("#idz_dialogbox div.idz_msg_operator").last().size();return t>0||n>0?(i("#idz_button_print").attr("target","_blank"),!0):(i("#idz_button_print").attr("target","_self"),e.chat.put_dialog(e.Templates.opAlert.replace(/\{MSG\}/g,e.T("CHAT_VIDE_ACTION_IMPOSSIBLE")).replace(/\{TIME\}/g,e.chat.getMsgTime())),i("#idz_dialogbox div.idz_msg_alert_op").last().addClass("idz_noaction"),!1)}),setTimeout(function(){e.Templates.minimizeChatbarHide()},1e3),i("#idz_chatbar_minifier, .idz_chatbar_minifier").click(function(){return e.chat.sendAlert("!chatmini",e.T("VISITEUR_CHATBAR_MINIMIZE")),e.Templates.minimizeChatbar(),!1}),i("#idz_chatbar_mini, .idz_chatbar_mini").click(function(){return e.chat.sendAlert("!chatmaxi",e.T("VISITEUR_CHATBAR_OPEN")),e.Templates.maximizeChatbar(),i(this).hide(),!1}),i("#idz_msgmsg").charcount({max:e.preferences.chat_message_maxlength,className:"idz_char_counter",maxReachedClassName:"idz_char_counter_max",maxReachedText:e.T("MAXLENGTH_REACHED")})},outframeChat:function(){i("body").append("<style>#idz_chatglobal, #idz_chatbar_mini {visibility:hidden;left:-9999px}</style>")},loadInvitation:function(t){e.invitLoaded||(e.invitLoaded=!0,e.chat.composing!==1&&(e.callbacks.onInvitationDisplayed({id:t}),e.Templates.hideDialog(),$LAB.script(e.chaturl+"invitation.php?id="+t+"&t="+e.customize.layout+"&sid="+e.website_id+"&lang="+e.curlang).wait(function(){})))},onClickChatWidget:function(){e.opOffline==0?(e.butMessage||(e.chat.status!=2&&e.chat.putOpAlert(e.T("SAISIR_UN_MESSAGE")),e.butMessage=!0),e.Templates.maximizeChatbar(),e.Templates.showDialog(),e.FNAC&&e.util.addScript("IDZclickcount",e.chaturl+"rpc/click_count.php?sid="+e.website_id)):e.preferences.param_noconnectedwidget!="1"&&(e.butMessage||(e.chat.status!=2&&e.chat.putOpAlert(e.T("SAISIR_UN_MESSAGE")),e.butMessage=!0),e.Templates.maximizeChatbar(),e.Templates.showDialog())},onClickC2cWidget:function(){e.c2cOffline==0&&e.chat.showC2cPopin()},bindWidgetEvents:function(){try{i(".idz_widget")&&i(".idz_widget").length&&(i("#operator_status_textarea")&&i("#operator_status_textarea").length?(i(".idz_widget").click(function(){return e.opOffline==0&&i("#operator_status_textarea").val()!=""&&(i("#idz_msgmsg").val(i("#operator_status_textarea").val()),i("#operator_status_textarea").val(""),i("#idz_postmsg").click()),!1}),i("#operator_status_textarea").focus(function(){i("#operator_status_textarea").val()==e.T("POSER_VOTRE_QUESTION_ICI_UN_CONSEILLER_VOUS_REPONDRA")&&(i("#operator_status_textarea").val(""),i("#operator_status_textarea").removeAttr("style"))})):i(".idz_widget").click(function(){return e.chat.onClickChatWidget(),!1}))}catch(t){}try{i("#operator_status_textarea")&&i("#operator_status_textarea").length&&i("#operator_status_textarea").keyup(function(t){t.which==13&&(i("#idz_msgmsg").val(i("#operator_status_textarea").val()),i("#operator_status_textarea").val(""),i("#idz_postmsg").click())})}catch(t){}try{i(".idz_widget_v2")&&i(".idz_widget_v2").length&&i(".idz_chatwidget").click(function(){return e.chat.onClickChatWidget(),!1})}catch(t){}try{i(".idz_c2cwidget").length&&i(".idz_c2cwidget").click(function(){return e.chat.onClickC2cWidget(),!1})}catch(t){}try{i(".idz_c2vwidget").length&&i(".idz_c2vwidget").click(function(){return e.VisioManager.onClickC2vWidget(),!1})}catch(t){}},showC2cPopin:function(){d&&d.View.showC2cPopin(e.Templates.buildC2cPopin,e.call.countries,e.Templates.countryItemTemplate)},showC2cBusyMessage:function(t){d&&d.View.showC2cBusyMessage(t)},showC2cError:function(t){d&&d.View.showC2cError(t)},closeC2cPopin:function(){d&&d.View.closeC2cPopin()},resetC2cPopin:function(){d&&d.View.resetC2cPopin()},bindChatStatesEvents:function(){i("#idz_msgmsg").keyup(function(t){return t.which==13?(i("#idz_postmsg").click(),void 0):(e.chat.connected&&e.operator.barejid&&(e.paused===1&&(e.connection.resume(),e.paused=0,e.util.warn("PAUSE REMOVED !"),e.pauseTM&&clearTimeout(e.pauseTM)),e.chat.composing===0?(e.connection.send($msg({to:e.operator.barejid,from:e.connection.jid,type:"chat",website:e.website_id}).c("composing").attrs({xmlns:"http://jabber.org/protocol/chatstates"})),e.chat.composing=1,e.callbacks.onVisitorWriting()):i("#idz_msgmsg").val()===""&&(e.connection.send($msg({to:e.operator.barejid,from:e.connection.jid,type:"chat",website:e.website_id}).c("active").attrs({xmlns:"http://jabber.org/protocol/chatstates"})),e.chat.composing=0,e.callbacks.onVisitorStopWriting())),void 0)}),i("#idz_msgmsg").blur(function(){e.chat.connected&&e.operator.barejid&&e.chat.composing===1&&(e.connection.send($msg({to:e.operator.barejid,from:e.connection.jid,type:"chat",website:e.website_id}).c("paused").attrs({xmlns:"http://jabber.org/protocol/chatstates"})),e.chat.composing=0,e.callbacks.onVisitorStopWriting())})},bindSendMessage:function(){i("#idz_postmsg").on("click",function(){if(!i(this).prop("disabled")){try{var t=i("#idz_msgmsg").css("left"),n=i("#idz_msgmsg").css("top"),a=i("#idz_msgmsg").get(0).value;if(a.replace(/<br[ \/]*>/gi,""),e.chat.satisfaction==1){var o=parseInt(i("#idzq1").attr("rel"),10)+1+"|";o=o+(parseInt(i("#idzq2").attr("rel"),10)+1)+"|",o=o+(parseInt(i("#idzq3").attr("rel"),10)+1)+"|",a==e.T("VOTRE_COMMENTAIRE_LIBRE")&&(a=""),o+=a;var r=e.chat.history_id||e.chat.prev_history;return e.util.addScript("satisfaction",e.chaturl+"rpc/satisfaction.php?save="+e.website_id+"&u="+e.vuid+"&hid="+r+"&data="+encodeURIComponent(o)),e.chat.sendAlert("!satisfaction completed",e.T("SATISFACTION_REPONDU")),e.Templates.removeSatisfaction(),i("#idz_msgmsg").val("").change(),e.chat.composing=0,e.callbacks.onSatisfactionAnswered(),!1}if(""==a||a==e.T("POSER_VOTRE_QUESTION_ICI")||a==e.T("POSER_VOTRE_QUESTION_ICI_UN_CONSEILLER_VOUS_REPONDRA")||a==e.customize["chatbar_txt2_"+e.curlang]){var c=function(){var e=Math.floor(Math.random()*7)+parseInt(t),a=Math.floor(Math.random()*5)-2+parseInt(n);i("#idz_msgmsg").css({position:"relative",left:e+"px",top:a+"px"})},l=function(){var t=setInterval(c,30),e=function(){clearInterval(t),i("#idz_msgmsg").css({position:"static"})};setTimeout(e,1e3)};return l(),setTimeout("$('#idz_msgmsg').css({'left': '"+parseInt(t)+"px'});",1030),setTimeout("$('#idz_msgmsg').css({'top': '"+parseInt(n)+"px'});",1030),!1}if(i("#idz_msgmsg").val("").change(),e.chat.composing=0,e.opDisconnected==1&&setTimeout(function(){e.chat.put_dialog(e.Templates.opAlert.replace(/\{MSG\}/g,e.T("OPERATEUR_DECONNECTE")).replace(/\{TIME\}/g,e.chat.getMsgTime()))},300),e.operator.barejid&&(e.on_call!=1&&e.opOffline===1||e.opWatching===1||e.blocked)){var d=e.chat.getVmsg(a);return e.Templates.showDialog(),e.chat.put_dialog(d),i(".idz_loading").hide(),setTimeout(function(){e.chat.putOpMsg(null,e.autoAnswer,0,1),e.setStatus()},300),!1}if(e.blocked||!a)return!1;var u=f.connect();if(e.flags.waitinglist==1)return u.then(function(){e.Templates.showDialog(),e.chat.putVmsg(a),m.update()});e.operator.barejid||e.chat.satisfaction==1?u.done(function(){e.chat.onSendMessage(a)}):(i(".idz_loading").show(),u.then(function(){return e.createConversation("chat",a)}).then(function(){return e.util.retry(4,e.chat.onSendFirstMessage,e.chat,[a])}).done(function(){s();var t=+new Date;e.chat.putVmsg(a,t)}).fail(function(){e.flags.waitinglist==1?e.chat.putVmsg(a):e.chat.put_dialog(e.chat.getVmsg(e.util.nl2br(e.util.htmlspecialchars(a)))),i(".idz_loading").hide(),e.chat.showUnavailableMessage()}))}catch(p){e.errorMailer("bindSendMessage: ",p,"")}return!1}})},showUnavailableMessage:function(){e.opBusy||(e.chat.putOpMsg(null,e.autoAnswer,0,1),i(".idz_loading").hide(),e.chat.status=1,e.operator={})},onSendFirstMessage:function(t){var n=i.Deferred();e.chat.dialogCount(),e.Templates.showDialog();var o=a("!visitor_engage "+t);return e.connection.receipts.sendMessage(o,n.resolve,n.reject),setTimeout(n.reject,4e3),e.proactif_now=0,n.promise()},onSendMessage:function(t){if(e.preferences.bankcard_number_hidden==="1"&&(t=n(t)),t){e.Templates.showDialog();var i=e.chat.sendMessage(t);e.chat.putVmsg(t,i),e.proactif_now=0}},dialogCount:function(){e.flags.proactif_activatedId&&!e.flags.proactif_dialogIsCounted&&(e.flags.proactif_dialogIsCounted=!0,setTimeout(function(){e.util.addScript("proactifDialogcount",e.chaturl+"rpc/proactif_dialogCount.php?inc="+e.flags.proactif_activatedId+"&sid="+e.website_id+"&u="+e.vuid+"&hid="+e.chat.history_id)},1650))},doSubscribe:function(){if(e.realtime&&(!e.vRoster.contacts[e.watcher_jid]||e.vRoster.contacts[e.watcher_jid]&&e.vRoster.contacts[e.watcher_jid].subscription!="both"&&e.vRoster.contacts[e.watcher_jid].subscription!="undefined"&&e.vRoster.contacts[e.watcher_jid].ask!="subscribe")&&e.connection.send($pres({to:e.watcher_jid,type:"subscribe"})),e.opList!=null)for(var t=e.opList.length;t--;)e.opList[t]&&e.opList[t]!="undefined"&&e.opList[t]!=""&&(!e.vRoster.contacts[e.opList[t]]||e.vRoster.contacts[e.opList[t]]&&e.vRoster.contacts[e.opList[t]].subscription!="both"&&e.vRoster.contacts[e.opList[t]].subscription!="undefined"&&e.vRoster.contacts[e.opList[t]].ask!="subscribe")&&e.connection.send($pres({to:e.opList[t],type:"subscribe"}))},updateHistory:function(t,i,n){i&&(n=n||0,e.opOffline!=1&&e.util.addScript("IDZhistory",e.chaturl+"rpc/chat_history.php?sid="+e.website_id+"&update="+e.chat.history_id+"&u="+e.vuid+"&oid="+e.operator.id+"&data="+encodeURIComponent(i)+"&type="+t+"&id="+n+"&nick="+Strophe.getNodeFromJid(e.connection.jid)))},reloadHistory:function(){e.chat.buildChat(),setTimeout(function(){var t=e.chat.history_id||e.chat.prev_history;e.util.addScript("IDZRhistory",e.chaturl+"rpc/chat_history.php?reload="+t+"&u="+e.vuid),i("#idz_button_print").attr("href",e.chaturl+"gethistory.php?id="+t+"&u="+e.vuid),i("#idz_button_mail").attr("href",e.chaturl+"gethistory_mail.php?id="+t+"&u="+e.vuid)},400)},convertLinks:function(t,e){var i="";return e&&(i="target=_blank "),t.replace(/((ftp|https?):\/\/([-\w\.]+)+(:\d+)?(\/([\w/_\.\-,\#]*(\?\S+)?)?)?)/gm,"<a "+i+'rel="nofollow" href="$1">$1</a>')},getVmsg:function(t,i){var n=void 0!=i?i:e.chat.getMsgTime();return t=e.chat.convertLinks(t,!0),e.Templates.vMsg.replace(/\{MSG\}/g,t).replace(/\{TIME\}/g,n)},putVmsg:function(t,n){n=n||0,t=e.util.nl2br(e.util.htmlspecialchars(t)),e.chat.put_dialog(e.chat.getVmsg(t)),e.chat.updateHistory(e.chat.VMSG,t,n),i(".idz_loading").hide(),e.Templates.showDialog(),e.Templates.maximizeChatbar(),e.callbacks.onVisitorStopWriting(),e.callbacks.onMessageSent({time:e.chat.getMsgTime(),msg:t})},getOpAlert:function(t,i){var n=void 0!=i?i:e.chat.getMsgTime();return t=e.util.nl2br(e.util.htmlspecialchars(t)),t=t.replace(/&lt;br \/&gt;/gi,"<br/>").replace(/&lt;br\/&gt;/gi,"<br/>").replace(/&lt;br&gt;/gi,"<br/>"),e.Templates.opAlert.replace(/\{MSG\}/g,t).replace(/\{TIME\}/g,n)},putOpAlert:function(t,i){e.Templates.showDialog(),e.Templates.maximizeChatbar(),e.chat.put_dialog(e.chat.getOpAlert(t)),i&&1===i&&e.chat.updateHistory(e.chat.OPALERT,t),e.callbacks.onAlertReceived({time:e.chat.getMsgTime(),msg:t})},getOpMsg:function(t,i){var n=void 0!=i?i:e.chat.getMsgTime(),a="";a=e.operator.avatar==""||e.operator.avatar==void 0?e.static_url+"images/livechat/blank.gif":"avatars/client_"+e.client_id+"/"+e.operator.avatar;var o=e.operator.pseudo;void 0==o?o="":o+=" : ",t.indexOf(e.autoAnswer)===-1&&(t=t.indexOf(e.website_url)===-1?e.chat.convertLinks(t,!0):e.chat.convertLinks(t,!1)),t=t.replace(/&lt;br \/&gt;/gi,"<br/>").replace(/&lt;br\/&gt;/gi,"<br/>").replace(/&lt;br&gt;/gi,"<br/>");var r=e.Templates.opMsg.replace(/\{PSEUDO\}/g,o).replace(/\{AVATAR\}/g,a).replace(/\{MSG\}/g,t).replace(/\{TIME\}/g,n);if(e.operator.direct_phone&&e.operator.direct_phone!=""&&e.phoneDisplayed===0){e.phoneDisplayed=1;var s=e.Templates.opMsgFooter.replace(/\{PHONE_PRICE\}/g,e.operator.phone_facturation).replace(/\{PHONE_NUMBER\}/g,e.operator.direct_phone);r=r.replace(/\{FOOTER\}/g,s)}else r=r.replace(/\{FOOTER\}/g,"");return r},putOpMsg:function(t,n,a,o){n=o?e.util.nl2br(n):e.util.nl2br(e.util.htmlspecialchars(n));try{if(null!=t){e.opMsgList=e.opMsgList||[];var r=!1;if(i.each(e.opMsgList,function(e,i){i==t&&(r=!0)}),r)return;e.opMsgList.push(t),e.opMsgList.length>5&&e.opMsgList.shift()}}catch(s){}e.Templates.showDialog(),e.Templates.maximizeChatbar();var c=e.chat.getOpMsg(n);e.chat.put_dialog(c),null!=t&&i("#idz_dialogbox").find(".idz_msgtext:last").attr({id:t}),1===a?e.chat.updateHistory(e.chat.OPMSG,n,t):2===a&&setTimeout(function(){e.chat.updateHistory(e.chat.OPMSG,n,t)},2200),e.callbacks.onMessageReceived({time:e.chat.getMsgTime(),msg:n})},onDiscoInfo:function(t){var n=i(t).attr("from"),a=$iq({type:"result",from:e.connection.jid,to:n}).c("query",{xmlns:Strophe.NS.DISCO_INFO}).c("identity",{category:"client",type:"pc"}).up().c("feature",{"var":Strophe.NS.DISCO_INFO}).up().c("feature",{"var":Strophe.NS.DISCO_ITEMS}).up().c("feature",{"var":"http://jabber.org/protocol/chatstates"});e.connection.sendIQ(a)},onPresence:function(t){try{e.util.info("onPresence CALLED");var n=i(t).attr("from"),a=Strophe.getBareJidFromJid(n),o=Strophe.getResourceFromJid(n),r=i(t).attr("type")||"available",s=i(t).find("show").text()||"available",c=i(t).find("status").text();if("error"===r)return!0;if("subscribe"===r)return e.connection.send($pres({to:a,type:"subscribed"})),!0;if("subscribed"===r)return e.connection.send($pres({to:a,type:"subscribe"})),!0;if("unsubscribe"===r)return e.vRoster.unsubscribe(a),!0;if(g(a,Strophe.getBareJidFromJid(e.connection.jid))&&o!=Strophe.getResourceFromJid(e.connection.jid)){var l=i(t).attr("history")||0;return l>0&&e.chat.history_id==0&&(e.chat.history_id=l),!0}if(e.vRoster.contacts[a]&&"error"!==r||(e.util.info("not in roster"),nc=new e.vRoster.Contact,nc.name=a,nc.subscription="both",nc.ask="",e.vRoster.contacts[a]=nc),"unavailable"===r)delete e.vRoster.contacts[a].resources[o],g(a,e.watcher_jid)?e.vRoster.isOnline(a)!==1&&e.opOffline==1&&e.findOPDelayed():g(a,e.operator.messenger_email)?e.vRoster.isOnline(a)!==1&&(e.operator.messenger_isonline="0",e.operator.is_online!="1"&&(e.chat.status==2?(e.chat.put_dialog(e.Templates.opAlert.replace(/\{MSG\}/g,e.T("OPERATEUR_DECONNECTION")).replace(/\{TIME\}/g,e.chat.getMsgTime())),e.opDisconnected=1,e.JSONStore.saveData({opdisconnected:1}),i(".idz_writting").html(" ")):e.findOPDelayed())):g(a,e.operator.nick+"@"+e.bosh_host)&&(e.vRoster.isOnPupitre(a)===!1&&(e.operator.on_pupitre="0"),e.vRoster.isOnline(a)!==1&&(e.operator.is_online="0",e.operator.messenger_isonline=="1"?(e.operator.barejid=e.operator.messenger_email,e.util.info("SWITCHING TO GTALK/JABBER ")):(e.util.info("NO OTHER AVAILABLE RESOURCE FOR OUR OPERATOR "),e.chat.status==2?(e.opDecTM=setTimeout(function(){e.chat.put_dialog(e.Templates.opAlert.replace(/\{MSG\}/g,e.T("OPERATEUR_DECONNECTION")).replace(/\{TIME\}/g,e.chat.getMsgTime())),e.opDisconnected=1,e.JSONStore.saveData({opdisconnected:1}),e.findOPDelayed()},1e4),i(".idz_writting").html(" ")):e.findOPDelayed()),u&&u.disable())),e.findOPDelayed();else{e.util.warn("updating resource "+o+" for "+a),e.vRoster.contacts[a].resources[o]={show:s,status:c};var d=!1;"available"===s?(e.util.info("available presence"),g(a,e.operator.messenger_email)?(e.util.info("operator on gtalk"),e.operator.messenger_isonline="1",e.operator.is_online!="1"&&(e.operator.barejid=e.operator.messenger_email),d=!0):g(a,e.operator.nick+"@"+e.bosh_host)&&(e.util.info("operator available on pupitre/pidgin"),"operators"==o?e.util.info("OPERATOR CONNECTED TO PUPITRE"):e.util.info("OPERATOR CONNECTED TO PIDGIN "),e.operator.on_pupitre=e.vRoster.isOnPupitre(a)===!0?"1":"0",e.operator.is_online="1",e.operator.barejid=a,d=!0)):("dnd"===s||"away"===s)&&(e.vRoster.isOnline(a),a==e.operator.messenger_email?(e.vRoster.isOnline(a)!==1&&(e.operator.messenger_isonline="3",e.operator.is_online!="1"&&e.chat.status!=2&&e.findOPDelayed()),d=!0):g(a,e.operator.nick+"@"+e.bosh_host)?(d=!0,e.vRoster.isOnPupitre(a)===!1&&(e.operator.on_pupitre="0"),e.vRoster.isOnline(a)!==1&&(e.operator.is_online="3","operators"==o&&e.util.info("OPERATOR AWAY FROM PUPITRE "),"dnd"===s&&e.operator.messenger_isonline=="1"?(u&&u.disable(),e.operator.barejid=e.operator.messenger_email,e.util.info("SWITCHING TO GTALK/JABBER ")):e.chat.status!=2&&e.findOPDelayed())):e.c2coperator&&(g(a,e.c2coperator.nick+"@"+e.bosh_host)||g(a,e.c2coperator.messenger_email))&&e.vRoster.isOnline(a)!==1&&e.findOPDelayed(),e.findOPDelayed()),d&&e.opDecTM&&(clearTimeout(e.opDecTM),delete e.opDecTM),d&&e.opDisconnected&&(e.opDisconnected=0,e.JSONStore.saveData({opdisconnected:0}),e.chat.put_dialog(e.Templates.opAlert.replace(/\{MSG\}/g,e.T("OPERATEUR_RECONNECTION")).replace(/\{TIME\}/g,e.chat.getMsgTime())))}}catch(p){e.errorMailer("onPresence: ",p,Strophe.serialize(t))}return!0},onMessage:function(t){if(!iAdvize.hideUI){try{var n=new c(t),a="",o="",r="",l="",p=t.getAttribute("id")||null,h=t.getAttribute("from");h=h.toLowerCase();var f=Strophe.getBareJidFromJid(h),_=t.getAttribute("type"),v=t.getElementsByTagName("body"),b=t.getElementsByTagName("x");if(b.length>0){var T=b[0],S=T.getAttribute("xmlns");if("jabber:x:delay"==S)return e.errorMailer("onMessage: ","offline message discarded",Strophe.serialize(t)),!0}if("error"==_&&e.iframeID==""){var O=i(t).find("error"),w=O.attr("code");if("503"==w){if(!v.length)return!0;l=v[0];try{l=Strophe.getText(l)}catch(y){l=""}l.indexOf("!")==0&&(a=l.split(" ")[0].substr(1),"magic_event"==a&&u&&u.disable())}return!0}if(g(e.operator.barejid,f)&&e.iframeID==""&&(i(t).find("composing").length>0&&(i(".idz_writting").html(e.T("OPERATEUR_COMPOSING")),e.callbacks.onOperatorWriting()),(i(t).find("paused").length>0||i(t).find("active").length>0)&&(i(".idz_writting").html(" "),e.callbacks.onOperatorStopWriting())),n.isChat()){l=n.body,e.util.debug("MESSAGE: from "+n.from+": "+n.body);var C=0;l.indexOf("!")==0&&(a=l.split(" ")[0].substr(1),o=l.split(" ")[1]||"",r=l.substr(a.length+o.length+2)||"");var E=function(){var t=e.operator.barejid;return null==t||g(t,f)};if(e.iframeID==""){if("vprofile"==a&&(C++,e.chat.sendProfile(h,e.vStats.getProfile())),"remindqueued"==a&&(C++,m.remind({position:o})),"unqueued"==a&&(C++,m.unqueue(f)),"infos"==a&&C++,"visio"==a&&(C++,"refuse"==o?(e.VisioManager.onVisioRefused(),e.chat.putOpAlert(e.T("VISIOCONF_REFUSE"))):"accept"==o?(e.chat.putOpAlert(e.T("VISIOCONF_ACCEPT")),e.VisioManager.onVisioStart()):"pause"==o?(Visio.pauseVideo(),Visio.muteSound(),Visio.muteMicrophone(),e.VisioManager.disableButtons(),i("#visioconf_paused_player").show()):"resume"==o&&(Visio.resumeVideo(),Visio.unmuteSound(),Visio.unmuteMicrophone(),e.VisioManager.bindButtons(),i("#visioconf_paused_player").hide())),"windowsize"==a&&(C++,e.chat.sendCommand(h,"!windowsize "+i(window).width()+"|"+i(window).height())),"getcook"==a&&(C++,e.chat.sendCookie(f),e.util.warn("sending cookie: "+e.chat.cCook)),"customdata"==a&&(C++,e.chat.sendCustomData(f)),"transfer"==a&&C++,"ping"==a&&C++,E()&&"push"==a){var I="";C++,o=e.util.nl2br(e.util.htmlspecialchars(o)),r=e.util.nl2br(e.util.htmlspecialchars(r)),e.chat.updateHistory(e.chat.OPALERT,"PUSH "+o+" "+r),e.callbacks.onLinkReceived({name:r,url:o,push:!0}),o.indexOf(e.website_url)===-1?I=" target='_blank'":setTimeout(function(){window.parent.location.href=o},800);var R=e.Templates.putLinkItem(o,r,I);e.noOfferPanelTemplate?e.chat.put_dialog(R):e.chat.putOpAlert(e.T("OPERATEUR_PUSHLINK"))}if("blockme"==a&&(C++,e.chat.status==2?(e.chat.put_dialog(e.Templates.opAlert.replace(/\{MSG\}/g,e.T("OPERATEUR_DECONNECTION")).replace(/\{TIME\}/g,e.chat.getMsgTime())),e.opDisconnected=1,e.JSONStore.saveData({opdisconnected:1}),e.blocked=!0):e.Templates.hideUI()),E()&&"links"==a){var I="";C++,o=e.util.nl2br(e.util.htmlspecialchars(decodeURIComponent(o))),r=e.util.nl2br(e.util.htmlspecialchars(r)),e.chat.updateHistory(e.chat.OPALERT,"LINKS "+o+" "+r),o.indexOf(e.website_url)===-1&&(I=" target='_blank'");var R=e.Templates.putLinkItem(o,r,I);e.noOfferPanelTemplate?e.chat.put_dialog(R):e.chat.putOpAlert(e.T("OPERATEUR_SENDLINK")),e.callbacks.onLinkReceived({name:r,url:o,push:!1})}if(E()&&"offers"==a){var I="";C++,e.chat.updateHistory(e.chat.OPALERT,"OFFERS "+e.util.htmlspecialchars(o)+" "+e.util.htmlspecialchars(r)),o.indexOf(e.website_url)===-1&&(I=" target='_blank'");var z=e.Templates.putOfferItem(o,r,I);e.noOfferPanelTemplate?e.chat.put_dialog(z):e.chat.putOpAlert(e.T("OPERATEUR_SENDOFFER")),e.callbacks.onOfferReceived({name:r.split("|")[0],url:o})}if(E()&&"pushoffer"==a){var I="";C++,e.chat.updateHistory(e.chat.OPALERT,"OFFERS "+o+" "+r),o.indexOf(e.website_url)===-1?I=" target='_blank'":setTimeout(function(){window.parent.location.href=o},800);var z=e.Templates.putOfferItem(o,r,I);e.noOfferPanelTemplate?e.chat.put_dialog(z):e.chat.putOpAlert(e.T("OPERATEUR_PUSHOFFER"))}if(E()&&"closedialog"==a){if(C++,e.chat.status==2){i("#idz_msgmsg, #idz_postmsg").prop("disabled",!0),e.flags.streamId&&(delete e.flags.streamId,e.VisioManager.hideVisioBox()),e.chat.putOpAlert(e.T("FIN_DISCUSSION")),e.callbacks.onChatEnded({endedBy:"operator"}),delete e.operator.barejid;var A=4e3;iAdvize.REDOUTE&&(A=8e3),e.client_id==5621&&(A=8e3),e.client_id==5649&&(A=8e3),e.client_id==169&&(A=1e4),setTimeout(function(){i("#idz_msgmsg, #idz_postmsg").prop("disabled",!1),e.operator.id!=-1&&e.virtualOP!=1&&e.preferences.param_satisfaction=="1"&&e.chat.satisfaction==0?(e.chat.satisfaction=1,e.Templates.displaySatisfaction()):e.Templates.hideDialog()},A)}e.flags.popup_mode&&delete e.flags.popup_mode,e.chat.EndOfChat()}"nomoreslot"==a&&(C++,e.chat.putOpMsg(null,e.T("BONJOUR_NOTRE_SERVICE_CLIENT_EST_ACTUELLEMENT_FERME"),0,1),e.util.addScript("IDZhistory",e.chaturl+"rpc/chat_history.php?sid="+e.website_id+"&missed="+e.chat.history_id+"&oid="+e.operator.id+"&u="+e.vuid),e.opOffline=1,e.chat.status=1,e.operator={}),"chatstarted"==a&&C++,"showinvit"==a&&(C++,e.chat.loadInvitation(o)),"c2c"==a&&(C++,clearTimeout(e.c2cTimeout),"opanswered"==o?(e.callbacks.onCallStarted(),e.preferences.c2c_callvisitorfirst==1?i(".c2cpopin_label").html('<div class="c2cpopin_label_phone"></div>'+e.T("NOUS_VOUS_RAPPELLONS_GRATUITEMENT_TXT2")):i(".c2cpopin_label").html('<div class="c2cpopin_label_phone"></div>'+e.T("NOUS_VOUS_RAPPELLONS_GRATUITEMENT_TXT3")),e.preferences.call_offline_enabled!=1&&(e.on_call=1),e.opOffline=0,e.chat.status=2,e.chat.history_id=r,e.chat.dialogCount(),e.setStatus(),e.operator=e.c2coperator,g(e.c2coperator.barejid,f)||(e.c2coperator.barejid=f,e.operator.barejid=f,e.util.addScript("getop",e.chaturl+"rpc/getop.php?sid="+e.website_id+"&u="+e.vuid+"&getop="+f)),e.flags.proactif_alert&&e.flags.proactif_alert!=""&&e.chat.sendAlert(e.flags.proactif_alert,e.flags.message,!0),setTimeout(function(){e.operator.barejid.indexOf("callagent")===-1&&e.connection.send($msg({to:e.operator.barejid+"/operators",from:e.connection.jid,type:"chat",website:e.website_id}).c("body").t("!c2c start "+e.activeCall).up())},5e3),e.c2cTimeout=setTimeout(function(){i("#c2cpopin_step2").hide(),i("#c2cpopin_step1").show(),e.chat.closeC2cPopin()},1e4)):"start"==o?(i(".c2cpopin_label").html('<div class="c2cpopin_label_phone"></div>'+e.T("NOUS_VOUS_RAPPELLONS_GRATUITEMENT_TXT3")),e.chat.dialogCount(),e.preferences.call_offline_enabled!=1&&(e.on_call=1),e.opOffline=0,e.chat.status=2,e.chat.history_id=r,setTimeout(function(){i("#c2cpopin_step2").hide(),i("#c2cpopin_step1").show(),e.chat.closeC2cPopin()},7e3)):"stop"==o?(e.callbacks.onCallEnded(),i(".c2cpopin_label").html('<div class="c2cpopin_label_phone"></div>'+e.T("NOUS_VOUS_RAPPELLONS_GRATUITEMENT_TXT1")),e.on_call=0,e.chat.status=3,e.chatbox_state=4,e.activeCall=null,setTimeout(function(){i("#c2cpopin_step2").hide(),i("#c2cpopin_step1").show(),e.chat.closeC2cPopin()},7e3),e.preferences.param_satisfaction=="1"&&e.chat.satisfaction==0&&(e.chat.buildChat(),e.chat.satisfaction=1,e.Templates.displaySatisfaction())):"redial"==o?d&&d.Service.onMakeCall():"error"==o&&(e.chat.showC2cError(e.T("UNE_ERREUR_EST_SURVENUE")+" "+r),e.on_call=0,e.chat.status=1),e.JSONStore.saveData({on_call:e.on_call,chat_status:e.chat.status,history_id:e.chat.history_id,chatbox_state:e.chatbox_state})),"init_cobro"===a&&(C++,u&&u.init(e.preferences.cobrowsing_version))}if("magic_event"==a){if(C++,e.isOnFB)return!0;if(!u)return!0;"sender"==o||"disabled"==o||"receiver"==o?("sender"==o&&u.isReceiver()&&(i("#op_cursor").animate({top:"-3000px",left:"-3000px"},150),e.iframeID==""&&(e.Templates.showDialog(),e.chat.cobrowsing=0,e.JSONStore.saveData({chat_cobrowsing:e.chat.cobrowsing}),e.chat.putOpAlert(e.T("COBROWSING_STOP")),e.chat.updateHistory(e.chat.OPALERT,"COBROWSING_STOP"),e.callbacks.onCobrowsingStopped())),"sender"!=o||e.operator.barejid||(e.monitor_jid=f),"disabled"==o&&e.chat.status!=2&&delete e.monitor_jid,"sender"==o&&e.iframeID!=""&&setTimeout(function(){e.chat.sendMessage("!magic_event iframe_change "+e.iframeID+" "+document.location.href)},600),u.state(o)):"receiver_request"==o?e.iframeID==""&&(e.chat.buildChat(),e.Templates.showDialog(),e.Templates.maximizeChatbar(),e.chat.put_dialog(e.Templates.askCobrowsing.replace(/\{TIME\}/g,e.chat.getMsgTime())),e.chat.updateHistory(e.chat.OPALERT,"COBROWSING_ASK"),i("#idz_cobrowsing_accept").bind("click",function(t){return e.chat.addCobrowsingImg(),i(t.target).closest(".idz_msg_alert_op").remove(),e.chat.put_dialog(e.Templates.opAlert.replace(/\{MSG\}/g,e.T("COBROWSING_ACCEPT")).replace(/\{TIME\}/g,e.chat.getMsgTime())),u.state("receiver"),e.chat.updateHistory(e.chat.OPALERT,"COBROWSING_ACCEPT"),e.chat.sendMessage("!magic_event receiver_accept"),e.customize.layout=="numericable"||e.flags.streamId||(e.Templates.hideDialog(),e.chatbar_state=1,e.JSONStore.saveData({chatbar_state:e.chatbar_state})),e.chat.cobrowsing=1,e.JSONStore.saveData({chat_cobrowsing:e.chat.cobrowsing}),e.callbacks.onCobrowsingAccepted(),!1}),i("#idz_cobrowsing_refuse").bind("click",function(t){return i(t.target).closest(".idz_msg_alert_op").remove(),e.chat.put_dialog(e.Templates.opAlert.replace(/\{MSG\}/g,e.T("COBROWSING_REFUSE")).replace(/\{TIME\}/g,e.chat.getMsgTime())),e.chat.updateHistory(e.chat.OPALERT,"COBROWSING_REFUSE"),e.chat.sendMessage("!magic_event receiver_refuse"),e.callbacks.onCobrowsingRefused(),!1}),e.callbacks.onCobrowsingRequested()):u.receiverDispatcher(l.substr(a.length+2))}if("change_page"==a){C++;var x=decodeURIComponent(o);document.location.href=x}if("operator_engage"==a&&(C++,e.chat.status!=2&&(e.opStarted=!0,e.operator.barejid=f,e.operator.id=o,i.when(e.createConversation("chat",r)).done(function(){e.chat.putOpMsg(p,r,1),e.callbacks.onChatStarted({id:e.chat.history_id,startedBy:"operator"})}))),"ackEngage"==a&&(C++,e.chat.status!=2&&s(),e.chat.status=2,e.operator.barejid=f),0==C&&e.iframeID==""){if(e.opBusy=0,e.opDisconnected=0,!E())return e.chat.sendCommand(f,"!chatting"),i(".idz_writting").html(" "),!0;if(e.operator.barejid||(e.operator.barejid=f),e.chat.putOpMsg(p,l,1),setTimeout(function(){i(".idz_writting").html(" ")},350),e.chat.status=2,e.chatbox_state=2,e.virtualOP=0,e.blink_title(),e.customize.sound_alert=="1"){var D=m.justUnqueued()?"outofqueue":"message";e.playSound(D)}}}}catch(y){e.PROD?e.errorMailer("onMessage: ",y,Strophe.serialize(t)):console&&console.debug&&console.debug("[Erreur]",y.message,t)}return!0}},EndOfChat:function(){e.chat.status=3,e.chat.prev_history=e.chat.history_id,e.chat.history_id=0,e.chatbar_state=2,e.chatbox_state=e.preferences.param_opconnected=="1"?4:1,e.JSONStore.save({chat_status:e.chat.status,chatbox_state:e.chatbox_state,chatbar_state:e.chatbar_state,opdisconnected:0}),e.prevOp=e.operator,e.operator={},e.chat.sendPresence("available")},EndOfWaiting:function(){e.chat.status=3,e.chat.prev_history=e.chat.history_id,e.chat.history_id=0,e.chatbox_state=3,e.prevOp=-1,e.operator={},e.chat.sendPresence("available"),e.chat.putOpAlert(e.T("WAITING_CONNECTION_ERREUR"))
},sendMessage:function(t){try{if(!t||""==t)return;if(e.opOffline==1&&e.on_call==0)return;if(e.blocked)return;if(e.paused==1)return setTimeout(function(){e.chat.sendMessage(t)},250),void 0;e.chat.status==3&&e.chat.history_id>0&&e.chat.sendPresence("dnd"),e.chat.status=2,e.chatbox_state=2,e.chatbar_state=0;var i=+new Date;if(e.operator.id==-1)return i;var n=e.operator.messenger_isonline=="1"?e.operator.barejid:void 0,o=a(t,i,n);e.operator.messenger_isonline!="1"?e.connection.receipts.sendMessage(o):e.connection.send(o)}catch(r){}return i},sendAlert:function(t,i,n){try{if(e.paused==1)return;if(e.opOffline==1)return;if(e.virtualOP==1)return;(e.chat.status==2||n)&&(e.operator.messenger_isonline=="1"&&e.operator.is_online!="1"?""!=i&&e.connection.send($msg({to:e.operator.barejid,from:e.connection.jid,type:"chat",website:e.website_id}).c("body").t(i)):e.operator.on_pupitre=="1"?e.connection.send($msg({to:e.operator.barejid,from:e.connection.jid,type:"chat",website:e.website_id}).c("body").t(t)):""!=i&&e.connection.send($msg({to:e.operator.barejid,from:e.connection.jid,type:"chat",website:e.website_id}).c("body").t(i))),"!chatclose"==t&&e.chat.status!=1&&(e.chat.status=3,e.flags.waitinglist=0,e.chat.sendPresence("available"),e.opDisconnected=0,e.JSONStore.saveData({chat_status:e.chat.status,waitinglist:0,opdisconnected:0}),e.chat.updateHistory(e.chat.OPALERT,"VISITOR_CHAT_CLOSE"))}catch(a){e.errorMailer("sendAlert: ",a,t+"\n\n"+i)}},sendPresence:function(t){try{"unavailable"==t&&e.connection.send($pres({type:"unavailable"})),"available"==t&&e.connection.send($pres({site:e.website_id,history:e.chat.history_id,opid:e.operator.id,frameid:e.iframeID}).c("status").t(location.href)),("away"==t||"dnd"==t)&&e.connection.send($pres({site:e.website_id,history:e.chat.history_id,opid:e.operator.id,frameid:e.iframeID}).c("show").t(t).up().c("status").t(location.href))}catch(i){e.errorMailer("SendPresence: ",i,msg)}},sendDirectPresence:function(t,i){"unavailable"==t&&e.connection.send($pres({type:"unavailable",to:i})),"available"==t&&e.connection.send($pres({site:e.website_id,history:e.chat.history_id,to:i}).c("status").t(location.href)),("away"==t||"dnd"==t)&&e.connection.send($pres({site:e.website_id,history:e.chat.history_id,to:i}).c("show").t(t).up().c("status").t(location.href))},sendCommand:function(t,i){try{if(e.paused==1)return;if(e.opOffline==1)return;var n=Strophe.getBareJidFromJid(t);(e.vRoster.isOnPupitre(n)||"!chatting"==i)&&e.connection.send($msg({to:n+"/operators",from:e.connection.jid,type:"command",website:e.website_id}).c("body").t(i))}catch(a){e.errorMailer("SendCommand: ",a,i)}},sendProfile:function(t,i){try{if(e.paused==1)return;if(e.opOffline&&e.c2cOffline&&e.c2vOffline&&e.opWatching!=1)return;e.connection.send($msg({to:t,from:e.connection.jid,type:"command",website:e.website_id}).c("body").t("!vprofile "+i))}catch(n){e.errorMailer("sendProfile: ",n,msg)}},sendCookie:e.util.runOnce(1500,function(t){var i="!getcook "+e.chat.cCook;e.connection.send($msg({to:t[0]+"/operators",from:e.connection.jid,type:"command",website:e.website_id}).c("body").t(i))}),sendCustomData:function(t){if(e.vStats.customData()!="{}"){var i="!customdata "+e.vStats.customData();e.connection.send($msg({to:t+"/operators",from:e.connection.jid,type:"command",website:e.website_id}).c("body").t(i))}},sendBotMessage:function(t){e.paused!=1&&e.opOffline!=1&&e.connection.send($msg({to:"idzbot@"+e.bosh_host,from:e.connection.jid,type:"chat",website:e.website_id}).c("body").t(t))},getMsgTime:function(){var t=new Date,e=t.getHours(),i=t.getMinutes();10>i&&(i="0"+i);var n=e+":"+i;return n},scroll_dialog:function(){if(e.noDefaultScrollTemplate)return e.Templates.myScroll?setTimeout(function(){e.Templates.myScroll.refresh(),e.Templates.myScroll.scrollToElement("#idz_dialogbox_bottom",100)},0):i("#idz_dialogbox").animate({scrollTop:i("#idz_dialogbox")[0].scrollHeight}),void 0;if(e.BrowserDetect.browser!="Explorer"&&e.BrowserDetect.version!=6&&e.customize.layout!="fb"){var t=i("#idz_dialogbox");t.data("jsp")?t.data("jsp").reinitialise():t.jScrollPane({showArrows:!0}),t.data("jsp").scrollToPercentY(100)}else i("#idz_dialogbox").animate({scrollTop:i("#idz_dialogbox")[0].scrollHeight})},scroll_link:function(){if(e.noDefaultScrollTemplate)return e.Templates.myScroll||i("#idz_chatbox_left_content").animate({scrollTop:i("#idz_chatbox_left_content")[0].scrollHeight}),void 0;if(e.BrowserDetect.browser!="Explorer"&&e.BrowserDetect.version!=6&&e.customize.layout!="fb"){var t=i("#idz_chatbox_left_content");t.data("jsp")?t.data("jsp").reinitialise():t.jScrollPane({showArrows:!0}),t.data("jsp").scrollToPercentY(100)}else i("#idz_chatbox_left_content").animate({scrollTop:i("#idz_chatbox_left_content")[0].scrollHeight})},put_dialog:function(t){var n=i(t).attr("class"),a=i("#idz_dialogbox_bottom").prev("div").attr("class"),o=i("#idz_dialogbox_bottom").prev("div").find(".idz_msgtime:last").html();if("idz_msg_operator"!=n&&"idz_msg_visitor"!=n||n!=a)i("#idz_dialogbox #idz_dialogbox_bottom").before(decodeURIComponent(t));else{var r=i(t).find(".idz_msgtext"),s=i(t).find(".idz_msgtime");o==s.html()&&(s=""),i("#idz_dialogbox_bottom").prev("div").find(".idz_msgtext:last").after(r).after(s),"idz_msg_operator"==n&&i(".idz_opename:last").remove()}e.chat.scroll_dialog()},getLocalTime:function(t){var e=((new Date).getTimezoneOffset()+120)*6e4,i=new Date;i.setHours(t.split(":")[0]),i.setMinutes(t.split(":")[1]);var n=new Date(i.getTime()-e),a=n.getHours(),o=n.getMinutes();10>o&&(o="0"+o);var r=a+":"+o;return r},prepare_history:function(n){try{n=JSON.parse("["+n+"]")}catch(a){e.errorMailer("prepare_history JSON.parse: ",a,n),n=!1}if(n){var o=i("<div id='hist_container'></div>"),r="",s="",c="",l="",d="";e.opMsgList=[];var u="",p="",h="",f=0,g=!1;for(var _ in n){try{if(n[_][3]){if(g=!1,i.each(e.opMsgList,function(t,e){e==n[_][3]&&(g=!0)}),g)continue;e.opMsgList.push(n[_][3]),e.opMsgList.length>5&&e.opMsgList.shift()}}catch(a){}if(f!=n[_][0]||n[_][0]!=1&&n[_][0]!=2?(n[_][0]==1&&o.append(e.chat.getOpMsg(n[_][2],n[_][1])),n[_][0]==2&&o.append(e.chat.getVmsg(n[_][2],n[_][1]))):(u=h==n[_][1]?"":"<div class='idz_msgtime'>"+n[_][1]+"</div>",p=n[_][2],p=p.replace(/&lt;br \/&gt;/gi,"<br/>").replace(/&lt;br\/&gt;/gi,"<br/>").replace(/&lt;br&gt;/gi,"<br/>"),o.find(".idz_msgtext:last").after("<div class='idz_msgtext'>"+p+"</div>").after(u)),f=n[_][0],h=n[_][1],n[_][0]==3){if(r=n[_][2],s=r.split(" ")[0],"LINKS"===s||"PUSH"===s){c=r.split(" ")[1],l=r.substr(c.length+s.length+2),c.indexOf(e.website_url,0)==-1&&(d=" target='_blank'");var m=e.Templates.putLinkItem(c,l,d);e.noOfferPanelTemplate?o.append(m):("LINKS"===s&&o.append(e.chat.getOpAlert(e.T("OPERATEUR_SENDLINK"),n[_][1])),"PUSH"===s&&o.append(e.chat.getOpAlert(e.T("OPERATEUR_PUSHLINK"),n[_][1])))}if("OFFERS"===s){c=r.split(" ")[1],l=r.substr(c.length+s.length+2),c.indexOf(e.website_url)===-1&&(d=" target='_blank'");var v=e.Templates.putOfferItem(c,l,d);e.noOfferPanelTemplate?o.append(v):o.append(e.chat.getOpAlert(e.T("OPERATEUR_SENDOFFER"),n[_][1]))}"VISIOCONF_ACCEPT"===s&&o.append(e.chat.getOpAlert(e.T("VISIOCONF_ACCEPT"),n[_][1])),"COBROWSING_ASK"===s&&o.append(e.chat.getOpAlert(e.T("COBROWSING_ASK_SHORT"),n[_][1])),"COBROWSING_ACCEPT"===s&&o.append(e.chat.getOpAlert(e.T("COBROWSING_ACCEPT"),n[_][1])),"COBROWSING_REFUSE"===s&&o.append(e.chat.getOpAlert(e.T("COBROWSING_REFUSE"),n[_][1])),"COBROWSING_STOP"===s&&o.append(e.chat.getOpAlert(e.T("COBROWSING_STOP"),n[_][1])),("CHAT_CLOSE"===s||"VISITOR_CHAT_CLOSE"===s||"OPERATOR_CHAT_CLOSE"===s)&&o.append(e.chat.getOpAlert(e.T("FIN_DISCUSSION_SHORT"),n[_][1]))}n[_][0]==1&&e.opMsgList.push(n[_][3])}var m=e.opMsgList.length;m>5&&(e.opMsgList=e.opMsgList.slice(m-5,m)),i("#idz_dialogbox #idz_dialogbox_bottom").before(o),i("#idz_dialogbox").find(".idz_msgtime").each(function(){t=i(this).text(),t=e.chat.getLocalTime(t),i(this).replaceWith("<div class='idz_msgtime'>"+t+"</div>")}),e.chatbox_state==2&&e.chat.offercount>1&&(e.noOfferPanelTemplate||e.Templates.showOfferPanel()),e.chat.scroll_dialog(),e.chat.scroll_link()}}},e.blink_title=function(){e.hasFocus!==1&&(e.blinktm!==null&&(clearInterval(e.blinktm),e.blinktm=null),e.blinktm=setInterval(function(){document.title=i("title").html()===e.oTitle?e.T("NOUVEAU_MESSAGE"):e.oTitle},1500))},e.lastPreview=null,e.livePreview=window.setInterval(function(){if(e.operator.on_pupitre!=0&&e.chat&&e.chat.status==2){var t=i("#idz_msgmsg").val();""!=t&&e.lastPreview!=t&&t!=e.T("POSER_VOTRE_QUESTION_ICI")&&t!=e.T("POSER_VOTRE_QUESTION_ICI_UN_CONSEILLER_VOUS_REPONDRA")&&t!=e.customize["chatbar_txt2_"+e.curlang]&&(e.lastPreview=t,e.preferences.bankcard_number_hidden==="1"&&(t=n(t)),e.connection.send($msg({to:Strophe.getBareJidFromJid(e.operator.barejid)+"/operators",from:e.connection.jid,type:"command",website:e.website_id}).c("body").t("!preview "+t)))}},2800),c.prototype={isChat:function(){return this.type==="chat"&&this.bodies.length>0},isCommand:function(){return this.body.indexOf("!")===0},getCommand:function(){return this.command||(this.command=new l(this.body))}},e.onMessageWithReceipt=function(t){var i=new c(t);if(i.isCommand()){var n=i.getCommand();if(n.name==="transfer")return e.transfer(n.param1)}return!0},e.getFlVer=function(){try{try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{t.AllowScriptAccess="always"}catch(e){return"6,0,0"}}catch(e){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){}}return"0,0,0"},e.detectFL=function(){var t=e.getFlVer().split(",");return e.util.warn("flash version: "+t[0]+"."+t[1]+"."+t[2]),t[0]<9?!1:t[0]==9&&t[2]<124?!1:(e.util.warn("USING FLASH"),Strophe.addConnectionPlugin("flxhr",{init:function(t){flensed&&flensed.flXHR?Strophe.Request.prototype._newXHR=function(){var e=new flensed.flXHR({autoUpdatePlayer:!0,instancePooling:!0,noCacheHeader:!1,onerror:function(){t._changeConnectStatus(Strophe.Status.CONNFAIL,"flXHR connection error"),t._onDisconnectTimeout()}});return e.onreadystatechange=this.func.prependArg(this),e}:Strophe.error("flXHR plugin loaded, but flXHR not found. Falling back to native XHR implementation.")}}),!0)},e.detectCORS=function(){var t=!1;try{(new XMLHttpRequest).withCredentials!==void 0&&(e.util.warn("CORS with Firefox/Safari/Chome"),t=!0)}catch(i){}if(t)e.util.warn("USING CORS");else{if(e.detectFL())return;e.bosh_url=e.chaturl+"jproxy.php",Strophe.addConnectionPlugin("jxhr",{init:function(){Strophe.Request.prototype._newXHR=function(){var t=new jXHR;try{t.onreadystatechange=this.func.prependArg(this)}catch(e){}return t}}})}},e.findAvailableOP=function(t){t=t||{};var n={findop:e.website_id,u:e.vuid,dep:e.forceDep,s:e.chat.status,o:e.forceAgent||0};return i.extend(n,t),i.getJSON(e.chaturl+"rpc/poll?callback=?",n).done(e.findOpCallback).fail(function(){setTimeout(e.findAvailableOP,1e4)})},e.findOPDelayed=function(){return setTimeout(function(){e.findAvailableOP()},1500)},e.findOpCallback=function(t){clearTimeout(e.findopTM),e.findopTM=setTimeout(function(){e.findAvailableOP()},t.poll),e.forceCallOnline&&(t.c2cOffline=0);var i=e.preferences.priority_channel;"all"!=i&&t.opOffline==0&&t.c2cOffline==0&&("chat"==i&&(t.c2cOffline=1),"call"==i&&(t.opOffline=1)),e.opOffline=t.opOffline,e.c2cOffline=t.c2cOffline,e.c2vOffline=t.c2vOffline,t.opWatching&&(e.opWatching=t.opWatching),t.opBusy&&(e.opBusy=t.opBusy);var n=e.ABtest!="A"&&!e.targetingHasRun;if(e.targetingHasRun||(e.targetingHasRun=!0,e.ProActif.setData(e.proactifData)),setTimeout(function(){e.chat.status!=2&&(e.callbacks.onStatusChanged({offline:t.opOffline,busy:t.opBusy,c2cOffline:t.c2cOffline}),e.callbacks.onCallStatusChanged({offline:t.c2cOffline,chatOffline:t.opOffline}))},450),t.opOffline==1&&e.c2cOffline==1&&e.c2vOffline==1){(t.opWatching==1||e.preferences.param_noopconnected!="1")&&(e.setStatus(),e.preferences.param_noopconnected!="1"&&n&&e.Templates.showUI());try{e.setStatus(),t.opWatching!=1?e.chat.connected===!0&&(e.connection.disconnect("no more available op"),u&&u.disable()):!e.chat.connected&&e.realtime&&e.opWatching==1&&f.connect()}catch(a){}if(e.preferences.param_noopconnected=="1")try{e.chat.status<2&&e.Templates.hideUI()}catch(a){}}else{if(n&&setTimeout(e.setStatus,300),t.opOffline!=1&&e.preferences.param_opconnected!="1"&&n&&e.Templates.showUI(),t.opOffline==1&&e.preferences.param_noopconnected=="1")try{e.chat.status<2&&e.Templates.hideUI()}catch(a){}e.chat.connected||!e.realtime&&e.chat.status!=2||f.connect()}},e.onActivity=function(){e.vStats.lastMove=(new Date).getTime(),e.vStats.activeSince==null&&(e.vStats.activeSince=(new Date).getTime())},e.setStatus=function(){if(e.flags.popup_mode&&!e.popout)return!0;e.floatingWidget&&e.floatingWidget.onPresenceChange(),e.SetOnline(),e.SetOffline(),e.OCallBack&&(e.opOffline==1&&e.c2cOffline==1||e.on_call==1?e.OCallBack.onOffline():e.OCallBack.onOnline());var t="";i(".idz_widget_v2").length&&(e.opOffline&&e.c2cOffline?e.preferences.param_noconnectedwidget==1?i(".idz_widget_v2").hide():(i(".idz_widget_v2 .wtext1").html(" "),i(".idz_widget_v2 .wtext2").html(e.T("OPERATEURS_INDISPONIBLES_ENVOYER_EMAIL")),i(".idz_widget_v2 .wtext5").show()):(e.opOffline?i(".idz_chatwidget").hide():(t+="Nous vous assistons en direct par chat.",i(".idz_chatwidget").show()),e.opOffline||e.c2cOffline||(t+=" <span>OU</span> "),e.c2cOffline?(i(".idz_c2cwidget").hide(),e.chat&&e.chat.closeC2cPopin(),i("#call_button_online,.call_button_online").hide(),i("#call_button_offline,.call_button_offline").show()):(t+=e.T("NOUS_VOUS_RAPPELONS_GRATUITEMENT"),i(".idz_c2cwidget").show()),e.preferences.param_connectedwidget==1?i(".idz_widget_v2").hide():(i(".idz_widget_v2 .wtext1").html(e.T("PUIS_JE_VOUS_AIDER")),i(".idz_widget_v2 .wtext2").html(t),i(".idz_widget_v2").show()),i(".idz_widget_v2 .wtext5").hide()))},e.onChatButtonDisplay=function(){e.callButCB||(e.callbacks.onChatButtonDisplayed(),e.callButCB=!0)},e.onCallButtonDisplay=function(){e.chatButCB||(e.callbacks.onCallButtonDisplayed(),e.chatButCB=!0)},e.onVisioButtonDisplay=function(){e.visioButCB||(e.callbacks.onVideoButtonDisplayed(),e.visioButCB=!0)},e.SetOnline=function(){e.on_call!=1&&(e.opOffline==0&&(e.customize.chatbar_avatar=="1"&&(i("#idz_avatar_status").addClass("idz_online").removeClass("idz_offline").html(e.T("EN_LIGNE")),i("#idz_status_msg").html(e.T("NOS_CONSEILLERS_SONT_ACTUELLEMENT_A_VOTRE_DISPOSITION")),e.isOnFB&&setTimeout(function(){i("#idz_chatglobal").show()},500)),i(".idz_widget").length&&i("#button_online").is(":hidden")&&(e.preferences.param_connectedwidget!=1?(i("#button_offline").hide(),i("#button_online").show(),e.onChatButtonDisplay()):(i("#button_offline").hide(),i("#button_online").hide()))),e.c2cOffline==0&&(i(".idz_c2cwidget").length&&(e.preferences.param_c2c_connectedwidget!=1?(i(".idz_c2cwidget").show(),e.onCallButtonDisplay()):i(".idz_c2cwidget").hide()),e.preferences.param_c2c_connectedwidget!=1?(i("#call_button_online,.call_button_online").show(),i("#call_button_offline,.call_button_online").hide()):(i("#call_button_online,.call_button_online").hide(),i("#call_button_offline,.call_button_offline").hide())),e.c2vOffline==0&&(i(".idz_c2cwidget").length&&(e.preferences.param_visio_connectedwidget!=1?(i(".idz_c2vwidget").show(),e.onVisioButtonDisplay()):i(".idz_c2vwidget").hide()),e.preferences.param_visio_connectedwidget!=1?(i("#visio_button_online,.visio_button_online").show(),i("#visio_button_offline,.visio_button_online").hide()):(i("#visio_button_online,.visio_button_online").hide(),i("#visio_button_offline,.visio_button_offline").hide())))},e.SetOffline=function(){(e.opOffline==1||e.on_call==1)&&(e.customize.chatbar_avatar=="1"&&(i("#idz_avatar_status").addClass("idz_offline").removeClass("idz_online").html(e.T("HORS_LIGNE")),i("#idz_status_msg").html(e.T("BONJOUR_AUCUN_CONSEILLER_EST_DISPONIBLE_POUR_VOUS_REPONDRE"))),i(".idz_widget").length&&(i("#button_offline").length&&i("#button_offline").is(":hidden")?e.preferences.param_noconnectedwidget!=1?(i("#button_offline").show(),i("#button_online").hide()):(i("#button_offline").hide(),i("#button_online").hide()):i("#button_online").hide()),i(".idz_chatwidget").length&&i(".idz_chatwidget").hide()),e.c2vOffline==1&&(i(".idz_c2vwidget").length&&i(".idz_c2vwidget").hide(),e.preferences.param_visio_noconnectedwidget!=1?(i("#visio_button_offline,.visio_button_offline").show(),i("#visio_button_online,.visio_button_offline").hide()):(i("#visio_button_offline,.visio_button_offline").hide(),i("#visio_button_online,.visio_button_offline").hide()))},e.errorMailer=function(t,i,n){if(!e.PROD)throw new Error(i);n=n||"",e.util.addScript("errormailer",e.chaturl+"rpc/mail_error.php?desc="+encodeURIComponent(t)+"&err="+encodeURIComponent(JSON.stringify(i))+"&msg="+encodeURIComponent(n))},typeof e.Utils=="undefined"&&(e.Utils={}),e.Utils.errorMailer=e.errorMailer}(iAdvize,iAdvize.$),function(t){var e=850,i=[],n=!1,a=!1,o=function(){(function(){for(var t=i.length,o=0;t>o;o++){var r=i[o][1]();i[o][0]!==r&&(i[o][0]=r,i[o][2](r))}a?n=!1:setTimeout(arguments.callee,e)})(),n=!0},r={add:function(t,e,r){for(var s in i)if(i[s][3]==r)return;var c=[void 0,t,e,r];i.push(c),n===!1&&(a=!1,o())},start:function(){a=!1,n===!1&&o()},clear:function(){i=[],a=!0},stop:function(){a=!0}};t.Watcher=r}(iAdvize),function(t,e){function i(t){return t?e("#idzc2c").is(":visible")?!1:(f(t).then(g).then(u).then(n),void 0):!0}function n(e){t.proactif_now=1,t.flags.proactif_activatedId=e.id;for(var i=O.length,n=0;i>n;n++){var a=O[n];a.apply(w,[e])}}function a(){return t.opOffline!=1}function o(){return t.c2cOffline!=1}function r(){return t.c2vOffline!=1}function s(){return!/(ip-label|WatchMouse)/.test(navigator.userAgent)}function c(e){return t.ABRunning&&_(e)}function l(e){var i=t.ABtest=e.group;return i&&t.require("storage").set(e.key,i),"A"==i?(d(),!1):!0}function d(){e.each(["","c2c_","visio_"],function(e,i){t.preferences["param_"+i+"connectedwidget"]=1,t.preferences["param_"+i+"noconnectedwidget"]=1}),t.setStatus()}function u(i){var n=e.Deferred();return c(i.channel)?t.ABtest=="A"?(d(),n.reject(i)):t.ABtest?n.resolve(i):e.getJSON(t.chaturl+"rpc/ab.php?callback=?",{s:t.website_id}).then(l).then(function(t){t&&n.resolve(i)}):n.resolve(i),n.promise()}function p(e){if(t.chat.status!=2&&s()&&!e.incremented){e.incremented=!0;var i=t.vStats.ext_cartamount||t.vStats.ext_cart_amount||0;t.util.addScript("proactifcount",t.chaturl+"rpc/proactif_count.php?inc="+e.id+"&s="+t.website_id+"&u="+t.vuid+"&chatoff="+(t.opOffline==1?1:0)+"&calloff="+(t.c2cOffline==1?1:0)+"&busy="+t.opBusy+"&cart="+i+"&opp="+(S?1:0)),S=!0}}function h(){s()&&setTimeout(function(){t.JSONStore.saveData({proactif_activated:t.flags.proactif_activated,proactif_showchatbar:t.flags.proactif_showchatbar,proactif_showbuttons:t.flags.proactif_showbuttons,proactif_message:t.util.htmlspecialchars(t.flags.proactif_message),message:t.util.htmlspecialchars(t.flags.message),proactif_invit:t.flags.proactif_invit,proactif_activatedId:t.flags.proactif_activatedId,proactif_alert:t.flags.proactif_alert,phoneDisplayed:t.flags.phoneDisplayed})},400)}function f(i){var n=e.Deferred();return t.chat.status!=2&&i.opDep&&!t.forceDep?(t.forceDep=i.opDep,iAdvize.findAvailableOP().done(function(){n.resolve(i)})):n.resolve(i),n.promise()}function g(i){var n=e.Deferred();return t.chat.status!=2&&i.checkHash&&t.vStats.merpHash?iAdvize.findAvailableOP({h:t.vStats.merpHash}).done(function(e){e.merpData?(t.forceAgent=e.merpData.operatorId,w.doChatActions(i,!0),e.opOffline==0?n.resolve(i):(t.setStatus(),n.reject(i))):n.reject(i)}).fail(function(){n.reject(i)}):n.resolve(i),n.promise()}function _(e){var i=!1;return i="chat"==e?a():"call"==e?o():"visio"==e?r():"all"==e?a()||o():t.opOffline==0||t.c2cOffline==0}function m(e){var i=!1,n=_(e.channel);e.channel=="call"&&t.preferences.call_offline_enabled==1&&(n=!0,t.c2cOffline=0,t.forceCallOnline=!0,t.callbacks.onCallStatusChanged({offline:0,chatOffline:t.opOffline})),n&&(t.callbacks.onRuleStarted({id:e.id,label:e.label}),i=w.doActions(e)),p(e)}var v=!0,b=!1,T=!1,S=!1,O=[],w=t.ProActif={_datas:[],_Type:{},_Operator:{is:function(t,e){return t==e},"is not":function(t,e){return t!=e},contains:function(t,e){return t.indexOf(e)!==-1},"not contains":function(t,e){return t.indexOf(e)==-1},"ends with":function(t,e){return t.match(e+"$")==e},"begins with":function(t,e){return t.match("^"+e)==e},regex:function(t,e){return new RegExp(e).test(t)},"not regex":function(t,e){return!new RegExp(e).test(t)},equal:function(t,e){return t==e},"less than":function(t,e){return e>t},"more than":function(t,e){return t>e},"less than or equal":function(t,e){return e>=t},"more than or equal":function(t,e){return t>=e}},implemententType:function(t,e){var i=this;this._Type[t]={};for(var n in e)this._Type[t][n]=e[n];return this._Type[t]._super=i,this._Type[t].type=t,this},implemententExtendType:function(t,i,n){return this._Type[t]&&(this._Type[i]={},e.extend(this._Type[i],this._Type[t],n),this._Type[i].type=i,this._Type[i].baseType=t),this},run:function(e){if(!v||b&&T)return t.Watcher.stop(),!0;if(typeof window.idzCustomData!="undefined")for(var n in idzCustomData)idzCustomData[n]!==null&&idzCustomData[n]!="undefined"&&t.vStats.val(n,idzCustomData[n]);if(t.chat.status&&t.chat.status==2)return!0;for(var a,o=this._datas.length-1,r=0,s=o;s>=r;s--)if(!e||e==s){a=this._datas[s];for(var c=a.rules.length-1;c>-1;c--){var l=a.rules[c];if(typeof t.vStats[l.field]!="undefined"){l.tRefreshData?l.tRefreshData():!0,l.field=="merpLink"&&(a.checkHash=!0);var d=l.baseType||l.type;l.isValCustom&&(l.val=t.vStats[l.valField]),l.valtype&&l.valtype=="count"&&(d="INTEGER"),"INTEGER"==d&&this._Operator[l.op](parseInt(t.vStats[l.field],10),parseInt(l.val,10))||"FLOAT"==d&&this._Operator[l.op](parseFloat(t.vStats[l.field]),parseFloat(l.val))||"INTEGER"!=d&&"FLOAT"!=d&&this._Operator[l.op]((""+t.vStats[l.field]).toLowerCase(),(""+l.val).toLowerCase())?a.rules.splice(c,1):l.tIsFalse?l.tIsFalse(s):!0}}if(!a.executed&&a.rules.length==0&&(a.executed=!0,i(a),a.last&&((a.channel=="chat"||a.channel=="all")&&(b=!0),(a.channel=="call"||a.channel=="all")&&(T=!0),a.channel=="all")))break}},doActions:function(e){w.sendAlert=!1,t.flags.proactif_alert="",e.channel=="chat"&&w.doChatActions(e),e.channel=="call"&&w.doCallActions(e),e.channel=="visio"&&w.doVisioActions(e),e.channel=="all"&&(w.doChatActions(e),w.doCallActions(e),w.doVisioActions(e)),w.sendAlert&&(t.flags.message=t.T("LA_REGLE")+" "+e.label+" "+t.T("VIENT_ETRE_EXECUTEE"),t.flags.proactif_alert="!proactif "+e.label),h()},doCallActions:function(e){e.showBtn&&(e.persist&&(t.flags.proactif_showbuttons=1),w.sendAlert=!0,t.ProActif.changeCallPreferences()),e.showFloating&&(e.persist&&(t.flags.proactif_showbuttons=1),w.sendAlert=!0,t.ProActif.changeCallPreferences(),t.ProActif.changeChatPreferences(),t.floatingWidget.switchWidget(e.showFloating),iAdvize.setStatus()),e.invitation&&(t.chat.status!=2?t.flags.proactif_invit==null||t.flags.proactif_invit.indexOf(e.invitation)===-1?o()&&(w.sendAlert=!0,t.chat.loadInvitation(e.invitation),t.flags.proactif_invit=t.flags.proactif_invit||"",t.flags.proactif_invit+=e.invitation+","):success=!1:success=!1)},doVisioActions:function(e){e.showBtn&&(e.persist&&(t.flags.proactif_showbuttons=1),w.sendAlert=!0,t.ProActif.changeVisioPreferences()),e.showFloating&&(e.persist&&(t.flags.proactif_showbuttons=1),w.sendAlert=!0,t.ProActif.changeVisioPreferences(),t.floatingWidget.switchWidget(e.showFloating)),e.invitation&&(t.chat.status!=2?t.flags.proactif_invit==null||t.flags.proactif_invit.indexOf(e.invitation)===-1?r()&&(w.sendAlert=!0,t.chat.loadInvitation(e.invitation),t.flags.proactif_invit=t.flags.proactif_invit||"",t.flags.proactif_invit+=e.invitation+","):success=!1:success=!1)},doChatActions:function(i,n){if(t.opOffline!=0&&!n)return!1;var o=!0;if(i.showDialog&&(t.opOffline==0?(i.persist&&(t.flags.proactif_showchatbar=1),t.Templates.showUI(),w.sendAlert=!0):o=!1),i.showBtn&&(i.persist&&(t.flags.proactif_showbuttons=1),w.sendAlert=!0,t.ProActif.changeChatPreferences()),i.showFloating&&(i.persist&&(t.flags.proactif_showbuttons=1),w.sendAlert=!0,t.ProActif.changeChatPreferences(n),t.floatingWidget.switchWidget(i.showFloating)),i.invitation&&(t.chat.status!=2?t.flags.proactif_invit==null||t.flags.proactif_invit.indexOf(i.invitation)===-1?a()&&(w.sendAlert=!0,t.chat.loadInvitation(i.invitation),t.flags.proactif_invit=t.flags.proactif_invit||"",t.flags.proactif_invit+=i.invitation+","):o=!1:o=!1),i.sound&&t.flags.message==null&&t.opBusy!=1&&t.playSound("message"),i.animDialog&&t.flags.message==null){window.setTimeout(t.Templates.WizzDialog,1500),t.ProActif.intervWizz=window.setInterval(function(){t.Templates.WizzDialog()},5e3);var r="focus.proactifWizzDialog",s="click.proactifWizzDialog",c=function(){e("#idz_msgmsg").unbind(r),e("#idz_button_close, #idz_button_hide").unbind(s),window.clearInterval(t.ProActif.intervWizz)};e("#idz_msgmsg").length>0&&e("#idz_msgmsg").bind(r,c),e("#idz_button_close, #idz_button_hide").length==2&&e("#idz_button_close, #idz_button_hide").bind(s,c)}return i.mess&&(t.opOffline==0?t.chat.status!=2&&t.flags.proactif_message==null&&t.opBusy!=1?(t.flags.proactif_message=t.T("LA_REGLE")+" "+i.label+" "+t.T("VIENT_ETRE_EXECUTEE"),t.flags.proactif_message+=" "+t.T("CE_MESSAGE_ENVOYE_VISITEUR")+' "'+i.mess+'"',t.flags.proactif_alert="!proactif "+i.label+"|"+i.mess,t.chat.putOpMsg(null,i.mess,0)):o=!1:o=!1),o},changeChatPreferences:function(e){(a()||e)&&(t.preferences.param_connectedwidget=0,t.preferences.param_noconnectedwidget=0,t.setStatus())},changeCallPreferences:function(e){(o()||e)&&(t.preferences.param_c2c_connectedwidget=0,t.preferences.param_c2c_noconnectedwidget=0,t.setStatus())},changeVisioPreferences:function(e){(r()||e)&&(t.preferences.param_visio_connectedwidget=0,t.preferences.param_visio_noconnectedwidget=0,t.setStatus())},execRule:function(t){for(var e,i=this._datas.length,n=0;i>n;n++)if(e=this._datas[n],e&&e.id===t){this.doActions(e);break}return!0},watchCustomData:function(i,n,a,o,r){t.Watcher.add(function(){var t=e(i).text()||e(i).val();return t&&"INTEGER"==a&&(t=parseInt(t.replace(/,/g,".").replace(/[^\d.]+/g,""),10)),t&&"FLOAT"==a&&(t=parseFloat(t.replace(/,/g,".").replace(/[^\d.]+/g,""),10)),t},function(e){var i=t.vStats[n],s=t.Store.get(n);if("count"!=o&&void 0===s&&(s=e),"current"==o)void 0!==e?t.vStats[n]=e:delete t.vStats[n];else if("max"==o)void 0!==e&&e>=s&&(s=e,t.Store.set(n,s)),void 0!==s&&(t.vStats[n]=s);else if(void 0!==e&&"min"==o)void 0!==e&&s>=e&&(s=e,t.Store.set(n,s)),void 0!==s&&(t.vStats[n]=s);else if("count"==o){if(r){var c=!1;"STRING"!=a&&e==r?c=!0:"STRING"==a&&void 0!==e&&e.indexOf(r)!=-1&&(c=!0),c&&(s=s||0,s++,t.Store.set(n,s))}t.vStats[n]=s||0}t.vStats[n]!=i&&setTimeout(function(){t.ProActif.run()},100)},n)},setData:function(i){if(!i)return!0;for(var n=i.length-1;n>-1;n--)for(var a=i[n].rules.length-1;a>-1;a--){var o=i[n].rules[a];if(this._Type[o.type]&&e.extend(o,this._Type[o.type]),o.path&&o.path!=""){var r=o.baseType||o.type;this.watchCustomData(o.path,o.field,r,o.valtype,o.val2count)}if(o.val.indexOf("IDZ_CDATA_")!=-1){o.isValCustom=!0;var s=JSON.parse(o.val.substr(10));o.valField="ext_"+s.field,o.valPath=s.path,o.valBaseType=s.basetype,o.valValType=s.valtype,o.valPath!=""&&this.watchCustomData(o.valPath,o.valField,o.valBaseType,o.valValType)}o.tInit&&o.tInit()}this._datas=i,t.ProActif.run()},match:function(t){O.push(t)}};w.match(m),w.implemententType("BOOL").implemententType("INTEGER").implemententType("FLOAT").implemententType("STRING").implemententExtendType("INTEGER","TIME",{_tTimeBegin:0,_timeOut:null,tInit:function(){this.val*=60,t.ProActif.vStatsI||(t.ProActif.vStatsI={}),t.ProActif.vStatsI[this.field]||(t.ProActif.vStatsI[this.field]=!0,t.vStats[this.field]=t.vStats[this.field]*60||0),this._tTimeBegin=new Date},tRefreshData:function(){this.val-=Math.ceil(((new Date).getTime()-this._tTimeBegin.getTime())/1e3),this._tTimeBegin=new Date},tIsFalse:function(e){this.tRefreshData();var i=1e3+(this.val-t.vStats[this.field])*1e3;this.op=="equal"&&(this.op="more than"),this.op=="less than"&&(i-=2e3),clearTimeout(this._timeOut),this._timeOut=setTimeout(function(){t.ProActif.run(e)},Math.abs(i))}}).implemententExtendType("FLOAT","ACTIVITY",{_tTimeBegin:0,_timeOut:null,tInit:function(){this.val*=60,t.vStats[this.field]=t.vStats[this.field]||0},tRefreshData:function(){var e=Math.ceil(((new Date).getTime()-t.vStats.lastMove)/1e3);e>5&&(t.vStats.activeSince=null),t.vStats.activeSince=t.vStats.activeSince||(new Date).getTime(),t.vStats[this.field]=Math.ceil(((new Date).getTime()-t.vStats.activeSince)/1e3)},tIsFalse:function(e){var i=1e3+(this.val-t.vStats[this.field])*1e3;this.op==="equal"&&(this.op="more than"),this.op==="less than"&&(i-=2e3),clearTimeout(this._timeOut),this._timeOut=setTimeout(function(){t.ProActif.run(e)},Math.abs(i))}}).implemententExtendType("STRING","HTML").implemententExtendType("INTEGER","IHTML").implemententExtendType("FLOAT","FHTML").implemententExtendType("STRING","COUNTRY").implemententExtendType("STRING","TOWN").implemententExtendType("STRING","REFERRER").implemententExtendType("STRING","LANG").implemententExtendType("INTEGER","DAY").implemententExtendType("INTEGER","HOUR")}(iAdvize,iAdvize.$),function(t){var e=null,i=t.chaturl+"popout.php?idzchat&sid="+t.website_id;t.PopOut={popChatOut:function(n){n=n||{};var a="resizable=no, location=no, status=no, menubar=no";n.template&&(i+="&tpl="+n.template),a+=n.width?", width="+n.width:", width=565",a+=n.height?", height="+n.height:", height=325",n.top&&(a+=", top="+n.top),n.left&&(a+=", left="+n.left),t.Templates.hideUI(),e=window.open(i,"idzchat",a),window.focus&&e&&e.focus()}}}(iAdvize);(function(i){i.fn.jqDrag=function(i){return s(this,i,"d")},i.fn.jqResize=function(i){return s(this,i,"r")},i.jqDnR={dnr:{},e:0,drag:function(t){return a.k=="d"?e.css({left:Math.max(Math.min(a.X+t.pageX-a.pX,i(window).width()-a.W),0),top:Math.max(Math.min(a.Y+t.pageY-a.pY,i(window).height()-a.H),0)}):e.css({width:Math.max(t.pageX-a.pX+a.W,0),height:Math.max(t.pageY-a.pY+a.H,0)}),!1},stop:function(){i.browser.msie||e.css("opacity",a.o),i(document).unbind("mousemove",t.drag).unbind("mouseup",t.stop),iAdvize.chat.popinLeft=e.css("left"),iAdvize.chat.popinTop=e.css("top"),iAdvize.JSONStore.saveData({popinLeft:iAdvize.chat.popinLeft,popinTop:iAdvize.chat.popinTop})}};var t=i.jqDnR,a=t.dnr,e=t.e,s=function(t,s,c){return t.each(function(){s=s?i(s,t):t,s.bind("mousedown",{e:t,k:c},function(t){var s=t.data,c={};if(e=s.e,e.css("position")!="relative")try{e.position(c)}catch(l){}return a={X:c.left||d("left")||0,Y:c.top||d("top")||0,W:d("width")||e[0].scrollWidth||0,H:d("height")||e[0].scrollHeight||0,pX:t.pageX,pY:t.pageY,k:s.k,o:e.css("opacity")},i.browser.msie||e.css({opacity:.8}),i(document).mousemove(i.jqDnR.drag).mouseup(i.jqDnR.stop),!1})})},d=function(i){return parseInt(e.css(i))||!1}})(iAdvize.$),function(i,t){i.Templates=new function(){this.c2cPopin="<link href='"+i.static_url+"css/c2c/style.css' type='text/css' rel='stylesheet' /><div id='idzc2c' class='idz_lang_"+i.curlang+"'><div id='c2coverlay'></div>"+"<div id='c2cpopin'><div id='c2cpopin_inner'>"+"<a id='c2cpopin_close' href='javascript:void(0)'></a>"+"<div class='c2cpopin_title'>"+i.T("NOUS_VOUS_RAPPELLONS_GRATUITEMENT")+"</div>"+"<div class='c2cpopin_ctn'><div class='c2cpopin_ctn_inner'>"+"<!-- STEP 1, ASK PHONE NUMBER -->"+"<div id='c2cpopin_step1'> <!-- ajouter class='c2cpopin_error' pour faire apparaitre le message d'erreur -->"+"<div class='c2cpopin_label c2cpopin_label_auto c2cpopin_m_t'>"+i.T("NOUS_VOUS_RAPPELLONS_GRATUITEMENT_TXT1")+"</div>"+"<div class='c2cpopin_label c2cpopin_label_error c2cpopin_m_t'>"+i.T("UNE_ERREUR_EST_SURVENUE")+"</div>"+"<div class='c2cpopin_selecnum'>"+"<div class='c2cpopin_selectphone'>"+"<div class='c2cpopin_flag'>"+"<div id='c2cpopin_flag_selector'><div class='flag flag_fr' rel='fr'></div></div>"+"<div id='c2cpopin_flag_list' style='display:none;'>"+"<ul>"+"<li id='fr'><div class='flag flag_fr'></div> +33</li>"+"<li id='us'><div class='flag flag_us'></div> +1</li>"+"<li id='uk'><div class='flag flag_uk'></div> +44</li>"+"<li id='ch'><div class='flag flag_ch'></div> +41</li>"+"<li id='be'><div class='flag flag_be'></div> +32</li>"+"<li id='nl'><div class='flag flag_nl'></div> +31</li>"+"<li id='es'><div class='flag flag_es'></div> +34</li>"+"<li id='it'><div class='flag flag_it'></div> +39</li>"+"<li id='il'><div class='flag flag_il'></div> +972</li>"+"</ul>"+"</div>"+"</div>"+"<input type='text' name='c2c_phone' class='c2cpopin_phone' id='c2cpopin_phone' />"+"<div class='clearer'></div>"+"</div>"+"<div class='c2cpopin_call'>"+"<a href='javascript:void(0)' class='btn_med_green btn_med_green_phone'>"+"<span></span>"+i.T("APPELEZ_MOI")+"</a>"+"</div>"+"<div class='clearer'></div>"+"</div>"+"</div>"+"<!-- END STEP 1, ASK PHONE NUMBER -->"+"<!-- STEP 2, SEARCH CALL -->"+"<div id='c2cpopin_step2' class='c2cpopin_error' style='display:none'>"+"<div class='c2cpopin_label c2cpopin_label_loading margin_big_t'>"+"<div class='c2cpopin_label_phone'></div>",this.c2cPopin+=i.preferences.c2c_callvisitorfirst==1?i.T("NOUS_VOUS_RAPPELLONS_GRATUITEMENT_TXT5"):i.T("NOUS_VOUS_RAPPELLONS_GRATUITEMENT_TXT2"),this.c2cPopin+="</div></div><!-- END STEP 2, SEARCH CALL --><!-- STEP 3, CALL IN PROGRESS --><div id='c2cpopin_step3' class='c2cpopin_error' style='display:none'><div class='c2cpopin_label c2cpopin_label_valid margin_big_t'>"+i.T("NOUS_VOUS_RAPPELLONS_GRATUITEMENT_TXT4")+"</div>"+"</div>"+"<!-- END STEP 3, CALL IN PROGRESS -->"+"</div></div>"+"</div></div>"+"</div>",this.chatbox="<div id='idz_chatbox' class='' style='display: block;'>		<div id='idz_chatbox_left'><div id='idz_chatbox_left_inner'><div class='idz_bgpict'></div><div class='idz_pict'></div><h2>"+i.T("JAI_SELECT_POUR_VOUS")+"</h2>"+"<div id='idz_chatbox_left_content_inner'>"+"<div id='idz_chatbox_left_content'>"+"<ol class='idz_links'>"+"</ol>"+"</div>	"+"</div>"+"</div>"+"<a href='javascript:void(0)' class='idz_showoffer'>offer</a>"+"</div>"+"<div id='idz_chatbox_main'>"+"<h2>"+"<div class='idz_action_l'>"+"<a id='idz_button_font_neg' href='javascript:void(0)'><img class='bbar bbar_fontsize_neg' alt='diminuer la police' src='"+i.static_url+"images/livechat/blank.gif' /></a>"+"<a id='idz_button_font_pos' href='javascript:void(0)'><img class='bbar bbar_fontsize_pos' alt='augmenter la police' src='"+i.static_url+"images/livechat/blank.gif' /></a>"+"<a href='javascript:void(0)' target='mailFrame' id='idz_button_mail'><img alt='recevoir par email' class='bbar bbar_mail' src='"+i.static_url+"images/livechat/blank.gif' /><span>"+i.T("SEND_EMAIL")+"</span></a>"+"<a href='javascript:void(0)' target='_blank' id='idz_button_print'><img alt='imprimer' class='bbar bbar_print' src='"+i.static_url+"images/livechat/blank.gif' /><span>"+i.T("PRINT")+"</span></a>"+"</div>"+"<div class='idz_action_r'>"+"<a id='idz_chatbar_minifier' href='javascript:void(0)'><img alt='réduire le chat' class='bbar bbar_hide' src='"+i.static_url+"images/livechat/blank.gif' /></a>"+"<a id='idz_button_close' href='javascript:void(0)'><img alt='fermer le chat' class='bbar bbar_close' src='"+i.static_url+"images/livechat/blank.gif' /></a>"+"</div>"+"<div class='idz_clearer'></div>"+"</h2>"+"<div class='drag jqDrag'></div>"+"<div id='idz_chatbox_main_content'>"+"<div class='idz_chatbox_main_content_inner'>"+"<div id='idz_dialogbox' style='height:188px;width:527px;'>"+"<a name='idz_dialogbox_bottom' id='idz_dialogbox_bottom'></a>"+"</div>"+"</div>"+"<div class='idz_chatbox_main_content_inner_bottom'></div>	"+"</div>"+"<div class='idz_writting'></div>"+"</div>"+"<div class='idz_clearer'></div>"+"</div>"+"<div id='idz_chatbar'>"+"<div id='idz_chatbar_content'>"+"<div id='idz_chatbar_inner'>"+"<div id='idz_sendmsg'>"+"<div id='msgform' name='msgform'>"+"<div class='idz_msgmsg_bg'>"+"<div class='idz_loading'></div>"+"<input type='text' title='message' value='"+i.T("POSER_VOTRE_QUESTION_ICI_UN_CONSEILLER_VOUS_REPONDRA")+"' id='idz_msgmsg'/>"+"</div>"+"<input type='button' value=' ' id='idz_postmsg'/>"+"</div>"+"</div>"+"</div>"+"<!--<table cellspacing='0' cellpadding='0' id='idz_chatbar_minifier'><tbody><tr><td><div id='idz_chatbar_minifier_r'></div></td></tr></tbody></table>-->"+"</div>"+"</div>",this.chatbarMini="<div id='idz_chatbar_mini' class='idz_lang_"+i.curlang+"'>"+"<div class='idz_ope'><img src='"+i.static_url+"images/livechat/fnac/avatar/fnac_avatar_1.png' alt='Fnac' /></div>"+"</div>",this.vMsg="<div class='idz_msg_visitor'><div class='idz_msg_visitor_footer'></div><div class='idz_msgtime'>{TIME}</div><div class='idz_msgtext'>{MSG}</div></div>",this.opMsg="<div class='idz_msg_operator'><div class='idz_ope'><img src='"+i.static_url+"images/livechat/fnac/avatar/fnac_avatar_1.png' alt='Fnac' /></div>"+"<div class='idz_msgcontent'>"+"<div class='idz_msg_operator_footer'></div>"+"<div class='idz_msgtime'>{TIME}</div>"+"<div class='idz_msgtext'> <span class='idz_opename'>{PSEUDO}</span>{MSG}</div>"+"</div>"+"</div>",this.opMsgFooter="<div class='idz_msgfooter'><div class='idz_fleft'>"+i.T("PARLER_VIVE_VOIX")+"<br><span class='idz_small'>{PHONE_PRICE}</span></div>"+"<div class='idz_fleft idz_phone_num'>{PHONE_NUMBER}</div>"+"<div class='idz_clearer'></div>"+"</div>",this.opAlert="<div class='idz_msg_alert_op'><div class='idz_msg_alert_op_footer'></div><div class='idz_msgtime'>{TIME}</div><div class='idz_msgtext'>{MSG}</div></div>",this.askCobrowsing="<div class='idz_msg_alert_op idz_msg_alert_op_cobrowsing'><div class='idz_msg_alert_op_footer'></div><div class='idz_msgtime'>{TIME}</div><div class='idz_msgtext'><div class='idz_action'><div class='idz_lab'>"+i.T("COBROWSING_ASK")+" "+i.T("QUE_FAIRE")+"</div>"+"<div id='idz_cobrowsing_accept' class='btn_livechat_accept idz_fleft'>"+i.T("J_ACCEPTE")+"</div>"+"<div id='idz_cobrowsing_refuse' class='btn_livechat_refuse idz_fleft'>"+i.T("JE_REFUSE")+"</div>"+"<div class='idz_clearer'></div>"+"</div>"+"<div class='idz_small'>"+i.T("COBROWSING_ASK_TEXT")+"</div>"+"</div>"+"</div>",this.itemLink="<li><div class='idz_titlelink'><a href='{URL}' {TARGET}>{TITLE}</a></div></li>",this.itemOffer="<li><div class='idz_titlelink'>{TITLE}</div><div class='idz_textlink'><div class='idz_textimg'>{IMG}</div> <div class='idz_textdesc'>{DESC}</div></div><div class='idz_clearer'></div></li>",this.getChatContent=function(){return this.chatbox},this.append2body=function(){return this.chatbarMini},this.loadChatCss=function(){i.util.load_css(i.static_url+"css/livechat/fnac/import.css?v="+i.jsVersion)},this.append2header=function(){var t="",a=i.util.detectDoctype();return t=null!=a&&a.xhtml=="XHTML"?"<!--[if gte IE 5.5]><![if lt IE 7]><link href='"+i.static_url+"css/livechat/popin/fixed-ie.css' rel='stylesheet' type='text/css' /><![endif]><![endif]--><!--[if IE]><link href='"+i.static_url+"css/livechat/popin/import-ie.css' rel='stylesheet' type='text/css' /><![endif]-->":null!=a&&a.loose?"<!--[if gte IE 5.5]><![if lt IE 9]><link href='"+i.static_url+"css/livechat/popin/fixed-ie.css' rel='stylesheet' type='text/css' /><![endif]><![endif]--><!--[if IE]><link href='"+i.static_url+"css/livechat/popin/import-ie.css' rel='stylesheet' type='text/css' /><![endif]-->":null!=a&&a.loose==0?"<!--[if gte IE 5.5]><![if lte IE 9]><link href='"+i.static_url+"css/livechat/popin/fixed-ie.css' rel='stylesheet' type='text/css' /><![endif]><![endif]--><!--[if IE]><link href='"+i.static_url+"css/livechat/import-ie.css' rel='stylesheet' type='text/css' /><![endif]-->":"<!--[if gte IE 5.5]><![if lte IE 8]><link href='"+i.static_url+"css/livechat/popin/fixed-ie.css' rel='stylesheet' type='text/css' /><![endif]><![endif]--><!--[if IE]><link href='"+i.static_url+"css/livechat/import-ie.css' rel='stylesheet' type='text/css' /><![endif]-->"},this.appendChat=function(){var a=document.createElement("div");a.setAttribute("id","idz_bottompad");var e=document.createElement("div");e.setAttribute("id","idz_chatglobal"),e.setAttribute("class","idz_lang_"+i.curlang),t("body").append(a),t("body").append(e),t("#idz_chatglobal").hide(),t("#idz_bottompad").hide()},this.loadLayout=function(){try{setTimeout(function(){t("#idz_chatglobal").css({left:i.chat.popinLeft,top:i.chat.popinTop}),t("#idz_chatglobal").jqDrag(".jqDrag")},100)}catch(a){}t("#idz_msgmsg").focus(function(){(this.value==i.T("POSER_VOTRE_QUESTION_ICI_UN_CONSEILLER_VOUS_REPONDRA")||this.value==i.T("VOTRE_COMMENTAIRE_LIBRE")||this.value==i.T("POSER_VOTRE_QUESTION_ICI"))&&(this.value="",t(this).removeAttr("style"))})},this.displaySatisfaction=function(){setTimeout(function(){t(".idz_msg_operator,.idz_msg_visitor,.idz_msg_alert_op,.idz_msg_alert_visitor").hide();var a="<div class='idz_msg_alert_op' id='satisfaction_top'><div class='idz_msg_alert_op_footer'></div><div class='idz_msgtime'>"+i.chat.getMsgTime()+"</div>"+"<div class='idz_msgtext'>"+i.T("MSG_ENQUETE_SATISFACTION")+"</div>"+"</div>";a+="<div class='idz_question'><div class='idz_msgsurvey' id='idzq1'><input type='button' name='eval_2_q1' class='eval_2' alt='#idzq1'/><input type='button' name='eval_1_q1' class='eval_1' alt='#idzq1'/><input type='button' name='eval_0_q1' class='eval_0' alt='#idzq1'/></div><div class='idz_msgtext'>"+i.T("SATISFACTION_QUESTION1")+"</div><div class='clearer'></div></div>",a+="<div class='idz_question'><div class='idz_msgsurvey' id='idzq2'><input type='button' name='eval_2_q2' class='eval_2' alt='#idzq2'/><input type='button' name='eval_1_q2' class='eval_1' alt='#idzq2'/><input type='button' name='eval_0_q2' class='eval_0' alt='#idzq2'/></div><div class='idz_msgtext'>"+i.T("SATISFACTION_QUESTION2")+"</div><div class='clearer'></div></div>",a+="<div class='idz_question'><div class='idz_msgsurvey' id='idzq3'><input type='button' name='eval_2_q3' class='eval_2' alt='#idzq3'/><input type='button' name='eval_1_q3' class='eval_1' alt='#idzq3'/><input type='button' name='eval_0_q3' class='eval_0' alt='#idzq3'/></div><div class='idz_msgtext'>"+i.T("SATISFACTION_QUESTION3")+"</div><div class='clearer'></div></div>",i.chat.put_dialog(a),i.preferences.facebook_feedback=="1"&&(idz_tmp={length:0},t(".idz_msgsurvey").click(function(){t("input",this).each(function(a,e){t(e).hasClass("disabled")||t(e).attr("name").replace(/eval_([0-2])_(q[1-3])/,function(){idz_tmp[arguments[2]]=parseInt(arguments[1]),idz_tmp.length++,idz_tmp.length>=3&&(idz_tmp.q1+idz_tmp.q2+idz_tmp.q3>=5?t(".idz_fbshare").length==0&&(i.chat.put_dialog("<div class='idz_fbshare'><input type='checkbox' />"+i.T("PARTAGER_MON_AVIS_SUR_FACEBOOK")+"</div>"),t('.idz_fbshare input[type="checkbox"]').click(function(){this.checked&&window.open("http://www.facebook.com/dialog/feed?app_id=195869327119456&redirect_uri="+encodeURI("http://www.facebook.com")+"&message="+encodeURI(i.T("MESSAGE_PARTAGE_FACEBOOK").replace(/{URL}/g,"http://"+i.website_url)))})):t(".idz_fbshare").remove())})})})),t("#idz_postmsg").addClass("valid"),t("#idz_msgmsg").val(i.T("VOTRE_COMMENTAIRE_LIBRE")),t(".idz_question input").click(function(){var i=t(this).attr("alt");t(i).find("input").addClass("disabled"),t(this).removeAttr("disabled"),t(this).removeClass("disabled"),t(i).attr("rel",t(i+" input").index(this))})},1200)},this.removeSatisfaction=function(){this.hideUI(),setTimeout(function(){t(".idz_msg_alert_op:last,.idz_question").remove(),t(".idz_msg_operator,.idz_msg_visitor,.idz_msg_alert_op,.idz_msg_alert_visitor").show()},500),t("#idz_postmsg").removeClass("valid"),t("#idz_msgmsg").val(""),i.chat.satisfaction=2,i.chatbar_state=2,i.JSONStore.save({satisfaction_status:i.chat.satisfaction,chatbar_state:i.chatbar_state})},this.WizzDialog=function(){i.util.warn("Wizz dialog !")},this.minimizeChatbar=function(){t("#idz_chatbar_mini").css("display")!="table"&&(i.util.warn("minimizeChatbar:"),t("#idz_chatglobal").fadeOut("fast",function(){t("#idz_chatbar_mini").fadeIn("800").fadeOut("800").fadeIn("800").fadeOut("400").fadeIn("400")}),i.chatbar_state=1,i.JSONStore.save({chatbox_state:i.chatbox_state,chat_status:i.chat.status,chatbar_state:i.chatbar_state}))},this.maximizeChatbar=function(){if(i.chatbar_state!=0){var a=t("#idz_chatbar_mini").css("display");("table"==a||"block"==a)&&(i.util.warn("maximizeChatbar:"),t("#idz_chatbar_mini").fadeOut("fast",function(){t("#idz_chatglobal").fadeIn(),i.chat.scroll_dialog(),i.chat.scroll_link()}),i.chatbar_state=0,i.JSONStore.save({chatbox_state:i.chatbox_state,chat_status:i.chat.status,chatbar_state:i.chatbar_state}))}},this.minimizeChatbarHide=function(){},this.restoreState=function(){i.chatbox_state==3&&(i.chatbox_state=2),i.chatbox_state==2&&i.Templates.showDialog();var a=0;i.opWatching==1&&i.opOffline==1&&(a=1),0===a?i.chatbox_state!=4&&i.Templates.showDialog():i.preferences.param_noopconnected!="1"&&i.Templates.showDialog(),i.flags.proactif_showchatbar==1&&i.Templates.showDialog(),i.chatbar_state===1&&(t("#idz_chatglobal").hide(),t("#idz_chatbar_mini").fadeIn()),i.chatbar_state===2&&(i.Templates.hideUI(),i.chat.status==1&&i.preferences.param_opconnected!="1"&&t("#idz_chatbar_mini").fadeIn())},this.showUI=function(){i.firstShow||(i.firstShow=!0,i.callbacks.onChatDisplayed()),i.chat.buildChat(),i.chatbar_state==0?t("#idz_chatglobal").show():i.chatbar_state==1&&t("#idz_chatbar_mini").show()},this.hideUI=function(){t("#idz_chatglobal").hide(),t("#idz_chatbar_mini").hide()},this.showDialog=function(){this.showUI(),t("#idz_chatglobal").show(),t("#idz_chatbar_mini").hide()},this.hideDialog=function(){t("#idz_chatglobal").hide(),t("#idz_chatbar_mini").fadeIn()},this.showOfferPanel=function(){t("#idz_chatbox_left").hasClass("idz_chatbox_leftopen")||(t("#idz_chatbox_left").animate({left:"-177px"},400,"swing",function(){t("#idz_chatbox_left").addClass("idz_chatbox_leftopen")}),i.chat.scroll_link())},this.hideOfferPanel=function(){t("#idz_chatbox_left").hasClass("idz_chatbox_leftopen")&&t("#idz_chatbox_left").animate({left:"0px"},400,"swing",function(){t("#idz_chatbox_left").removeClass("idz_chatbox_leftopen")})},this.putLinkItem=function(a,e,s){var d=i.Templates.itemLink.replace(/\{COUNT\}/g,i.chat.offercount).replace(/\{URL\}/g,a).replace(/\{TARGET\}/g,s).replace(/\{TITLE\}/g,e);t("#idz_chatbox_left_inner ol").append(d),i.Templates.showOfferPanel(),i.chat.offercount++,i.chat.scroll_link()},this.putOfferItem=function(a,e,s){var d=i.util.htmlspecialchars(e).split("|"),c="";if("none"==a)c=d[2]==""?i.Templates.itemOffer.replace(/\{COUNT\}/g,i.chat.offercount).replace(/\{TITLE\}/g,d[0]).replace(/\{IMG\}/g,"").replace(/\{DESC\}/g,d[1]):i.Templates.itemOffer.replace(/\{COUNT\}/g,i.chat.offercount).replace(/\{TITLE\}/g,d[0]).replace(/\{IMG\}/g,"<img src='"+i.chaturl+"images/resizer.php?maxh=55&imgfile="+d[2]+"' alt='"+d[0]+"'>").replace(/\{DESC\}/g,d[1]);else var c=i.Templates.itemOffer.replace(/\{COUNT\}/g,i.chat.offercount).replace(/\{TITLE\}/g,"<a href='"+a+"' "+s+">"+d[0]+"</a>").replace(/\{IMG\}/g,"<a href='"+a+"' "+s+"><img src='"+i.chaturl+"images/resizer.php?maxh=55&imgfile="+d[2]+"' alt='"+d[0]+"'></a>").replace(/\{DESC\}/g,d[1]);t("#idz_chatbox_left_inner ol").append(c),i.Templates.showOfferPanel(),i.chat.offercount++,i.chat.scroll_link()}}}(iAdvize,iAdvize.$);