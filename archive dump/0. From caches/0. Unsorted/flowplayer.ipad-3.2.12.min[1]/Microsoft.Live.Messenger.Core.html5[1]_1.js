(function(){__MSLiveCore__.Loader.onResourceAvailable("microsoft_live_messenger_core_html5",function(){var p=window,h=window.Sys,r=function(){function a(a,b){var c,d,e;if(b){if(c=this.__lowerCaseValues,!c){this.__lowerCaseValues=c={};e=this.prototype;for(var f in e)c[f.toLowerCase()]=e[f]}}else c=this.prototype;if(this.__flags){e=(b?a.toLowerCase():a).split(",");f=0;for(var g=e.length-1;0<=g;g--){d=e[g].trim();d=c[d];if(typeof d!==v)throw Error.argument("value",String.format(h.Res.enumInvalidValue,a.split(",")[g].trim(),
this.__typeName));f|=d}return f}e=b?a.toLowerCase():a;d=c[e.trim()];if(typeof d!==v)throw Error.argument("value",String.format(h.Res.enumInvalidValue,a,this.__typeName));return d}function b(a){if(typeof a===l||a===j)return this.__string;var b=this.prototype,c;if(!this.__flags||0===a)for(c in b){if(b[c]===a)return c}else{var e=this.__sortedValues;if(!e){e=[];for(c in b)e[e.length]={key:c,value:b[c]};e.sort(function(a,b){return a.value-b.value});this.__sortedValues=e}var b=[],f=a;for(c=e.length-1;0<=
c;c--){var g=e[c],h=g.value;if(0!==h&&(h&a)===h&&(b[b.length]=g.key,f-=h,0===f))break}if(b.length&&0===f)return b.reverse().join(", ")}return d}function c(a){this._path=a}var d="";h._foreach=u;h._forIn=D;h._merge=E;h._callIf=x;Function.__typeName="Function";Function.__class=k;Function.createCallback=function(a,b){return function(){var c=arguments.length;if(0<c){for(var d=[],e=0;e<c;e++)d[e]=arguments[e];d[c]=b;return a.apply(this,d)}return a.call(this,b)}};Function.createDelegate=function(a,b){return function(){return b.apply(a,
arguments)}};Function.emptyFunction=Function.emptyMethod=function(){};Function.validateParameters=function(a,b,c){return Function._validateParams(a,b,c)};Function._validateParams=function(a,b,c){var d,e=b.length,c=c!==o;if(d=Function._validateParameterCount(a,b,c))return d.popStackFrame(),d;for(var f=0,g=a.length;f<g;f++){d=b[Math.min(f,e-1)];var h=d.name;if(d.parameterArray)h+="["+(f-e+1)+"]";else if(!c&&f>=e)break;if(d=Function._validateParameter(a[f],d,h))return d.popStackFrame(),d}return j};Function._validateParameterCount=
function(a,b,c){var d,e=b.length,a=a.length;if(a<e){for(var f=e,c=0;c<e;c++){var g=b[c];(g.optional||g.parameterArray)&&f--}a<f&&(d=k)}else if(c&&a>e){d=k;for(c=0;c<e;c++)if(b[c].parameterArray){d=o;break}}return d?(b=Error.parameterCount(),b.popStackFrame(),b):j};Function._validateParameter=function(a,b,c){var d,e=b.type;if(d=Function._validateParameterType(a,e,!!b.integer,!!b.domElement,!!b.mayBeNull,c))return d.popStackFrame(),d;var f=b.elementType,g=!!b.elementMayBeNull;if(e===Array&&typeof a!==
l&&a!==j&&(f||!g))for(var e=!!b.elementInteger,b=!!b.elementDomElement,h=0;h<a.length;h++)if(d=Function._validateParameterType(a[h],f,e,b,g,c+"["+h+"]"))return d.popStackFrame(),d;return j};Function._validateParameterType=function(a,b,c,d,e,f){var g;if(typeof a===l){if(e)return j;a=Error.argumentUndefined(f);a.popStackFrame();return a}if(a===j){if(e)return j;a=Error.argumentNull(f);a.popStackFrame();return a}if(b&&b.__enum){if(typeof a!==v)return a=Error.argumentType(f,Object.getType(a),b),a.popStackFrame(),
a;if(0===a%1)if(c=b.prototype,!b.__flags||0===a)for(g in c){if(c[g]===a)return j}else for(g in d=a,c)if(e=c[g],0!==e&&((e&a)===e&&(d-=e),0===d))return j;a=Error.argumentOutOfRange(f,a,String.format(h.Res.enumInvalidValue,a,b.getName()));a.popStackFrame();return a}return d&&(!h._isDomElement(a)||3===a.nodeType)?(a=Error.argument(f,h.Res.argumentDomElement),a.popStackFrame(),a):b&&!h._isInstanceOfType(b,a)?(a=Error.argumentType(f,Object.getType(a),b),a.popStackFrame(),a):b===Number&&c&&0!==a%1?(a=Error.argumentOutOfRange(f,
a,h.Res.argumentInteger),a.popStackFrame(),a):j};Error.__typeName="Error";Error.__class=k;Error.create=function(a,b){var c=Error(a);c.message=a;if(b)for(var d in b)c[d]=b[d];c.popStackFrame();return c};Error.argument=function(a,b){var c="Sys.ArgumentException: "+(b?b:h.Res.argument);a&&(c+="\n"+String.format(h.Res.paramName,a));c=Error.create(c,{name:"Sys.ArgumentException",paramName:a});c.popStackFrame();return c};Error.argumentNull=function(a,b){var c="Sys.ArgumentNullException: "+(b?b:h.Res.argumentNull);
a&&(c+="\n"+String.format(h.Res.paramName,a));c=Error.create(c,{name:"Sys.ArgumentNullException",paramName:a});c.popStackFrame();return c};Error.argumentOutOfRange=function(a,b,c){c="Sys.ArgumentOutOfRangeException: "+(c?c:h.Res.argumentOutOfRange);a&&(c+="\n"+String.format(h.Res.paramName,a));typeof b!==l&&b!==j&&(c+="\n"+String.format(h.Res.actualValue,b));a=Error.create(c,{name:"Sys.ArgumentOutOfRangeException",paramName:a,actualValue:b});a.popStackFrame();return a};Error.argumentType=function(a,
b,c,d){var e="Sys.ArgumentTypeException: ",e=d?e+d:b&&c?e+String.format(h.Res.argumentTypeWithTypes,b.getName(),c.getName()):e+h.Res.argumentType;a&&(e+="\n"+String.format(h.Res.paramName,a));a=Error.create(e,{name:"Sys.ArgumentTypeException",paramName:a,actualType:b,expectedType:c});a.popStackFrame();return a};Error.argumentUndefined=function(a,b){var c="Sys.ArgumentUndefinedException: "+(b?b:h.Res.argumentUndefined);a&&(c+="\n"+String.format(h.Res.paramName,a));c=Error.create(c,{name:"Sys.ArgumentUndefinedException",
paramName:a});c.popStackFrame();return c};Error.format=function(a){a=Error.create("Sys.FormatException: "+(a?a:h.Res.format),{name:"Sys.FormatException"});a.popStackFrame();return a};Error.invalidOperation=function(a){a=Error.create("Sys.InvalidOperationException: "+(a?a:h.Res.invalidOperation),{name:"Sys.InvalidOperationException"});a.popStackFrame();return a};Error.notImplemented=function(a){a=Error.create("Sys.NotImplementedException: "+(a?a:h.Res.notImplemented),{name:"Sys.NotImplementedException"});
a.popStackFrame();return a};Error.parameterCount=function(a){a=Error.create("Sys.ParameterCountException: "+(a?a:h.Res.parameterCount),{name:"Sys.ParameterCountException"});a.popStackFrame();return a};Error.prototype.popStackFrame=function(){if(!(typeof this.stack===l||this.stack===j||typeof this.fileName===l||this.fileName===j||typeof this.lineNumber===l||this.lineNumber===j)){for(var a=this.stack.split("\n"),b=a[0],c=this.fileName+":"+this.lineNumber;typeof b!==l&&b!==j&&-1===b.indexOf(c);)a.shift(),
b=a[0];b=a[1];typeof b===l||b===j||(b=b.match(/@(.*):(\d+)$/),typeof b===l||b===j||(this.fileName=b[1],this.lineNumber=parseInt(b[2]),a.shift(),this.stack=a.join("\n")))}};Object.__typeName="Object";Object.__class=k;Object.getType=function(a){a=a.constructor;return!a||typeof a!==w||!a.__typeName||"Object"===a.__typeName?Object:a};Object.getTypeName=function(a){return Object.getType(a).getName()};String.__typeName="String";String.__class=k;String.prototype.endsWith=function(a){return this.substr(this.length-
a.length)===a};String.prototype.startsWith=function(a){return this.substr(0,a.length)===a};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,d)};String.prototype.trimEnd=function(){return this.replace(/\s+$/,d)};String.prototype.trimStart=function(){return this.replace(/^\s+/,d)};String.format=function(){return String._toFormattedString(o,arguments)};String._toFormattedString=function(a,b){for(var c=d,e=b[0],f=0;k;){var g=e.indexOf("{",f),h=e.indexOf("}",f);if(0>g&&0>h){c+=e.slice(f);
break}if(0<h&&(h<g||0>g))c+=e.slice(f,h+1),f=h+2;else if(c+=e.slice(f,g),f=g+1,"{"===e.charAt(f))c+="{",f++;else{if(0>h)break;var g=e.substring(f,h),i=g.indexOf(":"),f=parseInt(0>i?g:g.substring(0,i),10)+1,g=0>i?d:g.substring(i+1),f=b[f];if(typeof f===l||f===j)f=d;c=f.toFormattedString?c+f.toFormattedString(g):a&&f.localeFormat?c+f.localeFormat(g):f.format?c+f.format(g):c+f.toString();f=h+1}}return c};Boolean.__typeName="Boolean";Boolean.__class=k;Boolean.parse=function(a){a=a.trim().toLowerCase();
if("false"===a)return o;if("true"===a)return k};Date.__typeName="Date";Date.__class=k;Number.__typeName="Number";Number.__class=k;RegExp.__typeName="RegExp";RegExp.__class=k;p||(this.window=this);p.Type=Function;Type.prototype.callBaseMethod=function(a,b,c){b=h._getBaseMethod(this,a,b);return c?b.apply(a,c):b.apply(a)};Type.prototype.getBaseMethod=function(a,b){return h._getBaseMethod(this,a,b)};Type.prototype.getBaseType=function(){return typeof this.__baseType===l?j:this.__baseType};Type.prototype.getInterfaces=
function(){for(var a=[],b=this;b;){var c=b.__interfaces;if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];Array.contains(a,f)||(a[a.length]=f)}b=b.__baseType}return a};Type.prototype.getName=function(){return typeof this.__typeName===l?d:this.__typeName};Type.prototype.implementsInterface=function(a){this.resolveInheritance();var b=a.getName(),c=this.__interfaceCache;if(c){var d=c[b];if(typeof d!==l)return d}else c=this.__interfaceCache={};for(d=this;d;){var e=d.__interfaces;if(e&&Array.indexOf(e,a)!==
-1)return c[b]=k;d=d.__baseType}return c[b]=o};Type.prototype.inheritsFrom=function(a){this.resolveInheritance();return h._inheritsFrom(this,a)};h._inheritsFrom=function(a,b){var c;if(b)for(var d=a.__baseType;d;){if(d===b){c=k;break}d=d.__baseType}return!!c};Type.prototype.initializeBase=function(a,b){this.resolveInheritance();this.__baseType&&(b?this.__baseType.apply(a,b):this.__baseType.apply(a));return a};Type.prototype.isImplementedBy=function(a){if(typeof a===l||a===j)return o;a=Object.getType(a);
return!(!a.implementsInterface||!a.implementsInterface(this))};Type.prototype.isInstanceOfType=function(a){return h._isInstanceOfType(this,a)};Type.prototype.registerClass=function(a,b,c){this.prototype.constructor=this;this.__typeName=a;this.__class=k;if(b){this.__baseType=b;this.__basePrototypePending=k}h.__upperCaseTypes[a.toUpperCase()]=this;if(c){this.__interfaces=[];for(var d=2,e=arguments.length;d<e;d++)this.__interfaces.push(arguments[d])}return this};h.registerComponent=function(a,b){var c=
a.getName(),d=h.UI&&(h._inheritsFrom(a,h.UI.Control)||h._inheritsFrom(a,h.UI.Behavior)),e=b&&b.name;if(!e){var e=c,f=e.lastIndexOf(y);if(f>=0)if((e=e.substr(f+1))&&e.charAt(0)==="_")return;e=e.substr(0,1).toLowerCase()+e.substr(1)}b||(b={});b.name=e;b.type=a;b.typeName=c;b._isBehavior=d;h.components[e]=E(h.components[e],b);f=(c=h.create[e])&&c.defaults;h.create[e]=c=h._getCreate(a,d,b);c.defaults=f||j;c._component=b;if(p.jQuery){var g=d?jQuery.fn:jQuery,f=(c=g[e])&&c.defaults;g[e]=c=h._getCreate(a,
d,b,k);c.defaults=f||j;c._component=b}};h._getCreate=function(a,b,c,d){return b&&d?function(){var a=arguments.callee,b=a._component,c=a.defaults,d=Array.prototype.slice.call(arguments,0);d.splice(0,0,j);return this.each(function(){d[0]=this;h._createComp(b,c,d)})}:function(){var a=arguments.callee;return h._createComp(a._component,a.defaults,arguments)}};h.registerPlugin=function(a){var b=a.name;h.plugins[b]=E(h.plugins[b],a);h[b]=a.plugin;p.jQuery&&(jQuery[b]=h[b])};h._createComp=function(a,b,c){var d=
a.parameters||[],e=a._isBehavior,f=e?c[0]:j,g=e?1:0,i=c[d.length+g]||{},i=E({},b,i);u(d,function(a,b){var d=typeof a===z?a:a.name,e=c[b+g];typeof e!==l&&typeof i[d]===l&&(i[d]=e)});return e?h._create(a.type,i,f):h._create(a.type,i)};h._create=function(a,b,c){var d=typeof c;d===z&&(c=h.get(c));var e;h._2Pass(function(){e=d===l?new a:new a(c);x(e,"beginUpdate");h._setProps(e,b);var f=h.Component;if(!f||!f._register(e))x(e,"endUpdate")||x(e,"initialize")});return e};h._setProps=function(a,b){D(b,function(b,
c){x(a,"add_"+c,b)||x(a,"set_"+c,b)||(a[c]=b)})};Type.prototype.registerInterface=function(a){h.__upperCaseTypes[a.toUpperCase()]=this;this.prototype.constructor=this;this.__typeName=a;this.__interface=k;return this};Type.prototype.resolveInheritance=function(){if(this.__basePrototypePending){var a=this.__baseType;a.resolveInheritance();for(var b in a.prototype){var c=a.prototype[b];this.prototype[b]||(this.prototype[b]=c)}delete this.__basePrototypePending}};Type.getRootNamespaces=function(){return Array.clone(h.__rootNamespaces)};
Type.isClass=function(a){return typeof a===l||a===j?o:!!a.__class};Type.isInterface=function(a){return typeof a===l||a===j?o:!!a.__interface};Type.isNamespace=function(a){return typeof a===l||a===j?o:!!a.__namespace};Type.parse=function(a,b){var c;if(b)return(c=h.__upperCaseTypes[b.getName().toUpperCase()+y+a.toUpperCase()])||j;if(!a)return j;if(!Type.__htClasses)Type.__htClasses={};c=Type.__htClasses[a];if(!c){c=p.eval(a);Type.__htClasses[a]=c}return c};Type.registerNamespace=function(a){Type._registerNamespace(a)};
Type._registerNamespace=function(a){for(var b=p,c=a.split(y),d=0,e=c.length;d<e;d++){var f=c[d],g=b[f];g||(g=b[f]={});if(!g.__namespace){!d&&a!=="Sys"&&h.__rootNamespaces.push(g);g.__namespace=k;g.__typeName=c.slice(0,d+1).join(y);g.getName=function(){return this.__typeName}}b=g}};Type._checkDependency=function(a,b){var c=Type._registerScript._scripts,c=c?!!c[a]:o;if(typeof b!==l&&!c)throw Error.invalidOperation(String.format(h.Res.requiredScriptReferenceNotIncluded,b,a));return c};Type._registerScript=
function(a,b){var c=Type._registerScript._scripts;if(!c)Type._registerScript._scripts=c={};if(c[a])throw Error.invalidOperation(String.format(h.Res.scriptAlreadyLoaded,a));c[a]=k;if(b)for(var c=0,d=b.length;c<d;c++){var e=b[c];if(!Type._checkDependency(e))throw Error.invalidOperation(String.format(h.Res.scriptDependencyNotFound,a,e));}};Type._registerNamespace("Sys");h.__upperCaseTypes||(h.__upperCaseTypes={});h.__rootNamespaces||(h.__rootNamespaces=[h]);h._isInstanceOfType=function(a,b){if(typeof b===
l||b===j)return o;if(b instanceof a)return k;var c=Object.getType(b);return c===a||c.inheritsFrom&&c.inheritsFrom(a)||c.implementsInterface&&c.implementsInterface(a)};h._getBaseMethod=function(a,b,c){if(a=a.getBaseType()){c=a.prototype[c];return c instanceof Function?c:j}return j};h._isDomElement=function(a){var b=o;if(typeof a.nodeType!==v){b=a.ownerDocument||a.document||a;b=b!=a?(b.defaultView||b.parentWindow)!=a:!b.body||!h._isDomElement(b.body)}return!b};h._isBrowser=function(a){return h.Browser.agent===
h.Browser[a]};u(h._ns,Type._registerNamespace);delete h._ns;Array.__typeName="Array";Array.__class=k;Array.add=Array.enqueue=function(a,b){a[a.length]=b};Array.addRange=function(a,b){a.push.apply(a,b)};Array.clear=function(a){a.length=0};Array.clone=function(a){return a.length===1?[a[0]]:Array.apply(j,a)};Array.contains=function(a,b){return e(a,b)>=0};Array.dequeue=function(a){return a.shift()};Array.forEach=function(a,b,c){for(var d=0,e=a.length;d<e;d++){var f=a[d];typeof f!==l&&b.call(c,f,d,a)}};
Array.indexOf=function(a,b,c){return e(a,b,c)};Array.insert=function(a,b,c){a.splice(b,0,c)};Array.parse=function(a){return!a?[]:p.eval("("+a+")")};Array.remove=function(a,b){var c=e(a,b);c>=0&&a.splice(c,1);return c>=0};Array.removeAt=function(a,b){a.splice(b,1)};var e=h._indexOf=function(a,b,c){if(typeof b===l)return-1;var d=a.length;if(d!==0){c=c-0;if(isNaN(c))c=0;else{isFinite(c)&&(c=c-c%1);c<0&&(c=Math.max(0,d+c))}for(;c<d;c++)if(typeof a[c]!==l&&a[c]===b)return c}return-1};Type._registerScript("MicrosoftAjaxCore.js");
h.IDisposable=function(){};h.IDisposable.registerInterface("Sys.IDisposable");h.StringBuilder=function(a){this._parts=typeof a!==l&&a!==j&&a!==d?[a.toString()]:[];this._value={};this._len=0};h.StringBuilder.prototype={append:function(a){this._parts.push(a);return this},appendLine:function(a){this._parts.push(typeof a===l||a===j||a===d?"\r\n":a+"\r\n");return this},clear:function(){this._parts=[];this._value={};this._len=0},isEmpty:function(){return this._parts.length===0?k:this.toString()===d},toString:function(a){var a=
a||d,b=this._parts;if(this._len!==b.length){this._value={};this._len=b.length}var c=this._value;if(typeof c[a]===l){if(a!==d)for(var e=0;e<b.length;)typeof b[e]===l||b[e]===d||b[e]===j?b.splice(e,1):e++;c[a]=this._parts.join(a)}return c[a]}};h.StringBuilder.registerClass("Sys.StringBuilder");var f=navigator.userAgent,g=h.Browser={InternetExplorer:{},Firefox:{},Safari:{},Opera:{},agent:j,hasDebuggerStatement:o,name:navigator.appName,version:parseFloat(navigator.appVersion),documentMode:0};-1<f.indexOf(" MSIE ")?
(g.agent=g.InternetExplorer,g.version=parseFloat(f.match(/MSIE (\d+\.\d+)/)[1]),7<g.version&&6<document.documentMode&&(g.documentMode=document.documentMode),g.hasDebuggerStatement=k):-1<f.indexOf(" Firefox/")?(g.agent=g.Firefox,g.version=parseFloat(f.match(/ Firefox\/(\d+\.\d+)/)[1]),g.name="Firefox",g.hasDebuggerStatement=k):-1<f.indexOf(" AppleWebKit/")?(g.agent=g.Safari,g.version=parseFloat(f.match(/ AppleWebKit\/(\d+(\.\d+)?)/)[1]),g.name="Safari"):-1<f.indexOf("Opera/")&&(g.agent=g.Opera);h.EventArgs=
function(){};h.EventArgs.registerClass("Sys.EventArgs");h.EventArgs.Empty=new h.EventArgs;h.CancelEventArgs=function(){h.CancelEventArgs.initializeBase(this);this._cancel=o};h.CancelEventArgs.prototype={get_cancel:function(){return this._cancel},set_cancel:function(a){this._cancel=a}};h.CancelEventArgs.registerClass("Sys.CancelEventArgs",h.EventArgs);h.EventHandlerList=function(){this._list={}};h.EventHandlerList.prototype={_addHandler:function(a,b){Array.add(this._getEvent(a,k),b)},addHandler:function(a,
b){this._addHandler(a,b)},_removeHandler:function(a,b){var c=this._getEvent(a);c&&Array.remove(c,b)},_removeHandlers:function(a){if(a){if(a=this._getEvent(a))a.length=0}else this._list={}},removeHandler:function(a,b){this._removeHandler(a,b)},getHandler:function(a){var b=this._getEvent(a);if(!b||b.length===0)return j;b=Array.clone(b);return function(a,c){for(var d=0,e=b.length;d<e;d++)b[d](a,c)}},_getEvent:function(a,b){if(!this._list[a]){if(!b)return j;this._list[a]=[]}return this._list[a]}};h.EventHandlerList.registerClass("Sys.EventHandlerList");
Type.registerNamespace("Sys.UI");h._Debug=function(){};h._Debug.prototype={_appendConsole:function(a){typeof Debug!==l&&Debug.writeln&&Debug.writeln(a);p.console&&p.console.log&&p.console.log(a);p.opera&&p.opera.postError(a);p.debugService&&p.debugService.trace(a)},_appendTrace:function(a){var b=h.get("#TraceConsole");if(b&&b.tagName.toUpperCase()==="TEXTAREA")b.value=b.value+(a+"\n")},assert:function(a,b,c){if(!a){b=c&&this.assert.caller?String.format(h.Res.assertFailedCaller,b,this.assert.caller):
String.format(h.Res.assertFailed,b);confirm(String.format(h.Res.breakIntoDebugger,b))&&this.fail(b)}},clearTrace:function(){var a=h.get("#TraceConsole");if(a&&a.tagName.toUpperCase()==="TEXTAREA")a.value=d},fail:function(a){this._appendConsole(a);h.Browser.hasDebuggerStatement&&p.eval("debugger")},trace:function(a){this._appendConsole(a);this._appendTrace(a)},traceDump:function(a,b){this._traceDump(a,b,k)},_traceDump:function(a,b,c,e,f){b=b?b:"traceDump";e=e?e:d;if(a===j)this.trace(e+b+": null");
else switch(typeof a){case l:this.trace(e+b+": Undefined");break;case v:case z:case "boolean":this.trace(e+b+": "+a);break;default:if(Date.isInstanceOfType(a)||RegExp.isInstanceOfType(a)){this.trace(e+b+": "+a.toString());break}if(f){if(Array.contains(f,a)){this.trace(e+b+": ...");break}}else f=[];Array.add(f,a);if(a==p||a===document||p.HTMLElement&&a instanceof HTMLElement||typeof a.nodeName===z){c=a.tagName?a.tagName:"DomElement";a.id&&(c=c+(" - "+a.id));this.trace(e+b+" {"+c+"}")}else{var g=Object.getTypeName(a);
this.trace(e+b+(typeof g===z?" {"+g+"}":d));if(e===d||c){var e=e+"    ",h;if(Array.isInstanceOfType(a)){h=a.length;for(b=0;b<h;b++)this._traceDump(a[b],"["+b+"]",c,e,f)}else for(h in a){b=a[h];Function.isInstanceOfType(b)||this._traceDump(b,h,c,e,f)}}}Array.remove(f,a)}}};h._Debug.registerClass("Sys._Debug");h.Debug=new h._Debug;h.Debug.isDebug=o;Type.prototype.registerEnum=function(c,d){h.__upperCaseTypes[c.toUpperCase()]=this;for(var e in this.prototype)this[e]=this.prototype[e];this.__typeName=
c;this.parse=a;this.__string=this.toString();this.toString=b;this.__flags=d;this.__enum=k};Type.isEnum=function(a){return typeof a===l||a===j?o:!!a.__enum};Type.isFlags=function(a){return typeof a===l||a===j?o:!!a.__flags};h.CollectionChange=function(a,b,c,d,e){this.action=a;b&&(b instanceof Array||(b=[b]));this.newItems=b||j;typeof c!==v&&(c=-1);this.newStartingIndex=c;d&&(d instanceof Array||(d=[d]));this.oldItems=d||j;typeof e!==v&&(e=-1);this.oldStartingIndex=e};h.CollectionChange.registerClass("Sys.CollectionChange");
h.NotifyCollectionChangedAction=function(){};h.NotifyCollectionChangedAction.prototype={add:0,remove:1,reset:2};h.NotifyCollectionChangedAction.registerEnum("Sys.NotifyCollectionChangedAction");h.NotifyCollectionChangedEventArgs=function(a){this._changes=a;h.NotifyCollectionChangedEventArgs.initializeBase(this)};h.NotifyCollectionChangedEventArgs.prototype={get_changes:function(){return this._changes||[]}};h.NotifyCollectionChangedEventArgs.registerClass("Sys.NotifyCollectionChangedEventArgs",h.EventArgs);
h.INotifyPropertyChange=function(){};h.INotifyPropertyChange.registerInterface("Sys.INotifyPropertyChange");h.PropertyChangedEventArgs=function(a){h.PropertyChangedEventArgs.initializeBase(this);this._propertyName=a};h.PropertyChangedEventArgs.prototype={get_propertyName:function(){return this._propertyName}};h.PropertyChangedEventArgs.registerClass("Sys.PropertyChangedEventArgs",h.EventArgs);h.Observer=function(){};h.Observer.registerClass("Sys.Observer");h.Observer.makeObservable=function(a){var b=
a instanceof Array,c=h.Observer;if(a.setValue===c._observeMethods.setValue)return a;c._addMethods(a,c._observeMethods);b&&c._addMethods(a,c._arrayMethods);return a};h.Observer._addMethods=function(a,b){for(var c in b)a[c]=b[c]};h.Observer._addEventHandler=function(a,b,c){h.Observer._getContext(a,k).events._addHandler(b,c)};h.Observer.addEventHandler=function(a,b,c){h.Observer._addEventHandler(a,b,c)};h.Observer._removeEventHandler=function(a,b,c){h.Observer._getContext(a,k).events._removeHandler(b,
c)};h.Observer.removeEventHandler=function(a,b,c){h.Observer._removeEventHandler(a,b,c)};h.Observer.clearEventHandlers=function(a,b){h.Observer._getContext(a,k).events._removeHandlers(b)};h.Observer.raiseEvent=function(a,b,c){var d=h.Observer._getContext(a);if(d)(b=d.events.getHandler(b))&&b(a,c||h.EventArgs.Empty)};h.Observer.addPropertyChanged=function(a,b){h.Observer._addEventHandler(a,"propertyChanged",b)};h.Observer.removePropertyChanged=function(a,b){h.Observer._removeEventHandler(a,"propertyChanged",
b)};h.Observer.beginUpdate=function(a){h.Observer._getContext(a,k).updating=k};h.Observer.endUpdate=function(a){var b=h.Observer._getContext(a);if(b&&b.updating){b.updating=o;var c=b.dirty;b.dirty=o;if(c){if(a instanceof Array){c=b.changes;b.changes=j;h.Observer.raiseCollectionChanged(a,c)}h.Observer.raisePropertyChanged(a,d)}}};h.Observer.isUpdating=function(a){return(a=h.Observer._getContext(a))?a.updating:o};h.Observer._setValue=function(a,b,c){for(var d,e=a,f=b.split(y),g=0,i=f.length-1;g<i;g++){var n=
f[g];d=a["get_"+n];a=typeof d===w?d.call(a):a[n];d=typeof a;if(a===j||d===l)throw Error.invalidOperation(String.format(h.Res.nullReferenceInPath,b));}g=f[i];d=a["get_"+g];b=a["set_"+g];d=typeof d===w?d.call(a):a[g];typeof b===w?b.call(a,c):a[g]=c;if(d!==c)(a=h.Observer._getContext(e))&&a.updating?a.dirty=k:h.Observer.raisePropertyChanged(e,f[0])};h.Observer.setValue=function(a,b,c){h.Observer._setValue(a,b,c)};h.Observer.raisePropertyChanged=function(a,b){h.Observer.raiseEvent(a,"propertyChanged",
new h.PropertyChangedEventArgs(b))};h.Observer.addCollectionChanged=function(a,b){h.Observer._addEventHandler(a,"collectionChanged",b)};h.Observer.removeCollectionChanged=function(a,b){h.Observer._removeEventHandler(a,"collectionChanged",b)};h.Observer._collectionChange=function(a,b){var c=h.Observer._getContext(a);if(c&&c.updating){c.dirty=k;var d=c.changes;d?d.push(b):c.changes=[b]}else{h.Observer.raiseCollectionChanged(a,[b]);h.Observer.raisePropertyChanged(a,"length")}};h.Observer.add=function(a,
b){var c=new h.CollectionChange(h.NotifyCollectionChangedAction.add,[b],a.length);Array.add(a,b);h.Observer._collectionChange(a,c)};h.Observer.addRange=function(a,b){var c=new h.CollectionChange(h.NotifyCollectionChangedAction.add,b,a.length);Array.addRange(a,b);h.Observer._collectionChange(a,c)};h.Observer.clear=function(a){var b=Array.clone(a);Array.clear(a);h.Observer._collectionChange(a,new h.CollectionChange(h.NotifyCollectionChangedAction.reset,j,-1,b,0))};h.Observer.insert=function(a,b,c){Array.insert(a,
b,c);h.Observer._collectionChange(a,new h.CollectionChange(h.NotifyCollectionChangedAction.add,[c],b))};h.Observer.remove=function(a,b){var c=Array.indexOf(a,b);if(c!==-1){Array.remove(a,b);h.Observer._collectionChange(a,new h.CollectionChange(h.NotifyCollectionChangedAction.remove,j,-1,[b],c));return k}return o};h.Observer.removeAt=function(a,b){if(b>-1&&b<a.length){var c=a[b];Array.removeAt(a,b);h.Observer._collectionChange(a,new h.CollectionChange(h.NotifyCollectionChangedAction.remove,j,-1,[c],
b))}};h.Observer.raiseCollectionChanged=function(a,b){h.Observer.raiseEvent(a,"collectionChanged",new h.NotifyCollectionChangedEventArgs(b))};h.Observer._observeMethods={add_propertyChanged:function(a){h.Observer._addEventHandler(this,"propertyChanged",a)},remove_propertyChanged:function(a){h.Observer._removeEventHandler(this,"propertyChanged",a)},addEventHandler:function(a,b){h.Observer._addEventHandler(this,a,b)},removeEventHandler:function(a,b){h.Observer._removeEventHandler(this,a,b)},clearEventHandlers:function(a){h.Observer._getContext(this,
k).events._removeHandlers(a)},get_isUpdating:function(){return h.Observer.isUpdating(this)},beginUpdate:function(){h.Observer.beginUpdate(this)},endUpdate:function(){h.Observer.endUpdate(this)},setValue:function(a,b){h.Observer._setValue(this,a,b)},raiseEvent:function(a,b){h.Observer.raiseEvent(this,a,b||j)},raisePropertyChanged:function(a){h.Observer.raiseEvent(this,"propertyChanged",new h.PropertyChangedEventArgs(a))}};h.Observer._arrayMethods={add_collectionChanged:function(a){h.Observer._addEventHandler(this,
"collectionChanged",a)},remove_collectionChanged:function(a){h.Observer._removeEventHandler(this,"collectionChanged",a)},add:function(a){h.Observer.add(this,a)},addRange:function(a){h.Observer.addRange(this,a)},clear:function(){h.Observer.clear(this)},insert:function(a,b){h.Observer.insert(this,a,b)},remove:function(a){return h.Observer.remove(this,a)},removeAt:function(a){h.Observer.removeAt(this,a)},raiseCollectionChanged:function(a){h.Observer.raiseEvent(this,"collectionChanged",new h.NotifyCollectionChangedEventArgs(a))}};
h.Observer._getContext=function(a,b){var c=a._observerContext;return c?c():b?(a._observerContext=h.Observer._createContext())():j};h.Observer._createContext=function(){var a={events:new h.EventHandlerList};return function(){return a}};Type.registerNamespace("Sys.Services");f=h.Services;f.AuthenticationService={set_path:c,_setAuthenticated:function(a){this._auth=a}};f._AuthenticationService={};f.ProfileService={set_path:c};f._ProfileService={};f.ProfileGroup=function(a){this._propertygroup=a};f.RoleService=
{set_path:c};f._RoleService={}},z="string",y=".",o=!1,j=null,k=!0,l="undefined",w="function",v="number",E=function(a){a=a||{};u(arguments,function(b){b&&D(b,function(b,d){a[d]=b})},1);return a},D=function(a,b){for(var c in a)b(a[c],c)},u=function(a,b,c){var d;if(a)for(var a=a instanceof Array||typeof a.length===v&&(typeof a.callee===w||a.item&&typeof a.nodeType===l&&!a.addEventListener&&!a.attachEvent)?a:[a],c=c||0,e=a.length;c<e;c++)if(b(a[c],c)){d=k;break}return!d},x=function(a,b,c){var b=a[b],
d=typeof b===w;d&&b.call(a,c);return d};if(!h||!h.loader){var F=!!document.attachEvent,N=function(a,b){var c=a[b];delete a[b];return c},G=function(a,b,c,d,e,f){function g(){if(!F||!e||/loaded|complete/.test(a.readyState))F?a.detachEvent(c||"on"+b,g):(a.removeEventListener(b,g,o),f&&a.removeEventListener("error",g,o)),d.apply(a),a=j}F?a.attachEvent(c||"on"+b,g):(a.addEventListener(b,g,o),f&&a.addEventListener("error",g,o))},O=function(){h._domReady&&h._2Pass(N(h,"_domReadyQueue"))},P=function(){var a=
h._ready;if(!a&&h._domReady&&(!h.loader||!h.loader._loading))h._ready=a=k;a&&h._2Pass(N(h,"_readyQueue"))};p.Sys=h=function(a){a=a||{};u(arguments,function(b){b&&D(b,function(b,d){typeof a[d]===l&&(a[d]=b)})},1);return a}(h,{version:[3,0,31106,0],debug:o,scripts:{},activateDom:k,composites:{},components:{},plugins:{},create:{},converters:{},_domLoaded:function(){function a(){h._domReady||(h._domReady=k,O(),P())}G(p,"load",j,a);var b;if(F)if(p==p.top&&document.documentElement.doScroll){var c=document.createElement("div");
b=function(){try{c.doScroll("left")}catch(d){p.setTimeout(b,0);return}c=j;a()};b()}else G(document,j,"onreadystatechange",a,k);else document.addEventListener&&G(document,"DOMContentLoaded",j,a)},_getById:function(a,b,c,d,e){e?d&&e.id===b?a[0]=e:u((e||document).getElementsByTagName("*"),function(c){if(c.id===b)return a[0]=c,k}):(c=document.getElementById(b))&&(a[0]=c);return a.length},_getByClass:function(a,b,c,d,e){function f(c){var d,e=c.className;if(e&&(e===b||0<=e.indexOf(" "+b)||0<=e.indexOf(b+
" ")))a.push(c),d=k;return d}var g;if(d&&f(e)&&c)return k;e=e||document;if(d=e.querySelectorAll||e.getElementsByClassName){e.querySelectorAll&&(b=y+b);g=d.call(e,b);e=0;for(d=g.length;e<d;e++)if(a.push(g[e]),c)return k}else{g=(e||document).getElementsByTagName("*");e=0;for(d=g.length;e<d;e++)if(f(g[e])&&c)return k}},query:function(a,b){return b&&typeof b.query===w?b.query(a):this._find(a,b)},get:function(a,b){return b&&typeof b.get===w?b.get(a):this._find(a,b,k)},_find:function(a,b,c){var d=[];if(typeof a!==
z)d.push(a);else{var e=b instanceof Array,f=/^([\$#\.])((\w|[$:\.\-])+)$/.exec(a);if(f&&4===f.length)if(a=f[2],f=f[1],"$"===f)h._getComponent(d,a,b);else{var g="#"===f?h._getById:h._getByClass;b?u(b,function(b){if(1===b.nodeType)return g(d,a,c,e,b)}):g(d,a,c)}else if(/^\w+$/.test(a))if(e)u(b,function(b){if(1===b.nodeType&&(b.tagName.toLowerCase()===a&&(d.push(b),c)||!u((b||document).getElementsByTagName(a),function(a){d.push(a);if(c)return k})))return k});else{b=(b||document).getElementsByTagName(a);
if(c)return b[0]||j;u(b,function(a){d.push(a)})}else p.jQuery&&(d=jQuery(a).get())}return d.length?c?d[0]:d:j},onDomReady:function(a){var b=[];(this?this._domReadyQueue=this._domReadyQueue||b:b).push(a);O()},onReady:function(a){var b=[];(this?this._readyQueue=this._readyQueue||b:b).push(a);P()}});h._getComponent=h._getComponent||function(){};h._2Pass=h._2Pass||function(a){u(a,function(a){a()})};h._domLoaded()}h.loader?h.loader.registerScript("Core",j,r):r();Type.registerNamespace("Sys");Sys.Res={argumentInteger:"Value must be an integer.",
argumentType:"Object cannot be converted to the required type.",argumentNull:"Value cannot be null.",scriptAlreadyLoaded:"The script '{0}' has been referenced multiple times. If referencing Microsoft AJAX scripts explicitly, set the MicrosoftAjaxMode property of the ScriptManager to Explicit.",scriptDependencyNotFound:"The script '{0}' failed to load because it is dependent on script '{1}'.",formatBadFormatSpecifier:"Format specifier was invalid.",requiredScriptReferenceNotIncluded:"'{0}' requires that you have included a script reference to '{1}'.",
webServiceFailedNoMsg:"The server method '{0}' failed.",argumentDomElement:"Value must be a DOM element.",actualValue:"Actual value was {0}.",enumInvalidValue:"'{0}' is not a valid value for enum {1}.",scriptLoadFailed:"The script '{0}' could not be loaded.",parameterCount:"Parameter count mismatch.",cannotDeserializeEmptyString:"Cannot deserialize empty string.",formatInvalidString:"Input string was not in a correct format.",argument:"Value does not fall within the expected range.",cannotDeserializeInvalidJson:"Cannot deserialize. The data does not correspond to valid JSON.",
cannotSerializeNonFiniteNumbers:"Cannot serialize non finite numbers.",argumentUndefined:"Value cannot be undefined.",webServiceInvalidReturnType:"The server method '{0}' returned an invalid type. Expected type: {1}",servicePathNotSet:"The path to the web service has not been set.",argumentTypeWithTypes:"Object of type '{0}' cannot be converted to type '{1}'.",paramName:"Parameter name: {0}",nullReferenceInPath:"Null reference while evaluating data path: '{0}'.",format:"One of the identified items was in an invalid format.",
assertFailedCaller:"Assertion Failed: {0}\r\nat {1}",argumentOutOfRange:"Specified argument was out of the range of valid values.",webServiceTimedOut:"The server method '{0}' timed out.",notImplemented:"The method or operation is not implemented.",assertFailed:"Assertion Failed: {0}",invalidOperation:"Operation is not valid due to the current state of the object.",breakIntoDebugger:"{0}\r\n\r\nBreak into debugger?"};if(0<=window.navigator.userAgent.indexOf("Gecko")||0<=window.navigator.userAgent.indexOf("AppleWebKit")||
0<=window.navigator.userAgent.indexOf("Opera")||0<=window.navigator.userAgent.indexOf("Trident/5"))try{var r=window,s=function(a,b,c){a[b]||(a[b]=c)},B=function(a,b,c,d){if(Object.defineProperty)a.hasOwnProperty(b)||Object.defineProperty(a,b,{get:c,set:d});else if(!a.__lookupGetter__||void 0===a.__lookupGetter__(b))a.__defineGetter__(b,c),a.__defineSetter__(b,d)},t=function(a,b,c){Object.defineProperty?a.hasOwnProperty(b)||Object.defineProperty(a,b,{get:c}):(!a.__lookupGetter__||void 0===a.__lookupGetter__(b))&&
a.__defineGetter__(b,c)},Q=function(a){window.event=a},R=0<=window.navigator.userAgent.indexOf("Opera"),S=0<=window.navigator.userAgent.indexOf("Gecko"),H=function(a){try{for(;a&&1!=a.nodeType;)a=a.parentNode}catch(b){a=null}return a},T=function(a){for(var b={x:0,y:0};a;){b.x+=a.offsetLeft;b.y+=a.offsetTop;try{a=a.offsetParent}catch(c){a=null}}return b};s(r,"navigate",function(a){window.setTimeout('window.location = "'+a+'";',0)});var I=function(a,b){a=a.slice(2);if("mousewheel"==a&&(R||S))a="DOMMouseScroll";
this.addEventListener(a,Q,!0);this.addEventListener(a,b,!1);return!0},J=function(a,b){a=a.slice(2);if("mousewheel"==a&&(R||S))a="DOMMouseScroll";this.removeEventListener(a,Q,!0);this.removeEventListener(a,b,!1)};s(r,"attachEvent",I);s(r,"detachEvent",J);r.HTMLDocument&&(s(r.HTMLDocument.prototype,"attachEvent",I),s(r.HTMLDocument.prototype,"detachEvent",J));s(r.HTMLElement.prototype,"attachEvent",I);s(r.HTMLElement.prototype,"detachEvent",J);var i=r.Event.prototype;t(i,"srcElement",function(){return H(this.target)||
this.currentTarget});B(i,"cancelBubble",function(){return this._bubblingCanceled||false},function(a){if(a){this._bubblingCanceled=true;this.stopPropagation()}});B(i,"returnValue",function(){return this._cancelDefault},function(a){a||this.preventDefault();return this._cancelDefault=a});t(i,"fromElement",function(){var a;if(this.type=="mouseover")a=this.relatedTarget;else if(this.type=="mouseout")a=this.target;return H(a)});t(i,"toElement",function(){var a;if(this.type=="mouseout")a=this.relatedTarget;
else if(this.type=="mouseover")a=this.target;return H(a)});t(i,"offsetX",function(){return window.pageXOffset+this.clientX-T(this.srcElement).x});t(i,"offsetY",function(){return window.pageYOffset+this.clientY-T(this.srcElement).y});var A=r.HTMLElement.prototype;t(A,"parentElement",function(){return this.parentNode});t(A,"children",function(){for(var a=[],b=this.childNodes.length,c=0;c<b;c++){var d=this.childNodes[c];d.nodeType==1&&a.push(d)}return a});B(A,"innerText",function(){try{return this.textContent}catch(a){for(var b=
0;b<this.childNodes.length;b++);return str}},function(a){a=document.createTextNode(a);this.innerHTML="";this.appendChild(a)});t(A,"currentStyle",function(){return window.getComputedStyle(this,null)});s(A,"removeNode",function(){return this.parentNode?this.parentNode.removeChild(this):this});s(A,"contains",function(a){for(;a!=null&&a!=this;)a=a.parentElement;return a!=null});t(r.HTMLStyleElement.prototype,"styleSheet",function(){return this.sheet});var K=r.CSSStyleSheet.prototype;t(K,"rules",function(){return this.cssRules});
s(K,"addRule",function(a,b,c){this.insertRule(a+"{"+b+"}",c)});s(K,"removeRule",function(a){this.deleteRule(a)});B(r.CSSStyleDeclaration.prototype,"styleFloat",function(){return this.cssFloat},function(a){this.cssFloat=a});var L=r.DocumentFragment.prototype;s(L,"getElementById",function(a){var b=[],c=this.childNodes,d,e;for(e=0;e<c.length;e++){d=c[e];d.nodeType==1&&b.push(d)}for(;b.length;){d=Array.dequeue(b);if(d.id==a)return d;c=d.childNodes;if(c.length!=0)for(e=0;e<c.length;e++){d=c[e];d.nodeType==
1&&b.push(d)}}return null});s(L,"getElementsByTagName",function(a){var b=[],c=[],d=this.childNodes,e,f;for(f=0;f<d.length;f++){e=d[f];e.nodeType==1&&c.push(e)}for(;c.length;){e=Array.dequeue(c);(a=="*"||e.tagName==a)&&Array.add(b,e);d=e.childNodes;if(d.length!=0)for(f=0;f<d.length;f++){e=d[f];e.nodeType==1&&c.push(e)}}return b});s(L,"createElement",function(a){return document.createElement(a)});var U=function(a,b,c){if(!a.documentElement)return[];a=(new XPathEvaluator).evaluate(b,c?c:a,a.createNSResolver(a.documentElement),
XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);b=Array(a.snapshotLength);for(c=0;c<a.snapshotLength;c++)b[c]=a.snapshotItem(c);return b},M=r.Document.prototype;s(M,"selectNodes",function(a,b){return U(this,a,b)});s(M,"selectSingleNode",function(a,b){var c;a:{c=U(this,a+"[1]",b);if(c.length!=0)for(var d=0;d<c.length;d++)if(c[d]){c=c[d];break a}c=null}return c});s(M,"transformNode",function(a){var b=new XSLTProcessor;b.importStylesheet(a);document.implementation.createDocument("","",null);return b.transformToDocument(this).xml});
var C=r.Node.prototype;s(C,"selectNodes",function(a){return this.ownerDocument.selectNodes(a,this)});s(C,"selectSingleNode",function(a){return this.ownerDocument.selectSingleNode(a,this)});t(C,"baseName",function(){return this.localName});B(C,"text",function(){return this.textContent},function(a){this.textContent=a});t(C,"xml",function(){return(new XMLSerializer).serializeToString(this)})}catch(V){}window.ss=window.Sys;ss.isUndefined=function(a){return void 0===a};ss.isNull=function(a){return null===
a};ss.isNullOrUndefined=function(a){return null===a||void 0===a};(function(){function a(){Object.getKeyCount=function(a){var b=0,e;for(e in a)b++;return b};Object.clearKeys=function(a){for(var b in a)delete a[b]};Object.keyExists=function(a,b){return void 0!==a[b]};Function.prototype.invoke=function(){return this.apply(null,arguments)};Number.parse=function(a){return!a||!a.length?0:0<=a.indexOf(".")||0<=a.indexOf("e")||a.endsWith("f")||a.endsWith("F")?parseFloat(a):parseInt(a,10)};Number.prototype.format||
(Number.prototype.format=function(){return this.toString()},Number.prototype.localeFormat=function(){return this.toLocaleString()});String.Empty="";String.compare=function(a,b,e){if(e){a&&(a=a.toUpperCase());b&&(b=b.toUpperCase())}a=a||"";b=b||"";return a==b?0:a<b?-1:1};String.prototype.compareTo=function(a,b){return String.compare(this,a,b)};String.concat=function(){var a=arguments;return a.length===2?a[0]+a[1]:Array.prototype.join.call(a,"")};String.equals=function(a,b,e){return String.compare(a,
b,e)==0};String.fromChar=function(a,b){for(var e=a,f=1;f<b;f++)e=e+a;return e};String.prototype.htmlDecode=function(){if(!String._htmlDecRE){String._htmlDecMap={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};String._htmlDecRE=/(&amp;|&lt;|&gt;|&quot;)/gi}var a;return a=this.replace(String._htmlDecRE,function(a,b){return String._htmlDecMap[b]})};String.prototype.htmlEncode=function(){if(!String._htmlEncRE){String._htmlEncMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};String._htmlEncRE=/([&<>"])/g}var a=
this;String._htmlEncRE.test(a)&&(a=a.replace(String._htmlEncRE,function(a,b){return String._htmlEncMap[b]}));return a};String.prototype.indexOfAny=function(a,b,e){var f=this.length;if(!f)return-1;b=b||0;e=b+(e||f)-1;for(e>=f&&(e=f-1);b<=e;b++)if(Array.indexOf(a,this.charAt(b))>=0)return b;return-1};String.prototype.insert=function(a,b){if(!b)return this.valueOf();if(!a)return b+this;var e=this.substr(0,a),f=this.substr(a);return e+b+f};String.isNullOrEmpty=function(a){return!a||!a.length};String.prototype.lastIndexOfAny=
function(a,b,e){var f=this.length;if(!f)return-1;b=b||f-1;e=b-(e||f)+1;for(e<0&&(e=0);b>=e;b--)if(Array.indexOf(a,this.charAt(b))>=0)return b;return-1};String.prototype.padLeft=function(a,b){return this.length<a?String.fromChar(b||" ",a-this.length)+this:this.valueOf()};String.prototype.padRight=function(a,b){return this.length<a?this+String.fromChar(b||" ",a-this.length):this.valueOf()};String.prototype.quote=function(){if(!String._quoteMap)String._quoteMap={"\\":"\\\\","'":"\\'",'"':'\\"',"\r":"\\r",
"\n":"\\n","\t":"\\t","\f":"\\f","\b":"\\b"};String._quoteRE?String._quoteRE.lastIndex=0:String._quoteRE=RegExp("(['\"\\\\\x00-\u001f\u007f-\uffff])","g");var a=this;String._quoteRE.test(a)&&(a=this.replace(String._quoteRE,function(a,b){var c=String._quoteMap[b];if(c)return c;c=b.charCodeAt(0);return"\\u"+c.toString(16).toUpperCase().padLeft(4,"0")}));return'"'+a+'"'};String.prototype.remove=function(a,b){return!b||a+b>this.length?this.substr(0,a):this.substr(0,a)+this.substr(a+b)};String.prototype.replaceAll=
function(a,b){return this.split(a).join(b||"")};String.prototype.unquote=function(){return eval("("+this+")")};String.localeFormat||(String.localeFormat=String.format);Sys.StringBuilder.prototype.get_isEmpty=function(){return this.isEmpty()};Date.get_now=function(){return new Date};Date.get_today=function(){var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())};Date.parseDate=function(a){return new Date(Date.parse(a))};Date.prototype.format||(Date.prototype.format=function(){return this.toString()},
Date.prototype.localeFormat=function(){return this.toLocaleString()});Sys.Debug.writeLine=function(a){Sys.Debug.trace(a)};RegExp.__typeName="RegExp";RegExp.parse=function(a){if(a.startsWith("/")){var b=a.lastIndexOf("/");if(b>1){var e=a.substring(1,b),a=a.substr(b+1);return RegExp(e,a)}}return null};Math.truncate=function(a){return a>=0?Math.floor(a):Math.ceil(a)};Type.canCast=function(a,b){return b.isInstanceOfType(a)};Type.safeCast=function(a,b){return Type.canCast(a,b)?a:null};Type.getType=function(a){return Type.parse(a)};
Type.getInstanceType=Object.getType;Type.prototype.get_baseType=Type.prototype.getBaseType;Type.prototype.get_fullName=Type.prototype.getName;Type.prototype.get_name=function(){var a=this.get_fullName(),b=a.lastIndexOf(".");return b>0?a.substr(b+1):a};Type.prototype.isAssignableFrom=function(a){return!a?false:this===a?true:Type.isInterface(this)?this.isImplementedBy(a):a.inheritsFrom(this)};ss.Enum=function(){};ss.Enum.registerClass("Sys.Enum");ss.Enum.parse=function(a,b){return a.parse(b)};ss.Delegate=
function(){};ss.Delegate.registerClass("Sys.Delegate");ss.Delegate.Null=function(){};ss.Delegate._contains=function(a,b,e){for(var f=0;f<a.length;f=f+2)if(a[f]===b&&a[f+1]===e)return true;return false};ss.Delegate._create=function(a){var b=function(){if(a.length==2)return a[1].apply(a[0],arguments);for(var b=a.clone(),d=0;d<b.length;d=d+2)ss.Delegate._contains(a,b[d],b[d+1])&&b[d+1].apply(b[d],arguments);return null};b.invoke=b;b._targets=a;return b};ss.Delegate.create=function(a,b){if(!a)return b.invoke=
b;return ss.Delegate._create([a,b])};ss.Delegate.combine=function(a,b){return!a?!b._targets?ss.Delegate.create(null,b):b:!b?!a._targets?ss.Delegate.create(null,a):a:ss.Delegate._create((a._targets?a._targets:[null,a]).concat(b._targets?b._targets:[null,b]))};ss.Delegate.remove=function(a,b){if(!a||a===b)return null;if(!b)return a;var e=a._targets,f=null,g;if(b._targets){f=b._targets[0];g=b._targets[1]}else g=b;for(var h=0;h<e.length;h=h+2)if(e[h]===f&&e[h+1]===g){if(e.length==2)return null;e.splice(h,
2);return ss.Delegate._create(e)}return a};ss.Delegate.createExport=function(a,b){var e="__"+(new Date).valueOf();ss.Delegate[e]=function(){b||ss.Delegate.deleteExport(e);a.apply(null,arguments)};return e};ss.Delegate.deleteExport=function(a){ss.Delegate[a]&&delete ss.Delegate[a]};ss.Delegate.clearExport=function(a){if(ss.Delegate[a])ss.Delegate[a]=Delegate.Null};Error.createError=function(a,b,e){a=Error(a);if(b)for(var f in b)a[f]=b[f];if(e)a.innerException=e;a.popStackFrame();return a};ss.IEnumerator=
function(){};ss.IEnumerator.getEnumerator=function(a){return a?a.getEnumerator?a.getEnumerator():new ss.ArrayEnumerator(a):null};ss.IEnumerator.registerInterface("Sys.IEnumerator");ss.IEnumerable=function(){};ss.IEnumerable.registerInterface("Sys.IEnumerable");ss.ArrayEnumerator=function(a){this._array=a;this._index=-1};ss.ArrayEnumerator.prototype={get_current:function(){return this._array[this._index]},moveNext:function(){this._index++;return this._index<this._array.length},reset:function(){this._index=
-1}};ss.ArrayEnumerator.registerClass("Sys.ArrayEnumerator",null,ss.IEnumerator);Array.__interfaces=[ss.IEnumerable];Array.prototype.add=function(a){Array.add(this,a)};Array.prototype.addRange=function(a){Array.addRange(this,a)};Array.prototype.aggregate=function(a,b,e){for(var f=this.length,g=0;g<f;g++)g in this&&(a=b.call(e,a,this[g],g,this));return a};Array.prototype.clear=function(){Array.clear(this)};Array.prototype.clone=function(){return Array.clone(this)};Array.prototype.contains=function(a){return Array.contains(this,
a)};Array.prototype.enqueue=function(a){this._queue=true;Array.enqueue(this,a)};Array.prototype.dequeue=function(){return Array.dequeue(this)};Array.prototype.every||(Array.prototype.every=function(a,b){for(var e=this.length,f=0;f<e;f++)if(f in this&&!a.call(b,this[f],f,this))return false;return true});Array.prototype.extract=function(a,b){return!b?this.slice(a):this.slice(a,a+b)};Array.prototype.filter||(Array.prototype.filter=function(a,b){for(var e=this.length,f=[],g=0;g<e;g++)if(g in this){var h=
this[g];a.call(b,h,g,this)&&f.push(h)}return f});Array.prototype.forEach||(Array.prototype.forEach=function(a,b){Array.forEach(this,a,b)});Array.prototype.getEnumerator=function(){return new ss.ArrayEnumerator(this)};Array.prototype.groupBy=function(a,b){for(var e=this.length,f=[],g={},h=0;h<e;h++)if(h in this){var q=a.call(b,this[h],h);if(!String.isNullOrEmpty(q)){var i=g[q];if(!i){i=[];i.key=q;g[q]=i;f.add(i)}i.add(this[h])}}return f};Array.prototype.index=function(a,b){for(var e=this.length,f=
{},g=0;g<e;g++)if(g in this){var h=a.call(b,this[g],g);String.isNullOrEmpty(h)||(f[h]=this[g])}return f};Array.prototype.indexOf=function(a,b){return Array.indexOf(this,a,b)};Array.prototype.insert=function(a,b){Array.insert(this,a,b)};Array.prototype.insertRange=function(a,b){if(a===0)this.unshift.apply(this,b);else for(var e=0;e<b.length;e++)this.splice(a+e,0,b[e])};Array.prototype.map||(Array.prototype.map=function(a,b){for(var e=this.length,f=Array(e),g=0;g<e;g++)g in this&&(f[g]=a.call(b,this[g],
g,this));return f});Array.prototype.peek=function(){return this.length?this[this._queue?0:this.length-1]:null};Array.prototype.remove=function(a){return Array.remove(this,a)};Array.prototype.removeAt=function(a){Array.removeAt(this,a)};Array.prototype.removeRange=function(a,b){return this.splice(a,b)};Array.prototype.some||(Array.prototype.some=function(a,b){for(var e=this.length,f=0;f<e;f++)if(f in this&&a.call(b,this[f],f,this))return true;return false});Array.toArray=function(a){return Array.prototype.slice.call(a)};
window.XMLHttpRequest||(window.XMLHttpRequest=function(){for(var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"],b=0;b<a.length;b++)try{return new ActiveXObject(a[b])}catch(e){}return null});ss.XmlDocumentParser=function(){};ss.XmlDocumentParser.registerClass("Sys.XmlDocumentParser");ss.XmlDocumentParser.parse=function(a){if(!window.DOMParser||Sys.Browser.agent==Sys.Browser.InternetExplorer)for(var b=["Msxml2.DOMDocument.3.0","Msxml2.DOMDocument"],e=0;e<b.length;e++)try{var f=new ActiveXObject(b[e]);f.async=
false;f.loadXML(a);f.setProperty("SelectionLanguage","XPath");return f}catch(g){}else try{return(new DOMParser).parseFromString(a,"text/xml")}catch(h){}return null};Sys.INotifyPropertyChanged=Sys.INotifyPropertyChange;Sys.INotifyCollectionChanged=function(){};Sys.INotifyCollectionChanged.registerInterface("Sys.INotifyCollectionChanged");Sys.CollectionChangedAction=Sys.NotifyCollectionChangedAction;Sys.CollectionChangedEventArgs=function(a,b,e){Sys.CollectionChangedEventArgs.initializeBase(this);this._action=
a;this._item=b||null;this._index=e||-1};Sys.CollectionChangedEventArgs.prototype={get_action:function(){return this._action},get_index:function(){return this._index},get_item:function(){return this._item},get_changes:function(){return[new Sys.CollectionChange(this._action,this._action==Sys.CollectionChangedAction.add?this._item:null,this._index,this._action==Sys.CollectionChangedAction.remove?this._item:null,this._index)]}};Sys.CollectionChangedEventArgs.registerClass("Sys.CollectionChangedEventArgs",
Sys.EventArgs);var a=Sys.Observer.makeObservable;Sys.Observer.makeObservable=function(c){if(c instanceof Array)for(var d=["add","addRange","clear","insert","remove","removeAt"],e=0;e<d.length;e++)c[d[e]]=void 0;return a(c)}}window.Sys&&Sys.loader?Sys.loader.registerScript("Extensions",["Core"],a):a()})();Type.registerNamespace("MLC");MLC.$create_MLCC$A=function(a,b){var c={};c.command=a;c.parameters=b;return c};MLC.IChannel=function(){};MLC.IChannel.registerInterface("MLC.IChannel");MLC.$create_MLCC$7=
function(a){var b={};b.$0=a;b.$1=null;b.$2=null;return b};MLC.MLCC$0=function(){};MLC.MLCC$0.registerInterface("MLC.MLCC$0");MLC.$create_MLCC$E=function(a,b,c,d){var e={};e.$0=a;e.$1=b;e.$2=c;e.$3=d;return e};MLC.ChannelType=function(){};MLC.ChannelType.prototype={html:0,flash:1,direct:2,postMessage:3};MLC.ChannelType.registerEnum("MLC.ChannelType",!1);MLC.MLCC$B=function(a){this.$0=a;this.$1=3;this.$2=50/this.$1;this.$3()};MLC.MLCC$B.prototype={$0:null,$1:0,$2:0,$3:function(){this.$0.invoke()&&(this.$2*=
this.$1,window.setTimeout(ss.Delegate.create(this,this.$3),Math.floor(this.$2)))}};MLC.MLCC$C=function(a){this.$0=a};MLC.MLCC$C.$4=function(a,b){var c=new MLC.MLCC$C(a);c.$D(b);return c};MLC.MLCC$C.$5=function(a){a=new MLC.MLCC$C(a);a.$E();return a};MLC.MLCC$C.get_$7=function(){return MLC.MLCC$C.get_$9()};MLC.MLCC$C.get_$8=function(){if(!MLC.MLCC$C.get_$9()||null==window.parent)return!1;try{var a=window.parent.document.domain.toLowerCase(),b=document.domain.toLowerCase();return a===b}catch(c){return!1}};
MLC.MLCC$C.get_$9=function(){var a=document.domain.toLowerCase();return"live.com"===a&&MLC.MLCC$C.get_$A()||"live-int.com"===a&&!MLC.MLCC$C.get_$A()?!0:!1};MLC.MLCC$C.get_$A=function(){var a=__MSLiveCore__.Loader.get_settings().environment;return"production"===a||a.startsWith("dogfood")};MLC.MLCC$C.prototype={$0:null,$1:null,add_$2:function(a){this.$3=ss.Delegate.combine(this.$3,a)},remove_$2:function(a){this.$3=ss.Delegate.remove(this.$3,a)},$3:null,add_connected:function(a){this.add_$2(a);this.get_$B()&&
a.invoke(this,ss.EventArgs.Empty)},remove_connected:function(a){this.remove_$2(a)},add_messageReceived:function(a){this.$6=ss.Delegate.combine(this.$6,a)},remove_messageReceived:function(a){this.$6=ss.Delegate.remove(this.$6,a)},$6:null,sendMessage:function(a){this.$10();var b=this.$C();window.setTimeout(ss.Delegate.create(this,function(){b.$12(a)}),1)},get_$B:function(){return null!=this.$1&&null!=this.$1.$1&&null!=this.$1.$2},$C:function(){return this.$1.$2===this?this.$1.$1:this.$1.$1===this?this.$1.$2:
null},$D:function(a){MLC.MLCC$8.$4(a,ss.Delegate.create(this,function(){this.$1=MLC.MLCC$8.$5(a,this.$0);this.$1.$1=this;this.$F()}))},$E:function(){MLC.MLCC$8.$3();this.$1=MLC.MLCC$8.$5(window.self,this.$0);this.$1.$2=this;this.$F()},$F:function(){if(this.get_$B()){var a;a=this.$1.$2;a.$11();a=this.$1.$1;a.$11()}},$10:function(){if(!this.get_$B())throw Error.invalidOperation("This operation cannot be performed until the channel is connected.");},$11:function(){null!=this.$3&&this.$3.invoke(this,
ss.EventArgs.Empty)},$12:function(a){null!=this.$6&&this.$6.invoke(a)}};MLC.MLCC$8=function(){};MLC.MLCC$8.$1=function(a){try{return a.$dcRegistry}catch(b){return null}};MLC.MLCC$8.$2=function(a,b){a.$dcRegistry=b};MLC.MLCC$8.$3=function(){null==MLC.MLCC$8.$1(window.self)&&MLC.MLCC$8.$2(window.self,{})};MLC.MLCC$8.$4=function(a,b){var c=null,c=function(){null!=MLC.MLCC$8.$1(a)?b.invoke():window.setTimeout(c,5)};c.invoke()};MLC.MLCC$8.$5=function(a,b){var c=MLC.MLCC$8.$1(a);if(null==c)return null;
var d=c[b];null==d&&(d=MLC.$create_MLCC$7(b),c[b]=d);return d};MLC.MLCC$9=function(){this.$3=[];this.$4=[]};MLC.MLCC$9.$8=function(a,b,c,d){var e=new MLC.MLCC$9,a=new Microsoft.Live.IfmFrame(a,b,c,d,ss.Delegate.create(e,e.$D));e.$6=a.channel;e.$C();return e};MLC.MLCC$9.$9=function(a,b,c){var d=new MLC.MLCC$9,a=new Microsoft.Live.IfmChannel(a,b,c,ss.Delegate.create(d,d.$D));d.$6=a.channel;return d};MLC.MLCC$9.prototype={$3:null,$4:null,$5:0,$6:null,$7:!1,add_connected:function(a){this.$A=ss.Delegate.combine(this.$A,
a)},remove_connected:function(a){this.$A=ss.Delegate.remove(this.$A,a)},$A:null,add_messageReceived:function(a){this.$B=ss.Delegate.combine(this.$B,a)},remove_messageReceived:function(a){this.$B=ss.Delegate.remove(this.$B,a)},$B:null,$C:function(){new MLC.MLCC$B(ss.Delegate.create(this,function(){if(this.$7)return!1;this.$11("$ConnectRequest");return!0}))},$D:function(){var a=arguments.length;if(0!==a&&null!=this.$B)switch(arguments[0]){case "$ConnectRequest":this.$11("$Connect");this.$7||this.$11("$ConnectRequest");
break;case "$Connect":this.$E();break;case "$Batch":for(var b=1;b<a;b++)this.$4.enqueue(arguments[b]);this.$F()}},$E:function(){this.$7||(this.$7=!0,null!=this.$A&&this.$A.invoke(this,ss.EventArgs.Empty))},$F:function(){for(var a=0;0<this.$4.length;){var b=this.$4.dequeue();this.$B.invoke(b);a++;if(5<a&&0<this.$4.length){window.setTimeout(ss.Delegate.create(this,this.$F),1);break}}},$10:function(){this.$5=0;this.$12(this.$3)},$11:function(a){var b=[];b.enqueue(a);this.$12(b)},$12:function(a){if(null!=
this.$6){var b=this.$6.send;null!=b&&b.apply(this.$6,a)}},sendMessage:function(a){0===this.$5&&(this.$5=window.setTimeout(ss.Delegate.create(this,this.$10),1),this.$3.clear(),this.$3.enqueue("$Batch"));this.$3.enqueue(a)}};MLC.MLCC$D=function(a,b,c,d){this.$2=String.format("{0}.{1}",a,b);a=__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("Channel.swf");b=window.location.hostname.toLowerCase();this.$5=d;this.$3=new MLC.FlashObject(a,{name:this.$2,isParent:d,srcDomain:b,dstDomain:c});this.$3.add_initialized(ss.Delegate.create(this,
this.$D));this.$3.add_fsCommandReceived(ss.Delegate.create(this,this.$11))};MLC.MLCC$D.$6=function(a,b,c){return new MLC.MLCC$D(a,b,c,!0)};MLC.MLCC$D.$7=function(a,b){var c=MLC.MLCC$10.$0("WLIFMi");if(String.isNullOrEmpty(c))throw Error.argument("Window must contain a WLIFMi parameter.");return new MLC.MLCC$D(a,c,b,!1)};MLC.MLCC$D.get_$8=function(){return __MSLiveCore__.Loader.isFlashInstalled(8)&&!__MSLiveCore__.Loader.get_settings().channel.flashDisabled};MLC.MLCC$D.prototype={$2:null,$3:null,$4:!1,
$5:!1,add_connected:function(a){this.$9=ss.Delegate.combine(this.$9,a)},remove_connected:function(a){this.$9=ss.Delegate.remove(this.$9,a)},$9:null,add_messageReceived:function(a){this.$A=ss.Delegate.combine(this.$A,a)},remove_messageReceived:function(a){this.$A=ss.Delegate.remove(this.$A,a)},$A:null,sendMessage:function(a){this.$C();this.$B(a)},$B:function(a){this.$3.setVariable("_root.channel.Variable",a)},$C:function(){if(!this.$4)throw Error.invalidOperation("The operation cannot be performed until the channel is connected.");
},$D:function(){this.$5&&this.$E()},$E:function(){new MLC.MLCC$B(ss.Delegate.create(this,function(){if(this.$4)return!1;this.$B("$ConnectReq");return!0}))},$F:function(){this.$4||(this.$4=!0,null!=this.$9&&this.$9.invoke(this,ss.EventArgs.Empty))},$10:function(a){null!=this.$A&&this.$A.invoke(a)},$11:function(a,b){switch(b.get_value()){case "$ConnectReq":this.$4||(this.$B("$ConnectAck"),this.$F());break;case "$ConnectAck":this.$F();break;default:this.$10(b.get_value())}}};MLC.MLCC$11=function(){};
MLC.MLCC$11.$0=function(a,b,c,d,e,f){switch(MLC.MLCC$11.$6()){case 3:return e=MLC.MLCC$10.$1(d),b=MLC.MLCC$11.$3(c,b,d),MLC.MLCC$12.$B(a,e,b,d);case 2:return d=MLC.MLCC$11.$3(c,b,d),MLC.MLCC$C.$4(a,d);case 1:return c=MLC.MLCC$11.$4(c,b,d),e=MLC.MLCC$10.$1(d),MLC.MLCC$11.$3(c,b,d),MLC.MLCC$D.$6(a,c.id,e);case 0:return MLC.MLCC$9.$8(b,d,e,f);default:return null}};MLC.MLCC$11.$1=function(a,b,c,d){switch(MLC.MLCC$11.$7()){case 3:return MLC.MLCC$12.$D(a,c);case 2:return MLC.MLCC$C.$5(a);case 1:return MLC.MLCC$D.$7(a,
c);case 0:return MLC.MLCC$9.$9(b,c,d);default:return null}};MLC.MLCC$11.$2=function(a,b,c){if(MLC.MLCC$12.get_$E()){var d=MLC.MLCC$10.$1(c);return MLC.MLCC$12.$C(a,d,b,c)}throw Error.notImplemented();};MLC.MLCC$11.$3=function(a,b,c){a=MLC.MLCC$11.$4(a,b,c);if(null==a.contentWindow)throw Error.invalidOperation("The provided iframe must be attached to the document");return a.contentWindow};MLC.MLCC$11.$4=function(a,b,c){null==a&&(a=MLC.MLCC$11.$5(b,c));return a};MLC.MLCC$11.$5=function(a,b){var c=document.getElementById(a);
if(null==c)return null;var d="ifm"+Math.floor(1048576*Math.random()),e="WLIFMi="+d,f=0>b.indexOf("#")?"#":"&",g=document.createElement("iframe");g.frameBorder="0";g.style.width="100%";g.style.height="100%";g.src=b+f+e;g.id=d;c.appendChild(g);return g};MLC.MLCC$11.$6=function(){return MLC.MLCC$12.get_$E()?3:MLC.MLCC$C.get_$7()?2:MLC.MLCC$D.get_$8()?1:0};MLC.MLCC$11.$7=function(){return MLC.MLCC$12.get_$E()?3:MLC.MLCC$C.get_$8()?2:MLC.MLCC$D.get_$8()?1:0};MLC.MLCC$12=function(a,b,c,d,e){MLC.MLCC$12.$1B();
this.$5=a;this.$7=b;this.$8=c;this.$6=d;MLC.MLCC$12.$2.add(this);e&&this.$21()};MLC.MLCC$12.$B=function(a,b,c,d){d=MLC.MLCC$12.$12(d);return new MLC.MLCC$12(a,c,d,b,!0)};MLC.MLCC$12.$C=function(a,b,c,d){return MLC.MLCC$12.$B(a,b,c,d)};MLC.MLCC$12.$D=function(a,b){return new MLC.MLCC$12(a,null,null,b,!1)};MLC.MLCC$12.get_$E=function(){return null!=window.postMessage};MLC.MLCC$12.$12=function(a){var a=a||String.Empty,b=a.indexOf("://");0<=b&&(b=a.indexOf("/",b+3),0<=b&&(a=a.substring(0,b)));return a};
MLC.MLCC$12.$13=function(){var a=window.event;if(null!=a){var b=a.origin,c=a.data,a=a.source;if(MLC.MLCC$12.$14(b,c,a)){var d=MLC.MLCC$12.$17(c),c=MLC.MLCC$12.$18(c);String.isNullOrEmpty(d)||(MLC.MLCC$12.$4.enqueue(MLC.$create_MLCC$E(d,a,b,c)),window.setTimeout(MLC.MLCC$12.$19,1))}}};MLC.MLCC$12.$14=function(a,b,c){var d=!0;String.isNullOrEmpty(a)&&(d=!1);String.isNullOrEmpty(b)&&(d=!1);null==c&&(d=!1);return d};MLC.MLCC$12.$15=function(a,b){return String.concat("<",a,">",b)};MLC.MLCC$12.$16=function(a,
b){for(var c=MLC.MLCC$10.$1(b),d=0;d<MLC.MLCC$12.$2.length;d++){var e=MLC.MLCC$12.$2[d];if(e.$5===a&&e.$6===c)return e}return null};MLC.MLCC$12.$17=function(a){var b=String.Empty;if("<"===a.charAt(0)){var c=a.indexOf(">");0<c&&(b=a.substring(1,c))}return b};MLC.MLCC$12.$18=function(a){var b=a.indexOf(">");0>b?b=0:b++;return a.substr(b)};MLC.MLCC$12.$19=function(){var a=MLC.MLCC$12.$4.dequeue();MLC.MLCC$12.$1A(a.$0,a.$1,a.$2,a.$3)};MLC.MLCC$12.$1A=function(a,b,c,d){a=MLC.MLCC$12.$16(a,c);if(null!=
a)switch(d){case "@ConnectReq":a.$1C(b,c);break;case "@ConnectAck":a.$1D(b);break;default:a.$1F(d)}};MLC.MLCC$12.$1B=function(){if(!MLC.MLCC$12.get_$E())throw Error.invalidOperation("postMessage is not supported");};MLC.MLCC$12.prototype={$5:null,$6:null,$7:null,$8:null,$9:!1,$A:!1,add_messageReceived:function(a){this.$F=ss.Delegate.combine(this.$F,a)},remove_messageReceived:function(a){this.$F=ss.Delegate.remove(this.$F,a)},$F:null,add_connected:function(a){this.$10=ss.Delegate.combine(this.$10,
a)},remove_connected:function(a){this.$10=ss.Delegate.remove(this.$10,a)},$10:null,get_$11:function(){return this.$7},sendMessage:function(a){this.$A||(this.$20(),this.$22(a))},dispose:function(){this.$A||(this.$A=!0,MLC.MLCC$12.$2.remove(this))},$1C:function(a,b){this.$9||(this.$9=!0,this.$7=a,this.$8=b,this.$22("@ConnectAck"),this.$1E())},$1D:function(a){this.$9||(this.$9=!0,this.$7=a,this.$1E())},$1E:function(){null!=this.$10&&this.$10.invoke(this,ss.EventArgs.Empty)},$1F:function(a){null!=this.$F&&
this.$F.invoke(a)},$20:function(){if(!this.$9)throw Error.invalidOperation("This operation cannot be performed until the channel is connected.");},$21:function(){new MLC.MLCC$B(ss.Delegate.create(this,function(){if(this.$A||this.$9)return!1;this.$22("@ConnectReq");return!0}))},$22:function(a){a=MLC.MLCC$12.$15(this.$5,a);this.$7.postMessage(a,this.$8)}};MLC.MLCC$F=function(a,b,c){this.$3=b;this.$2=a;this.$4=c;this.$1=Date.get_now().getTime()+6E4;this.$5=[];this.$8()};MLC.MLCC$F.prototype={$1:0,$2:null,
$3:null,$4:null,$5:null,$6:null,get_$7:function(){return Date.get_now().getTime()>=this.$1},$8:function(){new MLC.MLCC$B(ss.Delegate.create(this,function(){if(null!=this.$6)return!1;if(this.get_$7()){for(var a=ss.IEnumerator.getEnumerator(this.$5);a.moveNext();){var b=a.get_current();b.dispose();b.remove_connected(ss.Delegate.create(this,this.$B))}this.$4.invoke(null);return!1}this.$9();return!0}))},$9:function(){for(var a=0;a<window.parent.frames.length;a++){var b=window.parent.frames[a];window.self!==
b&&this.$A(b)}},$A:function(a){for(var b=ss.IEnumerator.getEnumerator(this.$5);b.moveNext();)if(b.get_current().get_$11()===a)return;a=MLC.MLCC$11.$2(this.$2,a,this.$3);a.add_connected(ss.Delegate.create(this,this.$B));this.$5.add(a)},$B:function(a){for(var b=ss.IEnumerator.getEnumerator(this.$5);b.moveNext();){var c=b.get_current();c!==a&&c.dispose();c.remove_connected(ss.Delegate.create(this,this.$B))}this.$6=MLC.Channel.$3(a);this.$4.invoke(this.$6)}};MLC.MLCC$10=function(){};MLC.MLCC$10.$0=function(a){var b=
window.location.href,c=b.indexOf("#");if(0>c)throw Error.argumentOutOfRange("No hash fragment found.");b=b.substr(c+1).split("&");for(c=0;c<b.length;c++){var d=b[c].split("=");if(2===d.length&&d[0]===a)return d[1]}return null};MLC.MLCC$10.$1=function(a){if(null==a||0===a.length)return String.Empty;a=a.trim().toLowerCase();a.startsWith("http://")?a=a.substr(7):a.startsWith("https://")&&(a=a.substr(8));var b=a.indexOf(":");0<b&&(a=a.substring(0,b));b=a.indexOf("/");0<b&&(a=a.substring(0,b));return a};
MLC.Channel=function(a){this.$1=[];this.$0=a;this.$0.add_messageReceived(ss.Delegate.create(this,this.$5));this.$0.add_connected(ss.Delegate.create(this,this.$6))};MLC.Channel.getChannelType=function(){return MLC.MLCC$11.$6()};MLC.Channel.fromParent=function(a,b,c,d,e,f){a=MLC.MLCC$11.$0(f,a,b,c,d,e);return new MLC.Channel(a)};MLC.Channel.fromChild=function(a,b,c,d){a=MLC.MLCC$11.$1(d,a,b,c);return new MLC.Channel(a)};MLC.Channel.fromSibling=function(a,b,c){new MLC.MLCC$F(a,b,c)};MLC.Channel.$3=function(a){a=
new MLC.Channel(a);a.$2=!0;return a};MLC.Channel.prototype={$0:null,$1:null,$2:!1,add_messageReceived:function(a){this.$4=ss.Delegate.combine(this.$4,a)},remove_messageReceived:function(a){this.$4=ss.Delegate.remove(this.$4,a)},$4:null,sendMessage:function(a,b){var c=MLC.$create_MLCC$A(a,b);this.$2?this.$9(c):this.$1.enqueue(c)},$5:function(a){a=MLC.JSON.deserialize(a);null!=a&&this.$7(new MLC.ChannelMessageReceivedEventArgs(a.command,a.parameters))},$6:function(){this.$2||(this.$2=!0,this.$8())},
$7:function(a){null!=this.$4&&this.$4.invoke(this,a)},$8:function(){for(;0<this.$1.length;){var a=this.$1.dequeue();this.$9(a)}},$9:function(a){a=MLC.JSON.serialize(a);this.$0.sendMessage(a)}};MLC.ChannelMessageReceivedEventArgs=function(a,b){MLC.ChannelMessageReceivedEventArgs.initializeBase(this);this.$1_0=a;this.$1_1=b};MLC.ChannelMessageReceivedEventArgs.prototype={$1_0:null,$1_1:null,get_command:function(){return this.$1_0},get_parameters:function(){return this.$1_1}};MLC.JSON=function(){};MLC.JSON.deserialize=
function(a){if(String.isNullOrEmpty(a))return null;try{return MLC.MLCC$6.$A(a)}catch(b){}return null};MLC.JSON.serialize=function(a){if(null==a)return String.Empty;try{return MLC.MLCC$6.$D(a)}catch(b){}return null};MLC.MLCC$6=function(){};MLC.MLCC$6.$7=function(a,b,c){MLC.MLCC$6.$0.add([a,b,c])};MLC.MLCC$6.$8=function(){for(var a=ss.IEnumerator.getEnumerator(MLC.MLCC$6.$0);a.moveNext();){var b=a.get_current();b[0][b[1]]=b[2]}MLC.MLCC$6.$0.clear()};MLC.MLCC$6.$9=function(){var a=window.JSON.stringify(void 0);
return!ss.isUndefined(a)&&"undefined"===a?!0:!1};MLC.MLCC$6.$A=function(a){MLC.MLCC$6.$3&&(MLC.MLCC$6.$C(Array.prototype,MLC.MLCC$6.$5),MLC.MLCC$6.$C(Object.prototype,MLC.MLCC$6.$6));try{return window.JSON.parse(a,MLC.MLCC$6.$1)}finally{MLC.MLCC$6.$3&&(MLC.MLCC$6.$B(Object.prototype,MLC.MLCC$6.$6),MLC.MLCC$6.$B(Array.prototype,MLC.MLCC$6.$5))}};MLC.MLCC$6.$B=function(a,b){for(var c in b)a[c]=b[c];Object.clearKeys(b)};MLC.MLCC$6.$C=function(a,b){for(var c in a)b[c]=a[c];for(var d in b)delete a[d]};
MLC.MLCC$6.$D=function(a){a=window.JSON.stringify(a,MLC.MLCC$6.$2);MLC.MLCC$6.$8();return a};MLC.MLCC$6.dateReviver=function(a,b){if(null!=b){var c=b.$date;if(null!=c)return new Date(c)}return b};MLC.MLCC$6.dateReplacer=function(a,b){var c=this[a];if(c instanceof Date){var d={};d.$date=c.getTime();MLC.MLCC$6.$4&&(this[a]=d,MLC.MLCC$6.$7(this,a,c));return d}return""===c?"":b};MLC.FlashObject=function(a,b){b=b||{};if(Object.keyExists(b,"id"))throw Error.argument("The parameters dictionary cannot contain a parameter named 'id'");
this.id=(MLC.FlashObject.$5++).toString();this.$6="FlashObject"+this.id;this.$7=a;this.$8=b;this.$8.id=this.id;MLC.FlashObject.$2[this.id]=this;__MSLiveCore__.Loader.onDocumentReady(ss.Delegate.create(this,function(){this.$E()}))};MLC.FlashObject.onReady=function(a){a=MLC.FlashObject.$2[a];null!=a&&a.$13()};MLC.FlashObject.trace=function(a,b){var c=MLC.FlashObject.$2[a];null!=c&&ss.Debug.trace(String.format("FlashObject[{0}]: {1}",c.id,b))};MLC.FlashObject.$14=function(a){var b=new ss.StringBuilder,
c=!0,d;for(d in a){var e=d,f=a[d];c||b.append("&");b.append(encodeURIComponent(e));b.append("=");b.append(encodeURIComponent(f.toString()));c=!1}return b.toString()};MLC.FlashObject.$15=function(a){var b=document.createElement("div");b.style.position="absolute";b.style.top="-1000px";b.style.width="300px";b.style.height="300px";b.id="FlashContainer"+a;document.body.appendChild(b);return b};MLC.FlashObject.$16=function(a){if(String.isNullOrEmpty(a))return a;MLC.FlashObject.$3.lastIndex=0;MLC.FlashObject.$3.test(a)&&
(a=a.replace(MLC.FlashObject.$3,function(a){return MLC.FlashObject.$4[a]}));return a};MLC.FlashObject.prototype={id:null,$6:null,$7:null,$8:null,$9:!1,$A:null,$B:!1,add_initialized:function(a){this.$C=ss.Delegate.combine(this.$C,a)},remove_initialized:function(a){this.$C=ss.Delegate.remove(this.$C,a)},$C:null,add_fsCommandReceived:function(a){this.$D=ss.Delegate.combine(this.$D,a)},remove_fsCommandReceived:function(a){this.$D=ss.Delegate.remove(this.$D,a)},$D:null,dispose:function(){this.$B||(this.$B=
!0,delete MLC.FlashObject.$2[this.id])},invokeMethod:function(a,b){this.$11();var a=MLC.FlashObject.$16(a),b=b||[],c=window.__flash__argumentsToXML(b,0),c=String.concat('<invoke name="',a,'" returntype="javascript">',c,"</invoke>"),c=this.$A.CallFunction(c);return null==c?null:eval(c)},setVariable:function(a,b){this.$11();this.$A.SetVariable(a,b)},$E:function(){var a=MLC.FlashObject.$15(this.id);this.$F();var b=MLC.FlashObject.$14(this.$8),c="\r\n<object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' codebase='https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0' width='300' height='300' id='{id}' name='{id}' type='application/x-shockwave-flash' data='{url}'>\r\n<param name='movie' value='{url}'></param>\r\n<param name='allowScriptAccess' value='always'></param>\r\n<param name='FlashVars' value='{variables}'></param>\r\n<embed play='true' menu='false' swLiveConnect='true' allowScriptAccess='always' type='application/x-shockwave-flash' FlashVars='{variables}' src='{url}' width='300' height='300' name='{id}'></embed>\r\n</object>\r\n";
Sys.Browser.agent===Sys.Browser.InternetExplorer&&(c+="\r\n<script event='FSCommand(command, args)' for='{id}'>{id}_DoFSCommand(command, args)<\/script>\r\n");c=c.replaceAll("{url}",this.$7);c=c.replaceAll("{id}",this.$6);c=c.replaceAll("{variables}",b);a.innerHTML=c},$F:function(){window[this.$6+"_DoFSCommand"]=ss.Delegate.create(this,this.$12)},$10:function(){var a=ss.Delegate.create(this,function(a){return MLC.FlashObject.$16(a)}),b=ss.Delegate.create(this,function(a,b){null!=a&&(a[b]=null)});
window.__flash__escapeXML=a;window.__flash__removeCallback=b},$11:function(){if(!this.$9)throw Error.invalidOperation("The object must be initialized.");},$12:function(a,b){null!=this.$D&&this.$D.invoke(this,new MLC.FSCommandEventArgs(a,b))},$13:function(){this.$9||(this.$9=!0,this.$10(),this.$A=Sys.Browser.agent===Sys.Browser.Firefox?document.embeds[this.$6]:document.getElementById(this.$6),null!=this.$C&&this.$C.invoke(this,ss.EventArgs.Empty))}};MLC.FSCommandEventArgs=function(a,b){MLC.FSCommandEventArgs.initializeBase(this);
this.$1_0=a;this.$1_1=b};MLC.FSCommandEventArgs.prototype={$1_0:null,$1_1:null,get_name:function(){return this.$1_0},get_value:function(){return this.$1_1}};MLC.MLCC$B.registerClass("MLC.MLCC$B");MLC.MLCC$C.registerClass("MLC.MLCC$C",null,MLC.MLCC$0);MLC.MLCC$8.registerClass("MLC.MLCC$8");MLC.MLCC$9.registerClass("MLC.MLCC$9",null,MLC.MLCC$0);MLC.MLCC$D.registerClass("MLC.MLCC$D",null,MLC.MLCC$0);MLC.MLCC$11.registerClass("MLC.MLCC$11");MLC.MLCC$12.registerClass("MLC.MLCC$12",null,MLC.MLCC$0,ss.IDisposable);
MLC.MLCC$F.registerClass("MLC.MLCC$F");MLC.MLCC$10.registerClass("MLC.MLCC$10");MLC.Channel.registerClass("MLC.Channel",null,MLC.IChannel);MLC.ChannelMessageReceivedEventArgs.registerClass("MLC.ChannelMessageReceivedEventArgs",ss.EventArgs);MLC.JSON.registerClass("MLC.JSON");MLC.MLCC$6.registerClass("MLC.MLCC$6");MLC.FlashObject.registerClass("MLC.FlashObject",null,ss.IDisposable);MLC.FSCommandEventArgs.registerClass("MLC.FSCommandEventArgs",ss.EventArgs);MLC.MLCC$12.$2=null;MLC.MLCC$12.$3=null;MLC.MLCC$12.$4=
null;MLC.MLCC$12.$2=[];MLC.MLCC$12.$3=window.location.hostname.toLowerCase();MLC.MLCC$12.$4=[];window.attachEvent("onmessage",MLC.MLCC$12.$13);MLC.MLCC$6.$0=[];MLC.MLCC$6.$1=null;MLC.MLCC$6.$2=null;MLC.MLCC$6.$3=!1;MLC.MLCC$6.$4=!1;MLC.MLCC$6.$5={};MLC.MLCC$6.$6={};Sys.Browser.agent===Sys.Browser.InternetExplorer&&8===Sys.Browser.version?MLC.MLCC$6.$3=MLC.MLCC$6.$9():MLC.MLCC$6.$4=Sys.Browser.agent===Sys.Browser.Firefox;MLC.MLCC$6.$1=MLC.MLCC$6.dateReviver;MLC.MLCC$6.$2=MLC.MLCC$6.dateReplacer;MLC.FlashObject.$2=
null;MLC.FlashObject.$3=null;MLC.FlashObject.$4=null;MLC.FlashObject.$5=0;MLC.FlashObject.$2={};MLC.FlashObject.$3=RegExp("[\\u0000\\u0009\\u000a\\u000d\\u0020\\u0022\\u0026\\u0027\\u003c\\u003e\\u005c]","g");MLC.FlashObject.$4={"\x00":"\\0","\t":"\\t","\n":"\\n","\r":"\\r"," ":"\\ ",'"':"&quot;","&":"&amp;","'":"&apos;","<":"&lt;",">":"&gt;","\\":"\\\\"};Type.registerNamespace("MC");MC.IAbortable=function(){};MC.IAbortable.registerInterface("MC.IAbortable");MC.AddressBookResultCode=function(){};
MC.AddressBookResultCode.prototype={success:0,failure:1,notFound:2};MC.AddressBookResultCode.registerEnum("MC.AddressBookResultCode",!1);MC.IAddressBook=function(){};MC.IAddressBook.registerInterface("MC.IAddressBook");MC.IAuthenticatedCommand=function(){};MC.IAuthenticatedCommand.registerInterface("MC.IAuthenticatedCommand");MC.ConnectionServiceResultCode=function(){};MC.ConnectionServiceResultCode.prototype={success:0,failure:1,signedOutRoaming:2,signedOutExceededMaxEndpointCount:3,unauthenticated:4,
signedOutSessionTimeout:5,badUic:6};MC.ConnectionServiceResultCode.registerEnum("MC.ConnectionServiceResultCode",!1);MC.IConnectionService=function(){};MC.IConnectionService.registerInterface("MC.IConnectionService");MC.IConnectionServiceEvents=function(){};MC.IConnectionServiceEvents.registerInterface("MC.IConnectionServiceEvents");MC.ConversationResultCode=function(){};MC.ConversationResultCode.prototype={success:0,failure:1};MC.ConversationResultCode.registerEnum("MC.ConversationResultCode",!1);
MC.IConversationEvents=function(){};MC.IConversationEvents.registerInterface("MC.IConversationEvents");MC.IConversationService=function(){};MC.IConversationService.registerInterface("MC.IConversationService");MC.IdentityServiceResultCode=function(){};MC.IdentityServiceResultCode.prototype={success:0,failure:1};MC.IdentityServiceResultCode.registerEnum("MC.IdentityServiceResultCode",!1);MC.IIdentityService=function(){};MC.IIdentityService.registerInterface("MC.IIdentityService");MC.LocallyStoredElementType=
function(){};MC.LocallyStoredElementType.prototype={signInStatusResponse:1,networkStatusEvents:2,messengerSessionState:4,messengerSessionEvents:5,conversations:6,conversationHistory:7,signInStatusTicket:8,alerts:9,rpsAnonCookie:10,recentMessage:11,cachedSettings:12};MC.LocallyStoredElementType.registerEnum("MC.LocallyStoredElementType",!1);MC.ILocalStorageService=function(){};MC.ILocalStorageService.registerInterface("MC.ILocalStorageService");MC.ILogContext=function(){};MC.ILogContext.registerInterface("MC.ILogContext");
MC.LogLevel=function(){};MC.LogLevel.prototype={error:0,warning:1,information:2,trace:3};MC.LogLevel.registerEnum("MC.LogLevel",!1);MC.ILogger=function(){};MC.ILogger.registerInterface("MC.ILogger");MC.IMessengerStatusSnapshot=function(){};MC.IMessengerStatusSnapshot.registerInterface("MC.IMessengerStatusSnapshot");MC.IPersistedConversationService=function(){};MC.IPersistedConversationService.registerInterface("MC.IPersistedConversationService");MC.IServiceFactory=function(){};MC.IServiceFactory.registerInterface("MC.IServiceFactory");
MC.IStorageService=function(){};MC.IStorageService.registerInterface("MC.IStorageService");MC.IUserService=function(){};MC.IUserService.registerInterface("MC.IUserService");MC.MessengerServiceResultCode=function(){};MC.MessengerServiceResultCode.prototype={success:0,failure:1,notFound:2,unauthenticated:3,notAllowed:4,messageTooLong:5,messageRecipientInvalid:6,messageRecipientDisabled:7,failedToPersist:8,failedToConnect:9};MC.MessengerServiceResultCode.registerEnum("MC.MessengerServiceResultCode",
!1);MC.IUserServiceEvents=function(){};MC.IUserServiceEvents.registerInterface("MC.IUserServiceEvents");MC.$create_AlertInfo=function(a,b,c,d,e,f,g,h,q,i,j,k){var m={};m.sender=a;m.senderDisplayName=b;m.receiver=c;m.siteUrl=d;m.subscrUrl=e;m.actionUrl=f;m.iconUrl=g;m.lang=h;m.message=q;m.timestamp=i;m.type=j;m.reloaded=k;return m};MC.AlertType=function(){};MC.AlertType.prototype={social:1,abch:2,sup:3,storage:4,iSvcProvider:5,other:6};MC.AlertType.registerEnum("MC.AlertType",!1);MC.$create_ApplicationDataInfo=
function(a,b,c){var d={};d.domain=a;d.properties=b;d.messageIds=c;return d};MC.$create_ApplicationMessageInfo=function(a,b){var c={};c.id=a;c.content=b||String.Empty;return c};MC.$create_AudioMetaMessageInfo=function(a,b){var c={};c.body=a;c.senderEndpointId=b;return c};MC.$create_AudioTunnelMessageInfo=function(a,b){var c={};c.sipBody=a;c.senderEndpointId=b;return c};MC.$create_AuthenticationInfo=function(a,b){var c={};c.authType=a;c.ticket=b;return c};MC.AuthenticationType=function(){};MC.AuthenticationType.prototype=
{rpsAuth:1};MC.AuthenticationType.registerEnum("MC.AuthenticationType",!1);MC.BooleanValue=function(){};MC.BooleanValue.prototype={None:0,True:1,False:2};MC.BooleanValue.registerEnum("MC.BooleanValue",!1);MC.BuddySubscriptionType=function(){};MC.BuddySubscriptionType.prototype={messengerSubscribe:1,messengerAndSkypeSubscribe:2,messengerUnsubscribe:3,messengerAndSkypeUnsubscribe:4};MC.BuddySubscriptionType.registerEnum("MC.BuddySubscriptionType",!1);MC.$create_ChannelEndpointInfo=function(a,b){var c=
{};c.id=a;c.type=b;return c};MC.ChannelEndpointType=function(){};MC.ChannelEndpointType.prototype={initializer:0,monitor:1,rpsAuthIdentity:4,pubSub:6};MC.ChannelEndpointType.registerEnum("MC.ChannelEndpointType",!1);MC.ClientType=function(){};MC.ClientType.prototype={unknown:0,computer:1,website:2,mobile:3,xbox:4,zune:5,iPhone:6,mac:7,SMS:8};MC.ClientType.registerEnum("MC.ClientType",!1);MC.CompatibilityVersion=function(){};MC.CompatibilityVersion.prototype={current:0,version37:1,version40:2,version30:3,
version31:4,version35:5};MC.CompatibilityVersion.registerEnum("MC.CompatibilityVersion",!1);MC.$create_MessengerSessionInfo=function(a,b,c,d){var e={};e.server=a;e.sessionToken=b;e.transactionID=c;e.pendingEvents=d;return e};MC.CapabilitiesFlags=function(){};MC.CapabilitiesFlags.prototype={none:0,onlineViaMobile:1,onlineViaTexas:2,supportsGifInk:4,supportsIsfInk:8,webCamDetected:16,supportsChunking:32,mobileEnabled:64,webWatchEnabled:128,supportsActivities:256,onlineViaWebIM:512,mobileDevice:1024,
onlineViaFederatedInterface:2048,hasSpace:4096,isMceUser:8192,supportsDirectIM:16384,supportsWinks:32768,supportsSharedSearch:65536,isBot:131072,supportsTunneledSip:2097152,supportsVoiceIM:262144,supportsSChannel:524288,supportsSipInvite:1048576,supportsMultipartyMedia:2097152,supportsSDrive:4194304,supportsPageModeMessaging:8388608,hasOneCare:16777216,supportsTurn:33554432,supportsDirectBootstrapping:67108864,usingAlias:134217728,appVersion60:268435456,appVersion61:536870912,appVersion62:805306368,
appVersion70:1073741824,appVersion75:1342177280,appVersion80:1610612736,appVersion81:1879048192,appVersion85:2147483648,appVersion90:2415919104,appVersion2009:2684354560,isSmsOnly:1,supportsVoiceOverMsnp:2,supportsUucpSipStack:4,supportsApplicationMessages:8,rtcVideoEnabled:16,supportsPeerToPeerV2:32,isAuthenticatedWebIMUser:64,supportsOfflineIM:256,supportsNudges:1024,videoCallSupports16By9AspectRatio:262144,supportsPeerToPeerMixerRelay:32768,supportsPeerToPeerEnveloping:524288,yahooIMDisabled:4194304,
sipTunnelVersion2:8388608,fTurnCapable:536870912,supportsMultipartyConversations:2147483648,supportsMissedConversations:1,canSupportVideoCalls:4,appVersionMask:4026531840};MC.CapabilitiesFlags.registerEnum("MC.CapabilitiesFlags",!0);MC.$create_ContactInfo=function(a,b,c){var d={};d.id=a;d.nickname=b;d.addresses=c;d.firstName=String.Empty;d.lastName=String.Empty;d.favoritesOrder=null;return d};MC.$create_CallEventMessageInfo=function(a){var b={};b.duration=a;return b};MC.$create_SkypeInitializationInfo=
function(a,b,c,d){var e={};e.liveId=a;e.cid=b;e.buddy=c;e.networks=d;return e};MC.$create_InitializeServiceResult=function(a,b,c){var d={};d.uxSettings=b;d.identity=a;d.resultCode=c;return d};MC.$create_DateInfo=function(a){var b={};b.utcMilliseconds=a.getTime();return b};MC.$create_DatagramInfo=function(a,b){var c={};c.datagramType=a;c.payload=b;return c};MC.DatagramInfoType=function(){};MC.DatagramInfoType.prototype={sdg:0,imGroupPut:1,imGroupDel:2,put:3,del:4,serviceDataPut:5,serviceDataDel:6,
networkDataPut:7,get:8};MC.DatagramInfoType.registerEnum("MC.DatagramInfoType",!1);MC.DisplayNameOptions=function(){};MC.DisplayNameOptions.prototype={displayName:0,fullName:1};MC.DisplayNameOptions.registerEnum("MC.DisplayNameOptions",!1);MC.$create_EmailInfo=function(a){var b={},a=a.toLowerCase();b.address=a.trim();return b};MC.$create_ExceptionLogEntryInfo=function(a){var b={};b.message=a.message;b.stackTrace=a.toString();return b};MC.$create_HttpRequestLogEntryInfo=function(a,b,c){var d={};d.url=
a;d.statusText=b;d.responseText=c;return d};MC.FontStyleFlags=function(){};MC.FontStyleFlags.prototype={regular:0,bold:1,italic:2,strikeout:4,underline:8};MC.FontStyleFlags.registerEnum("MC.FontStyleFlags",!0);MC.$create_GroupInfo=function(a,b,c){var d={};d.id=a;d.name=b;d.isFavorites=!1;d.contactIds=c||[];return d};MC.$create_IdentityInfo=function(a,b){var c={};c.liveId=a;c.skypeId="";c.endpointId=b;c.cid="";c.experienceId=null;return c};MC.$create_IMAddressInfo=function(a,b,c){var d={};d.address=
13===b?a:null!=a?a.toLowerCase():null;d.type=b;d.roleLists=c;d.cid=11===d.type?a:String.Empty;d.id=d.address;d.isFan=!1;return d};MC.IMAddressInfoType=function(){};MC.IMAddressInfoType.prototype={none:0,windowsLive:1,officeCommunicator:2,telephone:4,skype:8,circle:9,temporaryGroup:10,cid:11,connect:13,remoteNetwork:14,smtp:16,yahoo:32};MC.IMAddressInfoType.registerEnum("MC.IMAddressInfoType",!1);MC.$create_InitializationOptionsInfo=function(a,b,c){var d={};d.disableLocalStorage=a;d.clearStorageBeforeUse=
b;d.allowLocalSignIn=c;return d};MC.$create_InstanceInfo=function(a,b,c){var d={};d.id=a||String.Empty;d.isLocal=b;d.isPrimary=c;return d};MC.$create_KeyValuePair=function(a,b){var c={};c.key=a;c.value=b;return c};MC.$create_LocalSettingsInfo=function(a,b){var c={};c.simulatePrivateSessionStorageEnabled=a;c.crossPageSupportEnabled=b;return c};MC.$create_LogEntryInfo=function(a,b,c,d,e,f){var g={};g.time=Date.get_now();g.type=a;g.context=b.get_context();g.level=c;g.location=d||String.Empty;g.message=
e;g.extraState=f;return g};MC.LogEntryType=function(){};MC.LogEntryType.prototype={normal:0,exception:1,httpRequest:2,stateChange:3};MC.LogEntryType.registerEnum("MC.LogEntryType",!1);MC.$create_LogRequestMessageInfo=function(a,b){var c={};c.uploadUrl=a;c.authToken=b;return c};MC.$create_MailNotificationActivityInfo=function(a,b,c){var d={};d.source=a;d.destination=b;d.delta=c;return d};MC.$create_MailNotificationIncomingInfo=function(a,b,c,d,e,f){var g={};g.from=a;g.fromAddress=b;g.messageUrl=c;
g.subject=d;g.folder=e;g.id=f;return g};MC.MailNotificationFolderType=function(){};MC.MailNotificationFolderType.prototype={inbox:0,trash:1,junkMail:2,sent:3,drafts:4,other:5,hidden:6};MC.MailNotificationFolderType.registerEnum("MC.MailNotificationFolderType",!1);MC.MailNotificationInfoType=function(){};MC.MailNotificationInfoType.prototype={initial:0,incoming:1,activity:2};MC.MailNotificationInfoType.registerEnum("MC.MailNotificationInfoType",!1);MC.$create_MailNotificationInfo=function(a,b){var c=
{};c.notification=a;c.type=b;return c};MC.$create_MailNotificationInitialInfo=function(a,b,c,d){var e={};e.inboxUnread=a;e.inboxTotal=b;e.foldersUnread=c;e.foldersTotal=d;return e};MC.MessageChannelType=function(){};MC.MessageChannelType.prototype={none:0,online:1,offline:2,mobile:3,history:4};MC.MessageChannelType.registerEnum("MC.MessageChannelType",!1);MC.$create_MessageInfo=function(a,b){var c={};c.type=a;c.sender=null;c.timestamp=MC.$create_DateInfo(Date.get_now());c.id=null;c.isOfflineMessage=
!1;c.isHistoryMessage=!1;c.info=b;return c};MC.MessageInfoType=function(){};MC.MessageInfoType.prototype={unknownMessage:0,textMessage:1,nudgeMessage:2,applicationMessage:3,audioTunnelMessage:4,audioMetaMessage:5,callEventMessage:6,logRequestMessage:249,openIMWindowMessage:250,markIMWindowReadMessage:251,closeIMWindowMessage:252,typingUserMessage:255};MC.MessageInfoType.registerEnum("MC.MessageInfoType",!1);MC.$create_MessengerSessionEvents=function(a){var b={};b.events=a||[];return b};MC.$create_MessengerSessionState=
function(a,b,c,d,e,f){var g={};g.server=a;g.sessionToken=b;g.transactionID=c;g.services=d;g.disconnected=e;g.identity=f;return g};MC.NetworkConnectionType=function(){};MC.NetworkConnectionType.prototype={none:0,windowsLive:1,connect:2};MC.NetworkConnectionType.registerEnum("MC.NetworkConnectionType",!1);MC.$create_NetworkInfo=function(a,b,c,d,e,f,g,h){var q={};q.id=a;q.name=b;q.connectionType=c;q.photoUrlFormat=e;q.profileUrlFormat=f;q.sendMessageUrlFormat=g;q.reportAbuseUrlFormat=h;q.supportsIM=
0!==c;q.imEnabled=!1;q.tokenState=String.Empty;q.status=0;q.isRemoteNetwork=d;return q};MC.NetworkInfoStatus=function(){};MC.NetworkInfoStatus.prototype={signedOut:0,signingIn:1,signedIn:2,signingOut:3,autoReconnectWaiting:4};MC.NetworkInfoStatus.registerEnum("MC.NetworkInfoStatus",!1);MC.NetworkOperationType=function(){};MC.NetworkOperationType.prototype={enableIM:1,disableIM:2};MC.NetworkOperationType.registerEnum("MC.NetworkOperationType",!0);MC.$create_NotificationInfo=function(){return{}};MC.$create_PersistedAlert=
function(a,b,c,d,e,f){var g={};g.actionUrl=a;g.subscrUrl=b;g.iconUrl=c;g.timestamp=d;g.text=e;g.type=f;return g};MC.$create_PersistedAlerts=function(){return{}};MC.$create_ConversationMessages=function(a,b){var c={};c.conversationId=a;c.messages=b;return c};MC.$create_PersistedConversation=function(a,b,c,d,e){var f={};f.id=a;f.user=b;f.roster=c;f.rosterMri=d;f.hasUnreadMessages=e;return f};MC.$create_PersistedConversations=function(){return{}};MC.$create_PersonInfo=function(a,b){var c={};c.id=a;c.contacts=
b;return c};MC.PresenceInfoStatus=function(){};MC.PresenceInfoStatus.prototype={none:0,offline:1,online:2,appearOffline:3,busy:4,idle:5,beRightBack:6,away:7,inACall:8,outToLunch:9};MC.PresenceInfoStatus.registerEnum("MC.PresenceInfoStatus",!1);MC.PrivacyOptions=function(){};MC.PrivacyOptions.prototype={none:0,blockByDefault:1,allowByDefault:2};MC.PrivacyOptions.registerEnum("MC.PrivacyOptions",!1);MC.RoleLists=function(){};MC.RoleLists.prototype={none:0,forward:1,allow:2,block:4,hideCompat:5,reverse:8,
pending:16,hide:64};MC.RoleLists.registerEnum("MC.RoleLists",!0);MC.RichPsmLinkType=function(){};MC.RichPsmLinkType.prototype={none:0,simpleText:1,link:2,linkToVideo:3,photo:4,photos:5,video:6,document:7,location:8};MC.RichPsmLinkType.registerEnum("MC.RichPsmLinkType",!1);MC.ServiceType=function(){};MC.ServiceType.prototype={none:0,PE:1,IM:2,PD:4,CM:8,SKP:16};MC.ServiceType.registerEnum("MC.ServiceType",!0);MC.$create_SignalMessageInfo=function(a,b){var c={};c.firstMri=a;c.secondMri=b;return c};MC.SubsystemType=
function(){};MC.SubsystemType.prototype={core:0,addressBook:1,expressionProfile:2,identity:3,chat:4,presence:5,configuration:6,localStorage:7,pubSub:8,count:9};MC.SubsystemType.registerEnum("MC.SubsystemType",!1);MC.$create_ServiceDataInfo=function(a,b,c){var d={};d.service=a;d.properties=b;d.endpointData=c;return d};MC.$create_ServiceEndpointDataInfo=function(a,b,c){var d={};d.endpointId=a;d.properties=c;d.service=b;return d};MC.$create_StateChangeLogEntryInfo=function(a,b){var c={};c.key=a;c.value=
b;return c};MC.SendDatagramResultCode=function(){};MC.SendDatagramResultCode.prototype={success:0,failure:1,tooLong:2,recipientInvalid:3,recipientDisabled:4,recipientNotAcceptingIMs:5};MC.SendDatagramResultCode.registerEnum("MC.SendDatagramResultCode",!1);MC.SessionServiceOptions=function(){};MC.SessionServiceOptions.prototype={normal:0,notifications:1,contactPresence:2,full:3};MC.SessionServiceOptions.registerEnum("MC.SessionServiceOptions",!1);MC.$create_SettingsInfo=function(){return{hasInbox:!1,
hasInboxChanged:!1,isIdentityUnverified:!1,isIdentityUnverifiedChanged:!1,isMpopDisabled:!1,isMpopDisabledChanged:!1,isAutoReconnectEnabled:!0,autoReconnectInitialWaitTime:-1,privacyOptions:0}};MC.SignOutLocationFlags=function(){};MC.SignOutLocationFlags.prototype={none:0,localEndpoint:1,remoteEndpoints:2,allEndpoints:3,specificEndpoints:8};MC.SignOutLocationFlags.registerEnum("MC.SignOutLocationFlags",!0);MC.SignOutReasonCode=function(){};MC.SignOutReasonCode.prototype={signedOutByLocalEndpoint:0,
signedOutByRemoteEndpoint:1,connectionLost:2,serverError:3,endpointLimitExceeded:4,signedOutForReconnect:5,userTransferred:6,sessionTimeout:7,badUic:8};MC.SignOutReasonCode.registerEnum("MC.SignOutReasonCode",!1);MC.$create_TextMessageFormatInfo=function(a,b,c,d){var e={};e.fontColor=a;e.fontFamily=b||String.Empty;e.fontStyle=c;e.rightToLeft=d;return e};MC.$create_TextMessageInfo=function(a,b){var c={};c.text=a;c.format=b;c.safeUrl=String.Empty;return c};MC.UpdateIMAvailabilityOperationCode=function(){};
MC.UpdateIMAvailabilityOperationCode.prototype={none:0,addContacts:1,removeContacts:2,addNetwork:3,removeNetwork:4};MC.UpdateIMAvailabilityOperationCode.registerEnum("MC.UpdateIMAvailabilityOperationCode",!1);MC.$create_UpdateIMAvailabilityServiceRequest=function(a,b,c,d){var e={};e.authInfo=a;e.addresses=b;e.networkSourceId=c;e.operation=d;return e};MC.$create_UpdateUserProfileRequest=function(a,b,c,d,e){var f={};f.authInfo=a;f.richUserMessage=b;f.richLinkType=MC.ServiceDataHelper.convertToRawLinkType(c);
f.richUrl=d;f.displayName=e;return f};MC.$create_UpdateUserProfileResponse=function(a,b,c,d){var e={};e.personalMessage=a;e.richUserMessage=b;e.richLinkType=MC.ServiceDataHelper.parseRichLinkType(c);e.richUrl=d;return e};MC.$create_UpdateUserSettingsRequest=function(a,b,c,d,e){var f={};f.version=a;f.clientVersion=b;f.authInfo=c;f.lastStatus=d;f.uploadLogsPreference=e;return f};MC.UploadLogsPreferenceType=function(){};MC.UploadLogsPreferenceType.prototype={none:0,accept:1,decline:2};MC.UploadLogsPreferenceType.registerEnum("MC.UploadLogsPreferenceType",
!1);MC.$create_UXSettingsInfo=function(a,b,c,d,e){var f={};f.autoSignInEnabled=a;f.audioEnabled=b;f.firstRunExperienceViewed=c;f.lastStatus=d;f.uploadLogsPreference=e;return f};MC.ChannelEndpoint=function(a,b){this.$0=a;this.$1=b;this.sendMessage("$CreateEndpoint",[this.$0.id])};MC.ChannelEndpoint.$4=function(a){for(var b=a.length,c=Array(b-1),d=0;d<b-1;d++)c[d]=a[d];return c};MC.ChannelEndpoint.$5=function(a,b){var c=null!=a?a.length:0,d=Array(c+1);d[c]=b;for(var e=0;e<c;e++)d[e]=a[e];return d};
MC.ChannelEndpoint.$6=function(a){return null!=a&&0<a.length?a[a.length-1]:null};MC.ChannelEndpoint.prototype={$0:null,$1:null,$2:!1,get_id:function(){return this.$0.id},get_type:function(){return this.$0.type},$3:function(a,b){if(!this.$2){var c=b.get_command(),d=b.get_parameters();"$CreateEndpoint"!==c&&(!String.isNullOrEmpty(c)&&null!=this.$7)&&(b=new MLC.ChannelMessageReceivedEventArgs(c,MC.ChannelEndpoint.$4(d)),this.$7.invoke(this,b))}},add_messageReceived:function(a){this.$7=ss.Delegate.combine(this.$7,
a)},remove_messageReceived:function(a){this.$7=ss.Delegate.remove(this.$7,a)},$7:null,sendMessage:function(a,b){this.$2||this.$1.sendMessage(a,MC.ChannelEndpoint.$5(b,this.$0))},dispose:function(){this.$2||(this.sendMessage("$DisposeEndpoint",null),this.$1=null,this.$2=!0)}};MC.ChannelEndpointMultiplexer=function(a){this.$3=!1;this.$0=a;this.$2={};this.$0.add_messageReceived(ss.Delegate.create(this,this.$6))};MC.ChannelEndpointMultiplexer.prototype={$0:null,$2:null,$3:!1,add_channelEndpointCreated:function(a){this.$4=
ss.Delegate.combine(this.$4,a)},remove_channelEndpointCreated:function(a){this.$4=ss.Delegate.remove(this.$4,a)},$4:null,add_channelEndpointDisposed:function(a){this.$5=ss.Delegate.combine(this.$5,a)},remove_channelEndpointDisposed:function(a){this.$5=ss.Delegate.remove(this.$5,a)},$5:null,$6:function(a,b){var c=b.get_parameters(),c=MC.ChannelEndpoint.$6(c);if(null!=c)if(Object.keyExists(this.$2,c.id.toString())){var d=this.$2[c.id.toString()];"$DisposeEndpoint"===b.get_command()?(this.$8(d),d.dispose(),
delete this.$2[c.id.toString()]):d.$3(this,b)}else this.createChannelEndpointByInfo(c).$3(this,b)},createNewChannelEndpoint:function(a){a=new MC.ChannelEndpoint(MC.$create_ChannelEndpointInfo(MC.ChannelEndpointMultiplexer.$1++,a),this.$0);this.$2[a.get_id().toString()]=a;this.$7(a);return a},createChannelEndpointByInfo:function(a){a=new MC.ChannelEndpoint(a,this.$0);this.$2[a.get_id().toString()]=a;this.$7(a);return a},$7:function(a){null!=this.$4&&this.$4.invoke(this,new MC.ChannelEndpointEventArgs(a))},
$8:function(a){null!=this.$5&&this.$5.invoke(this,new MC.ChannelEndpointEventArgs(a))},dispose:function(){if(!this.$3){this.$0.remove_messageReceived(ss.Delegate.create(this,this.$6));this.$0=null;var a=this.$2,b;for(b in a)a[b].dispose();Object.clearKeys(this.$2);this.$3=!0}}};MC.ChannelEndpointEventArgs=function(a){MC.ChannelEndpointEventArgs.initializeBase(this);this.$1_0=a};MC.ChannelEndpointEventArgs.prototype={$1_0:null,get_channelEndpoint:function(){return this.$1_0}};MC.AuthenticationFailedEventArgs=
function(a){MC.AuthenticationFailedEventArgs.initializeBase(this);this.$1_0=a};MC.AuthenticationFailedEventArgs.prototype={$1_0:null,get_authenticatedCommand:function(){return this.$1_0}};MC.LocalStorageDataReadWriteEventArgs=function(a,b,c){MC.LocalStorageDataReadWriteEventArgs.initializeBase(this);this.$1_2=c;this.$1_1=b;this.$1_0=a};MC.LocalStorageDataReadWriteEventArgs.prototype={$1_0:0,$1_1:0,$1_2:null,get_revision:function(){return this.$1_0},get_element:function(){return this.$1_1},get_data:function(){return this.$1_2}};
MC.InstancesChangedEventArgs=function(a){MC.InstancesChangedEventArgs.initializeBase(this);this.$1_0=a};MC.InstancesChangedEventArgs.prototype={$1_0:null,get_instances:function(){return this.$1_0}};MC.Compatibility=function(){};MC.Compatibility.get_version=function(){return MC.Compatibility.$0};MC.Compatibility.set_version=function(a){return MC.Compatibility.$0=a};MC.Compatibility.get_microsoftAjaxPropertyNamesEnabled=function(){switch(MC.Compatibility.get_version()){case 3:case 4:case 5:case 1:return!1;
default:return __MSLiveCore__.Loader.get_settings().compatibility.microsoftAjaxPropertyNames}};MC.Compatibility.get_displayNameOptions=function(){switch(MC.Compatibility.get_version()){case 3:case 4:case 5:case 1:case 2:return 0;default:return 1}};MC.Compatibility.get_useLegacyPersonalMessage=function(){switch(MC.Compatibility.get_version()){case 3:case 4:case 5:case 1:return!0;default:return!1}};MC.Compatibility.get_maxPersonalMessageLength=function(){switch(MC.Compatibility.get_version()){case 3:case 4:case 5:case 1:return 129;
default:return 512}};MC.Compatibility.get_autoReconnectEnabled=function(){switch(MC.Compatibility.get_version()){case 3:case 4:case 5:case 1:case 2:return!1;default:return!0}};MC.Compatibility.get_sharingControlBarEnabled=function(){switch(MC.Compatibility.get_version()){case 3:case 4:case 5:case 1:return!1;default:return!0}};MC.Compatibility.get_defaultPresenceStatusControlToImage=function(){switch(MC.Compatibility.get_version()){case 3:case 4:case 5:return!1;default:return!0}};MC.Compatibility.get_enforceApplicationMessageIDRegistration=
function(){switch(MC.Compatibility.get_version()){case 3:case 4:case 5:case 1:return!0;default:return!1}};MC.Compatibility.get_provideLegacyContactInfo=function(){switch(MC.Compatibility.get_version()){case 1:case 2:return!0;default:return!1}};MC.Compatibility.get_useLastKnownUserStatus=function(){switch(MC.Compatibility.get_version()){case 3:case 4:case 5:case 1:return!1;default:return!0}};MC.LogContext=function(a){this.$1=a||String.Empty};MC.LogContext.get_global=function(){return MC.LogContext.$0};
MC.LogContext.prototype={$1:null,get_context:function(){return this.$1}};MC.CMServiceDataProperties=function(){};MC.CMServiceData=function(a){MC.CMServiceData.initializeBase(this,[a])};MC.CMServiceData.prototype={update:function(a){return this.$3(a,!1)},Delete:function(a){return this.$3(a,!0)},$3:function(a,b){return b?MC.CMServiceData.callBaseMethod(this,"Delete",[a]):MC.CMServiceData.callBaseMethod(this,"update",[a])}};MC.CMServiceEndpointDataProperties=function(){};MC.CMServiceEndpointData=function(a){MC.CMServiceEndpointData.initializeBase(this,
[a])};MC.CMServiceEndpointData.prototype={$1:function(a,b){MC.CMServiceEndpointData.callBaseMethod(this,"$1",[a,b])}};MC.SKPServiceEndpointDataProperties=function(){};MC.SKPServiceEndpointData=function(a){MC.SKPServiceEndpointData.initializeBase(this,[a])};MC.SKPServiceEndpointData.prototype={get_nodeInfo:function(){return this.get_item("NodeInfo")},set_nodeInfo:function(a){this.set_item("NodeInfo",a);return a},$1:function(a,b){MC.SKPServiceEndpointData.callBaseMethod(this,"$1",[a,b])}};MC.SKPServiceDataProperties=
function(){};MC.SKPServiceData=function(a){MC.SKPServiceData.initializeBase(this,[a])};MC.SKPServiceData.prototype={get_mood:function(){return this.get_item("Mood")},set_mood:function(a){this.set_item("Mood",a);return a},get_skypeName:function(){return this.get_item("Skypename")},set_skypeName:function(a){this.set_item("Skypename",a);return a},getEndpointData:function(a){return Object.keyExists(this.get_$0(),a)?this.get_$0()[a]:null},update:function(a){return MC.SKPServiceData.callBaseMethod(this,
"update",[a])}};MC.IMServiceDataProperties=function(){};MC.IMServiceData=function(a){MC.IMServiceData.initializeBase(this,[a])};MC.IMServiceData.prototype={get_isOnline:function(){switch(this.get_status()){case 0:case 1:case 3:return!1;default:return!0}},get_status:function(){return MC.ServiceDataHelper.parseStatus(this.get_item("Status"))},set_status:function(a){this.set_item("Status",MC.ServiceDataHelper.formatStatus(a));return a},get_currentMedia:function(){return this.get_item("CurrentMedia")},
set_currentMedia:function(a){this.set_item("CurrentMedia",a);return a},get_isOnlineViaMobileDevice:function(){return this.$4(0,1)},get_isOnlineViaWeb:function(){return this.$4(0,512)},get_webCamDetected:function(){return this.$5(0,16)},get_videoCallSupports16By9AspectRatio:function(){return this.$4(1,262144)},get_supportsTunneledSip:function(){return this.$5(0,2097152)},get_sipTunnelVersion2:function(){return this.$4(1,8388608)},get_fTurnCapable:function(){return this.$4(1,536870912)},get_canSupportVideoCalls:function(){return this.$5(2,
4)},get_supportsApplicationMessages:function(){return this.$5(1,8)},get_supportsNudges:function(){return this.$5(1,1024)},get_supportsMultipartyConversations:function(){return this.$5(1,2147483648)},get_version:function(){var a=4026531840,b=this.endpointData,c;for(c in b){var d=b[c].get_version();d<a&&(a=d)}return 4026531840===a?0:a},getEndpointData:function(a){return Object.keyExists(this.get_$0(),a)?this.get_$0()[a]:null},update:function(a){return this.$3(a,!1)},Delete:function(a){return this.$3(a,
!0)},$3:function(a,b){var c=this.get_isOnline(),d=this.get_isOnlineViaMobileDevice(),e=this.get_isOnlineViaWeb(),f=this.get_supportsApplicationMessages(),g=this.get_supportsNudges(),h=this.get_supportsMultipartyConversations(),q=this.get_webCamDetected(),i=this.get_videoCallSupports16By9AspectRatio(),j=this.get_canSupportVideoCalls(),k=this.get_version(),m=b?MC.IMServiceData.callBaseMethod(this,"Delete",[a]):MC.IMServiceData.callBaseMethod(this,"update",[a]);b&&(0===Object.getKeyCount(this.endpointData)&&
1!==this.get_status())&&(this.set_status(1),m.updatedProperties.add("Status"));if(0<Object.getKeyCount(m.deletedEndpoints)||0<Object.getKeyCount(m.newEndpoints)||0<Object.getKeyCount(m.updatedEndpoints))this.get_isOnlineViaMobileDevice()!==d&&m.updatedProperties.add("IsOnlineViaMobileDevice"),this.get_isOnlineViaWeb()!==e&&m.updatedProperties.add("IsOnlineViaWeb"),this.get_webCamDetected()!==q&&m.updatedProperties.add("WebCamDetected"),this.get_videoCallSupports16By9AspectRatio()!==i&&m.updatedProperties.add("VideoCallSupports16By9AspectRatio"),
this.get_canSupportVideoCalls()!==j&&m.updatedProperties.add("CanSupportVideoCalls"),this.get_supportsApplicationMessages()!==f&&m.updatedProperties.add("SupportsApplicationMessages"),this.get_supportsNudges()!==g&&m.updatedProperties.add("SupportsNudges"),this.get_supportsMultipartyConversations()!==h&&m.updatedProperties.add("SupportsMultipartyConversations"),this.get_version()!==k&&m.updatedProperties.add("Version");m.updatedProperties.contains("Status")&&c!==this.get_isOnline()&&m.updatedProperties.add("IsOnline");
return m},$4:function(a,b){if(0===Object.getKeyCount(this.endpointData))return!1;var c=this.get_$0(),d;for(d in c){var e=c[d].get_capabilities();if(null==e||e.length<=a||0===(e[a]&b))return!1}return!0},$5:function(a,b){var c=this.get_$0(),d;for(d in c){var e=c[d].get_capabilities();if(null!=e&&e.length>a&&0!==(e[a]&b))return!0}return!1}};MC.IMServiceEndpointDataProperties=function(){};MC.IMServiceEndpointData=function(a){MC.IMServiceEndpointData.initializeBase(this,[a])};MC.IMServiceEndpointData.prototype=
{get_capabilities:function(){return MC.ServiceDataHelper.parseCapabilities(this.get_item("Capabilities"))},set_capabilities:function(a){this.set_item("Capabilities",MC.ServiceDataHelper.formatCapabilities(a));return a},get_domain:function(){return this.get_item("DMN")},set_domain:function(a){this.set_item("DMN",a);var b=this.$3("WebAppData");null!=b&&(b.domain=a);return a},get_isOnlineViaMobileDevice:function(){return MC.ServiceDataHelper.isSet(0,1,this.get_capabilities())},get_isOnlineViaWeb:function(){return MC.ServiceDataHelper.isSet(0,
512,this.get_capabilities())},get_webCamDetected:function(){return MC.ServiceDataHelper.isSet(0,16,this.get_capabilities())},get_videoCallSupports16By9AspectRatio:function(){return MC.ServiceDataHelper.isSet(1,262144,this.get_capabilities())},get_supportsTunneledSip:function(){return MC.ServiceDataHelper.isSet(0,2097152,this.get_capabilities())},get_sipTunnelVersion2:function(){return MC.ServiceDataHelper.isSet(1,8388608,this.get_capabilities())},get_fTurnCapable:function(){return MC.ServiceDataHelper.isSet(1,
536870912,this.get_capabilities())},get_rtcVideoEnabled:function(){return MC.ServiceDataHelper.isSet(1,16,this.get_capabilities())},get_canSupportVideoCalls:function(){return MC.ServiceDataHelper.isSet(2,4,this.get_capabilities())},get_supportsApplicationMessages:function(){return MC.ServiceDataHelper.isSet(1,8,this.get_capabilities())},get_supportsNudges:function(){return MC.ServiceDataHelper.isSet(1,1024,this.get_capabilities())},get_supportsMultipartyConversations:function(){return MC.ServiceDataHelper.isSet(1,
2147483648,this.get_capabilities())},get_version:function(){var a=this.get_capabilities();return null!=a&&1<=a.length?4026531840&a[0]:0},get_messageExtensions:function(){var a=this.$3("WebAppData");return null!=a?a.messageIds:[]},set_messageExtensions:function(a){var b=this.$3("WebAppData");null==b&&(b=MC.$create_ApplicationDataInfo(this.get_domain(),[],[]),this.$4("WebAppData",b));return b.messageIds=a},get_presenceExtensions:function(){var a=this.$3("WebAppData");return null!=a?a.properties:[]},
set_presenceExtensions:function(a){var b=this.$3("WebAppData");null==b&&(b=MC.$create_ApplicationDataInfo(this.get_domain(),[],[]),this.$4("WebAppData",b));return b.properties=a},$1:function(a,b){var c=this.get_isOnlineViaMobileDevice(),d=this.get_isOnlineViaWeb(),e=this.get_supportsApplicationMessages(),f=this.get_supportsNudges(),g=this.get_supportsMultipartyConversations(),h=this.get_webCamDetected(),i=this.get_videoCallSupports16By9AspectRatio(),j=this.get_canSupportVideoCalls(),k=this.get_version();
MC.IMServiceEndpointData.callBaseMethod(this,"$1",[a,b]);if(Object.keyExists(b.updatedEndpoints,this.get_$0().endpointId)){var l=b.updatedEndpoints[this.get_$0().endpointId];l.contains("Capabilities")&&(c!==this.get_isOnlineViaMobileDevice()&&l.add("IsOnlineViaMobileDevice"),d!==this.get_isOnlineViaWeb()&&l.add("IsOnlineViaWeb"),h!==this.get_webCamDetected()&&l.add("WebCamDetected"),i!==this.get_videoCallSupports16By9AspectRatio()&&l.add("VideoCallSupports16By9AspectRatio"),j!==this.get_canSupportVideoCalls()&&
l.add("CanSupportVideoCalls"),e!==this.get_supportsApplicationMessages()&&l.add("SupportsApplicationMessages"),f!==this.get_supportsNudges()&&l.add("SupportsNudges"),g!==this.get_supportsMultipartyConversations()&&l.add("SupportsMultipartyConversations"),k!==this.get_version()&&l.add("Version"));l.contains("WebAppData")&&(l.add("MessageExtensions"),l.add("PresenceExtensions"))}},propertyEquals:function(a,b){return"WebAppData"===a?this.info.properties[a]===b:MC.IMServiceEndpointData.callBaseMethod(this,
"propertyEquals",[a,b])},propertyIsNullOrEmpty:function(a){return"WebAppData"===a?null==this.info.properties[a]:MC.IMServiceEndpointData.callBaseMethod(this,"propertyIsNullOrEmpty",[a])},$3:function(a){return Object.keyExists(this.info.properties,a)?this.info.properties[a]:null},$4:function(a,b){this.info.properties[a]=b}};MC.PDServiceData=function(a){MC.PDServiceData.initializeBase(this,[a])};MC.PDServiceData.prototype={getEndpointData:function(a){return Object.keyExists(this.get_$0(),a)?this.get_$0()[a]:
null}};MC.PDServiceEndpointDataProperties=function(){};MC.PDServiceEndpointData=function(a){MC.PDServiceEndpointData.initializeBase(this,[a])};MC.PDServiceEndpointData.prototype={get_name:function(){return this.get_item("EpName")},set_name:function(a){this.set_item("EpName",a);return a},get_clientType:function(){var a=this.get_item("ClientType");if(String.isNullOrEmpty(a))return 0;a=MC.ServiceDataHelper.$2(a);return 0>a?0:a},set_clientType:function(a){this.set_item("ClientType",a.toString());return a}};
MC.PEServiceDataProperties=function(){};MC.PEServiceData=function(a){MC.PEServiceData.initializeBase(this,[a])};MC.PEServiceData.prototype={get_personalMessage:function(){return this.get_item("PSM")},set_personalMessage:function(a){this.set_item("PSM",a);return a},get_displayName:function(){var a=this.get_item("FriendlyName");return null!=a&&a.endsWith("(E-mail Address Not Verified)")?MC.ServiceDataHelper.$3(a,0,a.length-29).trimEnd():a},set_displayName:function(a){this.set_item("FriendlyName",a);
return a},get_userTileLocation:function(){return this.get_item("UserTileLocation")},set_userTileLocation:function(a){this.set_item("UserTileLocation",a);return a},get_isIdentityVerified:function(){var a=this.get_item("FriendlyName");return null!=a&&!a.endsWith("(E-mail Address Not Verified)")},get_displayPictureUrl:function(){return this.get_item("DisplayPictureUrl")},set_displayPictureUrl:function(a){this.set_item("DisplayPictureUrl",a);return a},get_richUserMessage:function(){return this.get_item("RUM")},
set_richUserMessage:function(a){this.set_item("RUM",a);0===this.get_richLinkType()&&this.set_richLinkType(1);return a},get_richUrl:function(){return this.get_item("RUL")},set_richUrl:function(a){this.set_item("RUL",a);return a},get_richLinkType:function(){return MC.ServiceDataHelper.parseRichLinkType(this.get_item("RLT"))},set_richLinkType:function(a){this.set_item("RLT",MC.ServiceDataHelper.convertToRawLinkType(a));return a},get_safeUrl:function(){return this.get_item("SUL")},set_safeUrl:function(a){this.set_item("SUL",
a);return a},getEndpointData:function(a){return Object.keyExists(this.get_$0(),a)?this.get_$0()[a]:null},update:function(a){var b=this.get_isIdentityVerified(),a=MC.PEServiceData.callBaseMethod(this,"update",[a]);a.updatedProperties.contains("FriendlyName")&&b!==this.get_isIdentityVerified()&&a.updatedProperties.add("IsIdentityVerified");return a}};MC.PEServiceEndpointDataProperties=function(){};MC.PEServiceEndpointData=function(a){MC.PEServiceEndpointData.initializeBase(this,[a])};MC.PEServiceEndpointData.prototype=
{get_capabilities:function(){return MC.ServiceDataHelper.parseCapabilities(this.get_item("Capabilities"))},set_capabilities:function(a){this.set_item("Capabilities",MC.ServiceDataHelper.formatCapabilities(a));return a},get_client:function(){return this.get_item("VER")},set_client:function(a){this.set_item("VER",a);return a},get_clientName:function(){var a=this.get_client();return!this.$3(a)?String.Empty:a.split(":")[0]},set_clientName:function(a){var b=this.get_client();this.$3(b)?this.set_client(String.format("{0}:{1}",
a,b.split(":")[1])):this.set_client(String.format("{0}:",a));return a},get_clientType:function(){var a=this.get_item("TYP");if(String.isNullOrEmpty(a))return 0;a=MC.ServiceDataHelper.$2(a);return 0>a?0:a},set_clientType:function(a){this.set_item("TYP",a.toString());return a},get_clientVersion:function(){var a=this.get_client();return this.$3(a)?a.split(":")[1]:String.Empty},set_clientVersion:function(a){var b=this.get_client();this.$3(b)?this.set_client(String.format("{0}:{1}",b.split(":")[0],a)):
this.set_client(String.format(":{0}",a));return a},$1:function(a,b){var c=this.get_clientName(),d=this.get_clientVersion();MC.PEServiceEndpointData.callBaseMethod(this,"$1",[a,b]);if(Object.keyExists(b.updatedEndpoints,this.get_$0().endpointId)){var e=b.updatedEndpoints[this.get_$0().endpointId];e.contains("VER")&&(c!==this.get_clientName()&&e.add("ClientName"),d!==this.get_clientVersion()&&e.add("ClientVersion"))}},$3:function(a){return!String.isNullOrEmpty(a)&&2===a.split(":").length}};MC.ServiceData=
function(a){this.info=a;this.endpointData={};var a=a.endpointData,b;for(b in a)this.endpointData[b]=MC.ServiceEndpointData.create(a[b])};MC.ServiceData.create=function(a){switch(a.service){case 1:return new MC.PEServiceData(a);case 2:return new MC.IMServiceData(a);case 4:return new MC.PDServiceData(a);case 8:return new MC.CMServiceData(a);case 16:return new MC.SKPServiceData(a);default:return null}};MC.ServiceData.createEmpty=function(a){a=MC.$create_ServiceDataInfo(a,{},{});return MC.ServiceData.create(a)};
MC.ServiceData.prototype={info:null,endpointData:null,get_service:function(){return this.info.service},get_properties:function(){return this.info.properties},get_info:function(){return this.info},get_$0:function(){return this.endpointData},addEndpoint:function(a){this.endpointData[a.get_endpointId()]=a;this.info.endpointData[a.get_endpointId()]=a.get_$0()},addEndpointFromInfo:function(a){this.endpointData[a.endpointId]=MC.ServiceEndpointData.create(a);this.info.endpointData[a.endpointId]=a},getAllEndpoints:function(){var a=
[],b=this.endpointData,c;for(c in b)a.add(b[c]);return MC.ServiceDataHelper.toArray(a)},getEndpoint:function(a){return Object.keyExists(this.endpointData,a)?this.endpointData[a]:null},deleteEndpoint:function(a){delete this.endpointData[a];delete this.info.endpointData[a]},clone:function(){var a=MC.$create_ServiceDataInfo(this.info.service,{},{}),b=this.info.properties,c;for(c in b)a.properties[c]=b[c];var b=this.endpointData,d;for(d in b)a.endpointData[d]=b[d].clone();return a},update:function(a){var b=
new MC.ServiceDataDiff(this.info.service),c=a.properties,d;for(d in c){var e=d;this.$1(e,c[d])&&b.updatedProperties.add(e)}var a=a.endpointData,f;for(f in a)d=a[f],c=f,Object.keyExists(this.get_$0(),c)?this.get_$0()[c].$1(d,b):(e=MC.ServiceEndpointData.createEmpty(d.service,c),this.addEndpoint(e),b.newEndpoints[c]=e,0===Object.getKeyCount(d.properties)?b.updatedEndpoints[c]=[]:e.$1(d,b));return b},Delete:function(a){var b=new MC.ServiceDataDiff(this.info.service),a=a.endpointData,c;for(c in a)if(a=
c,Object.keyExists(this.get_$0(),a)){var d=this.get_$0()[a];this.deleteEndpoint(d.get_endpointId());var e=[],f=d.get_properties(),g;for(g in f)e.add(g);b.deletedEndpoints[a]=d;b.updatedEndpoints[a]=e}return b},createDiff:function(a){for(var b=MC.$create_ServiceDataInfo(this.info.service,this.$2(a.info.properties),{}),a=ss.IEnumerator.getEnumerator(a.getAllEndpoints());a.moveNext();){var c=a.get_current();if(Object.keyExists(this.get_$0(),c.get_$0().endpointId)){var d=this.endpointData[c.get_$0().endpointId].creatDiff(c);
0<Object.getKeyCount(d.properties)&&(b.endpointData[c.get_$0().endpointId]=d)}else b.endpointData[c.get_$0().endpointId]=c.clone()}return b},propertyEquals:function(a,b){return this.info.properties[a]===b},$1:function(a,b){if(null==b){if(Object.keyExists(this.info.properties,a)){var c=this.get_item(a)!==String.Empty;delete this.info.properties[a];return c}}else if(!Object.keyExists(this.info.properties,a)||!this.propertyEquals(a,b))return this.info.properties[a]=b,!0;return!1},$2:function(a){var b=
{},c;for(c in a){var d=c,e=a[c];if(!Object.keyExists(this.info.properties,d)||!this.propertyEquals(d,e))b[d]=e}c=this.info.properties;for(var f in c)c=f,Object.keyExists(a,c)||MC.ServiceDataHelper.shouldPublishProperty(c,!0,this.info.service)&&(b[c]=null);return b},get_item:function(a){return Object.keyExists(this.info.properties,a)?this.info.properties[a]:String.Empty},set_item:function(a,b){return this.info.properties[a]=b}};MC.ServiceDataDiff=function(a){this.service=a;this.updatedEndpoints={};
this.updatedProperties=[];this.deletedEndpoints={};this.newEndpoints={}};MC.ServiceDataDiff.prototype={service:0,updatedProperties:null,updatedEndpoints:null,newEndpoints:null,deletedEndpoints:null};MC.ServiceDataHelper=function(){};MC.ServiceDataHelper.shouldPublishProperty=function(a,b,c){switch(c){case 2:if(b&&"NOO"===a)return!1;break;case 1:if(b&&"DisplayPictureUrl"===a)return!1;break;case 8:return!1}return!0};MC.ServiceDataHelper.parseServiceName=function(a){switch(a){case "IM":return 2;case "PE":return 1;
case "PD":return 4;case "CM":return 8;case "SKP":return 16;default:return 0}};MC.ServiceDataHelper.formatServiceType=function(a){switch(a){case 2:return"IM";case 1:return"PE";case 4:return"PD";case 8:return"CM";case 16:return"SKP";default:return String.Empty}};MC.ServiceDataHelper.parseStatus=function(a){if(String.isNullOrEmpty(a))return 0;switch(a){case "NLN":return 2;case "HDN":return 3;case "BSY":return 4;case "IDL":return 5;case "FLN":return 1;case "BRB":return 6;case "AWY":return 7;case "PHN":return 8;
case "LUN":return 9;default:return 0}};MC.ServiceDataHelper.formatStatus=function(a){switch(a){case 2:return"NLN";case 3:return"HDN";case 4:return"BSY";case 5:return"IDL";case 1:return"FLN";case 6:return"BRB";case 7:return"AWY";case 8:return"PHN";case 9:return"LUN";default:return""}};MC.ServiceDataHelper.parseCapabilities=function(a){if(String.isNullOrEmpty(a))return[0];for(var a=a.split(":"),b=Array(a.length),c=0;c<b.length;c++){var d=MC.ServiceDataHelper.$1(a[c]);b[c]=0>d?0:d}return b};MC.ServiceDataHelper.formatCapabilities=
function(a){if(0===a.length)return"0";for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=MC.ServiceDataHelper.$0(a[c]);return b.join(":")};MC.ServiceDataHelper.isSet=function(a,b,c){return null!=c&&c.length>a?0!==(c[a]&b):!1};MC.ServiceDataHelper.parseRichLinkType=function(a){switch(a){case "0":return 1;case "1":return 2;case "2":return 3;case "3":return 4;case "4":return 5;case "5":return 6;case "6":return 7;case "7":return 8;default:return 0}};MC.ServiceDataHelper.convertToRawLinkType=function(a){switch(a){case 1:return"0";
case 2:return"1";case 3:return"2";case 4:return"3";case 5:return"4";case 6:return"5";case 7:return"6";case 8:return"7";default:return String.Empty}};MC.ServiceDataHelper.$0=function(a){0>a&&(a+=4294967296);return a.toString()};MC.ServiceDataHelper.$1=function(a){a=parseInt(a,10);return isNaN(a)?-1:a};MC.ServiceDataHelper.$2=function(a){a=parseInt(a,10);return isNaN(a)?-1:a};MC.ServiceDataHelper.$3=function(a,b,c){return a.substr(b,c)};MC.ServiceDataHelper.toArray=function(a){return a};MC.ServiceDataHelper.getDefaultOfflineEndpointData=
function(a){var b={};switch(a){case 8:b.events="<events />"}return b};MC.ServiceDataSet=function(a){for(var b=0;b<a.length;b++)switch(a[b].service){case 2:this.imServiceData=MC.ServiceData.create(a[b]);break;case 4:this.pdServiceData=MC.ServiceData.create(a[b]);break;case 1:this.peServiceData=MC.ServiceData.create(a[b]);break;case 8:this.cmServiceData=MC.ServiceData.create(a[b]);break;case 16:this.skpServiceData=MC.ServiceData.create(a[b])}};MC.ServiceDataSet.create=function(){return new MC.ServiceDataSet([MC.$create_ServiceDataInfo(2,
{},{}),MC.$create_ServiceDataInfo(1,{},{}),MC.$create_ServiceDataInfo(4,{},{}),MC.$create_ServiceDataInfo(8,{},{}),MC.$create_ServiceDataInfo(16,{},{})])};MC.ServiceDataSet.createMessengerUpdate=function(a,b){for(var c=[],d=new MC.ServiceDataSet(b),e=ss.IEnumerator.getEnumerator(a.toServiceDataArray());e.moveNext();){var f=e.get_current();null!=d.getServiceData(f.get_service())&&c.add(f.clone())}for(d=ss.IEnumerator.getEnumerator(b);d.moveNext();)e=d.get_current(),null==a.getServiceData(e.service)&&
c.add(e);c=new MC.ServiceDataSet(MC.ServiceDataHelper.toArray(c));c.updateAll(b);return c};MC.ServiceDataSet.prototype={imServiceData:null,pdServiceData:null,peServiceData:null,cmServiceData:null,skpServiceData:null,clone:function(){for(var a=[],b=ss.IEnumerator.getEnumerator(this.toServiceDataArray());b.moveNext();){var c=b.get_current();a.add(c.clone())}return new MC.ServiceDataSet(MC.ServiceDataHelper.toArray(a))},addEndpoint:function(a){var b=this.getServiceData(a.get_service());null!=b&&b.addEndpoint(a)},
getEndpointSet:function(a){for(var b=[],c=ss.IEnumerator.getEnumerator(this.toServiceDataArray());c.moveNext();){var d=c.get_current();Object.keyExists(d.get_$0(),a)?b.add(d.get_$0()[a].get_$0()):b.add(MC.$create_ServiceEndpointDataInfo(a,d.get_service(),{}))}return new MC.ServiceEndpointDataSet(a,MC.ServiceDataHelper.toArray(b))},createDiff:function(a){for(var b=[],a=ss.IEnumerator.getEnumerator(a.toServiceDataArray());a.moveNext();){var c=a.get_current(),d=this.getServiceData(c.get_service());null==
d?b.add(c.clone()):(c=d.createDiff(c),(0<Object.getKeyCount(c.properties)||0<Object.getKeyCount(c.endpointData))&&b.add(c))}return MC.ServiceDataHelper.toArray(b)},toArray:function(){for(var a=[],b=ss.IEnumerator.getEnumerator(this.toServiceDataArray());b.moveNext();){var c=b.get_current();a.add(c.get_info())}return MC.ServiceDataHelper.toArray(a)},toServiceDataArray:function(){var a=[];null!=this.imServiceData&&a.add(this.imServiceData);null!=this.peServiceData&&a.add(this.peServiceData);null!=this.pdServiceData&&
a.add(this.pdServiceData);null!=this.cmServiceData&&a.add(this.cmServiceData);null!=this.skpServiceData&&a.add(this.skpServiceData);return MC.ServiceDataHelper.toArray(a)},update:function(a){var b=this.getServiceData(a.service);return null!=b?b.update(a):new MC.ServiceDataDiff(a.service)},Delete:function(a){var b=this.getServiceData(a.service);return null!=b?b.Delete(a):new MC.ServiceDataDiff(a.service)},updateAll:function(a){for(var b=[],a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var c=a.get_current();
b.add(this.update(c))}return MC.ServiceDataHelper.toArray(b)},deleteAll:function(a){for(var b=[],a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var c=a.get_current();b.add(this.Delete(c))}return MC.ServiceDataHelper.toArray(b)},getServiceData:function(a){switch(a){case 2:return this.imServiceData;case 4:return this.pdServiceData;case 1:return this.peServiceData;case 8:return this.cmServiceData;case 16:return this.skpServiceData}return null},getEndpointServiceData:function(a,b){var c=this.getServiceData(a);
return null!=c&&Object.keyExists(c.get_$0(),b)?c.get_$0()[b]:null}};MC.ServiceEndpointData=function(a){this.info=a};MC.ServiceEndpointData.create=function(a){switch(a.service){case 1:return new MC.PEServiceEndpointData(a);case 2:return new MC.IMServiceEndpointData(a);case 4:return new MC.PDServiceEndpointData(a);case 8:return new MC.CMServiceEndpointData(a);case 16:return new MC.SKPServiceEndpointData(a);default:return null}};MC.ServiceEndpointData.createEmpty=function(a,b){return MC.ServiceEndpointData.create(MC.$create_ServiceEndpointDataInfo(b,
a,{}))};MC.ServiceEndpointData.prototype={info:null,get_properties:function(){return this.info.properties},get_service:function(){return this.info.service},get_endpointId:function(){return this.info.endpointId},get_$0:function(){return this.info},clone:function(){var a=MC.$create_ServiceEndpointDataInfo(this.info.endpointId,this.info.service,{}),b=this.info.properties,c;for(c in b)a.properties[c]=b[c];return a},creatDiff:function(a){return MC.$create_ServiceEndpointDataInfo(this.info.endpointId,this.info.service,
this.$2(a.info.properties))},$1:function(a,b){var c=[],d=a.properties,e;for(e in d){var f=e;this.updateProperty(f,d[e])&&c.add(f)}0<c.length&&(b.updatedEndpoints[this.get_$0().endpointId]=c)},propertyEquals:function(a,b){return this.info.properties[a]===b},propertyIsNullOrEmpty:function(a){return String.isNullOrEmpty(this.info.properties[a])},updateProperty:function(a,b){if(null==b){if(Object.keyExists(this.info.properties,a)){var c=!this.propertyIsNullOrEmpty(a);delete this.info.properties[a];return c}}else if(!Object.keyExists(this.info.properties,
a)||!this.propertyEquals(a,b))return this.info.properties[a]=b,!0;return!1},$2:function(a){var b={},c;for(c in a){var d=c,e=a[c];if(!Object.keyExists(this.info.properties,d)||!this.propertyEquals(d,e))b[d]=e}c=this.info.properties;for(var f in c)c=f,Object.keyExists(a,c)||MC.ServiceDataHelper.shouldPublishProperty(c,!1,this.info.service)&&(b[c]=null);return b},get_item:function(a){return Object.keyExists(this.info.properties,a)?this.info.properties[a]:String.Empty},set_item:function(a,b){return this.info.properties[a]=
b}};MC.ServiceEndpointDataSet=function(a,b){this.id=a;for(var c=0;c<b.length;c++)switch(b[c].service){case 2:this.imEndpointData=MC.ServiceEndpointData.create(b[c]);break;case 4:this.pdEndpointData=MC.ServiceEndpointData.create(b[c]);break;case 1:this.peEndpointData=MC.ServiceEndpointData.create(b[c]);break;case 8:this.cmEndpointData=MC.ServiceEndpointData.create(b[c]);break;case 16:this.skpEndpointData=MC.ServiceEndpointData.create(b[c])}};MC.ServiceEndpointDataSet.create=function(a){return new MC.ServiceEndpointDataSet(a,
[MC.$create_ServiceEndpointDataInfo(a,2,{}),MC.$create_ServiceEndpointDataInfo(a,1,{}),MC.$create_ServiceEndpointDataInfo(a,4,{})])};MC.ServiceEndpointDataSet.prototype={imEndpointData:null,pdEndpointData:null,peEndpointData:null,cmEndpointData:null,skpEndpointData:null,id:null,toArray:function(){for(var a=[],b=ss.IEnumerator.getEnumerator(this.toServiceDataArray());b.moveNext();){var c=b.get_current();a.add(c.get_$0())}return MC.ServiceDataHelper.toArray(a)},toServiceDataArray:function(){var a=[];
null!=this.imEndpointData&&a.add(this.imEndpointData);null!=this.peEndpointData&&a.add(this.peEndpointData);null!=this.pdEndpointData&&a.add(this.pdEndpointData);return MC.ServiceDataHelper.toArray(a)}};MC.ChannelEndpoint.registerClass("MC.ChannelEndpoint",null,MLC.IChannel,ss.IDisposable);MC.ChannelEndpointMultiplexer.registerClass("MC.ChannelEndpointMultiplexer",null,ss.IDisposable);MC.ChannelEndpointEventArgs.registerClass("MC.ChannelEndpointEventArgs",ss.EventArgs);MC.AuthenticationFailedEventArgs.registerClass("MC.AuthenticationFailedEventArgs",
ss.EventArgs);MC.LocalStorageDataReadWriteEventArgs.registerClass("MC.LocalStorageDataReadWriteEventArgs",ss.EventArgs);MC.InstancesChangedEventArgs.registerClass("MC.InstancesChangedEventArgs",ss.EventArgs);MC.Compatibility.registerClass("MC.Compatibility");MC.LogContext.registerClass("MC.LogContext",null,MC.ILogContext);MC.CMServiceDataProperties.registerClass("MC.CMServiceDataProperties");MC.ServiceData.registerClass("MC.ServiceData");MC.CMServiceData.registerClass("MC.CMServiceData",MC.ServiceData);
MC.CMServiceEndpointDataProperties.registerClass("MC.CMServiceEndpointDataProperties");MC.ServiceEndpointData.registerClass("MC.ServiceEndpointData");MC.CMServiceEndpointData.registerClass("MC.CMServiceEndpointData",MC.ServiceEndpointData);MC.SKPServiceEndpointDataProperties.registerClass("MC.SKPServiceEndpointDataProperties");MC.SKPServiceEndpointData.registerClass("MC.SKPServiceEndpointData",MC.ServiceEndpointData);MC.SKPServiceDataProperties.registerClass("MC.SKPServiceDataProperties");MC.SKPServiceData.registerClass("MC.SKPServiceData",
MC.ServiceData);MC.IMServiceDataProperties.registerClass("MC.IMServiceDataProperties");MC.IMServiceData.registerClass("MC.IMServiceData",MC.ServiceData);MC.IMServiceEndpointDataProperties.registerClass("MC.IMServiceEndpointDataProperties");MC.IMServiceEndpointData.registerClass("MC.IMServiceEndpointData",MC.ServiceEndpointData);MC.PDServiceData.registerClass("MC.PDServiceData",MC.ServiceData);MC.PDServiceEndpointDataProperties.registerClass("MC.PDServiceEndpointDataProperties");MC.PDServiceEndpointData.registerClass("MC.PDServiceEndpointData",
MC.ServiceEndpointData);MC.PEServiceDataProperties.registerClass("MC.PEServiceDataProperties");MC.PEServiceData.registerClass("MC.PEServiceData",MC.ServiceData);MC.PEServiceEndpointDataProperties.registerClass("MC.PEServiceEndpointDataProperties");MC.PEServiceEndpointData.registerClass("MC.PEServiceEndpointData",MC.ServiceEndpointData);MC.ServiceDataDiff.registerClass("MC.ServiceDataDiff");MC.ServiceDataHelper.registerClass("MC.ServiceDataHelper");MC.ServiceDataSet.registerClass("MC.ServiceDataSet");
MC.ServiceEndpointDataSet.registerClass("MC.ServiceEndpointDataSet");MC.ChannelEndpointMultiplexer.$1=0;MC.Compatibility.$0=0;MC.Compatibility.$0=0;switch(__MSLiveCore__.Loader.get_settings().compatibility.version){case "3.0":MC.Compatibility.$0=3;break;case "3.1":MC.Compatibility.$0=4;break;case "3.5":MC.Compatibility.$0=5;break;case "3.7":MC.Compatibility.$0=1;break;case "4.0":MC.Compatibility.$0=2}MC.LogContext.$0=new MC.LogContext(String.Empty);MC.CMServiceDataProperties.comments="comments";MC.CMServiceEndpointDataProperties.events=
"events";MC.SKPServiceEndpointDataProperties.nodeInfo="NodeInfo";MC.SKPServiceDataProperties.mood="Mood";MC.SKPServiceDataProperties.skypeName="Skypename";MC.IMServiceDataProperties.currentMedia="CurrentMedia";MC.IMServiceDataProperties.isOnline="IsOnline";MC.IMServiceDataProperties.isOnlineViaMobileDevice="IsOnlineViaMobileDevice";MC.IMServiceDataProperties.isOnlineViaWeb="IsOnlineViaWeb";MC.IMServiceDataProperties.webCamDetected="WebCamDetected";MC.IMServiceDataProperties.videoCallSupports16By9AspectRatio=
"VideoCallSupports16By9AspectRatio";MC.IMServiceDataProperties.canSupportVideoCalls="CanSupportVideoCalls";MC.IMServiceDataProperties.status="Status";MC.IMServiceDataProperties.supportsApplicationMessages="SupportsApplicationMessages";MC.IMServiceDataProperties.supportsMultipartyConversations="SupportsMultipartyConversations";MC.IMServiceDataProperties.supportsNudges="SupportsNudges";MC.IMServiceDataProperties.version="Version";MC.IMServiceEndpointDataProperties.capabilities="Capabilities";MC.IMServiceEndpointDataProperties.domain=
"DMN";MC.IMServiceEndpointDataProperties.isOnlineViaMobileDevice="IsOnlineViaMobileDevice";MC.IMServiceEndpointDataProperties.isOnlineViaWeb="IsOnlineViaWeb";MC.IMServiceEndpointDataProperties.webCamDetected="WebCamDetected";MC.IMServiceEndpointDataProperties.videoCallSupports16By9AspectRatio="VideoCallSupports16By9AspectRatio";MC.IMServiceEndpointDataProperties.canSupportVideoCalls="CanSupportVideoCalls";MC.IMServiceEndpointDataProperties.messageExtensions="MessageExtensions";MC.IMServiceEndpointDataProperties.presenceExtensions=
"PresenceExtensions";MC.IMServiceEndpointDataProperties.supportsApplicationMessages="SupportsApplicationMessages";MC.IMServiceEndpointDataProperties.supportsMultipartyConversations="SupportsMultipartyConversations";MC.IMServiceEndpointDataProperties.supportsNudges="SupportsNudges";MC.IMServiceEndpointDataProperties.version="Version";MC.PDServiceEndpointDataProperties.epName="EpName";MC.PDServiceEndpointDataProperties.clientType="ClientType";MC.PEServiceDataProperties.displayName="FriendlyName";MC.PEServiceDataProperties.displayPictureUrl=
"DisplayPictureUrl";MC.PEServiceDataProperties.isIdentityVerified="IsIdentityVerified";MC.PEServiceDataProperties.personalMessage="PSM";MC.PEServiceDataProperties.richLinkType="RLT";MC.PEServiceDataProperties.richUrl="RUL";MC.PEServiceDataProperties.richUserMessage="RUM";MC.PEServiceDataProperties.safeUrl="SUL";MC.PEServiceDataProperties.userTileLocation="UserTileLocation";MC.PEServiceEndpointDataProperties.capabilities="Capabilities";MC.PEServiceEndpointDataProperties.client="VER";MC.PEServiceEndpointDataProperties.clientName=
"ClientName";MC.PEServiceEndpointDataProperties.clientType="TYP";MC.PEServiceEndpointDataProperties.clientVersion="ClientVersion";MC.ServiceDataHelper.allServices=[2,1,4,8];Type.registerNamespace("MSH");MSH.H$0=function(){};MSH.H$0.prototype={$0:0,$1:1,$2:2,$3:4,$4:7};MSH.H$0.registerEnum("MSH.H$0",!1);MSH.EventCounterFrequency=function(){};MSH.EventCounterFrequency.prototype={perSecond:0,perMinute:1};MSH.EventCounterFrequency.registerEnum("MSH.EventCounterFrequency",!1);MSH.IPerfCollector=function(){};
MSH.IPerfCollector.registerInterface("MSH.IPerfCollector");MSH.IStatusCollector=function(){};MSH.IStatusCollector.registerInterface("MSH.IStatusCollector");MSH.IReport=function(){};MSH.IReport.registerInterface("MSH.IReport");MSH.ReportType=function(){};MSH.ReportType.prototype={omniture:1};MSH.ReportType.registerEnum("MSH.ReportType",!1);MSH.ReportName=function(){};MSH.ReportName.prototype={uiControls:1,consentStarted:2,consentCompleted:3,qosLoadTime:4,qosSignIn:5};MSH.ReportName.registerEnum("MSH.ReportName",
!1);MSH.ReportedItemType=function(){};MSH.ReportedItemType.prototype={appUITag:8,barUITag:9,conversationListUITag:10,contactListUITag:11,conversationUITag:12,templateUITag:13,presenceUITag:14,otherUITag:15,signInResult:16,signInTotalTime:17,loadTime:18,shareTag:21,signInTag:22,recentConversationsUITag:23,modernConversationUITag:24};MSH.ReportedItemType.registerEnum("MSH.ReportedItemType",!1);MSH.$create_ReportKeyValue=function(a,b){var c={};c.key=a;c.value=b;switch(c.key){case 8:case 9:case 11:case 10:case 12:case 15:case 14:case 13:case 22:case 21:c.isDomainType=
!0;c.isTimeDurationType=!1;break;case 18:case 17:c.isTimeDurationType=!0;c.isDomainType=!1;break;default:c.isTimeDurationType=!1,c.isDomainType=!1}return c};MSH.AsyncBatchedExecuter=function(a,b){this.$5=a;if(0>a&&a!==MSH.AsyncBatchedExecuter.unboundedBatchSize)throw Error("Invalid batch size.");this.$6=b;if(0>b)throw Error("Invalid batch delay.");};MSH.AsyncBatchedExecuter.prototype={$0:!1,$1:!1,$2:!1,$3:null,$4:0,$5:0,$6:0,$7:null,add_executionCompleted:function(a){this.$8=ss.Delegate.combine(this.$8,
a)},remove_executionCompleted:function(a){this.$8=ss.Delegate.remove(this.$8,a)},$8:null,add_batchCompleted:function(a){this.$9=ss.Delegate.combine(this.$9,a)},remove_batchCompleted:function(a){this.$9=ss.Delegate.remove(this.$9,a)},$9:null,add_executerPaused:function(a){this.$A=ss.Delegate.combine(this.$A,a)},remove_executerPaused:function(a){this.$A=ss.Delegate.remove(this.$A,a)},$A:null,add_executerResumed:function(a){this.$B=ss.Delegate.combine(this.$B,a)},remove_executerResumed:function(a){this.$B=
ss.Delegate.remove(this.$B,a)},$B:null,$C:null,get_started:function(){return this.$0},get_completed:function(){return this.$1},get_executedCount:function(){return this.$4},get_paused:function(){return this.$2},get_workItem:function(){return this.$3},startExecution:function(a,b){this.$7=b;this.$3=a;this.$0=!0;this.$1=this.$2=!1;this.$4=0;if(null==b)throw Error("Condition cannot be null");if(null==a)throw Error("AsyncWorkItem cannot be null");this.$F()},pause:function(){this.$2||(this.$2=!0,null!=this.$A&&
this.$A.invoke(this,null))},resume:function(){this.$2&&(this.$2=!1,null!=this.$B&&this.$B.invoke(this,null),this.$D(null))},$D:function(){if(!this.$2){for(var a=this.$5,b=this.$11();!b&&(0<a--||this.$5===MSH.AsyncBatchedExecuter.unboundedBatchSize);)this.$3.$2(this),this.$4++,b=this.$11();b?(this.$12(),this.$10()):(this.$E(),this.$F())}},$E:function(){null!=this.$9&&this.$9.invoke(this,null)},$F:function(){this.$10();this.$C=new MSH.Timer(ss.Delegate.create(this,this.$D),null,this.$6,MSH.Timeout.infinite)},
$10:function(){null!=this.$C&&this.$C.dispose()},$11:function(){return this.$7.invoke(this)},$12:function(){this.$0=!1;this.$1=!0;this.$2=!1;null!=this.$8&&this.$8.invoke(this,null)}};MSH.AsyncBatchedWorkItem=function(){};MSH.AsyncBatchedWorkItem.prototype={add_executionStarted:function(a){this.$0=ss.Delegate.combine(this.$0,a)},remove_executionStarted:function(a){this.$0=ss.Delegate.remove(this.$0,a)},$0:null,add_executionCompleted:function(a){this.$1=ss.Delegate.combine(this.$1,a)},remove_executionCompleted:function(a){this.$1=
ss.Delegate.remove(this.$1,a)},$1:null,$2:function(a){this.onExecutionStarted();this.doExecute(a);this.onExecutionCompleted()},onExecutionStarted:function(){null!=this.$0&&this.$0.invoke(this,null)},onExecutionCompleted:function(){null!=this.$1&&this.$1.invoke(this,null)}};MSH.ArrayHelper=function(){};MSH.ArrayHelper.contains=function(a,b){return null==a?!1:a.contains(b)};MSH.ArrayHelper.sort=function(a,b){a.sort(b)};MSH.ArrayHelper.sortArrayList=function(a,b){a.sort(b)};MSH.ArrayHelper.extractToEnd=
function(a,b){return a.extract(b)};MSH.ArrayHelper.copyTo=function(a,b,c,d,e){for(var f=0;f<e;f++)c[d+f]=a[b+f]};MSH.BigInt=function(a,b){this.$3=[];this.$6=a;this.$3.insert(0,b);this.$5=1;this.$9()};MSH.BigInt.$7=function(a){return new MSH.BigInt(1E3,a)};MSH.BigInt.$8=function(a){return new MSH.BigInt(16,a)};MSH.BigInt.$C=function(a,b){for(var c=[],d=0;d<b;d++)c.insert(d,a[d]);for(d=0;d<c.length;d++)0<c[d]&&(c[d]=16-c[d],d+1<c.length?c[d+1]+=1:16>c.length&&c.insert(d+1,1));return c};MSH.BigInt.parseDecInt=
function(a,b){switch(a){case 1E3:return MSH.BigInt.$F(b);case 16:return MSH.BigInt.$E(b);default:return null}};MSH.BigInt.$E=function(a){if(String.isNullOrEmpty(a))return null;var b="-"===MSH.StringHelper.charAt(a,0);b&&(a=MSH.StringHelper.substringToEnd(a,1));for(var c=MSH.BigInt.$8(1E9),d=MSH.BigInt.$8(0),e=MSH.MathHelper.ceiling(a.length/9),f=MSH.BigInt.$8(1),g=a.length,h=0;h<e;h++){var i=0>g-9?0:g-9,i=MSH.ConvertHelper.parseInt(MSH.StringHelper.substring(a,i,g-i)),i=MSH.BigInt.$8(i);i.multiply(f);
d.add(i);f.multiply(c);g-=9}d.$4=b;return d};MSH.BigInt.$F=function(a){if(0===a.length)return MSH.BigInt.$7(0);var b=!1,c=[];"-"===MSH.StringHelper.charAt(a,0)&&(b=!0,a=MSH.StringHelper.substring(a,1,a.length-1));var d;for(d=0;3*(d+1)<=a.length;d++)c.insert(d,MSH.ConvertHelper.parseInt(MSH.StringHelper.substringSection(a,a.length-3*(d+1),a.length-3*d)));0!==a.length%3&&c.insert(d++,MSH.ConvertHelper.parseInt(a.substring(0,a.length%3)));a=MSH.BigInt.$7(0);a.$3=c;a.$5=d;a.$4=b;return a};MSH.BigInt.$10=
function(a){for(var b=Array(a.length),c=0;c<a.length;c++)if(b[c]=MSH.BigInt.$11(MSH.StringHelper.charAt(a,c)),0>b[c])return null;return b};MSH.BigInt.$11=function(a){if("0"<=a&&"9">=a)return a-0;switch(a){case "a":return 10;case "b":return 11;case "c":return 12;case "d":return 13;case "e":return 14;case "f":return 15;default:return-1}};MSH.BigInt.$12=function(a){for(var b=a.length-1;0<=b;b--)0<a[b]&&(a[b]=16-a[b],0<b&&(a[b-1]+=1));return a};MSH.BigInt.prototype={$4:!1,$5:0,$6:0,$9:function(){for(var a=
this.$5-1;0<=a;a--)if(0===this.$3[a])this.$5--;else break;for(a=0;2>a;a++)if(0===this.$5)this.$4=!1;else{if(0>this.$3[this.$5-1]){for(var b=0;b<this.$5;b++)this.$3[b]=-this.$3[b];this.$4=!this.$4}for(b=0;b<this.$5-1;b++){if(0>this.$3[b]){var c=MSH.MathHelper.ceiling(-this.$3[b]/this.$6);this.$3[b]+=this.$6*c;this.$3[b+1]-=c}this.$3[b]>=this.$6&&(c=MSH.MathHelper.floor(this.$3[b]/this.$6),this.$3[b]%=this.$6,this.$3[b+1]+=c)}for(;this.$3[this.$5-1]>=this.$6;)this.$A(),this.$3[this.$5]=MSH.MathHelper.floor(this.$3[this.$5-
1]/this.$6),this.$3[this.$5-1]%=this.$6,this.$5++;if(0>this.$3[this.$5-1]){for(b=0;b<this.$5;b++)this.$3[b]=-this.$3[b];this.$4=!this.$4}else break}},$A:function(){this.$5===this.$3.length&&this.$3.add(0)},add:function(a){for(var b=0;b<this.$5-a.$5;b++)a.$3.insert(a.$5+b,0);for(b=0;b<a.$5-this.$5;b++)this.$3.insert(this.$5+b,0);this.$5=Math.max(a.$5,this.$5);if(this.$4===a.$4)for(b=0;b<this.$5;b++)this.$3[b]+=a.$3[b];else for(b=0;b<this.$5;b++)this.$3[b]-=a.$3[b];this.$9()},multiply:function(a){for(var b=
new MSH.BigInt(this.$6,0),c=0;c<a.$5+this.$5;c++)c<b.$3.length?b.$3[c]=0:b.$3.insert(c,0);for(c=0;c<a.$5;c++){for(var d=0;d<this.$5;d++)b.$3[c+d]+=a.$3[c]*this.$3[d],0!==b.$3[c+d]&&(b.$5=Math.max(b.$5,c+d+1));b.$9()}b.$4=a.$4!==this.$4;this.$3=b.$3;this.$4=b.$4;this.$5=b.$5},modulus:function(a){for(;!(0===a.$5||0===this.$5);){var b=this.$5-a.$5;if(0>b)break;var c=this.$3[this.$5-1],d=a.$3[a.$5-1];if(c>=d){c=MSH.MathHelper.floor(c/d);for(d=0;d<a.$5;d++)this.$3[d+b]-=c*a.$3[d];this.$9()}else{if(0===
b)break;this.$3[this.$5-2]+=this.$6*this.$3[this.$5-1];this.$5--}}this.$4&&(a.$4?(a.$4=!1,this.add(a),a.$4=!0):this.add(a));this.$9()},toString:function(){switch(this.$6){case 16:return this.$B();case 1E3:return this.$D();default:return String.Empty}},$B:function(){if(0===this.$3.length)return"0";var a=this.$3;this.$4&&(a=MSH.BigInt.$C(a,this.$5));for(var b=new ss.StringBuilder,c=!1,d=a.length-1;0<=d;d--)c||0!==a[d]&&(c=!0),c&&b.append(MSH.StringHelper.charAt("0123456789abcdef",a[d]));return b.toString()},
$D:function(){if(0===this.$5)return"0";for(var a="",b=0;b<this.$5;b++)if(a=this.$3[b]+a,b<this.$5-1)for(var c=10;c<this.$6;c*=10)this.$3[b]<c&&(a=0+a);this.$4&&(a="-"+a);return a}};MSH.ContactHelper=function(){};MSH.ContactHelper.isUnknownContact=function(a){return null!=a.id&&("00000000-0000-0000-0000-000000000000"===a.id||"{00000000-0000-0000-0000-000000000000}"===a.id)};MSH.ContactHelper.getIMAddressInfoKey=function(a){return MSH.ContactHelper.computeIMAddressKey(a.address,a.type,a.network,null)};
MSH.ContactHelper.computeIMAddressKey=function(a,b,c,d){switch(b){case 13:a="13:"+a+";via=14:"+MSH.StringHelper.toLowerCase(c);break;default:a=b+":"+(a||""),String.isNullOrEmpty(d)||(a+=";path="+d),a=MSH.StringHelper.toLowerCase(a)}return a};MSH.ContactHelper.computeIMAddressId=function(a){var b;switch(a.type){case 1:b=String.isNullOrEmpty(a.cid)?"1:"+a.address:"11:"+a.cid;break;case 11:b="11:"+a.cid;break;case 13:b="13:{0};via=14:"+a.network;break;case 4:b="4:tel:"+a.address;break;case 16:b="16:smtp:"+
a.address;break;case 2:case 32:case 8:b=a.type+":"+a.address;break;default:return String.Empty}b=MSH.StringHelper.toLowerCase(b);13===a.type&&(b=String.format(b,a.address));return b};MSH.ContactHelper.areIMAddressesEqual=function(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(a.type===b.type)switch(a.type){case 13:return a.address===b.address&&a.network===b.network;case 11:return a.cid===b.cid;default:return a.address===b.address}return!1};MSH.ConvertHelper=function(){};MSH.ConvertHelper.convertDecToHex=
function(a){a=MSH.BigInt.parseDecInt(16,a);return null==a?null:a.toString()};MSH.ConvertHelper.tryParseInt=function(a){a=parseInt(a,10);return isNaN(a)?-1:a};MSH.ConvertHelper.tryParseUInt=function(a){a=parseInt(a,10);return isNaN(a)?-1:a};MSH.ConvertHelper.parseInt=function(a){return parseInt(a,10)};MSH.ConvertHelper.parseHexInt=function(a){a=parseInt(a,16);return isNaN(a)?0:a};MSH.ConvertHelper.uInt32ToHexString=function(a){return a.toString(16)};MSH.CollectionHelper=function(){};MSH.CollectionHelper.toArray=
function(a){return a};MSH.DateTimeHelper=function(){};MSH.DateTimeHelper.exceeded=function(a,b,c){return b.getTime()-a.getTime()>c};MSH.DateTimeHelper.isGreaterThanOrEqual=function(a,b){return a.getTime()>=b.getTime()};MSH.DateTimeHelper.addMilliseconds=function(a,b){a.setTime(a.getTime()+b);return a};MSH.DateTimeHelper.toTimeString=function(a){return a.toTimeString()};MSH.DateTimeHelper.subtract=function(a,b){return a.getTime()-b.getTime()};MSH.DateTimeHelper.parseTimeStamp=function(a){var b=null,
b=/^(\d{4})-(\d{2})-(\d{2})(T|\s{1})(\d{2}):(\d{2}):(\d{2})\.(\d*)Z$/.exec(a);return null!=b&&9===b.length?MSH.DateTimeHelper.$0(MSH.ConvertHelper.parseInt(b[1]),MSH.ConvertHelper.parseInt(b[2]),MSH.ConvertHelper.parseInt(b[3]),MSH.ConvertHelper.parseInt(b[5]),MSH.ConvertHelper.parseInt(b[6]),MSH.ConvertHelper.parseInt(b[7]),MSH.ConvertHelper.parseInt(b[8])):Date.get_now()};MSH.DateTimeHelper.isToday=function(a){var b=Date.get_now();return b.getFullYear()===a.getFullYear()&&b.getMonth()===a.getMonth()&&
b.getDate()===a.getDate()};MSH.DateTimeHelper.isYesterday=function(a){var b=Date.get_now();b.setDate(b.getDate()-1);return b.getFullYear()===a.getFullYear()&&b.getMonth()===a.getMonth()&&b.getDate()===a.getDate()};MSH.DateTimeHelper.toUTCString=function(a){return a.toUTCString()};MSH.DateTimeHelper.fromUtcMilliseconds=function(a){return new Date(a)};MSH.DateTimeHelper.$0=function(a,b,c,d,e,f,g){return new Date(Date.UTC(a,b-1,c,d,e,f,g))};MSH.DeprecationHelper=function(){};MSH.DeprecationHelper.warnDeprecatedType=
function(a,b){Object.keyExists(MSH.DeprecationHelper.$0,a.get_fullName())||(MSH.DeprecationHelper.$0[a.get_fullName()]=!0,MSH.DeprecationHelper.$1(b))};MSH.DeprecationHelper.$1=function(a){ss.Debug.trace(a)};MSH.DomainHelper=function(){};MSH.DomainHelper.getReportingDomain=function(a){return null!=MSH.DomainHelper.extractBaseDomain(a,"live.com",0)?"mail.live.com":null!=MSH.DomainHelper.extractBaseDomain(a,"live-int.com",0)?"mail.live-int.com":null!=MSH.DomainHelper.extractBaseDomain(a,"msn.com",0)?
"msn.com":null!=MSH.DomainHelper.extractBaseDomain(a,"msn-int.com",0)?"msn-int.com":null!=MSH.DomainHelper.extractBaseDomain(a,"livejournal.com",0)?"livejournal.com":MSH.StringHelper.toLowerCase(a)};MSH.DomainHelper.extractBaseDomain=function(a,b,c){b.startsWith(".")&&(b=MSH.StringHelper.substringToEnd(b,1));b=MSH.StringHelper.toLowerCase(b);a=MSH.StringHelper.toLowerCase(a);if(!a.endsWith("."+b)&&a!==b)return null;if(0===c)return b;a=MSH.StringHelper.splitChar(a,".");b=c+MSH.StringHelper.splitChar(b,
".").length;b>a.length&&(b=a.length);return MSH.StringHelper.joinSeparator(".",MSH.ArrayHelper.extractToEnd(a,-1*b))};MSH.DomainHelper.isDomainInDomainsList=function(a,b){if(String.isNullOrEmpty(a)||null==b||0===b.length)return!1;for(var a=MSH.StringHelper.toLowerCase(a),c=0,d=b.length;c<d;c++){var e=b[c];if(a===e||a.endsWith("."+e))return!0}return!1};MSH.H$1=function(a){this.$0=a};MSH.H$1.prototype={$0:null,$1:function(){try{document.attachEvent("onkeyup",ss.Delegate.create(this,function(){this.$2(window.event)}))}catch(a){MSH.Logger.logException(1,
MC.LogContext.get_global(),"DebugKeyListener.Attach","Attach failed.",a)}},$2:function(a){a.ctrlKey&&(a.shiftKey&&a.altKey&&68===a.keyCode)&&this.$0.collectLogs()}};MSH.LogsCollectedEventArgs=function(a,b){this.$0=a;this.$1=b};MSH.LogsCollectedEventArgs.prototype={$0:null,$1:null,get_state:function(){return this.$0},get_logs:function(){return this.$1}};MSH.LogCollector=function(){this.$3=[];this.$4=[];this.$5=MSH.LogCollector.$C(window.location.pathname);this.$A=0;(new MSH.H$1(this)).$1()};MSH.LogCollector.get_instance=
function(){null==MSH.LogCollector.$1&&(MSH.LogCollector.$1=new MSH.LogCollector);return MSH.LogCollector.$1};MSH.LogCollector.stringifyLogs=function(a){for(var b=new ss.StringBuilder,a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var c=a.get_current();b.append(String.format("[{0}::{1}] {2} {3}: {4}\r\n",MC.LogEntryType.toString(c.type),MC.LogLevel.toString(c.level),c.context,c.location,c.message))}return b.toString()};MSH.LogCollector.$C=function(a){a=a.toLowerCase().split("/");a=a[a.length-1];
return"messenger.html"===a||"localstorage.html"===a?a:String.Empty};MSH.LogCollector.$D=function(a){for(var b={},a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var c=a.get_current();if(3===c.type){var d=c.extraState,e=c.loggerName+"#"+d.key;String.isNullOrEmpty(c.context)||(e+="#"+c.context);b[e]=d.value}}return b};MSH.LogCollector.$E=function(a,b){for(var c=Array(a.length+b.length),d=0,e=0;d+e<c.length;)d===b.length?(c[d+e]=a[e],e++):e===a.length?(c[d+e]=b[d],d++):b[d].time.getTime()>a[e].time.getTime()?
(c[d+e]=a[e],e++):(c[d+e]=b[d],d++);return c};MSH.LogCollector.$F=function(a,b){var c={};c.State=a;c.Logs=b;var d="__logDumpDisplay"+(4294967295*Math.random()).toString(),e=document.createElement("div");e.id=d;e.style.position="absolute";e.style.top="1px";e.style.left="1px";e.style.right="1px";e.style.width="99%";e.style.height="95%";e.style.zIndex=2147483647;var f=document.createElement("a");f.innerText="Close";f.href="javascript:void(0)";f.attachEvent("onclick",function(){var a=document.getElementById(d);
a.style.visibility="hidden";a.parentNode.removeChild(a)});e.appendChild(f);f=document.createElement("textarea");f.innerText=MLC.JSON.serialize(c);f.style.width="100%";f.style.height="100%";f.rows=20;e.appendChild(f);document.body.appendChild(e)};MSH.LogCollector.prototype={$5:null,$6:null,$7:null,$8:0,$9:null,$A:0,add_logsCollected:function(a){this.$B=ss.Delegate.combine(this.$B,a)},remove_logsCollected:function(a){this.$B=ss.Delegate.remove(this.$B,a)},$B:null,getLocalLogEntries:function(){for(var a=
Array(this.$3.length),b=0;b<a.length;b++)a[b]=this.$3[b];return a},clearLocalLogEntries:function(){this.$3.clear()},log:function(a,b){b.loggerName=this.$5;for(this.$3.add(b);50<=this.$3.length;)this.$3.removeAt(0);2===b.type&&this.$10(b.extraState);null!=a&&a.log(b)},collectLogs:function(){this.$8=0;this.$9=[];this.$13(1,this.getLocalLogEntries());null!=this.$6?this.$6.sendMessage("CollectLogs",[]):this.$13(2,[]);null!=this.$7?this.$7.sendMessage("CollectLogs",[]):this.$13(4,[])},clearLogs:function(){this.clearLocalLogEntries();
null!=this.$6&&this.$6.sendMessage("ClearLogs",[]);null!=this.$7&&this.$7.sendMessage("ClearLogs",[])},registerLocalStorageChannel:function(a){null==this.$7&&(this.$7=a,a.add_messageReceived(ss.Delegate.create(this,this.$11)))},registerMessengerServicesChannel:function(a){null==this.$6&&(this.$6=a,a.add_messageReceived(ss.Delegate.create(this,this.$12)))},$10:function(a){this.$4.add(a);for(this.$A+=a.responseText.length;5E6<this.$A;)a=this.$4[0],this.$4.removeAt(0),this.$A-=a.responseText.length,
a.responseText=String.Empty},$11:function(a,b){var c=b.get_command(),d=b.get_parameters();switch(c){case "CollectLogsResponse":this.$13(4,d[0])}},$12:function(a,b){var c=b.get_command(),d=b.get_parameters();switch(c){case "CollectLogsResponse":this.$13(2,d[0])}},$13:function(a,b){this.$8|=a;this.$9=MSH.LogCollector.$E(b,this.$9);if(7===this.$8){var c=MSH.LogCollector.$D(this.$9);null==this.$B?MSH.LogCollector.$F(c,this.$9):this.$B.invoke(this,new MSH.LogsCollectedEventArgs(c,this.$9));this.$8=0;this.$9=
[]}}};MSH.Logger=function(){};MSH.Logger.get_instance=function(){null==MSH.Logger.$0&&(MSH.Logger.$0=new MSH.ScriptLogger);return MSH.Logger.$0};MSH.Logger.set_instance=function(a){return MSH.Logger.$0=a};MSH.Logger.logTrace=function(a,b,c){MSH.Logger.log(3,a,b,c)};MSH.Logger.logInfo=function(a,b,c){MSH.Logger.log(2,a,b,c)};MSH.Logger.logWarning=function(a,b,c){MSH.Logger.log(1,a,b,c)};MSH.Logger.logError=function(a,b,c){MSH.Logger.log(0,a,b,c)};MSH.Logger.log=function(a,b,c,d){a=MC.$create_LogEntryInfo(0,
b,a,c,d,null);MSH.Logger.$3(a)};MSH.Logger.logException=function(a,b,c,d,e){a=MC.$create_LogEntryInfo(1,b,2,c,d,MC.$create_ExceptionLogEntryInfo(e));MSH.Logger.$3(a)};MSH.Logger.logHttpRequest=function(a,b,c,d,e){a=MC.$create_LogEntryInfo(2,b,2,c,d,e);MSH.Logger.$3(a)};MSH.Logger.logStateChange=function(a,b,c,d,e){a=MC.$create_LogEntryInfo(3,b,2,c,d,e);MSH.Logger.$3(a)};MSH.Logger.$1=function(a){var b=String.concat("[",MSH.Logger.$2(a.time),"-",a.loggerName,"-",MSH.Logger.logLevelAsString(a.level),
"(",a.location,"-",a.context,")",a.message);switch(a.type){case 1:b+=" - "+a.extraState.message;break;case 2:a=a.extraState;b+=" - "+a.url+" - "+a.statusText;break;case 3:a=a.extraState,b+=" - "+a.key+'="'+a.value+'"'}return b+"]"};MSH.Logger.logLevelAsString=function(a){switch(a){case 0:return"Error";case 2:return"Information";case 3:return"Trace";case 1:return"Warning"}return null};MSH.Logger.$2=function(a){return a.toTimeString()+"."+a.getMilliseconds()};MSH.Logger.$3=function(a){MSH.LogCollector.get_instance().log(MSH.Logger.get_instance(),
a)};MSH.EventCounter=function(a,b){MSH.EventCounter.initializeBase(this,[a]);switch(b){case 0:this.$7=1E3;break;case 1:this.$7=6E4}this.reset()};MSH.EventCounter.prototype={$7:0,$8:0,$9:null,addEntry:function(){},reset:function(){this.$9=Date.get_now();this.$8=0;MSH.EventCounter.callBaseMethod(this,"reset")},increase:function(){this.$A();this.$8++},toString:function(){this.$A();return MSH.EventCounter.callBaseMethod(this,"toString")},$A:function(){for(var a=Date.get_now(),b=!1;!b;)b=MSH.DateTimeHelper.subtract(a,
this.$9)<this.$7,b||(MSH.EventCounter.callBaseMethod(this,"addEntry",[this.$8]),this.$8=0,MSH.DateTimeHelper.addMilliseconds(this.$9,this.$7))}};MSH.PerfCollector=function(){};MSH.PerfCollector.get_instance=function(){null==MSH.PerfCollector.$0&&(MSH.PerfCollector.$0=new MSH.ScriptPerfCollector);return MSH.PerfCollector.$0};MSH.PerfCounter=function(a){this.$1=a;this.reset()};MSH.PerfCounter.prototype={$0:null,$1:null,$2:0,$3:0,$4:0,$5:0,$6:0,get_name:function(){return this.$1},get_startTime:function(){return this.$0},
get_total:function(){return this.$2},get_min:function(){return this.$3},get_max:function(){return this.$4},get_last:function(){return this.$5},get_average:function(){return 0<this.$6?this.$2/this.$6:0},get_count:function(){return this.$6},addEntry:function(a){this.$2+=a;this.$5=a;this.$6++;this.$4<a&&(this.$4=a);this.$3>a&&(this.$3=a)},toString:function(){var a=new ss.StringBuilder;a.append("[");a.append(this.$1);a.append("]");a.append("Start time: ");a.append(MSH.DateTimeHelper.toTimeString(this.$0));
a.append(" | ");a.append("Last: ");a.append(this.$5);a.append(" | ");a.append("Max: ");a.append(this.$4);a.append(" | ");a.append("Min: ");a.append(this.$3);a.append(" | ");a.append("Average: ");a.append(this.get_average());a.append(" | ");a.append("Count: ");a.append(this.$6);a.append(" | ");a.append("Total: ");a.append(this.$2);return a.toString()},reset:function(){this.$6=this.$5=this.$4=this.$3=this.$2=0;this.$0=Date.get_now()}};MSH.ScriptPerfCollector=function(){this.$1={};this.$2={};this.$3=
[];this.$4="true"===MSH.CookieHelper.getCookie("MWT_PerfCollector_Enabled");this.$5=MSH.LogCollector.$C(window.location.pathname)};MSH.ScriptPerfCollector.prototype={$1:null,$2:null,$3:null,$4:!1,$5:null,addPerfCounterValue:function(a,b){this.$4&&this.$6(a).addEntry(b)},increaseEventCounter:function(a,b){this.$4&&this.$7(a,b).increase()},reset:function(){var a=this.$1,b;for(b in a)a[b].reset()},registerStatusCollector:function(a){Object.keyExists(this.$2,a.get_name())||(this.$2[a.get_name()]=a)},
reportToConsole:function(){var a=this.$2,b;for(b in a)this.$8(a[b].getStatusText());var a=this.$1,c;for(c in a)this.$8(a[c].toString());this.$9("PerfCollectorOutputToConsole")},get_enabled:function(){return this.$4},set_enabled:function(a){if(this.$4!==a){this.$4=a;var b;this.$4?(this.reset(),MSH.CookieHelper.setCookie("MWT_PerfCollector_Enabled","true"),b="PerfCollectorEnable"):(MSH.CookieHelper.expireCookie("MWT_PerfCollector_Enabled"),b="PerfCollectorDisable");this.$9(b)}return a},registerRemoteServiceChannel:function(a){this.$3.contains(a)||
this.$3.add(a)},$6:function(a){Object.keyExists(this.$1,a)||(this.$1[a]=new MSH.PerfCounter(a));return this.$1[a]},$7:function(a,b){var c=a+"-"+MSH.EventCounterFrequency.toString(b);Object.keyExists(this.$1,c)||(this.$1[c]=new MSH.EventCounter(c,b));return this.$1[c]},$8:function(a){var b=window.console;null!=b&&b.log("["+this.$5+"]"+a)},$9:function(a){for(var b=ss.IEnumerator.getEnumerator(this.$3);b.moveNext();)b.get_current().sendMessage(a,[])}};MSH.RandomizedReportFilter=function(a,b){this.$0=
a;this.$1=b||[]};MSH.RandomizedReportFilter.prototype={$0:0,$1:null,filtered:function(a){return this.$1.contains(a.key)||1===this.$0?!1:1!==MSH.MathHelper.random(1,this.$0)}};MSH.H$3=function(a){this.$1=[];this.$0=a};MSH.H$3.prototype={$0:0,add:function(a){this.$1.add(a.key+":"+a.value)},report:function(){},get_count:function(){return this.$1.length},isReported:function(a){return this.$1.contains(a.key+":"+a.value)},$2:function(){this.$1.clear()}};MSH.H$2=function(a){this.$0=a;this.$1=MSH.H$2.$13(a);
this.$2={};this.$3=__MSLiveCore__.Loader.get_settings().market;this.$4=[];this.$5=MSH.DomainHelper.getReportingDomain(document.domain);this.$6=new MSH.RandomizedReportFilter(__MSLiveCore__.Loader.get_settings().messenger.testReportingEnabled?1:1E3,[17,16]);this.$12()};MSH.H$2.$E=function(a){var b=document.getElementById("reportingIframe");null==b?(b=MSH.DomHelper.createHiddenElement("iframe"),b.id="reportingIframe",b.src=a,document.body.appendChild(b)):MSH.DomHelper.updateIframeSource(b,a)};MSH.H$2.$13=
function(a){switch(a){case 1:return"uicontrols";case 2:return"consentstarted";case 3:return"consentcompleted";case 4:case 5:return"qos";default:return""}};MSH.H$2.prototype={$0:0,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:0,add:function(a){if(!this.isReported(a)&&!this.$6.filtered(a)){var b=String.format("prop{0}",a.key);this.$2[b]=a.isDomainType?MSH.H$2.$D:a.isTimeDurationType?String.isNullOrEmpty(a.value)||"failure"===a.value.toLowerCase()?"failure":this.$F(a.value):a.value;this.$14(MSH.$create_ReportKeyValue(a.key,
a.value));this.$7++}},report:function(){if(MSH.BrowserHelper.get_supportsOmniture()&&!(2!==this.$0&&3!==this.$0&&0===this.$7)){var a=this.$11();new MSH.Timer(MSH.H$2.$E,a,MSH.H$2.$8,MSH.Timeout.infinite);this.$12()}},$F:function(a){a=MSH.ConvertHelper.tryParseUInt(a);if(0>a)return"failure";for(var b=0;b<MSH.H$2.$9.length;b++)if(a<MSH.H$2.$9[b])return 1E3>MSH.H$2.$9[b]?String.format("<{0}ms",MSH.H$2.$9[b]):String.format("<{0}s",MSH.H$2.$9[b]/1E3);return String.format(">{0}s",MSH.H$2.$9[MSH.H$2.$9.length-
1]/1E3)},get_count:function(){return Object.getKeyCount(this.$2)-2},isReported:function(a){if(ss.isNullOrUndefined(a))return!0;for(var b=ss.IEnumerator.getEnumerator(this.$4);b.moveNext();){var c=b.get_current();if(c.key===a.key&&c.value===a.value)return!0}return!1},$10:function(){return __MSLiveCore__.Loader.get_settings().messenger.testReportingEnabled?__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("Reporting.Test.html"):__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("Reporting.html")},
$11:function(){var a=new ss.StringBuilder(this.$10());a.append("?p=");a.append(this.$1);var b=new ss.StringBuilder,c=!0,d=this.$2,e;for(e in d){var f=e,g=d[e];c||b.append("+");var h=f.substr(4);g===MSH.H$2.$D?(b.append(h),c=!1):(a.append("&"),a.append(f),a.append("="),a.append(g.toString()))}a.append(String.format("&d={0}",this.$5));b.get_isEmpty()||a.append(String.format("&s={0}",b.toString()));return a.toString()},$12:function(){Object.clearKeys(this.$2);this.$2[MSH.H$2.$A]=MSH.H$2.$B;this.$2[MSH.H$2.$C]=
this.$3;this.$7=0},$14:function(a){this.isReported(a)||this.$4.add(MSH.$create_ReportKeyValue(a.key,a.value))}};MSH.ReportFactory=function(){};MSH.ReportFactory.createReport=function(a,b){if(MSH.TestingHelper.get_isUnitTest())return new MSH.H$3(b);for(var c=ss.IEnumerator.getEnumerator(MSH.ReportFactory.$0);c.moveNext();){var d=c.get_current();if(null!=MSH.DomainHelper.extractBaseDomain(document.domain,d,0))return new MSH.H$3(b)}switch(a){case 1:return new MSH.H$2(b);default:return null}};MSH.RegexHelper=
function(){};MSH.RegexHelper.isMatch=function(a,b,c){null==c&&(c=String.Empty);return RegExp(a,c).test(b)};MSH.RegexHelper.replace=function(a,b,c,d){null==d&&(d=String.Empty);return b.replace(RegExp(a,d),c)};MSH.Scheduler=function(){};MSH.Scheduler.defer=function(a){var b=null,b=new MSH.Timer(function(){b.dispose();a.invoke()},null,1,MSH.Timeout.infinite)};MSH.BrowserHelper=function(){};MSH.BrowserHelper.get_isIE=function(){return Sys.Browser.agent===Sys.Browser.InternetExplorer};MSH.BrowserHelper.get_isWebKit=
function(){return Sys.Browser.agent===Sys.Browser.Safari};MSH.BrowserHelper.get_isFirefox=function(){return Sys.Browser.agent===Sys.Browser.Firefox};MSH.BrowserHelper.get_isChrome=function(){return 0<=window.navigator.userAgent.indexOf(" Chrome/")};MSH.BrowserHelper.get_supportsOmniture=function(){return!(MSH.BrowserHelper.get_isFirefox()&&3>Sys.Browser.version)};MSH.BrowserHelper.get_supportsTransparentPngs=function(){return!MSH.BrowserHelper.get_isIE()||6<Sys.Browser.version};MSH.BrowserHelper.get_hasRestrictiveProxyConnectionLimit=
function(){return!MSH.BrowserHelper.get_isIE()||7>Sys.Browser.version?!1:8>Sys.Browser.version?!0:2>=window.maxConnectionsPerServer};MSH.BrowserHelper.get_supportsHtmlChannel=function(){return!MSH.UriHelper.get_isSecureContext()||Sys.Browser.agent!==Sys.Browser.InternetExplorer||6<Sys.Browser.version};MSH.BrowserHelper.get_clearContentUrl=function(){return MSH.BrowserHelper.get_supportsHtmlChannel()?"about:blank":__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("Empty.html")};MSH.ChannelHelper=
function(){};MSH.ChannelHelper.createParentChannel=function(a,b,c,d){var e=null,f=null,g=null;null!=b?(g=b.id,f=b.childNodes[0],e=f.src):(g=MSH.DomHelper.createUniqueElementId(),b=MSH.DomHelper.createHiddenElement("div"),b.id=g,document.body.appendChild(b),e=String.format(__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl(a)+"#domain={0}&loaderPath={1}&channelNames={2}&{3}",encodeURIComponent(window.location.hostname.toLowerCase()),encodeURIComponent(__MSLiveCore__.Loader.get_settings().messenger.getLoaderUrl()),
d,__MSLiveCore__.Loader.get_settings().customSettings));a=__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("Channel.html");e=MSH.UriHelper.removeDoubleSlash(e);c=MSH.UriHelper.removeDoubleSlash(c);a=MSH.UriHelper.removeDoubleSlash(a);return MLC.Channel.fromParent(g,f,e,c,a,d)};MSH.ChannelHelper.getPreloadedIframe=function(a){a=__MSLiveCore__.Loader.getIframeContainer(a);null!=a&&!MSH.ChannelHelper.$1()&&(MSH.DomHelper.removeIframeFromContainer(a),a=null);return a};MSH.ChannelHelper.canCreateChannel=
function(a){return 0===MLC.Channel.getChannelType()&&(!MSH.BrowserHelper.get_supportsHtmlChannel()||String.isNullOrEmpty(a)||!MSH.ChannelHelper.$0())?!1:!0};MSH.ChannelHelper.$0=function(){var a=null;try{if(a=window.location.port,String.isNullOrEmpty(a))switch((window.location.protocol||String.Empty).toLowerCase()){case "http:":a="80";break;case "https:":a="443";break;default:a="0"}}catch(b){return!0}return"80"===a||"443"===a};MSH.ChannelHelper.$1=function(){if(Sys.Browser.agent===Sys.Browser.Firefox&&
3>Sys.Browser.version)return!1;switch(MLC.Channel.getChannelType()){case 0:return!1;case 3:case 1:case 2:return!0;default:return!1}};MSH.CookieHelper=function(){};MSH.CookieHelper.getCookie=function(a){var b=document.cookie,a=a+"=",c=b.indexOf(a);return 0<=c?(c+=a.length,a=b.indexOf(";",c),0>a&&(a=b.length),b=b.substring(c,a),unescape(b)):String.Empty};MSH.CookieHelper.setCookie=function(a,b,c){MSH.CookieHelper.setCookieWithExpiry(a,b,c,-1)};MSH.CookieHelper.setCookieWithExpiry=function(a,b,c,d){b=
b||String.Empty;a=String.format("{0}={1}; path=/",a,escape(b));ss.isNullOrUndefined(c)||(a+="; domain="+encodeURIComponent(c));0<=d&&(c=MSH.DateTimeHelper.minValue,0<d&&(c=Date.get_now(),c.setTime(c.getTime()+1E3*d)),a+="; expires="+c.toUTCString());document.cookie=a};MSH.CookieHelper.expireCookie=function(a,b){MSH.CookieHelper.setCookieWithExpiry(a,String.Empty,b,0)};MSH.DomHelper=function(){};MSH.DomHelper.createHiddenElement=function(a){a=document.createElement(a);a.style.position="absolute";a.style.top=
"-1000px";a.style.width="300px";a.style.height="300px";return a};MSH.DomHelper.createUniqueElementId=function(){for(var a=null;null==a;)a="msgr"+Math.floor(1048576*Math.random()),null!=document.getElementById(a)&&(a=null);return a};MSH.DomHelper.updateIframeSource=function(a,b){if(MSH.BrowserHelper.get_isIE()){var c=a.cloneNode(!0);c.src=b;a.parentNode.replaceChild(c,a)}else a.src=b};MSH.DomHelper.removeIframeFromContainer=function(a){var b=a.children[0];b.src=MSH.BrowserHelper.get_clearContentUrl();
a.removeChild(b)};MSH.DomHelper.createWindowExport=function(a,b){window[a]=function(){MSH.Scheduler.defer(b)}};MSH.DomHelper.clearWindowExport=function(a){window[a]=null};MSH.DomHelper.openPopup=function(a,b,c,d){var e,f;if(MSH.BrowserHelper.get_isIE()){e=window.screenTop;var g=document.documentElement;f=window.screenLeft+(g.clientWidth-c)/2;e=e+(g.clientHeight-d)/2-30}else e=window.screenY,g=window.outerHeight,f=window.screenX+(window.outerWidth-c)/2,e+=(g-d)/2;return window.open(a,b,["width="+c,
"height="+d,"top="+e,"left="+f,"status=no,resizable=yes,toolbar=no,menubar=no,scrollbars=yes"].join())};MSH.DomHelper.closePopup=function(a){try{a.close()}catch(b){}};MSH.TestingHelper=function(){};MSH.TestingHelper.get_isUnitTest=function(){return String.isNullOrEmpty(document.domain)};MSH.Timeout=function(){};MSH.Timer=function(a,b,c,d){this.$0=a;this.$1=b;this.$5(c,d)};MSH.Timer.prototype={$0:null,$1:null,$2:0,$3:0,$4:0,change:function(a,b){this.$6();this.$5(a,b)},$5:function(a,b){this.$2=b;a!==
MSH.Timeout.infinite&&(0===a?this.$7():0<a&&(this.$3=window.setTimeout(ss.Delegate.create(this,this.$7),a)))},$6:function(){0!==this.$3&&(window.clearTimeout(this.$3),this.$3=0);0!==this.$4&&(window.clearInterval(this.$4),this.$4=0)},$7:function(){this.$0.invoke(this.$1);this.$3=0;0<this.$2&&(this.$4=window.setInterval(ss.Delegate.create(this,this.$8),this.$2))},$8:function(){this.$0.invoke(this.$1)},dispose:function(){this.$6()}};MSH.StringHelper=function(){};MSH.StringHelper.toUpperCase=function(a){return a.toUpperCase()};
MSH.StringHelper.toLowerCase=function(a){return a.toLowerCase()};MSH.StringHelper.charAt=function(a,b){return a.charAt(b)};MSH.StringHelper.charCodeAt=function(a,b){return a.charCodeAt(b)};MSH.StringHelper.replace=function(a,b,c){return a.replaceAll(b,c)};MSH.StringHelper.substringToEnd=function(a,b){return a.substr(b)};MSH.StringHelper.substringSection=function(a,b,c){return a.substring(b,c)};MSH.StringHelper.substring=function(a,b,c){return a.substr(b,c)};MSH.StringHelper.join=function(a){return MSH.StringHelper.joinSeparator(" ",
a)};MSH.StringHelper.joinSeparator=function(a,b){return b.join(a)};MSH.StringHelper.splitString=function(a,b){return a.split(b)};MSH.StringHelper.splitLimit=function(a,b,c){return a.split(b,c)};MSH.StringHelper.splitChar=function(a,b){return a.split(b)};MSH.StringHelper.listToArray=function(a){return MSH.CollectionHelper.toArray(a)};MSH.StringHelper.getByteCount=function(a){if(String.isNullOrEmpty(a))return 0;for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);127>=d?b++:b=2047>=d?b+2:55296<=d&&
57343>=d?b+2:b+3}return b};MSH.StringHelper.fromChar=function(a,b){return String.fromChar(a,b)};MSH.StringHelper.fromCharCode=function(a){return String.fromCharCode(a)};MSH.StringHelper.compare=function(a,b,c){return String.compare(a,b,c)};MSH.StringHelper.localeCompare=function(a,b){return a.localeCompare(b)};MSH.StringHelper.localeFormat=function(a,b){var c=String.localeFormat,d=[];d.add(a);d.addRange(b);return c.apply(null,d)};MSH.StringHelper.toCamelCase=function(a){if("ID"===a)return"id";for(var b=
!1,c=0,d=0;d<a.length;d++){var e=a.charAt(d);if("A"<=e&&"Z">=e)c++;else{b=!0;break}}return!b&&1!==a.length||0===c?a:1<c?a.substr(0,c-1).toLowerCase()+a.substr(c-1):1===a.length?a.toLowerCase():a.substr(0,1).toLowerCase()+a.substr(1)};MSH.StringHelper.truncate=function(a,b){return a.length>b?a.substring(0,b):a};MSH.UriHelper=function(){};MSH.UriHelper.messengerEncode=function(a){if(null!=a){for(var b=new ss.StringBuilder,c=0;c<a.length;c++){var d=MSH.StringHelper.charAt(a,c);switch(d){case "%":b.append("%25");
break;case " ":b.append("%20");break;case "\t":b.append("%09");break;case "\r":b.append("%0D");break;case "\n":b.append("%0A");break;default:b.append(d)}}a=b.toString()}return a};MSH.UriHelper.encode=function(a){return encodeURIComponent(a)};MSH.UriHelper.decode=function(a){return decodeURIComponent(a)};MSH.UriHelper.addParameter=function(a,b,c){var d="?",e=a.indexOf("?");-1!==e&&(d=-1!==a.indexOf("=",e)?"&":String.Empty);return String.concat(a,d,b,"=",c)};MSH.UriHelper.removeDoubleSlash=function(a){if(String.isNullOrEmpty(a))return a;
var b=a.indexOf("://");if(0>b)return a;var b=b+3,c=a.indexOf("?",b);0>c&&(c=a.indexOf("#",b),0>c&&(c=a.length));return MSH.StringHelper.substringSection(a,0,b)+MSH.StringHelper.substringSection(a,b,c).replaceAll("//","/")+MSH.StringHelper.substringToEnd(a,c)};MSH.UriHelper.updateUrlProtocol=function(a){MSH.UriHelper.get_isSecureContext()&&null!=a&&a.startsWith("http:")&&(a=a.replaceAll("http:","https:"));return a};MSH.UriHelper.updateDisplayPictureUrl=function(a){a=MSH.UriHelper.updateUrlProtocol(a);
if(String.isNullOrEmpty(a))return String.Empty;if(a.startsWith("https://")){var b=a=MSH.StringHelper.substringToEnd(a,8),c=String.Empty,d=a.indexOf("/");0<d&&(b=a.substring(0,d),c=MSH.StringHelper.substringToEnd(a,d));0>b.indexOf("messenger.services.live.com")&&0<b.indexOf(".live.com")&&(b=b.replaceAll(".live.com",".msn.com"));0>b.indexOf("messenger.live-int.com")&&0<b.indexOf(".live-int.com")&&(b=b.replaceAll(".live-int.com",".msn-int.com"));a="https://"+b+c}return a};MSH.UriHelper.get_isSecureContext=
function(){return"https:"===MSH.UriHelper.get_windowLocationProtocol()};MSH.UriHelper.get_windowLocationProtocol=function(){try{return window.location.protocol.toLowerCase()}catch(a){try{return document.location.protocol.toLocaleLowerCase()}catch(b){return"http:"}}};MSH.XmlHelper=function(){};MSH.XmlHelper.selectSingleNode=function(a,b){return a.selectSingleNode(b)};MSH.XmlHelper.selectNodes=function(a,b){return a.selectNodes(b)};MSH.XmlHelper.getAttribute=function(a,b){var c=a.attributes.getNamedItem(b);
return null!=c?c.value:null};MSH.XmlHelper.isElement=function(a,b){return 1!==a.nodeType?!1:a.nodeName===b};MSH.XmlHelper.xmlNodeValue=function(a){if(null==a)return String.Empty;if(3===a.nodeType)return a.nodeValue;if(0===a.childNodes.length)return a.text||String.Empty;for(var b=new ss.StringBuilder,c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];3===d.nodeType&&b.append(d.nodeValue)}return b.toString()};MSH.XmlHelper.xmlNodeName=function(a){return null==a||3===a.nodeType?null:a.nodeName};MSH.XmlHelper.xmlEscape=
function(a){if(null==a)return null;MSH.XmlHelper.$0.lastIndex=0;MSH.XmlHelper.$0.test(a)&&(a=a.replace(MSH.XmlHelper.$0,function(a){return"&#x"+a.charCodeAt(0).toString(16).padLeft(2,"0")+";"}));return a};MSH.ILogPanel=function(){};MSH.ILogPanel.registerInterface("MSH.ILogPanel");MSH.ScriptLogger=function(){this.$0=MSH.ScriptLogger.$1()};MSH.ScriptLogger.$1=function(){for(var a=window.parent.frames,b=0;b<a.length;b++)try{if(MSH.ScriptLogger.$2(a[b]))return a[b]}catch(c){}return null};MSH.ScriptLogger.$2=
function(a){return a.document.domain===document.domain&&0<=a.location.pathname.toLowerCase().indexOf("/logger.html")&&!ss.isNullOrUndefined(a.logTrace)?!0:!1};MSH.ScriptLogger.prototype={$0:null,log:function(a){a=MSH.Logger.$1(a);null!=this.$0&&this.$0.logTrace(a)}};MSH.MathHelper=function(){};MSH.MathHelper.random=function(a,b){return Math.floor(a+Math.random()*(b-a))};MSH.MathHelper.ceiling=function(a){return Math.ceil(a)};MSH.MathHelper.floor=function(a){return Math.floor(a)};MSH.AsyncBatchedExecuter.registerClass("MSH.AsyncBatchedExecuter");
MSH.AsyncBatchedWorkItem.registerClass("MSH.AsyncBatchedWorkItem");MSH.ArrayHelper.registerClass("MSH.ArrayHelper");MSH.BigInt.registerClass("MSH.BigInt");MSH.ContactHelper.registerClass("MSH.ContactHelper");MSH.ConvertHelper.registerClass("MSH.ConvertHelper");MSH.CollectionHelper.registerClass("MSH.CollectionHelper");MSH.DateTimeHelper.registerClass("MSH.DateTimeHelper");MSH.DeprecationHelper.registerClass("MSH.DeprecationHelper");MSH.DomainHelper.registerClass("MSH.DomainHelper");MSH.H$1.registerClass("MSH.H$1");
MSH.LogsCollectedEventArgs.registerClass("MSH.LogsCollectedEventArgs");MSH.LogCollector.registerClass("MSH.LogCollector");MSH.Logger.registerClass("MSH.Logger");MSH.PerfCounter.registerClass("MSH.PerfCounter");MSH.EventCounter.registerClass("MSH.EventCounter",MSH.PerfCounter);MSH.PerfCollector.registerClass("MSH.PerfCollector");MSH.ScriptPerfCollector.registerClass("MSH.ScriptPerfCollector",null,MSH.IPerfCollector);MSH.RandomizedReportFilter.registerClass("MSH.RandomizedReportFilter");MSH.H$3.registerClass("MSH.H$3",
null,MSH.IReport);MSH.H$2.registerClass("MSH.H$2",null,MSH.IReport);MSH.ReportFactory.registerClass("MSH.ReportFactory");MSH.RegexHelper.registerClass("MSH.RegexHelper");MSH.Scheduler.registerClass("MSH.Scheduler");MSH.BrowserHelper.registerClass("MSH.BrowserHelper");MSH.ChannelHelper.registerClass("MSH.ChannelHelper");MSH.CookieHelper.registerClass("MSH.CookieHelper");MSH.DomHelper.registerClass("MSH.DomHelper");MSH.TestingHelper.registerClass("MSH.TestingHelper");MSH.Timeout.registerClass("MSH.Timeout");
MSH.Timer.registerClass("MSH.Timer",null,ss.IDisposable);MSH.StringHelper.registerClass("MSH.StringHelper");MSH.UriHelper.registerClass("MSH.UriHelper");MSH.XmlHelper.registerClass("MSH.XmlHelper");MSH.ScriptLogger.registerClass("MSH.ScriptLogger",null,MC.ILogger);MSH.MathHelper.registerClass("MSH.MathHelper");MSH.AsyncBatchedExecuter.unboundedBatchSize=-1;MSH.BigInt.hexRadix=16;MSH.BigInt.decRadix=1E3;MSH.DateTimeHelper.minValue=new Date(0);MSH.DeprecationHelper.$0=null;MSH.DeprecationHelper.$0=
{};MSH.LogCollector.$1=null;MSH.Logger.$0=null;MSH.PerfCollector.$0=null;MSH.H$2.$8=1;MSH.H$2.$9=[250,1E3,3E3,5E3,1E4];MSH.H$2.$A="prop1";MSH.H$2.$B=MSH.UriHelper.encode("Messenger External Platform");MSH.H$2.$C="prop2";MSH.H$2.$D="UITagsProp";MSH.ReportFactory.$0=["live.com","live-int.com"];MSH.Timeout.infinite=-1;MSH.XmlHelper.$0=RegExp("[\\x00-\\x08\\x0b-\\x0c\\x0e-\\x1f\\x22\\x26\\x27\\x3c\\x3e\\x60]","g");Type.registerNamespace("Microsoft.Live.Core");Microsoft.Live.Core.LocalStorageDeserializedEventArgs=
function(a,b,c,d){Microsoft.Live.Core.LocalStorageDeserializedEventArgs.initializeBase(this);this.$1_0=c;this.$1_1=a;this.$1_2=b;this.$1_3=d};Microsoft.Live.Core.LocalStorageDeserializedEventArgs.prototype={$1_0:null,$1_1:null,$1_2:0,$1_3:null,$1_4:null,get_key:function(){return this.$1_0},get_name:function(){return this.$1_1},get_scope:function(){return this.$1_2},get_serialization:function(){return this.$1_3},set_serialization:function(a){return this.$1_3=a},get_value:function(){return this.$1_4},
set_value:function(a){return this.$1_4=a}};Microsoft.Live.Core.LocalStorageSerializedEventArgs=function(a,b,c,d){Microsoft.Live.Core.LocalStorageSerializedEventArgs.initializeBase(this);this.$1_0=c;this.$1_1=a;this.$1_2=b;this.$1_4=d};Microsoft.Live.Core.LocalStorageSerializedEventArgs.prototype={$1_0:null,$1_1:null,$1_2:0,$1_3:null,$1_4:null,get_key:function(){return this.$1_0},get_name:function(){return this.$1_1},get_scope:function(){return this.$1_2},get_value:function(){return this.$1_4},get_serialization:function(){return this.$1_3},
set_serialization:function(a){return this.$1_3=a}};Type.registerNamespace("Microsoft.Live.Core.Internal");Microsoft.Live.Core.Internal.StorageScope=function(){};Microsoft.Live.Core.Internal.StorageScope.prototype={global:1,session:2,unspecified:3};Microsoft.Live.Core.Internal.StorageScope.registerEnum("Microsoft.Live.Core.Internal.StorageScope",!1);Microsoft.Live.Core.Internal.IClientLocalStorage=function(){};Microsoft.Live.Core.Internal.IClientLocalStorage.registerInterface("Microsoft.Live.Core.Internal.IClientLocalStorage");
Microsoft.Live.Core.Internal.IStorageGroup=function(){};Microsoft.Live.Core.Internal.IStorageGroup.registerInterface("Microsoft.Live.Core.Internal.IStorageGroup");Microsoft.Live.Core.Internal.$create_MLCLSB$1=function(a,b,c){var d={};d.$0=a;d.$1=b;d.$2=c;return d};Microsoft.Live.Core.Internal.MLCLSB$2=function(){};Microsoft.Live.Core.Internal.MLCLSB$2.$5=function(a){null==Microsoft.Live.Core.Internal.MLCLSB$2.$1&&(Microsoft.Live.Core.Internal.MLCLSB$2.$1=[]);Microsoft.Live.Core.Internal.MLCLSB$2.$E(Microsoft.Live.Core.Internal.MLCLSB$2.$1,
a);Microsoft.Live.Core.Internal.MLCLSB$2.$D()};Microsoft.Live.Core.Internal.MLCLSB$2.$6=function(a){null==Microsoft.Live.Core.Internal.MLCLSB$2.$2&&(Microsoft.Live.Core.Internal.MLCLSB$2.$2=[]);Microsoft.Live.Core.Internal.MLCLSB$2.$E(Microsoft.Live.Core.Internal.MLCLSB$2.$2,a);Microsoft.Live.Core.Internal.MLCLSB$2.$D()};Microsoft.Live.Core.Internal.MLCLSB$2.$7=function(a){if(null!=Microsoft.Live.Core.Internal.MLCLSB$2.$2)for(var b=0,c=Microsoft.Live.Core.Internal.MLCLSB$2.$2.length;b<c;){var d=Microsoft.Live.Core.Internal.MLCLSB$2.$2[b];
d.$1===a.$1&&d.$0.equals(a.$0)?(Microsoft.Live.Core.Internal.MLCLSB$2.$2.removeAt(b),c--):b++}};Microsoft.Live.Core.Internal.MLCLSB$2.$8=function(a){if(null!=Microsoft.Live.Core.Internal.MLCLSB$2.$1)for(var b=0,c=Microsoft.Live.Core.Internal.MLCLSB$2.$1.length;b<c;)Microsoft.Live.Core.Internal.MLCLSB$2.$1[b].$0.equals(a)?(Microsoft.Live.Core.Internal.MLCLSB$2.$1.removeAt(b),c--):b++};Microsoft.Live.Core.Internal.MLCLSB$2.$9=function(){Microsoft.Live.Core.Internal.MLCLSB$2.$10(Microsoft.Live.Core.Internal.MLCLSB$2.$1)};
Microsoft.Live.Core.Internal.MLCLSB$2.$A=function(a){if(null!=Microsoft.Live.Core.Internal.MLCLSB$2.$1)for(var b=0;b<Microsoft.Live.Core.Internal.MLCLSB$2.$1.length;){var c=Microsoft.Live.Core.Internal.MLCLSB$2.$1[b];if(c.$0.equals(a)){try{c.$0.nonCachedWrite(c.$1,c.$2)}catch(d){}Microsoft.Live.Core.Internal.MLCLSB$2.$1.removeAt(b)}else b++}};Microsoft.Live.Core.Internal.MLCLSB$2.$B=function(){window.attachEvent("onunload",Microsoft.Live.Core.Internal.MLCLSB$2.$F)};Microsoft.Live.Core.Internal.MLCLSB$2.$C=
function(){Microsoft.Live.Core.Internal.MLCLSB$2.$4=new MSH.Timer(function(){var a=Date.get_now();Microsoft.Live.Core.Internal.MLCLSB$2.$9();a=MSH.DateTimeHelper.subtract(Date.get_now(),a);MSH.PerfCollector.get_instance().addPerfCounterValue("DelayedLocalStorageWriter-CommitTime",a)},null,6E4,6E4)};Microsoft.Live.Core.Internal.MLCLSB$2.$D=function(){Microsoft.Live.Core.Internal.MLCLSB$2.$3||(Microsoft.Live.Core.Internal.MLCLSB$2.$3=!0,Microsoft.Live.Core.Internal.MLCLSB$2.$C(),Microsoft.Live.Core.Internal.MLCLSB$2.$B())};
Microsoft.Live.Core.Internal.MLCLSB$2.$E=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e.$1===b.$1&&e.$0.equals(b.$0)){e.$2=b.$2;return}}a.add(b)};Microsoft.Live.Core.Internal.MLCLSB$2.$F=function(){Microsoft.Live.Core.Internal.MLCLSB$2.$9();Microsoft.Live.Core.Internal.MLCLSB$2.$10(Microsoft.Live.Core.Internal.MLCLSB$2.$2)};Microsoft.Live.Core.Internal.MLCLSB$2.$10=function(a){if(null!=a){MSH.PerfCollector.get_instance().addPerfCounterValue("DelayedLocalStorageWriter-CommitQueueSize",
a.length);for(var b=0;b<a.length;b++){var c=a[b];try{c.$0.nonCachedWrite(c.$1,c.$2)}catch(d){}}a.clear()}};Microsoft.Live.Core.Internal.ContextHelper=function(){};Microsoft.Live.Core.Internal.ContextHelper.get_inServiceFrame=function(){return MSH.DomainHelper.isDomainInDomainsList(document.domain,Microsoft.Live.Core.Internal.ContextHelper.$0)&&0<window.location.pathname.toLowerCase().indexOf("localstorage.html")};Microsoft.Live.Core.Internal.ExceptionHelper=function(){};Microsoft.Live.Core.Internal.ExceptionHelper.$0=
function(){return Error.invalidOperation("LocalStorage cannot be used when document.domain is not defined.")};Microsoft.Live.Core.Internal.ExceptionHelper.createStorageNotReadyException=function(){return Error.invalidOperation("Operation is not valid due to the current state of the object. LocalStorage is not initialized.")};Microsoft.Live.Core.Internal.ExceptionHelper.createArgumentOutOfRangeException=function(a,b){return Error.argumentOutOfRange(a,b)};Microsoft.Live.Core.Internal.ClientLocalStorage=
function(a){if(a&&String.isNullOrEmpty(document.domain))throw Microsoft.Live.Core.Internal.ExceptionHelper.$0();};Microsoft.Live.Core.Internal.ClientLocalStorage.get_defaultStorageNamespace=function(){return"Default"};Microsoft.Live.Core.Internal.ClientLocalStorage.get_storageNamespaces=function(){return Microsoft.Live.Core.Internal.ClientLocalStorage.$1||["Default"]};Microsoft.Live.Core.Internal.ClientLocalStorage.set_storageNamespaces=function(a){return Microsoft.Live.Core.Internal.ClientLocalStorage.$1=
a};Microsoft.Live.Core.Internal.ClientLocalStorage.prototype={$2:function(a,b,c){if(null==c)return this.onRemoveItem(a,b),!0;if(String.isNullOrEmpty(b))return!0;var d;Microsoft.Live.Core.Internal.ContextHelper.get_inServiceFrame()?d=c:(d=MLC.JSON.serialize(c),c=this.$6(a.get_name(),a.get_scope(),b,c,d),null!=c&&(d=c.get_serialization()));return this.onSetItem(a,b,d)},$3:function(a,b){var c=this.onGetItem(a,b);if(String.isNullOrEmpty(b)&&null!=c)return this.onRemoveItem(a,b),null;if(Microsoft.Live.Core.Internal.ContextHelper.get_inServiceFrame())return c;
var d=this.$7(a.get_name(),a.get_scope(),b,c);return null==d?MLC.JSON.deserialize(c):null!=d.get_value()?d.get_value():MLC.JSON.deserialize(d.get_serialization())},getAllKeys:function(a){var b=this.onGetAllKeys(a);b.contains(String.Empty)&&(b.remove(String.Empty),this.onRemoveItem(a,String.Empty));return b},add_deserialized:function(a){this.$4=ss.Delegate.combine(this.$4,a)},remove_deserialized:function(a){this.$4=ss.Delegate.remove(this.$4,a)},$4:null,add_serialized:function(a){this.$5=ss.Delegate.combine(this.$5,
a)},remove_serialized:function(a){this.$5=ss.Delegate.remove(this.$5,a)},$5:null,$6:function(a,b,c,d,e){if(null==this.$5)return null;a=new Microsoft.Live.Core.LocalStorageSerializedEventArgs(a,b,c,d);a.set_serialization(e);this.$5.invoke(this,a);return a},$7:function(a,b,c,d){if(null==this.$4)return null;a=new Microsoft.Live.Core.LocalStorageDeserializedEventArgs(a,b,c,d);this.$4.invoke(this,a);return a},get_item:function(a,b){return this.$3(a,b)},set_item:function(a,b,c){if(!this.$2(a,b,c))throw Error("Write operation to local-storage has failed.");
return c}};Microsoft.Live.Core.Internal.StorageGroup=function(a,b){this.$0=a;this.$1=b;this.$2={}};Microsoft.Live.Core.Internal.StorageGroup.prototype={$0:null,$1:null,$2:null,$3:0,get_name:function(){return this.$0},get_scope:function(){return this.$1.get_scope()},get_version:function(){return this.$3},equals:function(a){return null==a?!1:this.get_name()===a.get_name()&&this.get_scope()===a.get_scope()},equalsByName:function(a){return a===this.$0},addOnUnloadWrite:function(a,b){Microsoft.Live.Core.Internal.MLCLSB$2.$6(Microsoft.Live.Core.Internal.$create_MLCLSB$1(this,
a,b))},removeOnUnloadWrite:function(a){Microsoft.Live.Core.Internal.MLCLSB$2.$7(Microsoft.Live.Core.Internal.$create_MLCLSB$1(this,a,null))},nonCachedWrite:function(a,b){this.$3++;this.$4(a,b);this.$1.set_item(this,a,b)},clear:function(){this.$3++;Microsoft.Live.Core.Internal.MLCLSB$2.$8(this);Object.clearKeys(this.$2);for(var a=[],b=ss.IEnumerator.getEnumerator(this);b.moveNext();){var c=b.get_current();a.enqueue(c)}for(;0<a.length;)this.set_item(a.dequeue().toString(),null);Microsoft.Live.Core.Internal.MLCLSB$2.$A(this)},
refresh:function(){this.flush();Object.clearKeys(this.$2)},flush:function(){this.$3++;Microsoft.Live.Core.Internal.MLCLSB$2.$A(this)},getEnumerator:function(){Microsoft.Live.Core.Internal.MLCLSB$2.$A(this);return new Microsoft.Live.Core.Internal.MLCLSB$0(this)},getAllKeys:function(){return this.$1.getAllKeys(this)},get_keyCount:function(){Microsoft.Live.Core.Internal.MLCLSB$2.$A(this);return this.$1.getKeyCount(this)},$4:function(a,b){null==b?Object.keyExists(this.$2,a)&&delete this.$2[a]:this.$2[a]=
b},get_item:function(a){var b=this.$2[a];ss.isNullOrUndefined(b)&&(b=this.$1.get_item(this,a),null!=b&&(this.$2[a]=b));return b},set_item:function(a,b){this.$3++;this.$4(a,b);Microsoft.Live.Core.Internal.MLCLSB$2.$5(Microsoft.Live.Core.Internal.$create_MLCLSB$1(this,a,b));null==b&&this.$1.set_item(this,a,b);return b}};Microsoft.Live.Core.Internal.MLCLSB$0=function(a){this.$0=a;this.$1=this.$0.get_version();this.$2=this.$0.getAllKeys();this.reset()};Microsoft.Live.Core.Internal.MLCLSB$0.prototype=
{$0:null,$1:0,$2:null,$3:0,get_current:function(){if(0>this.$3)throw Error.invalidOperation("Enumeration has not started. Call MoveNext.");if(this.$3>=this.$2.length)throw Error.invalidOperation("Enumeration already finished.");return this.$2[this.$3]},moveNext:function(){if(this.$1!==this.$0.get_version())throw Error.invalidOperation("Storage was modified.");return++this.$3<this.$2.length},reset:function(){if(this.$1!==this.$0.get_version())throw Error.invalidOperation("Storage was modified.");this.$3=
-1}};Microsoft.Live.Core.LocalStorageDeserializedEventArgs.registerClass("Microsoft.Live.Core.LocalStorageDeserializedEventArgs",ss.EventArgs);Microsoft.Live.Core.LocalStorageSerializedEventArgs.registerClass("Microsoft.Live.Core.LocalStorageSerializedEventArgs",ss.EventArgs);Microsoft.Live.Core.Internal.MLCLSB$2.registerClass("Microsoft.Live.Core.Internal.MLCLSB$2");Microsoft.Live.Core.Internal.ContextHelper.registerClass("Microsoft.Live.Core.Internal.ContextHelper");Microsoft.Live.Core.Internal.ExceptionHelper.registerClass("Microsoft.Live.Core.Internal.ExceptionHelper");
Microsoft.Live.Core.Internal.ClientLocalStorage.registerClass("Microsoft.Live.Core.Internal.ClientLocalStorage",null,Microsoft.Live.Core.Internal.IClientLocalStorage);Microsoft.Live.Core.Internal.StorageGroup.registerClass("Microsoft.Live.Core.Internal.StorageGroup",null,Microsoft.Live.Core.Internal.IStorageGroup,ss.IEnumerable);Microsoft.Live.Core.Internal.MLCLSB$0.registerClass("Microsoft.Live.Core.Internal.MLCLSB$0",null,ss.IEnumerator);Microsoft.Live.Core.Internal.MLCLSB$2.$1=null;Microsoft.Live.Core.Internal.MLCLSB$2.$2=
null;Microsoft.Live.Core.Internal.MLCLSB$2.$3=!1;Microsoft.Live.Core.Internal.MLCLSB$2.$4=null;Microsoft.Live.Core.Internal.ContextHelper.$0=["live.com","live-int.com","wlxrs.com","wlxrs-int.com"];Microsoft.Live.Core.Internal.ClientLocalStorage.$1=null;Type.registerNamespace("Microsoft.Live.Core.Internal");Microsoft.Live.Core.Internal.Html5CommonImpl=function(){};Microsoft.Live.Core.Internal.Html5CommonImpl.$0=function(a,b){return String.format("{0}@{1}",b,a.get_name())};Microsoft.Live.Core.Internal.Html5CommonImpl.$1=
function(a){var b=a.indexOf("@");return a.substr(0,b)};Microsoft.Live.Core.Internal.Html5CommonImpl.$2=function(a){var b=a.indexOf("@");return a.substr(b+1)};Microsoft.Live.Core.Internal.Html5CommonImpl.$3=function(a,b){for(var c=0,d=a.length,e=0;e<d;e++){var f=a.key(e),f=Microsoft.Live.Core.Internal.Html5CommonImpl.$2(f);b.equalsByName(f)&&c++}return c};Microsoft.Live.Core.Internal.Html5CommonImpl.$4=function(a,b,c){for(var d=0,e=a.length,f=null,g=0;g<e;g++){var h=a.key(g),i=Microsoft.Live.Core.Internal.Html5CommonImpl.$2(h);
if(b.equalsByName(i)){if(d===c){f=Microsoft.Live.Core.Internal.Html5CommonImpl.$1(h);break}d++}}return f};Microsoft.Live.Core.Internal.Html5CommonImpl.$5=function(a,b){return new Microsoft.Live.Core.Internal.StorageGroup(a,b)};Microsoft.Live.Core.Internal.IEClientLocalStorage=function(a){Microsoft.Live.Core.Internal.IEClientLocalStorage.initializeBase(this,[!0]);this.$1_0=a;this.$1_1=Microsoft.Live.Core.Internal.IEClientLocalStorage.$1_3(this.$1_0);this.$1_2=5E6};Microsoft.Live.Core.Internal.IEClientLocalStorage.$1_3=
function(a){return 2===a?window.self.sessionStorage:window.self.localStorage};Microsoft.Live.Core.Internal.IEClientLocalStorage.prototype={$1_0:0,$1_1:null,$1_2:0,get_scope:function(){return this.$1_0},get_storageCapacity:function(){return this.$1_2},get_isReady:function(){return!0},createGroup:function(a){return Microsoft.Live.Core.Internal.Html5CommonImpl.$5(a,this)},onGetItem:function(a,b){var c=Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,b),c=this.$1_1.getItem(c);return null==c?null:c},
getKeyCount:function(a){return Microsoft.Live.Core.Internal.Html5CommonImpl.$3(this.$1_1,a)},getKey:function(a,b){return Microsoft.Live.Core.Internal.Html5CommonImpl.$4(this.$1_1,a,b)},onRemoveItem:function(a,b){var c=Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,b);try{this.$1_1.removeItem(c)}catch(d){}},onSetItem:function(a,b,c){a=Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,b);try{return this.$1_1.setItem(a,c),!0}catch(d){return!1}},onGetAllKeys:function(a){for(var b=[],a="@"+a.get_name(),
c=0,d=this.$1_1.length;c<d;c++){var e=this.$1_1.key(c);e.endsWith(a)&&b.add(Microsoft.Live.Core.Internal.Html5CommonImpl.$1(e))}return b}};Microsoft.Live.Core.Internal.FirefoxClientLocalStorage=function(a){Microsoft.Live.Core.Internal.FirefoxClientLocalStorage.initializeBase(this,[!0]);this.$1_0=a;this.$1_1=Microsoft.Live.Core.Internal.FirefoxClientLocalStorage.$1_2(this.$1_0)};Microsoft.Live.Core.Internal.FirefoxClientLocalStorage.$1_2=function(a){if(2===a)return window.self.sessionStorage;a=window.self.localStorage;
null==a&&(a=globalStorage[document.domain]);return a};Microsoft.Live.Core.Internal.FirefoxClientLocalStorage.prototype={$1_0:0,$1_1:null,get_storageCapacity:function(){return 5242880},get_scope:function(){return this.$1_0},createGroup:function(a){return Microsoft.Live.Core.Internal.Html5CommonImpl.$5(a,this)},onGetItem:function(a,b){var c=this.$1_3(a,b);return null==c?null:(" "+c).substr(1)},getKeyCount:function(a){for(var b=0,c=0,d=this.$1_1.length;c<d;c++){var e=this.$1_1.key(c),e=Microsoft.Live.Core.Internal.Html5CommonImpl.$2(e);
a.equalsByName(e)&&b++}return b},get_isReady:function(){return!0},getKey:function(a,b){return Microsoft.Live.Core.Internal.Html5CommonImpl.$4(this.$1_1,a,b)},onRemoveItem:function(a,b){var c=Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,b);this.$1_3(a,b);try{this.$1_1.removeItem(c)}catch(d){}},onSetItem:function(a,b,c){try{return this.$1_1.setItem(Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,b),c),!0}catch(d){return!1}},onGetAllKeys:function(a){for(var b=[],a="@"+a.get_name(),c=0,d=this.$1_1.length;c<
d;c++){var e=this.$1_1.key(c);e.endsWith(a)&&b.add(Microsoft.Live.Core.Internal.Html5CommonImpl.$1(e))}return b},$1_3:function(a,b){var c=this.$1_1.getItem(Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,b)),d=null;null!=c&&(d=c.value||c);return d},$1_4:function(a,b){var c=this.$1_3(a,b);return String.isNullOrEmpty(c)?0:c.length}};Microsoft.Live.Core.Internal.WebKitClientLocalStorage=function(a){Microsoft.Live.Core.Internal.WebKitClientLocalStorage.initializeBase(this,[!0]);this.$1_0=a;this.$1_1=
Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_2(this.$1_0)};Microsoft.Live.Core.Internal.WebKitClientLocalStorage.isSupported=function(a){switch(a){case 2:return!ss.isNullOrUndefined(Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_4());case 1:return!ss.isNullOrUndefined(Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_3());default:return!1}};Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_2=function(a){return 2===a?Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_4():
Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_3()};Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_3=function(){return window.self.localStorage};Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_4=function(){return window.self.sessionStorage};Microsoft.Live.Core.Internal.WebKitClientLocalStorage.prototype={$1_0:0,$1_1:null,get_scope:function(){return this.$1_0},get_storageCapacity:function(){return 512E4},createGroup:function(a){return Microsoft.Live.Core.Internal.Html5CommonImpl.$5(a,
this)},onGetItem:function(a,b){Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,b);var c=this.$1_5(a,b);return null==c?null:c},getKeyCount:function(a){for(var b=0,c=0,d=this.$1_1.length;c<d;c++){var e=this.$1_1.key(c),e=Microsoft.Live.Core.Internal.Html5CommonImpl.$2(e);a.equalsByName(e)&&b++}return b},get_isReady:function(){return!0},getKey:function(a,b){return Microsoft.Live.Core.Internal.Html5CommonImpl.$4(this.$1_1,a,b)},onRemoveItem:function(a,b){var c=Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,
b);try{this.$1_1.removeItem(c)}catch(d){}},onSetItem:function(a,b,c){try{return this.$1_1.setItem(Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,b),c),!0}catch(d){return!1}},onGetAllKeys:function(a){for(var b=[],a="@"+a.get_name(),c=0,d=this.$1_1.length;c<d;c++){var e=this.$1_1.key(c);e.endsWith(a)&&b.add(Microsoft.Live.Core.Internal.Html5CommonImpl.$1(e))}return b},$1_5:function(a,b){return this.$1_1.getItem(Microsoft.Live.Core.Internal.Html5CommonImpl.$0(a,b))},$1_6:function(a,b){var c=this.$1_5(a,
b);return String.isNullOrEmpty(c)?0:c.length}};Microsoft.Live.Core.Internal.Html5CommonImpl.registerClass("Microsoft.Live.Core.Internal.Html5CommonImpl");Microsoft.Live.Core.Internal.IEClientLocalStorage.registerClass("Microsoft.Live.Core.Internal.IEClientLocalStorage",Microsoft.Live.Core.Internal.ClientLocalStorage);Microsoft.Live.Core.Internal.FirefoxClientLocalStorage.registerClass("Microsoft.Live.Core.Internal.FirefoxClientLocalStorage",Microsoft.Live.Core.Internal.ClientLocalStorage);Microsoft.Live.Core.Internal.WebKitClientLocalStorage.registerClass("Microsoft.Live.Core.Internal.WebKitClientLocalStorage",
Microsoft.Live.Core.Internal.ClientLocalStorage);Type.registerNamespace("Microsoft.Live.Core");Microsoft.Live.Core.MLCLS$0=function(){};Microsoft.Live.Core.MLCLS$0.prototype={$0:0,$1:1,IE:2,$2:3,$3:4,$4:5,$5:6,$6:7,$7:8};Microsoft.Live.Core.MLCLS$0.registerEnum("Microsoft.Live.Core.MLCLS$0",!1);Microsoft.Live.Core.ILocalStorage=function(){};Microsoft.Live.Core.ILocalStorage.registerInterface("Microsoft.Live.Core.ILocalStorage");Microsoft.Live.Core.LocalStorageScope=function(){};Microsoft.Live.Core.LocalStorageScope.prototype=
{global:1,session:2};Microsoft.Live.Core.LocalStorageScope.registerEnum("Microsoft.Live.Core.LocalStorageScope",!1);Microsoft.Live.Core.LocalStorageStatus=function(){};Microsoft.Live.Core.LocalStorageStatus.prototype={uninitialized:0,initialized:1,failed:2};Microsoft.Live.Core.LocalStorageStatus.registerEnum("Microsoft.Live.Core.LocalStorageStatus",!1);Microsoft.Live.Core.MLCLS$8=function(){};Microsoft.Live.Core.MLCLS$8.$6=function(a){var b=null;switch(a){case 1:b=Microsoft.Live.Core.MLCLS$8.$9();
break;case 2:b=Microsoft.Live.Core.MLCLS$8.$8()}return b};Microsoft.Live.Core.MLCLS$8.$7=function(){return Microsoft.Live.Core.MLCLS$8.$2};Microsoft.Live.Core.MLCLS$8.$8=function(){null==Microsoft.Live.Core.MLCLS$8.$0&&Microsoft.Live.Core.MLCLS$8.$12(2)&&(Microsoft.Live.Core.MLCLS$8.$0=Microsoft.Live.Core.MLCLS$8.$A(2));return Microsoft.Live.Core.MLCLS$8.$0};Microsoft.Live.Core.MLCLS$8.$9=function(){null==Microsoft.Live.Core.MLCLS$8.$1&&Microsoft.Live.Core.MLCLS$8.$12(1)&&(Microsoft.Live.Core.MLCLS$8.$1=
Microsoft.Live.Core.MLCLS$8.$A(1));return Microsoft.Live.Core.MLCLS$8.$1};Microsoft.Live.Core.MLCLS$8.$A=function(a){0===Microsoft.Live.Core.MLCLS$8.$3&&Microsoft.Live.Core.MLCLS$8.$13();var b=Microsoft.Live.Core.MLCLS$8.$C(a);if(Microsoft.Live.Core.MLCLS$8.$B())return b;null==b&&(b=Microsoft.Live.Core.MLCLS$8.$11(a,!1));null==b&&!ss.isNullOrUndefined(Microsoft.Live.Core.Internal.FlashClientLocalStorage)&&(b=Microsoft.Live.Core.MLCLS$8.$10(a));null==b&&!ss.isNullOrUndefined(Microsoft.Live.Core.Internal.GoogleGearsClientLocalStorage)&&
(b=Microsoft.Live.Core.MLCLS$8.$E(a));return b};Microsoft.Live.Core.MLCLS$8.$B=function(){return!ss.isNullOrUndefined(window.__messengerOnlyPreferredLocalStorageType)};Microsoft.Live.Core.MLCLS$8.$C=function(a){var b=window.__messengerPreferredLocalStorageType;if(ss.isNullOrUndefined(b)||String.isNullOrEmpty(b.toString()))return null;switch(b.toString()){case "1":return Microsoft.Live.Core.MLCLS$8.$11(a,!0);case "2":return Microsoft.Live.Core.MLCLS$8.$D(a);case "3":return Microsoft.Live.Core.MLCLS$8.$10(a);
case "4":return Microsoft.Live.Core.MLCLS$8.$E(a);default:return null}};Microsoft.Live.Core.MLCLS$8.$D=function(a){try{return new Microsoft.Live.Core.Internal.IEUserDataClientLocalStorage(a)}catch(b){return!ss.isNullOrUndefined(b)&&!String.isNullOrEmpty(b.message)&&(Microsoft.Live.Core.MLCLS$8.$2=b.message),null}};Microsoft.Live.Core.MLCLS$8.$E=function(a){if(Microsoft.Live.Core.MLCLS$8.$F())try{return new Microsoft.Live.Core.Internal.GoogleGearsClientLocalStorage(a)}catch(b){!ss.isNullOrUndefined(b)&&
!String.isNullOrEmpty(b.message)&&(Microsoft.Live.Core.MLCLS$8.$2=b.message)}return null};Microsoft.Live.Core.MLCLS$8.$F=function(){return Microsoft.Live.Core.Internal.GoogleGearsUtils.isSupported()};Microsoft.Live.Core.MLCLS$8.$10=function(a){if(__MSLiveCore__.Loader.isFlashInstalled(8))try{return new Microsoft.Live.Core.Internal.FlashClientLocalStorage(a)}catch(b){!ss.isNullOrUndefined(b)&&!String.isNullOrEmpty(b.message)&&(Microsoft.Live.Core.MLCLS$8.$2=b.message)}return null};Microsoft.Live.Core.MLCLS$8.$11=
function(a,b){var c=!__MSLiveCore__.Loader.get_settings().httpsApplication||3===MLC.Channel.getChannelType()||!__MSLiveCore__.Loader.isFlashInstalled(8),d=null;try{switch(Microsoft.Live.Core.MLCLS$8.$3){case 2:d=new Microsoft.Live.Core.Internal.IEClientLocalStorage(a);break;case 3:c&&(d=new Microsoft.Live.Core.Internal.FirefoxClientLocalStorage(a));break;case 4:case 8:c&&Microsoft.Live.Core.Internal.WebKitClientLocalStorage.isSupported(a)&&(d=new Microsoft.Live.Core.Internal.WebKitClientLocalStorage(a));
break;case 5:d=!b&&c?new Microsoft.Live.Core.Internal.IEUserDataClientLocalStorage(a):null;break;default:d=null}}catch(e){return!ss.isNullOrUndefined(e)&&!String.isNullOrEmpty(e.message)&&(Microsoft.Live.Core.MLCLS$8.$2=e.message),null}return d};Microsoft.Live.Core.MLCLS$8.$12=function(a){0===Microsoft.Live.Core.MLCLS$8.$3&&Microsoft.Live.Core.MLCLS$8.$13();switch(a){case 2:switch(Microsoft.Live.Core.MLCLS$8.$3){case 2:case 3:case 8:return!0;case 4:return Microsoft.Live.Core.Internal.WebKitClientLocalStorage.isSupported(a);
default:return!1}case 1:return 1!==Microsoft.Live.Core.MLCLS$8.$3;default:return!1}};Microsoft.Live.Core.MLCLS$8.$13=function(){Microsoft.Live.Core.MLCLS$8.$3=MSH.BrowserHelper.get_isIE()?window.localStorage?2:5:MSH.BrowserHelper.get_isFirefox()?2<=Sys.Browser.version?3:6:MSH.BrowserHelper.get_isWebKit()?window.localStorage?4:7:Sys.Browser.agent===Sys.Browser.Opera?8:1};Microsoft.Live.Core.MLCLS$7=function(a){a=a||{};this.$0=Array(Object.getKeyCount(a));var b=0,c;for(c in a)a=c,this.$0[b++]=a;this.reset()};
Microsoft.Live.Core.MLCLS$7.prototype={$0:null,$1:0,get_current:function(){if(0>this.$1)throw Error.invalidOperation("Enumeration has not started. Call MoveNext.");if(this.$1>=this.$0.length)throw Error.invalidOperation("Enumeration already finished.");return this.$0[this.$1]},moveNext:function(){return++this.$1<this.$0.length},reset:function(){this.$1=-1}};Microsoft.Live.Core.MLCLS$6=function(a){this.$0=[];this.$1=[];this.$2=a};Microsoft.Live.Core.MLCLS$6.prototype={$0:null,$1:null,$2:null,add_$3:function(a){this.$0.add(a)},
remove_$3:function(a){this.$0.remove(a)},add_$4:function(a){this.$1.add(a)},remove_$4:function(a){this.$1.remove(a)},$5:function(a,b){0<this.$0.length&&this.$2===a&&this.$0[0].invoke(a,b)},$6:function(a,b){0<this.$1.length&&this.$2===a&&this.$1[0].invoke(a,b)}};Microsoft.Live.Core.LocalStorage=function(a,b){var c=!0;1===arguments.length&&(b=2,c=!1);var d=Microsoft.Live.Core.LocalStorage.$17(a);this.$4=d[0];this.$5=d[1];null==Microsoft.Live.Core.LocalStorage.$0&&(Microsoft.Live.Core.LocalStorage.$0=
{},Microsoft.Live.Core.LocalStorage.$1={});this.$20(Microsoft.Live.Core.LocalStorage.$16(b),!c);if(null!=this.$2)this.$6=String.format("{0}@{1}",Microsoft.Live.Core.Internal.StorageScope.toString(this.$2.get_scope()),this.$5),Object.keyExists(Microsoft.Live.Core.LocalStorage.$1,this.$6)||(Microsoft.Live.Core.LocalStorage.$1[this.$6]=new Microsoft.Live.Core.MLCLS$6(this));else if(c&&!__MSLiveCore__.Loader.get_settings().messenger.localStorageDisabled)throw Error("Storage could not be created");this.$1B()};
Microsoft.Live.Core.LocalStorage.$12=function(a){if(null==a)throw Error.argumentNull("key");if(!MSH.RegexHelper.isMatch("^[A-Z_a-z][0-9a-z_A-Z]{0,63}$",a,String.Empty))throw Microsoft.Live.Core.Internal.ExceptionHelper.createArgumentOutOfRangeException("key",a);};Microsoft.Live.Core.LocalStorage.$13=function(a){Microsoft.Live.Core.LocalStorage.$15(a,32)};Microsoft.Live.Core.LocalStorage.$14=function(a){Microsoft.Live.Core.LocalStorage.$15(a,64)};Microsoft.Live.Core.LocalStorage.$15=function(a,b){if(ss.isNullOrUndefined(a))throw Error.argumentNull("name");
if(!MSH.RegexHelper.isMatch("^[A-Z_a-z][0-9a-z_A-Z]{0,"+(b-1)+"}$",a,String.Empty))throw Microsoft.Live.Core.Internal.ExceptionHelper.createArgumentOutOfRangeException("name",a);};Microsoft.Live.Core.LocalStorage.$16=function(a){switch(a){case 1:return 1;case 2:return 2;default:throw Microsoft.Live.Core.Internal.ExceptionHelper.createArgumentOutOfRangeException("scope",Microsoft.Live.Core.LocalStorageScope.toString(a));}};Microsoft.Live.Core.LocalStorage.$17=function(a){if(null==a)throw Error.argumentNull("name");
var b=Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_defaultStorageNamespace(),c=a;0<a.indexOf(".")&&(c=a.lastIndexOf("."),b=a.substr(0,c),c=a.substr(c+1),b=b.replaceAll(".","_"));Microsoft.Live.Core.Internal.ContextHelper.get_inServiceFrame()||(Microsoft.Live.Core.LocalStorage.$14(c),b!==Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_defaultStorageNamespace()&&Microsoft.Live.Core.LocalStorage.$13(b));return[b,c]};Microsoft.Live.Core.LocalStorage.prototype={$2:null,$3:null,
$4:null,$5:null,$6:null,$7:0,$8:0,$9:0,get_name:function(){return this.$5},get_scope:function(){this.$1A();switch(this.$2.get_scope()){case 1:return 1}return 2},get_availableStorage:function(){return null!=this.$2?this.$2.get_storageCapacity():-1},get_count:function(){return null!=this.$3?this.$3.get_keyCount():0},get_status:function(){return this.$9},get_$E:function(){return this.$4+"."+this.$5},addOnUnloadWrite:function(a,b){this.$1A();Microsoft.Live.Core.LocalStorage.$12(a);this.$3.addOnUnloadWrite(a,
b)},removeOnUnloadWrite:function(a){this.$1A();Microsoft.Live.Core.LocalStorage.$12(a);this.$3.removeOnUnloadWrite(a)},clear:function(){this.$19()&&this.$3.clear()},refresh:function(){this.$1A();this.$3.refresh();null!=this.$11&&this.$11.invoke(this,ss.EventArgs.Empty)},flush:function(){this.$1A();this.$3.flush()},add_initialized:function(a){this.add_$F(a);0!==this.$9&&a.invoke(this,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.$9))},remove_initialized:function(a){this.remove_$F(a)},
add_$F:function(a){this.$10=ss.Delegate.combine(this.$10,a)},remove_$F:function(a){this.$10=ss.Delegate.remove(this.$10,a)},$10:null,add_serialized:function(a){Microsoft.Live.Core.LocalStorage.$1[this.$6].add_$3(a)},remove_serialized:function(a){Microsoft.Live.Core.LocalStorage.$1[this.$6].remove_$3(a)},add_deserialized:function(a){Microsoft.Live.Core.LocalStorage.$1[this.$6].add_$4(a)},remove_deserialized:function(a){Microsoft.Live.Core.LocalStorage.$1[this.$6].remove_$4(a)},add_refreshed:function(a){this.$11=
ss.Delegate.combine(this.$11,a)},remove_refreshed:function(a){this.$11=ss.Delegate.remove(this.$11,a)},$11:null,$18:function(){null!=this.$10&&this.$10.invoke(this,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.$9))},getEnumerator:function(){return!this.$19()?new Microsoft.Live.Core.Internal.MLCLS$1:this.$3.getEnumerator()},$19:function(){return null!=this.$2&&null!=this.$3&&1===this.$9},$1A:function(){if(!this.$19())throw Microsoft.Live.Core.Internal.ExceptionHelper.createStorageNotReadyException();
},$1B:function(){null==this.$2?this.$1E(!1):this.$2.get_isReady()?(this.$1F(),this.$1E(!0)):this.$1C()},$1C:function(){this.$7=window.setInterval(ss.Delegate.create(this,this.$1D),100)},$1D:function(){this.$8++;var a=this.$2.get_isReady();a&&this.$1F();if(a||50<this.$8)window.clearInterval(this.$7),this.$1E(a)},$1E:function(a){this.$9=a?1:2;this.$18()},$1F:function(){this.$3=Microsoft.Live.Core.LocalStorage.$0[this.$6];ss.isNullOrUndefined(this.$3)&&(this.$3=this.$2.createGroup(this.get_$E()),Microsoft.Live.Core.LocalStorage.$0[this.$6]=
this.$3)},$20:function(a,b){this.$2=Microsoft.Live.Core.MLCLS$8.$6(a);null==this.$2&&b&&(this.$2=Microsoft.Live.Core.MLCLS$8.$6(2===a?1:2));null!=this.$2&&(this.$2.add_serialized(ss.Delegate.create(this,this.$21)),this.$2.add_deserialized(ss.Delegate.create(this,this.$22)))},$21:function(a,b){b.get_name()===this.get_$E()&&b.get_scope()===this.$2.get_scope()&&Microsoft.Live.Core.LocalStorage.$1[this.$6].$5(this,b)},$22:function(a,b){b.get_name()===this.get_$E()&&b.get_scope()===this.$2.get_scope()&&
Microsoft.Live.Core.LocalStorage.$1[this.$6].$6(this,b)},get_item:function(a){this.$1A();Microsoft.Live.Core.LocalStorage.$12(a);return this.$3.get_item(a)},set_item:function(a,b){this.$1A();Microsoft.Live.Core.LocalStorage.$12(a);this.$3.set_item(a,b);return b}};Microsoft.Live.Core.LocalStorageInitializedEventArgs=function(a){Microsoft.Live.Core.LocalStorageInitializedEventArgs.initializeBase(this);this.$1_0=a};Microsoft.Live.Core.LocalStorageInitializedEventArgs.prototype={$1_0:0,get_status:function(){return this.$1_0}};
Microsoft.Live.Core.LocalStorageProxy=function(a,b,c){var d=Microsoft.Live.Core.LocalStorage.$17(a);this.storageNamespace=d[0];this.$0=d[1];this.$1=new MC.LogContext(a);Microsoft.Live.Core.LocalStorageProxy.$21();this.scope=ss.isNullOrUndefined(c)?3:Microsoft.Live.Core.LocalStorage.$16(c);ss.isUndefined(b)&&(b=null);this.id=(Microsoft.Live.Core.LocalStorageProxy.$6++).toString();this.channelUrl=b;this.$4={};this.get_isLocalStorageCreator()||(this.get_$9().$E(this),this.$11())};Microsoft.Live.Core.LocalStorageProxy.setChannel=
function(a,b,c){Microsoft.Live.Core.Internal.MLCLS$2.$9(a,b,c)};Microsoft.Live.Core.LocalStorageProxy.$21=function(){if(!MSH.DomainHelper.isDomainInDomainsList(document.domain,Microsoft.Live.Core.LocalStorageProxy.$7))throw Error("Access denied for the domain.");};Microsoft.Live.Core.LocalStorageProxy.prototype={$0:null,channelUrl:null,id:null,$1:null,status:0,scope:0,$2:0,$3:0,$4:null,storageNamespace:null,$5:null,get_name:function(){return this.$0},get_scope:function(){this.$A();switch(this.scope){case 1:return 1}return 2},
get_count:function(){this.$A();return Object.getKeyCount(this.$4)},get_status:function(){return this.status},get_availableStorage:function(){this.$A();return this.$2},get_$8:function(){return this.storageNamespace+"."+this.$0},get_$9:function(){null==this.$5&&(this.$5=Microsoft.Live.Core.Internal.MLCLS$2.$8(this.get_isLocalStorageCreator(),this.get_channelName(),this.channelUrl));return this.$5},get_id:function(){return this.id},addOnUnloadWrite:function(a,b){Microsoft.Live.Core.LocalStorage.$12(a);
this.$A();this.$18(a,b)},removeOnUnloadWrite:function(a){Microsoft.Live.Core.LocalStorage.$12(a);this.$A();this.$19(a)},$A:function(){if(1!==this.status)throw Microsoft.Live.Core.Internal.ExceptionHelper.createStorageNotReadyException();},clear:function(){this.$A();for(var a=this.get_$9().$11(this.get_$8(),this.scope),a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current();Object.clearKeys(b.$4)}this.$1A()},refresh:function(){this.$A();this.$1B()},flush:function(){this.$A();this.$1C()},
add_initialized:function(a){this.add_$B(a);0!==this.status&&a.invoke(this,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.status))},remove_initialized:function(a){this.remove_$B(a)},add_$B:function(a){this.$C=ss.Delegate.combine(this.$C,a)},remove_$B:function(a){this.$C=ss.Delegate.remove(this.$C,a)},$C:null,add_serialized:function(a){this.$D=ss.Delegate.combine(this.$D,a)},remove_serialized:function(a){this.$D=ss.Delegate.remove(this.$D,a)},$D:null,add_deserialized:function(a){this.$E=
ss.Delegate.combine(this.$E,a)},remove_deserialized:function(a){this.$E=ss.Delegate.remove(this.$E,a)},$E:null,add_refreshed:function(a){this.$F=ss.Delegate.combine(this.$F,a)},remove_refreshed:function(a){this.$F=ss.Delegate.remove(this.$F,a)},$F:null,getEnumerator:function(){return new Microsoft.Live.Core.MLCLS$7(this.$4)},get_isLocalStorageCreator:function(){return!1},get_channelName:function(){return Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_proxyChannelName()},$10:function(a){null!=
this.$C&&this.$C.invoke(this,a)},$11:function(){0===this.status&&(this.get_$9().get_$B()?this.get_isLocalStorageCreator()||(this.$12(),this.get_$9().$D("LocalStorageProxyInitialize",[this.$3,this.get_$8(),this.scope,this.id])):(this.status=2,this.$10(new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.status))))},$12:function(){return this.$3++},$13:function(a,b,c,d){MSH.Logger.logTrace(this.$1,"LocalStorageProxy.OnMessageReceived",String.format("{0}::{1}::{2}",d.get_command(),b,Microsoft.Live.Core.Internal.StorageScope.toString(c)));
switch(d.get_command()){case "LocalStorageProxyInitializationCompleted":return this.$14(a,d),!1;case "LocalStorageProxyRefreshed":this.$15(d)}return!0},$14:function(a,b){if(0===this.status){var c=b.get_parameters()[4];this.status=c.$2;this.scope=c.$3;this.$2=c.$1;1===this.status&&(this.$16(c.$0),this.get_$9().$F(this.get_$8(),this.scope,this));MSH.Scheduler.defer(ss.Delegate.create(this,function(){this.$10(new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.status))}))}},$15:function(a){a=
a.get_parameters()[3];this.$16(a);null!=this.$F&&this.$F.invoke(this,ss.EventArgs.Empty)},$16:function(a){Object.clearKeys(this.$4);for(var b=0;b<a.length;b++){var c=a[b].$0;this.$4[c]=this.$1F(c,a[b].$1)}},$17:function(a,b){var c=this.$12(),d=Microsoft.Live.Core.Internal.$create_MLCLS$3(Microsoft.Live.Core.Internal.$create_MLCLS$4(a,this.$1D(a,b)));this.get_$9().$D("LocalStorageProxyWrite",[c,this.get_$8(),this.scope,d])},$18:function(a,b){var c=this.$12(),d=Microsoft.Live.Core.Internal.$create_MLCLS$3(Microsoft.Live.Core.Internal.$create_MLCLS$4(a,
this.$1D(a,b)));this.get_$9().$D("LocalStorageProxyAddOnUnloadWrite",[c,this.get_$8(),this.scope,d])},$19:function(a){var b=this.$12();this.get_$9().$D("LocalStorageProxyRemoveOnUnloadWrite",[b,this.get_$8(),this.scope,a])},$1A:function(){var a=this.$12();this.get_$9().$D("LocalStorageProxyClear",[a,this.get_$8(),this.scope])},$1B:function(){var a=this.$12();this.get_$9().$D("LocalStorageProxyRefresh",[a,this.get_$8(),this.scope])},$1C:function(){var a=this.$12();this.get_$9().$D("LocalStorageProxyFlush",
[a,this.get_$8(),this.scope])},$1D:function(a,b){var c=MLC.JSON.serialize(b),d=this.$1E(a,b,c);null!=d&&(c=d.get_serialization());return c},$1E:function(a,b,c){if(null==this.$D)return null;a=new Microsoft.Live.Core.LocalStorageSerializedEventArgs(this.get_$8(),this.scope,a,b);a.set_serialization(c);this.$D.invoke(this,a);return a},$1F:function(a,b){var c=this.$20(a,b);return null==c?MLC.JSON.deserialize(b):null!=c.get_value()?c.get_value():MLC.JSON.deserialize(c.get_serialization())},$20:function(a,
b){if(null==this.$E)return null;var c=new Microsoft.Live.Core.LocalStorageDeserializedEventArgs(this.get_$8(),this.scope,a,b);this.$E.invoke(this,c);return c},get_item:function(a){this.$A();Microsoft.Live.Core.LocalStorage.$12(a);a=this.$4[a];return null==a?null:a},set_item:function(a,b){Microsoft.Live.Core.LocalStorage.$12(a);this.$A();for(var c=this.get_$9().$11(this.get_$8(),this.scope),c=ss.IEnumerator.getEnumerator(c);c.moveNext();){var d=c.get_current();null==b?Object.keyExists(d.$4,a)&&delete d.$4[a]:
d.$4[a]=b}this.$17(a,b);return b}};Type.registerNamespace("Microsoft.Live.Core.Internal");Microsoft.Live.Core.Internal.$create_MLCLS$5=function(a,b,c){var d={};d.$2=a;d.$1=b;d.$3=c;return d};Microsoft.Live.Core.Internal.$create_MLCLS$4=function(a,b){var c={};c.$0=a;c.$1=b;return c};Microsoft.Live.Core.Internal.$create_MLCLS$3=function(a){var b={};b.$0=a;return b};Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer=function(){};Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.initialize=
function(a,b,c){Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$3(b);Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$0=a;Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$1=b;Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$2=c;(new Microsoft.Live.Core.LocalStorage(Microsoft.Live.Core.Internal.ClientLocalStorage.get_defaultStorageNamespace()+".StorageInitializer")).add_initialized(Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$4)};
Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$3=function(a){if(String.isNullOrEmpty(a))throw Error("Invalid domain.");};Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$4=function(a,b){switch(b.get_status()){case 1:__MSLiveCore__.Loader.onDocumentReady(Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$5)}};Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$5=function(){for(var a=__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("Channel.html"),
b=ss.IEnumerator.getEnumerator(Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$2);b.moveNext();){var c=b.get_current(),d=Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$1;"MessengerStorageChannel"===c&&(d=window.location.hostname.toLowerCase());d=MLC.Channel.fromChild(Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$0,d,a,c);Microsoft.Live.Core.LocalStorageProxy.setChannel(!0,c,d)}};Microsoft.Live.Core.Internal.LocalStorageConfiguration=function(){};
Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_defaultStorageNamespace=function(){return Microsoft.Live.Core.Internal.ClientLocalStorage.get_defaultStorageNamespace()};Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_storageNamespaces=function(){Microsoft.Live.Core.Internal.LocalStorageConfiguration.$1=!1;return Microsoft.Live.Core.Internal.ClientLocalStorage.get_storageNamespaces()};Microsoft.Live.Core.Internal.LocalStorageConfiguration.set_storageNamespaces=function(a){Microsoft.Live.Core.Internal.LocalStorageConfiguration.$3();
Microsoft.Live.Core.Internal.ClientLocalStorage.set_storageNamespaces(a);return a};Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_proxyChannelName=function(){Microsoft.Live.Core.Internal.LocalStorageConfiguration.$1=!1;return Microsoft.Live.Core.Internal.LocalStorageConfiguration.$0};Microsoft.Live.Core.Internal.LocalStorageConfiguration.set_proxyChannelName=function(a){Microsoft.Live.Core.Internal.LocalStorageConfiguration.$3();return Microsoft.Live.Core.Internal.LocalStorageConfiguration.$0=
a};Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_isHtml5LocalStorageSupported=function(){return null!=window.self.localStorage||null!=window.self.globalStorage||null!=window.self.sessionStorage};Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_$2=function(){return Microsoft.Live.Core.Internal.LocalStorageConfiguration.$1};Microsoft.Live.Core.Internal.LocalStorageConfiguration.$3=function(){if(!Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_$2())throw Error.invalidOperation("Configuration data can not be changed or will not be used.");
};Microsoft.Live.Core.Internal.MLCLS$2=function(a,b,c){this.$1=a;this.$2=b;this.$5={};this.$6={};this.$7=c;this.$3=new MC.LogContext(this.$2)};Microsoft.Live.Core.Internal.MLCLS$2.$8=function(a,b,c){Object.keyExists(Microsoft.Live.Core.Internal.MLCLS$2.$0,b)||(Microsoft.Live.Core.Internal.MLCLS$2.$0[b]=new Microsoft.Live.Core.Internal.MLCLS$2(a,b,c));return Microsoft.Live.Core.Internal.MLCLS$2.$0[b]};Microsoft.Live.Core.Internal.MLCLS$2.$9=function(a,b,c){if(String.isNullOrEmpty(b))throw Error.argumentNull("channelName");
if(ss.isNullOrUndefined(c))throw Error.argumentNull("channel");Microsoft.Live.Core.Internal.MLCLS$2.$8(a,b,null).set_$C(c)};Microsoft.Live.Core.Internal.MLCLS$2.$A=function(a){if(MSH.ChannelHelper.canCreateChannel(a)){var b=MSH.ChannelHelper.getPreloadedIframe("storage_iframe");return MSH.ChannelHelper.createParentChannel("LocalStorage.html",b,a,Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_proxyChannelName())}return null};Microsoft.Live.Core.Internal.MLCLS$2.prototype={$1:!1,$2:null,
$3:null,$4:null,$5:null,$6:null,$7:null,get_$B:function(){return null!=this.get_$C()},get_$C:function(){if(null==this.$4&&!this.$1){var a=Microsoft.Live.Core.Internal.MLCLS$2.$A(this.$7);null!=a&&(this.set_$C(a),MSH.LogCollector.get_instance().registerLocalStorageChannel(a),MSH.PerfCollector.get_instance().registerRemoteServiceChannel(a))}return this.$4},set_$C:function(a){this.$4=a;this.$4.add_messageReceived(ss.Delegate.create(this,this.$12));this.$10();return a},$D:function(a,b){MSH.Logger.logTrace(this.$3,
"LocalStorageProxyChannel.SendMessage","Command: "+a);this.get_$C().sendMessage(a,b)},$E:function(a){this.$6[a.get_id()]=a},$F:function(a,b,c){a=this.$14(a,b);b=this.$5[a];ss.isNullOrUndefined(b)&&(b=[],this.$5[a]=b);b.add(c)},$10:function(){var a=this.$6,b;for(b in a)for(var c=ss.IEnumerator.getEnumerator(a[b]);c.moveNext();)c.get_current().$11()},$11:function(a,b){var c=null;if(2===b||1===b)c=this.$5[this.$14(a,b)];if(null==c||0===c.length)if(c=[],this.$1)switch(b){case 1:c.add(new Microsoft.Live.Core.Internal.LocalStorageProxyListener(a,
1,this.$2));break;case 2:c.add(new Microsoft.Live.Core.Internal.LocalStorageProxyListener(a,2,this.$2));break;case 3:c.add(new Microsoft.Live.Core.Internal.LocalStorageProxyListener(a,null,this.$2))}return c},$12:function(a,b){MSH.PerfCollector.get_instance().increaseEventCounter("LocalStorageProxyChannel-MessageReceivedCount",1);var c=Date.get_now();try{MSH.Logger.logTrace(this.$3,"LocalStorageProxyChannel.OnMessageReceived","Command: "+b.get_command());switch(b.get_command()){case "CollectLogs":var d=
MSH.LogCollector.get_instance().getLocalLogEntries();this.get_$C().sendMessage("CollectLogsResponse",[d]);return;case "ClearLogs":MSH.LogCollector.get_instance().clearLocalLogEntries();break;case "CollectLogsResponse":return;case "PerfCollectorOutputToConsole":MSH.PerfCollector.get_instance().reportToConsole();return;case "PerfCollectorEnable":MSH.PerfCollector.get_instance().set_enabled(!0);return;case "PerfCollectorDisable":MSH.PerfCollector.get_instance().set_enabled(!1);return}var e=b.get_parameters()[0],
f=b.get_parameters()[1].toString(),g=b.get_parameters()[2];if("LocalStorageProxyInitializationCompleted"===b.get_command()){var h=b.get_parameters()[3].toString();this.$13(h).$13(e,f,g,b)}else for(var i=this.$11(f,g),j=ss.IEnumerator.getEnumerator(i);j.moveNext()&&j.get_current().$13(e,f,g,b););}finally{c=MSH.DateTimeHelper.subtract(Date.get_now(),c),MSH.PerfCollector.get_instance().addPerfCounterValue("LocalStorageProxyChannel-MessageHandlingTime",c)}},$13:function(a){return this.$6[a]},$14:function(a,
b){return String.format("{0}@{1}",Microsoft.Live.Core.Internal.StorageScope.toString(b),a)}};Microsoft.Live.Core.Internal.MLCLS$1=function(){};Microsoft.Live.Core.Internal.MLCLS$1.prototype={get_current:function(){return null},moveNext:function(){return!1},reset:function(){}};Microsoft.Live.Core.Internal.LocalStorageProxyListener=function(a,b,c){Microsoft.Live.Core.Internal.LocalStorageProxyListener.initializeBase(this,[a,"channel.html",b]);this.$23=new MC.LogContext(a);this.storageNamespace=this.storageNamespace;
this.$22=c;this.get_$9().$E(this);this.$11()};Microsoft.Live.Core.Internal.LocalStorageProxyListener.prototype={$22:null,$23:null,$24:null,$25:0,$26:null,get_channelName:function(){return this.$22},get_isLocalStorageCreator:function(){return!0},$13:function(a,b,c,d){MSH.Logger.logTrace(MC.LogContext.get_global(),"LocalStorageProxyListener.OnMessageReceived",String.format("{0}::{1}::{2}",d.get_command(),b,Microsoft.Live.Core.Internal.StorageScope.toString(c)));switch(d.get_command()){case "LocalStorageProxyInitialize":return d=
d.get_parameters()[3].toString(),this.$27(a,b,d,c),!1;case "LocalStorageProxyWrite":this.$29(d);break;case "LocalStorageProxyAddOnUnloadWrite":this.$2A(d);break;case "LocalStorageProxyRemoveOnUnloadWrite":this.$2B(d);break;case "LocalStorageProxyClear":this.$2C();break;case "LocalStorageProxyRefresh":this.$2D();break;case "LocalStorageProxyFlush":this.$2E()}return!0},$27:function(a,b,c,d){0!==this.status&&this.$30(this,c,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.status));if(null==
this.$24){this.$25=a;this.$26=c;if(3===d)this.$24=new Microsoft.Live.Core.LocalStorage(b),this.scope=Microsoft.Live.Core.LocalStorage.$16(this.$24.get_scope());else{this.scope=d;try{switch(this.scope){case 1:this.$24=new Microsoft.Live.Core.LocalStorage(b,1);break;case 2:this.$24=new Microsoft.Live.Core.LocalStorage(b,2)}}catch(e){this.status=2;this.$30(this,c,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(2));return}}this.$24.add_initialized(ss.Delegate.create(this,this.$28));this.$24.add_refreshed(ss.Delegate.create(this,
this.$2F))}},$28:function(a,b){this.status=b.get_status();1===this.status&&this.get_$9().$F(this.get_$8(),this.scope,this);this.$30(a,this.$26,b)},$29:function(a){var b=a.get_parameters()[3],a=b.$0.$0,b=b.$0.$1;try{MSH.Logger.logTrace(this.$23,"LocalStorageProxyListener.OnWriteChannelMessage",String.format("{0}:{1}:{2}:{3}:{4}",this.$22,this.get_$8(),this.scope,a,b)),this.$24.set_item(a,b)}catch(c){}},$2A:function(a){var b=a.get_parameters()[3],a=b.$0.$0,b=b.$0.$1;try{MSH.Logger.logTrace(this.$23,
"LocalStorageProxyListener.OnAddOnUnloadWriteChannelMessage",String.format("{0}:{1}:{2}:{3}:{4}",this.$22,this.get_$8(),this.scope,a,b)),this.$24.addOnUnloadWrite(a,b)}catch(c){}},$2B:function(a){a=a.get_parameters()[3].toString();try{MSH.Logger.logTrace(this.$23,"LocalStorageProxyListener.OnRemoveOnUnloadWriteChannelMessage",String.format("{0}:{1}:{2}:{3}",this.$22,this.get_$8(),this.scope,a)),this.$24.removeOnUnloadWrite(a)}catch(b){}},$2C:function(){try{this.$24.clear()}catch(a){}},$2D:function(){try{this.$24.refresh()}catch(a){}},
$2E:function(){try{this.$24.flush()}catch(a){}},$2F:function(){var a=this.$31();this.get_$9().$D("LocalStorageProxyRefreshed",[this.$25,this.get_$8(),this.scope,a])},$30:function(a,b,c){var d=this.get_$8();2!==this.status?(a=Type.safeCast(a,Microsoft.Live.Core.LocalStorage),null==a&&(a=this.$24),c=Microsoft.Live.Core.Internal.$create_MLCLS$5(c.get_status(),a.get_availableStorage(),this.scope),c.$0=this.$31()):c=Microsoft.Live.Core.Internal.$create_MLCLS$5(2,0,this.scope);this.get_$9().$D("LocalStorageProxyInitializationCompleted",
[this.$25,d,this.scope,b,c])},$31:function(){for(var a=Array(this.$24.get_count()),b=0,c=ss.IEnumerator.getEnumerator(this.$24);c.moveNext();){var d=c.get_current(),d=Microsoft.Live.Core.Internal.$create_MLCLS$4(d,this.$24.get_item(d));a[b++]=d;MSH.Logger.logTrace(this.$23,"LocalStorageProxyListener.GetStoredData",String.format("key={0};value={1}",d.$0,d.$1))}return a}};Microsoft.Live.Core.MLCLS$8.registerClass("Microsoft.Live.Core.MLCLS$8");Microsoft.Live.Core.MLCLS$7.registerClass("Microsoft.Live.Core.MLCLS$7",
null,ss.IEnumerator);Microsoft.Live.Core.MLCLS$6.registerClass("Microsoft.Live.Core.MLCLS$6");Microsoft.Live.Core.LocalStorage.registerClass("Microsoft.Live.Core.LocalStorage",null,Microsoft.Live.Core.ILocalStorage,ss.IEnumerable);Microsoft.Live.Core.LocalStorageInitializedEventArgs.registerClass("Microsoft.Live.Core.LocalStorageInitializedEventArgs",ss.EventArgs);Microsoft.Live.Core.LocalStorageProxy.registerClass("Microsoft.Live.Core.LocalStorageProxy",null,Microsoft.Live.Core.ILocalStorage,ss.IEnumerable);
Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.registerClass("Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer");Microsoft.Live.Core.Internal.LocalStorageConfiguration.registerClass("Microsoft.Live.Core.Internal.LocalStorageConfiguration");Microsoft.Live.Core.Internal.MLCLS$2.registerClass("Microsoft.Live.Core.Internal.MLCLS$2");Microsoft.Live.Core.Internal.MLCLS$1.registerClass("Microsoft.Live.Core.Internal.MLCLS$1",null,ss.IEnumerator);Microsoft.Live.Core.Internal.LocalStorageProxyListener.registerClass("Microsoft.Live.Core.Internal.LocalStorageProxyListener",
Microsoft.Live.Core.LocalStorageProxy);Microsoft.Live.Core.MLCLS$8.$0=null;Microsoft.Live.Core.MLCLS$8.$1=null;Microsoft.Live.Core.MLCLS$8.$2=null;Microsoft.Live.Core.MLCLS$8.$3=0;Microsoft.Live.Core.MLCLS$8.$4="__messengerPreferredLocalStorageType";Microsoft.Live.Core.MLCLS$8.$5="__messengerOnlyPreferredLocalStorageType";Microsoft.Live.Core.LocalStorage.$0=null;Microsoft.Live.Core.LocalStorage.$1=null;Microsoft.Live.Core.LocalStorageProxy.$6=0;Microsoft.Live.Core.LocalStorageProxy.$7=["live.com",
"live-int.com","microsoft.com"];Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$0=null;Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$1=null;Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$2=null;Microsoft.Live.Core.Internal.LocalStorageConfiguration.$0="DefaultLocalStorageChannel";Microsoft.Live.Core.Internal.LocalStorageConfiguration.$1=!0;Microsoft.Live.Core.Internal.MLCLS$2.$0={};Type.registerNamespace("MSCo");MSCo.Environment=function(){};
MSCo.Environment.prototype={production:1,dogfood:2,integration:3};MSCo.Environment.registerEnum("MSCo.Environment",!1);MSCo.Configuration=function(){};MSCo.Configuration.get_webActionMethodContentType=function(){return MSCo.Configuration.$5};MSCo.Configuration.get_clientId=function(){return MSCo.Configuration.$1};MSCo.Configuration.get_domainName=function(){String.isNullOrEmpty(MSCo.Configuration.$2)&&MSCo.Configuration.$7();return MSCo.Configuration.$2};MSCo.Configuration.set_domainName=function(a){if(String.isNullOrEmpty(a))throw Error("Invalid domain name.");
MSCo.Configuration.$2=MSH.DomainHelper.getReportingDomain(a);return a};MSCo.Configuration.get_market=function(){return __MSLiveCore__.Loader.get_settings().market};MSCo.Configuration.get_updateUserSettingsVersion=function(){return MSCo.Configuration.$4};MSCo.Configuration.get_clientDomain=function(){return String.isNullOrEmpty(MSCo.Configuration.$2)?"msmsgs":MSCo.Configuration.$2};MSCo.Configuration.get_clientVersion=function(){return MSCo.Configuration.$3};MSCo.Configuration.set_clientVersion=function(a){return MSCo.Configuration.$3=
a};MSCo.Configuration.get_endpointName=function(){return MSCo.Configuration.$2};MSCo.Configuration.get_configurationUrl=function(){return MSCo.Configuration.get_signInServerPath()+"/actions/getmessengerconfiguration"};MSCo.Configuration.get_presenceHostName=function(){return MSCo.Configuration.$8("geo.gateway.messenger.live.com","dogfood.gateway.messenger.live.com","vip.gateway.edge.messenger.live-int.com")};MSCo.Configuration.get_storageHostName=function(){return MSCo.Configuration.$8("storage.live.com",
"storage.live.com","storage.live-int.com")};MSCo.Configuration.get_sendMessageUrlFormat=function(){return MSCo.Configuration.$8("http://mail.live.com/?rru=compose%3fto={0}","http://mail.live.com/?rru=compose%3fto={0}","http://mail.live-int.com/?rru=compose%3fto={0}")};MSCo.Configuration.get_photoUrlFormat=function(){return MSCo.Configuration.$8("http://cid-{0}.photos.live.com/albums.aspx","http://cid-{0}.photos.live.com/albums.aspx","http://cid-{0}.photos.live-int.com/albums.aspx")};MSCo.Configuration.get_profileUrlFormat=
function(){return MSCo.Configuration.$8("http://profile.live.com/cid-{0}/","http://profile.live.com/cid-{0}/","http://profile.live-int.com/cid-{0}/")};MSCo.Configuration.get_displayPictureUrlFormat=function(){return MSCo.Configuration.$8("http://storage.live.com/users/{0}/myprofile/expressionprofile/profilephoto","http://storage.live.com/users/{0}/myprofile/expressionprofile/profilephoto","http://storage.live-int.com/users/{0}/myprofile/expressionprofile/profilephoto")};MSCo.Configuration.get_messageUrlFormat=
function(){return MSCo.Configuration.$8("http://www.hotmail.msn.com{0}","http://www.hotmail.msn.com{0}","http://www.hotmail.msn-int.com{0}")};MSCo.Configuration.get_storedMessengerSessionLifetime=function(){return 12E4};MSCo.Configuration.get_missedConversationsEnabled=function(){return __MSLiveCore__.Loader.get_settings().messenger.missedConversationsEnabled};MSCo.Configuration.get_silentReauthDetectionUrl=function(){return __MSLiveCore__.Loader.get_settings().messenger.silentReauthDetectionUrl};
MSCo.Configuration.get_silentReauthUrlFormat=function(){return __MSLiveCore__.Loader.get_settings().messenger.silentReauthUrlFormat};MSCo.Configuration.get_reauthCompletedPageUrl=function(){return __MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("ReauthCompleted.html")};MSCo.Configuration.get_signInHost=function(){return __MSLiveCore__.Loader.get_settings().messenger.serviceHostName};MSCo.Configuration.get_signInServerPath=function(){return MSCo.HttpRequest.get_defaultScheme()+MSCo.Configuration.get_signInHost()};
MSCo.Configuration.get_updateUserSettingsUrl=function(){return MSCo.Configuration.get_signInServerPath()+"/actions/updateusersettings/"};MSCo.Configuration.get_updateIMAvailabilityService=function(){return MSCo.Configuration.get_signInServerPath()+"/actions/updateimavailabilityservice/"};MSCo.Configuration.get_httpHeadersRestricted=function(){return!1};MSCo.Configuration.$7=function(){var a=window.location.hostname;String.isNullOrEmpty(a)||MSCo.Configuration.set_domainName(a)};MSCo.Configuration.$8=
function(a,b,c){switch(MSCo.Configuration.$6){case 1:return a;case 3:return c;case 2:return b}return String.Empty};MSCo.HttpHelper=function(){};MSCo.HttpHelper.extractScheme=function(a){var b=a.indexOf("://");return-1!==b?MSH.StringHelper.substring(a,0,b)+"://":null};MSCo.HttpHelper.extractHost=function(a){var b=MSCo.HttpHelper.extractScheme(a);if(null!=b){var b=b.length,c=a.indexOf("/",b);return 0<=c?MSH.StringHelper.substringSection(a,b,c):MSH.StringHelper.substringToEnd(a,b)}return null};MSCo.JsonResponseParser=
function(){};MSCo.JsonResponseParser.buildRequest=function(a){return MLC.JSON.serialize(a)};MSCo.LocalStorageMemoryService=function(){this.$1=this.$0=MSH.DateTimeHelper.minValue;this.$4={};this.$5={}};MSCo.LocalStorageMemoryService.filterNetworkStatusEvents=function(a,b){for(var c=[],d=ss.IEnumerator.getEnumerator(a.events);d.moveNext();){var e=d.get_current();"OnNetworkStatusChanged"===e[0]?b.add(e[1]):c.add(e)}a.events=MSH.CollectionHelper.toArray(c)};MSCo.LocalStorageMemoryService.createMessengerSessionInfoFromStorage=
function(a,b,c){if(null==a||null==b||null==c)return null;var d=b.events.length,e=Array(d+c.length);MSH.ArrayHelper.copyTo(b.events,0,e,0,d);for(b=0;b<c.length;b++){var f=c[b];e[d+b]=["OnNetworkStatusChanged",f[0],f[1]]}c=MC.$create_MessengerSessionInfo(a.server,a.sessionToken,a.transactionID,e);c.services=a.services;c.disconnected=a.disconnected;return c};MSCo.LocalStorageMemoryService.prototype={$2:0,$3:!1,$4:null,$5:null,$6:null,$7:null,$8:null,$9:null,$A:null,$B:null,add_dataWritten:function(a){this.$C=
ss.Delegate.combine(this.$C,a)},remove_dataWritten:function(a){this.$C=ss.Delegate.remove(this.$C,a)},$C:null,add_dataRead:function(a){this.$D=ss.Delegate.combine(this.$D,a)},remove_dataRead:function(a){this.$D=ss.Delegate.remove(this.$D,a)},$D:null,add_instancesChanged:function(a){this.$E=ss.Delegate.combine(this.$E,a)},remove_instancesChanged:function(a){this.$E=ss.Delegate.remove(this.$E,a)},$E:null,get_usesLocalStorageProxy:function(){return!1},get_lastWriteTime:function(){return this.$1},get_lastReadTime:function(){return this.$0},
get_revision:function(){return this.$2},get_currentInstances:function(){return this.$F()},get_networkStatusEvents:function(){this.$11(2,this.$6);return this.$6},set_networkStatusEvents:function(a){this.$6!==a&&(this.$6=a,this.$10(2,this.$6));return a},get_messengerSessionEvents:function(){this.$11(5,this.$8);return this.$8},set_messengerSessionEvents:function(a){a!==this.$8&&(this.$8=a,this.$10(5,a));return a},get_messengerSessionState:function(){this.$11(4,this.$7);return this.$7},set_messengerSessionState:function(a){a!==
this.$7&&(this.$7=a,this.$10(4,a),null!=a&&(this.$3=!0,null!=this.$E&&this.$E.invoke(this,new MC.InstancesChangedEventArgs(this.$F()))));return a},get_cachedSettings:function(){this.$11(12,this.$B);return this.$B},set_cachedSettings:function(a){a!==this.$B&&(this.$B=a,this.$10(12,a));return a},get_alerts:function(){this.$11(9,this.$9);return this.$9},set_alerts:function(a){a!==this.$9&&(this.$9=a,this.$10(9,a));return a},get_conversations:function(){this.$11(6,this.$A);return this.$A},set_conversations:function(a){a!==
this.$A&&(this.$A=a,this.$10(6,a));return a},saveConversationMessage:function(a,b){Object.keyExists(this.$4,a)||(this.$4[a]=[]);var c=this.$4[a];c.add(b);this.$10(7,MSH.CollectionHelper.toArray(c))},saveRecentMessage:function(a,b){this.$5[a]=b;this.$10(11,b)},deletePersistedConversationMessages:function(a){Object.keyExists(this.$4,a)&&delete this.$4[a];this.$10(7,null)},updatePersistedConversationMessageIds:function(a,b){var c=this.$4[a];if(null!=c){Object.keyExists(this.$4,b)||(this.$4[b]=[]);for(var d=
this.$4[b],c=ss.IEnumerator.getEnumerator(c);c.moveNext();){var e=c.get_current();d.add(e)}delete this.$4[a];c=this.$5[a];null!=c&&(this.$5[b]=c,delete this.$5[a],this.$10(7,MSH.CollectionHelper.toArray(d)))}},getConversationPersistedMessages:function(a){a=Object.keyExists(this.$4,a)?MSH.CollectionHelper.toArray(this.$4[a]):[];this.$11(7,a);return a},getLastMessage:function(a){return this.$5[a]},clearUserSession:function(){this.set_conversations(null);this.set_networkStatusEvents(null);this.set_messengerSessionState(null);
this.set_messengerSessionEvents(null);Object.clearKeys(this.$4);this.$10(7,[])},clearAllPersistedData:function(){this.$4={};this.$1=this.$0=MSH.DateTimeHelper.minValue;this.$2=0;this.$3=!1;this.$A=this.$9=this.$8=this.$7=this.$6=null},onSignedOut:function(){this.$3=!1;null!=this.$E&&this.$E.invoke(this,new MC.InstancesChangedEventArgs(this.$F()))},initializeUserStorage:function(a,b,c){String.isNullOrEmpty(b)&&(String.isNullOrEmpty(a)||"none"===a)?c.invoke(!1):c.invoke(!0)},refreshConversationData:function(a){a.invoke()},
$F:function(){if(this.$3&&null!=this.$7)switch(this.$7.services){case 3:case 0:return[MC.$create_InstanceInfo("0",!0,!0)]}return[]},$10:function(a,b){null!=this.$C&&(this.$1=Date.get_now(),this.$2++,this.$C.invoke(this,new MC.LocalStorageDataReadWriteEventArgs(this.$2,a,b)))},$11:function(a,b){null!=this.$D&&(this.$0=Date.get_now(),this.$D.invoke(this,new MC.LocalStorageDataReadWriteEventArgs(this.$2,a,b)))}};MSCo.LocalStorageServiceWrapper=function(a){this.swapServices(a)};MSCo.LocalStorageServiceWrapper.prototype=
{$0:null,swapServices:function(a){null!=this.$0&&(this.$0.remove_dataRead(ss.Delegate.create(this,this.$4)),this.$0.remove_dataWritten(ss.Delegate.create(this,this.$5)),this.$0.remove_instancesChanged(ss.Delegate.create(this,this.$6)));this.$0=a;this.$0.add_dataRead(ss.Delegate.create(this,this.$4));this.$0.add_dataWritten(ss.Delegate.create(this,this.$5));this.$0.add_instancesChanged(ss.Delegate.create(this,this.$6))},add_dataWritten:function(a){this.$1=ss.Delegate.combine(this.$1,a)},remove_dataWritten:function(a){this.$1=
ss.Delegate.remove(this.$1,a)},$1:null,add_dataRead:function(a){this.$2=ss.Delegate.combine(this.$2,a)},remove_dataRead:function(a){this.$2=ss.Delegate.remove(this.$2,a)},$2:null,add_instancesChanged:function(a){this.$3=ss.Delegate.combine(this.$3,a)},remove_instancesChanged:function(a){this.$3=ss.Delegate.remove(this.$3,a)},$3:null,get_usesLocalStorageProxy:function(){return this.$0.get_usesLocalStorageProxy()},get_lastWriteTime:function(){return this.$0.get_lastWriteTime()},get_lastReadTime:function(){return this.$0.get_lastReadTime()},
get_revision:function(){return this.$0.get_revision()},get_currentInstances:function(){return this.$0.get_currentInstances()},get_networkStatusEvents:function(){return this.$0.get_networkStatusEvents()},set_networkStatusEvents:function(a){this.$0.set_networkStatusEvents(a);return a},get_messengerSessionState:function(){return this.$0.get_messengerSessionState()},set_messengerSessionState:function(a){this.$0.set_messengerSessionState(a);return a},get_messengerSessionEvents:function(){return this.$0.get_messengerSessionEvents()},
set_messengerSessionEvents:function(a){this.$0.set_messengerSessionEvents(a);return a},get_cachedSettings:function(){return this.$0.get_cachedSettings()},set_cachedSettings:function(a){this.$0.set_cachedSettings(a);return a},get_alerts:function(){return this.$0.get_alerts()},set_alerts:function(a){this.$0.set_alerts(a);return a},get_conversations:function(){return this.$0.get_conversations()},set_conversations:function(a){this.$0.set_conversations(a);return a},saveConversationMessage:function(a,b){this.$0.saveConversationMessage(a,
b)},saveRecentMessage:function(a,b){this.$0.saveRecentMessage(a,b)},deletePersistedConversationMessages:function(a){this.$0.deletePersistedConversationMessages(a)},updatePersistedConversationMessageIds:function(a,b){this.$0.updatePersistedConversationMessageIds(a,b)},getConversationPersistedMessages:function(a){return this.$0.getConversationPersistedMessages(a)},getLastMessage:function(a){return this.$0.getLastMessage(a)},clearUserSession:function(){this.$0.clearUserSession()},clearAllPersistedData:function(){this.$0.clearAllPersistedData()},
onSignedOut:function(a){this.$0.onSignedOut(a)},initializeUserStorage:function(a,b,c){this.$0.initializeUserStorage(a,b,c)},refreshConversationData:function(a){this.$0.refreshConversationData(a)},$4:function(a,b){null!=this.$2&&this.$2.invoke(a,b)},$5:function(a,b){null!=this.$1&&this.$1.invoke(a,b)},$6:function(a,b){null!=this.$3&&this.$3.invoke(a,b)}};MSCo.HashHelper=function(){};MSCo.HashHelper.computeFastHash=function(a,b){for(var c=5381,d=0,e=a.length;d<e;d++)c=(c<<5)+c+a.charCodeAt(d);d=b;0>
c&&(d+="_",c*=-1);return d+c};MSCo.HttpMethod=function(){};MSCo.HttpMethod.prototype={Get:0,Post:1,Put:2,Delete:3};MSCo.HttpMethod.registerEnum("MSCo.HttpMethod",!1);MSCo.HttpStatusCode=function(){};MSCo.HttpStatusCode.prototype={none:0,aborted:1,OK:200,created:201,accepted:202,noContent:204,movedPermanently:301,found:302,notModified:304,badRequest:400,unauthorized:401,forbidden:403,notFound:404,requestTimeout:408,conflict:409,gone:410,serverError:500,notImplemented:501,badGateway:502,serviceUnavailable:503};
MSCo.HttpStatusCode.registerEnum("MSCo.HttpStatusCode",!1);MSCo.HttpRequest=function(a,b,c,d,e){this.$1=a;this.$2=b;this.$4=this.$15(d);this.$3=c||String.Empty;this.$5=e;this.$9=3E4;this.$6=MSCo.HttpHelper.extractHost(this.$2);String.isNullOrEmpty(this.$6)&&(this.$6=MSCo.N$2.get_$F());this.$6!==MSCo.N$2.get_$F()&&(this.$7=!0);this.$C=MSCo.N$2.$10(this.$6)};MSCo.HttpRequest.get_defaultScheme=function(){return MSH.TestingHelper.get_isUnitTest()?"http://":MSH.UriHelper.get_windowLocationProtocol()+"//"};
MSCo.HttpRequest.$13=function(a){if(null!=a&&"undefined"!==typeof a.abort)try{a.abort()}catch(b){}};MSCo.HttpRequest.$14=function(a,b){if(null!=a)try{a.onabort=b}catch(c){}};MSCo.HttpRequest.$1E=function(a){switch(a){case 0:return"GET";case 1:return"POST";case 2:return"PUT";case 3:return"DELETE";default:return null}};MSCo.HttpRequest.prototype={$1:0,$2:null,$3:null,$4:null,$5:null,$6:null,$7:!1,$8:null,$9:0,$A:null,$B:null,$C:null,$D:null,$E:!1,$F:!1,$10:!1,get_state:function(){return this.$8},set_state:function(a){return this.$8=
a},get_$11:function(){return this.$1},setTimeout:function(a){this.$9=a},execute:function(){this.$E||(this.$E=!0,this.$C.$15(this))},abort:function(){this.$10=this.$F=!0;this.$E&&MSCo.HttpRequest.$13(this.$A)},$12:function(){this.$1C();if(this.$7){var a={};a.type=1===this.$1?"XMLPost":"XMLGet";a.verb=MSCo.HttpRequest.$1E(this.$1);a.timeout=null;a.url=this.$2;a.headers=this.$4;a.postString=this.$3;this.$A=this.$C.$17(a,ss.Delegate.create(this,this.$18));MSCo.HttpRequest.$14(this.$A,ss.Delegate.create(this,
this.$17))}else{this.$A=new XMLHttpRequest;this.$A.open(MSCo.HttpRequest.$1E(this.$1),this.$2,!0);this.$A.onreadystatechange=ss.Delegate.create(this,this.$16);MSCo.HttpRequest.$14(this.$A,ss.Delegate.create(this,this.$17));if(null!=this.$4&&0<Object.getKeyCount(this.$4)){var a=this.$4,b;for(b in a)this.$A.setRequestHeader(b,a[b])}try{this.$A.send(this.$3)}catch(c){this.$18(this.$A)}}},$15:function(a){MSH.BrowserHelper.get_isWebKit()&&delete a["Proxy-Connection"];return a},$16:function(){4===this.$A.readyState&&
this.$18(this.$A)},$17:function(){this.$10=!0},$18:function(a){MSH.Scheduler.defer(ss.Delegate.create(this,function(){MSH.PerfCollector.get_instance().increaseEventCounter("HttpRequest-OnComplete",1);var b=Date.get_now();this.$19(a);b=MSH.DateTimeHelper.subtract(Date.get_now(),b);MSH.PerfCollector.get_instance().addPerfCounterValue("HttpRequest-ResponseHandlingTime",b)}))},$19:function(a){this.$1D();var b=new MSCo.N$4(a,this.$8,this.$10?1:0);MSH.Logger.logHttpRequest(2,MC.LogContext.get_global(),
"HttpRequest","Http response received",MC.$create_HttpRequestLogEntryInfo(this.$2,b.get_statusText(),b.get_responseText()));if(null!=this.$B)304===b.get_status()&&(b=new MSCo.N$4(this.$B,this.$8,this.$10?1:0)),this.$B=null;else if(0===this.$1&&String.isNullOrEmpty(b.getResponseHeader("Date"))){this.$B=a;this.$4["If-Modified-Since"]=b.getResponseHeader("Last-Modified")||MSH.DateTimeHelper.minValue.toUTCString();this.$12();return}this.$E=!1;this.$A=null;this.$10&&!this.$F?this.$C.$16(this,null,b):this.$C.$16(this,
this.$5,b)},$1A:function(){this.$F=!0;MSCo.HttpRequest.$13(this.$A)},$1B:function(a){0===a&&this.$10&&(a=1);a=new MSCo.N$4(new XMLHttpRequest,this.$8,a);this.$5.invoke(a)},$1C:function(){this.$1D();this.$D=new MSH.Timer(ss.Delegate.create(this,this.$1A),null,this.$9,MSH.Timeout.infinite)},$1D:function(){null!=this.$D&&(this.$D.dispose(),this.$D=null)}};MSCo.N$2=function(a){this.$5=a;this.$6=[];this.$7=[];if(this.$5!==MSCo.N$2.get_$F()){MSCo.N$2.$E();var b=a.endsWith(document.domain),c=a.indexOf(":");
0<c&&a.substring(0,c).endsWith(document.domain)&&(b=!0);b&&(this.$8=!0,this.$12())}};MSCo.N$2.$E=function(){if(!MSCo.N$2.$3){var a=MSCo.N$2.$4,b=a.indexOf(":");0<b&&(a=a.substring(0,b));if(!a.endsWith(".com"))throw Error.createError(String.format("Invalid domain: {0}",a),null);b=a.indexOf(".");if(0<b)try{for(document.domain=a;0<=b;)a=a.substr(b+1),"com"!==a?(document.domain=a,b=a.indexOf(".")):b=-1}catch(c){}MSCo.N$2.$3=!0}};MSCo.N$2.get_$F=function(){return MSCo.N$2.$4};MSCo.N$2.$10=function(a){var a=
a.toLowerCase(),b=MSCo.N$2.$2[a];null==b?(b=new MSCo.N$2(a),MSCo.N$2.$2[a]=b,window.attachEvent("onunload",ss.Delegate.create(b,b.dispose))):b.$13();return b};MSCo.N$2.prototype={$5:null,$6:null,$7:null,$8:!1,$9:null,$A:!1,$B:null,$C:null,$D:!1,$11:function(a){this.$B=a;this.$A=!1;this.$1A();this.$18()},$12:function(){this.$A=!1;this.$9=document.createElement("iframe");this.$9.style.display="none";this.$9.src=String.format("{0}//{1}/xmlProxy.htm?vn={2}&domain={3}",MSH.UriHelper.get_windowLocationProtocol(),
this.$5,"9.090515.0",document.domain);this.$C=new MSH.Timer(ss.Delegate.create(this,this.$14),null,3E4,MSH.Timeout.infinite);document.body.appendChild(this.$9)},$13:function(){this.$8&&this.$A&&this.$12()},$14:function(){null==this.$B&&(this.$A=!0,document.body.removeChild(this.$9),this.$9=null,this.$19());this.$1A()},$15:function(a){this.$6.enqueue(a);this.$18()},$16:function(a,b,c){this.$7.remove(a);this.$18();this.$D||null!=b&&b.invoke(c)},$17:function(a,b){return this.$B.fetchXML(a,MSCo.Network,
this,b)},$18:function(){if(!this.$D)if(!this.$8||null!=this.$B)for(;0<this.$6.length&&4>this.$7.length;){var a=this.$6.dequeue();this.$7.add(a);a.$12()}else this.$A&&this.$19()},$19:function(){for(;0<this.$6.length;)this.$6.dequeue().$1B(404)},$1A:function(){null!=this.$C&&(this.$C.dispose(),this.$C=null)},dispose:function(){if(!this.$D){this.$D=!0;for(var a=ss.IEnumerator.getEnumerator(this.$7);a.moveNext();)a.get_current().abort()}}};MSCo.HttpResponse=function(){};MSCo.HttpResponse.prototype={$0:null,
get_responseData:function(){return null},get_responseXml:function(){null==this.$0&&(this.$0=ss.XmlDocumentParser.parse(this.get_responseText()));return this.$0},toString:function(){return this.get_responseText()}};MSCo.Network=function(){};MSCo.Network.initializeXmlProxyInterface=function(){MSCo.Network.Type={};MSCo.Network.Type.XMLPost="XMLPost";Function.emptyFunction=ss.Delegate.Null;MSCo.Network.oninvoke={};MSCo.Network.oninvoke.fire=ss.Delegate.Null;MSCo.Network.onhttperror={};MSCo.Network.onhttperror.fire=
ss.Delegate.Null;var a=window.Web;a.Network=MSCo.Network;MSCo.Network.registerProxy=MSCo.Network.$0;a.Browser={};a.Browser.isIE=ss.Delegate.Null};MSCo.Network.$0=function(a){MSCo.N$2.$10(a.location.hostname).$11(a)};MSCo.N$4=function(a,b,c){MSCo.N$4.initializeBase(this);this.$1=a;this.$2=b;this.$3=c};MSCo.N$4.prototype={$1:null,$2:null,$3:0,$4:null,get_state:function(){return this.$2},get_responseText:function(){try{return null==this.$4&&(this.$4=this.$1.responseText),this.$4}catch(a){return String.Empty}},
get_hasContent:function(){return!String.isNullOrEmpty(this.get_responseText())},get_status:function(){try{if(0!==this.$3)return this.$3;if(0===this.$1.readyState)return 408;if(ss.isUndefined(this.$1.status))return 0;switch(this.$1.status){case 1223:return 204;case 12002:return 408;case 12007:case 12029:case 12030:case 12031:return 1;case 12152:return 500;default:return this.$1.status}}catch(a){return 0}},get_statusText:function(){try{if(0===this.$1.readyState)return"Request Timeout";switch(this.$1.status){case 1223:return"No Content";
default:return this.$1.statusText}}catch(a){return String.Empty}},getResponseHeader:function(a){try{return this.$1.getResponseHeader(a)}catch(b){return null}}};Type.registerNamespace("Web");Web.N$3=function(){};MSCo.Configuration.registerClass("MSCo.Configuration");MSCo.HttpHelper.registerClass("MSCo.HttpHelper");MSCo.JsonResponseParser.registerClass("MSCo.JsonResponseParser");MSCo.LocalStorageMemoryService.registerClass("MSCo.LocalStorageMemoryService",null,MC.ILocalStorageService);MSCo.LocalStorageServiceWrapper.registerClass("MSCo.LocalStorageServiceWrapper",
null,MC.ILocalStorageService);MSCo.HashHelper.registerClass("MSCo.HashHelper");MSCo.HttpRequest.registerClass("MSCo.HttpRequest",null,MC.IAbortable);MSCo.N$2.registerClass("MSCo.N$2",null,ss.IDisposable);MSCo.HttpResponse.registerClass("MSCo.HttpResponse");MSCo.Network.registerClass("MSCo.Network");MSCo.N$4.registerClass("MSCo.N$4",MSCo.HttpResponse);Web.N$3.registerClass("Web.N$3");MSCo.Configuration.maximumContactCount=1E3;MSCo.Configuration.maximumAllowedContactCount=1500;MSCo.Configuration.maximumBlockedContactCount=
1200;MSCo.Configuration.maximumGroupCount=200;MSCo.Configuration.addressBookPartnerId="73c11013-4fa8-414a-ace9-527af276ad20";MSCo.Configuration.addressBookSecureHostName="livecontacts.services.live.com";MSCo.Configuration.addressBookInsecureHostName="livecontacts.live.com";MSCo.Configuration.$1="msgrlib";MSCo.Configuration.$2=String.Empty;MSCo.Configuration.$3="6.1.0.0";MSCo.Configuration.$4="1";MSCo.Configuration.$5="application/json; charset=utf-8";MSCo.Configuration.$6=0;MSCo.Configuration.$6=
ss.Enum.parse(MSCo.Environment,__MSLiveCore__.Loader.get_settings().messenger.serviceEnvironment);switch(MSCo.Configuration.$6){case 2:case 1:case 3:break;default:MSCo.Configuration.$6=1}MSCo.N$2.$2={};MSCo.N$2.$3=!1;MSCo.N$2.$4=window.location.host.toLowerCase();Type.registerNamespace("MSM");MSM.MriCompareOptions=function(){};MSM.MriCompareOptions.prototype={none:0,address:1,epId:2,addressAndEpId:3};MSM.MriCompareOptions.registerEnum("MSM.MriCompareOptions",!0);MSM.HttpMsnpTransportLogContext=function(a,
b){this.$1=a;this.$2=b;this.$4()};MSM.HttpMsnpTransportLogContext.prototype={$0:null,$1:null,$2:0,$3:null,get_server:function(){return this.get_server()},set_server:function(a){this.$1!==a&&(this.$1=a,this.$4());return a},get_liveId:function(){return this.$3},set_liveId:function(a){this.$3!==a&&(this.$3=a,this.$4());return a},get_context:function(){return this.$0},set_context:function(a){return this.$0=a},$4:function(){this.$0=String.format("[User:{0} Server:{1} Debug ID:{2}]",this.$3||String.Empty,
this.$1,this.$2)}};MSM.MimeParser=function(a){this.$0={};this.$1={};var b,c=a.indexOf("\r\n\r\n");-1===c?(b=MSH.StringHelper.substringToEnd(a,0),this.$2=String.Empty):(b=MSH.StringHelper.substring(a,0,c),this.$2=MSH.StringHelper.substringToEnd(a,c+4));this.$3(b)};MSM.MimeParser.prototype={$0:null,$1:null,$2:null,$3:function(a){for(var b=0,c=a.length;b<c;){var d=a.indexOf("\r\n",b);-1===d&&(d=c);var e=MSH.StringHelper.substringSection(a,b,d);if(0<e.length){var f=e.indexOf(": ");-1!==f&&(b=e.substring(0,
f),e=MSH.StringHelper.substringToEnd(e,f+2),this.$0[b]=e,this.$1[MSH.StringHelper.toLowerCase(b)]=e)}b=d+2}},getHeaders:function(){return this.$0},getHeader:function(a){a=MSH.StringHelper.toLowerCase(a);return this.$1[a]||null},getBody:function(){return this.$2},$4:function(){return Object.getKeyCount(this.$1)},getIntHeader:function(a,b){var c=b,d=this.getHeader(a);String.isNullOrEmpty(d)||(c=MSH.ConvertHelper.parseInt(d));return c}};MSM.MimeBuilder=function(){this.$0=[]};MSM.MimeBuilder.prototype=
{$0:null,$1:null,$2:!1,get_disableContentLengthHeader:function(){return this.$2},set_disableContentLengthHeader:function(a){return this.$2=a},toString:function(){for(var a=new ss.StringBuilder,b=ss.IEnumerator.getEnumerator(this.$0);b.moveNext();){var c=b.get_current();a.appendLine(String.format("{0}: {1}",c[0],c[1]))}b=MSH.StringHelper.getByteCount(this.$1);this.get_disableContentLengthHeader()||a.appendLine(String.format("{0}: {1}","Content-Length",b));a.appendLine(String.Empty);0!==b&&a.append(this.$1);
return a.toString()},addHeaders:function(a){for(var b in a)this.setStringHeader(b,a[b])},setStringHeader:function(a,b){String.isNullOrEmpty(b)||this.$0.add([a,b])},setIntHeader:function(a,b){-1!==b&&this.$0.add([a,b.toString()])},setBody:function(a){this.$1=a}};MSM.Mri=function(a){this.$6=this.$4=this.$3=this.$2=this.$1=String.Empty;a=MSM.Mri.tryParse(a);null!=a&&(this.$1=a.$1,this.$5=a.$5,this.$3=a.$3,this.$2=a.$2,this.$4=a.$4,this.$6=a.$6)};MSM.Mri.getIMAddressInfo=function(a){var b=String.Empty,
c=0;String.isNullOrEmpty(a.get_liveId())||(b=a.get_liveId(),c=1);String.isNullOrEmpty(b)&&!String.isNullOrEmpty(a.$3)&&(b=a.$3,c=a.$5);b=MC.$create_IMAddressInfo(b,c,0);String.isNullOrEmpty(a.get_appId())||(b.applicationId=a.get_appId());String.isNullOrEmpty(a.$6)||(b.network=a.$6);return b};MSM.Mri.parseIMAddressInfoFromMriString=function(a){return MSM.Mri.getIMAddressInfo(new MSM.Mri(a))};MSM.Mri.create=function(a,b,c,d,e){var f=new MSM.Mri("");f.$3=a;f.$5=b;String.isNullOrEmpty(c)||(f.$2=c);String.isNullOrEmpty(d)||
(f.$1=d);String.isNullOrEmpty(e)||(f.$6=e);10===b&&(f.$4="IM");return f};MSM.Mri.createFromIMAddressInfo=function(a){var b=new MSM.Mri("");b.$3=a.address;b.$5=a.type;String.isNullOrEmpty(a.applicationId)||(b.$1=a.applicationId);String.isNullOrEmpty(a.network)||(b.$6=a.network);10===a.type&&(b.$4="IM");return b};MSM.Mri.tryParse=function(a){if(!String.isNullOrEmpty(a)){for(var b=new MSM.Mri(""),a=MSH.StringHelper.splitString(a,";"),a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var c=a.get_current();
if(c.startsWith("appid=")){c=MSH.StringHelper.substringToEnd(c,6);if(b.get_appId()!==String.Empty||String.isNullOrEmpty(c))return null;b.$1=c}else if(c.startsWith("epid=")){c=MSH.StringHelper.substringToEnd(c,5);if(b.$2!==String.Empty||String.isNullOrEmpty(c))return null;b.$2=c}else if(c.startsWith("path=")){c=MSH.StringHelper.substringToEnd(c,5);if(b.$4!==String.Empty||String.isNullOrEmpty(c))return null;b.$4=c}else if(c.startsWith("via=14:"))b.$6=MSH.StringHelper.substringToEnd(c,7),b.$6=MSH.StringHelper.toUpperCase(b.$6);
else if(c.startsWith(String.format("{0}:",8)))b.$5=8,b.$3=MSH.StringHelper.substringToEnd(c,2);else{c=MSH.StringHelper.splitString(c,":");if(!String.isNullOrEmpty(b.$3)||null==c||2!==c.length)return null;b.$5=MSH.ConvertHelper.parseInt(c[0]);b.$3=c[1];14===b.$5&&(b.$3=MSH.StringHelper.toUpperCase(b.$3))}}return b}return null};MSM.Mri.prototype={$5:0,get_cid:function(){return 11===this.$5?this.$3:String.Empty},get_appId:function(){return this.$1},get_liveId:function(){return 1===this.$5?this.$3:String.Empty},
get_networkId:function(){return this.$6},get_endpointId:function(){return this.$2},get_address:function(){return this.$3},get_addressType:function(){return this.$5},toString:function(){var a=new ss.StringBuilder;String.isNullOrEmpty(this.$3)||a.append(String.format("{0}:{1}",this.$5,this.$3));String.isNullOrEmpty(this.$2)||(a.append(";epid="),a.append(this.$2));String.isNullOrEmpty(this.$4)||(a.append(";path="),a.append(this.$4));13===this.$5&&(a.append(";via=14:"),a.append(MSH.StringHelper.toLowerCase(this.$6)));
return a.toString()},equals:function(a,b){return 0!==(b&1)&&(this.$5!==a.$5||this.$3!==a.$3||13===this.$5&&0!==MSH.StringHelper.compare(this.$6,a.$6,!0))||0!==(b&2)&&this.$2!==a.$2?!1:!0},toConversationId:function(){return MSH.ContactHelper.computeIMAddressKey(this.$3,this.$5,this.$6,this.$4)}};MSM.S$1=function(){};MSM.S$1.prototype={$0:0,$1:1};MSM.S$1.registerEnum("MSM.S$1",!1);MSM.IMsnpCommand=function(){};MSM.IMsnpCommand.registerInterface("MSM.IMsnpCommand");MSM.IMsnpEvents=function(){};MSM.IMsnpEvents.registerInterface("MSM.IMsnpEvents");
MSM.S$0=function(){};MSM.S$0.registerInterface("MSM.S$0");MSM.MsnpStatusCode=function(){};MSM.MsnpStatusCode.prototype={success:0,invalidParameter:201,invalidFederatedUser:203,unroutableUser:204,invalidUser:205,invalidUsername:208,invalidFriendlyName:209,contactListFull:210,alreadyThere:215,notAcceptingIMs:217,notAcceptingPages:220,invalidMsisdn:232,unknownMsisdn:233,unknownKeitaiDomain:234,invalidXmlData:241,unknownP2PApp:282,unknownUunApp:283,messageTooLong:285,smsJustOutOfFunds:290,addressBookError:403,
smsSubscriptionRequired:413,smsSubscriptionDisabled:414,smsOutOfFunds:415,smsDisabledMarket:416,smsDisabledGlobal:417,tryAgainLater:418,noMarketSpecified:419,internalServerError:500,upsDown:504,federatedPartnerError:508,pageModeMessageError:509,detailedError:511,smsAccountMuted:550,smsAccountDisabled:551,smsAccountMaxed:552,smsInternalServerError:580,smsCarrierInvalid:590,smsCarrierNoRoute:591,smsCarrierErrored:592,smsAddressMappingFull:593,smsIncorrectSourceCountry:594,smsMobileCacheFull:595,smsIncorrectFormat:596,
smsInvalidText:597,smsMessageTooLong:598,serverUnavailable:601,pagingUnavailable:606,sessionRestricted:711,sessionOverloaded:712,userTooActive:713,notExpected:715,userRestricted:718,sessionFederated:719,userFederated:726,roamingLogoff:733,tooManyEndpoints:734,rateLimitExceeded:800,authFailed:911,timedOut:921,childWithoutFullConsent:923,managedUserLimitedAccessWrongClient:926,managedUserAccessDenied:927,authError:928,domainReserved:931,invalidContactList:933,invalidSignature:935};MSM.MsnpStatusCode.registerEnum("MSM.MsnpStatusCode",
!1);MSM.ContentDocumentType=function(){};MSM.ContentDocumentType.prototype={none:0,circleDocument:1,userDocument:2,networkDocument:3};MSM.ContentDocumentType.registerEnum("MSM.ContentDocumentType",!1);MSM.NotificationType=function(){};MSM.NotificationType.prototype={partialNotify:0,fullNotify:1};MSM.NotificationType.registerEnum("MSM.NotificationType",!1);MSM.S$4=function(a,b,c,d){this.$9={};this.$A=[];this.$D=new MSM.S$7;this.$13=MSM.S$4.$0;this.$12=60;this.$18=String.Empty;this.$20=!0;this.$7=a;
this.$B=b;this.$16=MSH.StringHelper.toLowerCase(c);this.$15=d;this.$19=ss.Delegate.create(this,this.$2C);this.$9["X-Requested-Session-Content-Type"]="text/html";this.$9["Content-Type"]="text/html; charset=utf-8";this.$9["Proxy-Connection"]="Keep-Alive";this.$9.Pragma="No-Cache";this.$9["X-MSN-Auth"]="Use-Cookie";this.$10=new MSM.HttpMsnpTransportLogContext(this.$16,this.$B)};MSM.S$4.prototype={$7:null,$8:"NS",$B:0,$C:null,$E:0,$F:0,$10:null,$11:null,$12:0,$13:0,$14:!1,$15:!1,$16:null,$17:null,$18:null,
$19:null,$1A:null,$1B:0,$1C:!1,$1D:!1,$1E:!1,$1F:null,$20:!1,$21:0,$22:null,$23:!1,add_sessionChanged:function(a){this.$24=ss.Delegate.combine(this.$24,a)},remove_sessionChanged:function(a){this.$24=ss.Delegate.remove(this.$24,a)},$24:null,get_$25:function(){return 1E3*this.$12+1E4},get_$26:function(){return this.$20?15:this.$13},$27:function(a){a?(this.$13=Math.truncate(this.$13/1.5),this.$13<MSM.S$4.$0&&(this.$13=MSM.S$4.$0)):(this.$13=Math.truncate(1.5*this.$13),this.$13>MSM.S$4.$1&&(this.$13=
MSM.S$4.$1))},$28:function(a){if(!this.$1D)if(null==this.$11)this.$2A(a);else if(this.$1B===MSH.Timeout.infinite||this.$1B>a)this.$1B=a,this.$11.change(a,MSH.Timeout.infinite)},$29:function(){this.$2B()},$2A:function(a){this.$1B=a;this.$11=new MSH.Timer(this.$19,null,a,MSH.Timeout.infinite)},$2B:function(){null!=this.$11&&(this.$11.dispose(),this.$11=null)},$2C:function(){this.$29();!this.$14&&(!this.$1D&&!this.$1C)&&this.$37()},$2D:function(a){var b=new ss.StringBuilder;b.append(this.$15?"https://":
"http://");b.append(this.$16);b.append("/gateway/gateway.dll");b.append("?");0===this.$18.length?(b.append("Version=1&Protocol=mtp&Action=open&Server="),b.append(this.$8),b.append("&IP=none")):(a&&(b.append("Action=poll&"),this.$20&&this.$23&&(b.append("Lifespan="),b.append(this.$12),b.append("&"))),b.append("SessionID="),b.append(this.$18));return b.toString()},$2E:function(a,b){var c=b+"=",d=a.indexOf(c);return-1!==d?(d+=c.length,c=a.indexOf(";",d),-1!==c?MSH.StringHelper.substringSection(a,d,c):
MSH.StringHelper.substringToEnd(a,d)):null},$2F:function(a){var b={};b["X-MSNSERVER"]=a.getResponseHeader("X-MSNSERVER");b["X-MSN-Messenger"]=a.getResponseHeader("X-MSN-Messenger");b["X-MSN-Host"]=a.getResponseHeader("X-MSN-Host");this.$17=b["X-MSNSERVER"];var c=b["X-MSN-Messenger"],b=b["X-MSN-Host"],d=this.$2E(c,"SessionID"),c=this.$2E(c,"Session");MSH.BrowserHelper.get_hasRestrictiveProxyConnectionLimit()&&!String.isNullOrEmpty(a.getResponseHeader("Via"))&&(this.$20=!1);String.isNullOrEmpty(b)?
b=null:(b=MSH.StringHelper.toLowerCase(b),b!==this.$16?(this.$34("HttpMsnpTransport.ParseHeaders",String.format("Updating host from {0} to {1}",this.$16,b)),this.$16=b,this.$10.set_server(this.$16)):b=null);null!=d&&(this.$18=d);this.$30(d,b);return"close"===c?1:0},$30:function(a,b){null!=this.$24&&(null!=a||null!=b)&&this.$24.invoke(a,b)},$31:function(a){var b=200,c=null,d=null,e=[],f=!1;if(!this.$1D){var g=a.get_state();if(!(g<this.$F)){this.$27(a.get_hasContent());this.$1F=null;this.$14=!1;if(200===
a.get_status()){var h=this.$21=0,h=this.$2F(a);if(a.get_hasContent())try{this.$D.get_$1()?this.$D.$6(a.get_responseText()):this.$D.$5(a.get_responseData());for(var i=a.getResponseHeader("X-MSN-SkypeId");this.$D.$4();){var j=this.$D.get_$3();String.isNullOrEmpty(i)||j.set_skypeIdHeader(i);e.add(j);this.$1E=!0;this.$34("HttpMsnpTransport.OnResponse",String.format("Message received: {0} {1}",this.$D.get_$3().get_name(),MSH.StringHelper.join(this.$D.get_$3().get_allParameters())))}}catch(k){throw this.$35("HttpMsnpTransport.OnResponse:ParsingContent",
"Failed to parse response data: "+a.toString(),k),k;}1===h&&(this.$35("HttpMsnpTransport.OnResponse","Connection has been closed by server.",null),this.$1C=!0,this.$2B(),b=0,f=!0)}else{this.$35("HttpMsnpTransport.OnResponse",String.format("Http error detected: {0}",a.get_status()),null);this.$21++;if(5>this.$21&&this.$32(a.get_status())){0<this.$22.length&&(this.$14=!0);new MSH.Timer(ss.Delegate.create(this,function(){this.$34("HttpMsnpTransport.OnResponse",String.format("Resending request #{0}",
g));this.$1D||this.$38(this.$2D(this.$22.length===0),this.$22,g)}),null,1E3*this.$21,MSH.Timeout.infinite);return}this.$1C=!0;this.$2B();b=a.get_status()}this.$1C&&this.dispose();for(a=ss.IEnumerator.getEnumerator(e);a.moveNext();)e=a.get_current(),this.$7.onCommand(e);if(this.$1C)this.$7.onDisconnect(b,f);else this.$1E=!1,null!=this.$1A&&0===this.$A.length?(d=this.$1A,c=MC.$create_MessengerSessionInfo(this.$16,this.$18,this.$E,null),this.$1A=null,this.dispose()):this.$28(this.get_$26()),null!=d&&
d.invoke(c)}}},$32:function(a){if(408===a)return!0;a=Math.floor(a/100);return 5===a||0===a?!0:!1},$33:function(a,b){MSH.Logger.logTrace(this.$10,a,b)},$34:function(a,b){MSH.Logger.logInfo(this.$10,a,b)},$35:function(a,b,c){null==c?MSH.Logger.logWarning(this.$10,a,b):MSH.Logger.logException(1,this.$10,a,b,c)},$36:function(a,b){MSH.Logger.logError(this.$10,a,b)},$37:function(){this.$29();for(var a=new ss.StringBuilder;0<this.$A.length;){var b=this.$A.dequeue();a.append(b.toString());this.$E=b.get_trid()}a=
a.toString();b=0===a.length;b||(this.$14=!0,this.$13=MSM.S$4.$0,this.$34("HttpMsnpTransport.SendBatch",String.format("Messenge sent: {0}",a)));this.$38(this.$2D(b),a,++this.$F)},$38:function(a,b,c){this.$23=!0;this.$22=b;this.$1F=a=new MSCo.HttpRequest(1,a,b,this.$9,ss.Delegate.create(this,this.$31));a.set_state(c);a.setTimeout(this.get_$25());a.execute()},sendCommand:function(a){!this.$1C&&!this.$1D&&(this.$A.enqueue(a),!this.$14&&!this.$1E&&("OUT"===a.get_name()?this.$37():this.$28(1)))},resume:function(a){this.$18=
a;this.$1D||null==this.$1F&&!this.$1E&&this.$37()},dispose:function(){var a=null;this.$1D||(this.$1D=!0,this.$2B(),a=this.$1F,null!=a&&a.abort())},pauseSession:function(a){var b=!1;if(!this.$1D&&(this.$1E||0<this.$A.length?this.$1A=a:(b=!0,this.dispose()),b))b=MC.$create_MessengerSessionInfo(this.$16,this.$18,this.$E,null),a.invoke(b)},setRpsTicket:function(a){String.isNullOrEmpty(a)?delete this.$9.Cookie:this.$9.Cookie=0<a.indexOf(";")||a.startsWith("RPSTAuth=")?a:"RPSTAuth="+a},setConnectionTimeout:function(){},
get_serverName:function(){return this.$17},get_identity:function(){return this.$C},set_identity:function(a){this.$C=a;null!=a&&this.$10.set_liveId(a.liveId);return a}};MSM.S$5=function(a,b){this.$0=a;this.$1=b};MSM.S$5.prototype={$0:null,$1:null,get_name:function(){return this.$0[0].toString()},toString:function(){for(var a=new ss.StringBuilder,b=this.$0.length,c=0;c<b-1;c++)a.append(this.$0[c].toString()),a.append(" ");b=this.$0[b-1];c=MSH.StringHelper.getByteCount(b);0===c?(a.append(c.toString()),
a.append("\r\n")):(a.append((c+2).toString()),a.append("\r\n\r\n"));a.append(b);return a.toString()},get_trid:function(){return this.$0[1]},onComplete:function(a,b){null!=this.$1&&this.$1.invoke(a,b)}};MSM.MsnpConnection=function(a,b){this.$2=new MSM.S$2(30);this.$1=MSM.MsnpConnection.$7(this,a,b,ss.Delegate.create(this,this.onSessionChanged))};MSM.MsnpConnection.$7=function(a,b,c,d){a=new MSM.S$4(a,MSM.MsnpConnection.$8(),b,c);null!=d&&a.add_sessionChanged(d);return a};MSM.MsnpConnection.$8=function(){return MSM.MsnpConnection.$0++};
MSM.MsnpConnection.prototype={$1:null,$3:0,$4:!1,$5:null,$6:null,get_serverName:function(){return this.$1.get_serverName()},get_identity:function(){return this.$5},set_identity:function(a){this.$5=a;this.$6=new MC.LogContext(null==this.$5?null:this.$5.liveId);this.$1.set_identity(this.$5);null!=a.authenticationInfo&&1===a.authenticationInfo.authType&&this.$1.setRpsTicket(a.authenticationInfo.ticket);return a},get_logContext:function(){null==this.$6&&(this.$6=new MC.LogContext(null==this.$5?null:this.$5.liveId));
return this.$6},set_logContext:function(a){return this.$6=a},setConnectionTimeout:function(a){this.$1.setConnectionTimeout(a)},resume:function(a,b){this.$1.resume(a);this.$3=b},pauseSession:function(a){this.$1.pauseSession(a)},get_nextTrid:function(){this.$3++;this.onTridChanged(this.$3);return this.$3},sendCommand:function(a,b){if(this.$4)MSH.Logger.logInfo(this.get_logContext(),"MsnpConnection.SendCommand","Received command after being disposed; ignored.");else{var c=new MSM.S$5(a,b);this.$2.$2(c.get_trid(),
c);this.onSendCommand(c)}},onSendCommand:function(a){this.$1.sendCommand(a)},getPendingCommand:function(a){return this.$2.$3(a)},onCommand:function(a){this.$4?MSH.Logger.logInfo(this.get_logContext(),"MsnpConnection.OnCommand","Received command after being disposed; ignored."):(this.$2.$4(),this.onCommandReceived(a))},onDisconnect:function(a,b){this.$4?MSH.Logger.logInfo(this.get_logContext(),"MsnpConnection.OnDisconnect","Received disconnect after being disposed; ignored."):(this.onDisconnected(a,
b),this.$4=!0)},dispose:function(){this.$4=!0;this.$1.dispose()}};MSM.S$6=function(){};MSM.S$6.prototype={$0:!1,get_$1:function(){return this.$0},get_$2:function(){return!this.$0},$5:function(){throw Error("Invalid operation!");},$6:function(){throw Error("Invalid operation!");}};MSM.S$7=function(){MSM.S$7.initializeBase(this);this.$0=!0;this.$7=String.Empty};MSM.S$7.prototype={$7:null,$8:null,$6:function(a){this.$7+=a},$9:function(){this.$8=null;return!1},$A:function(a,b){this.$8=new MSM.MsnpServerCommand(a,
b);return!0},$4:function(){for(;0<this.$7.length;){var a=this.$7.indexOf("\r\n");if(0>=a)break;for(var b=this.$7.substring(0,3),c=[],d=MSH.StringHelper.substringSection(this.$7,3,a).split(" "),e=0;e<d.length;e++)0<d[e].length&&c.add(d[e]);a+=2;d=c.length-1;e=parseInt(c[d]);c.removeAt(d);for(var d=e,f=a;0<e;){if(this.$7.length<=f)return!1;var g=this.$7.charCodeAt(f);127>=g?e--:2047>=g?(e-=2,d--):55296<=g&&57343>=g?(e-=2,d--):(e-=3,d-=2);f++}0<d&&(e=MSH.StringHelper.substring(this.$7,a,d),e.startsWith("\r\n")?
(c.add(String.Empty),c.add(e.trim())):(f=MSH.StringHelper.substring(e,0,e.indexOf("\r\n\r\n")),c.add(f.trim()),e=MSH.StringHelper.substring(e,f.length,e.length-f.length).trim(),String.isNullOrEmpty(e)||c.add(e)));a+=d;this.$7=this.$7.substr(a);return this.$A(b,c)}return this.$9()},get_$3:function(){return this.$8}};MSM.MsnpServerCommand=function(a,b){this.$0=a;this.$1=b;this.$6()};MSM.MsnpServerCommand.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,get_name:function(){return this.$0},get_ackId:function(){return this.$3},
get_registrationToken:function(){return this.$4},get_parameters:function(){return this.$1},get_skypeIdHeader:function(){return this.$2},set_skypeIdHeader:function(a){return this.$2=a},get_allParameters:function(){var a=[];a.addRange(MSH.CollectionHelper.toArray(this.$1));null!=this.get_$5()&&a.add(this.get_$5());return MSH.CollectionHelper.toArray(a)},get_$5:function(){return null},$6:function(){var a=this.$1[2];this.$1.removeAt(2);if(!String.isNullOrEmpty(a)){a=MSH.StringHelper.splitString(a,"\r\n");
for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current(),b=MSH.StringHelper.splitString(b,": ");if(1<b.length)switch(b[0]){case "Ack-Id":this.$3=b[1];break;case "Set-Registration":this.$4=b[1]}}}}};MSM.ContentLayer=function(){};MSM.ContentLayer.deserialize=function(a){a=new MSM.MimeParser(a);return null!=a.getHeader("Messaging")?MSM.MessagingLayer.create(a):null!=a.getHeader("Publication")?MSM.PublicationLayer.create(a):null!=a.getHeader("Notification")?MSM.NotificationLayer.create(a):
null};MSM.ContentLayer.prototype={getDocumentType:function(a,b){if(String.isNullOrEmpty(a))return null;switch(b){case 1:return"application/circles+xml";case 2:return"application/user+xml";default:return null}}};MSM.MessagingLayer=function(a,b){MSM.MessagingLayer.initializeBase(this);this.$5=a;this.$6="7bit";this.$7=b||String.Empty};MSM.MessagingLayer.create=function(a){var b=a.getHeader("Messaging");return 0!==String.compare(b,"2.0")?null:new MSM.MessagingLayer(a.getHeaders(),a.getBody())};MSM.MessagingLayer.prototype=
{$5:null,$6:null,$7:null,get_appId:function(){return this.getHeader("Application-ID")},set_appId:function(a){this.$8("Application-ID",a);return a},get_contentEncoding:function(){return this.$6},set_contentEncoding:function(a){return this.$6=a},get_body:function(){return this.$7},get_headers:function(){return this.$5},getHeader:function(a){return this.$5[a]||String.Empty},$8:function(a,b){this.$5[a]=b},serialize:function(){var a=new MSM.MimeBuilder;a.setStringHeader("Messaging","2.0");"7bit"!==this.$6&&
a.setStringHeader("Content-Transfer-Encoding",this.$6);a.addHeaders(this.$5);a.setBody(this.$7);return a.toString()}};MSM.NotificationLayer=function(a,b,c,d,e){MSM.NotificationLayer.initializeBase(this);this.$8=a;this.$9=b;this.$7=c;this.$A=d;this.$B=e};MSM.NotificationLayer.create=function(a){var b=a.getHeader("Notification"),c=a.getHeader("Uri"),d=a.getHeader("Content-Type"),e=a.getIntHeader("NotifNum",-1),f=a.getBody(),a=a.getHeader("NotifType");if(0!==String.compare(b,"1.0")||-1===e)return null;
if(0===MSH.StringHelper.compare(d,"application/circles+xml",!0))b=1;else if(0===MSH.StringHelper.compare(d,"application/user+xml",!0))b=2;else if(0===MSH.StringHelper.compare(d,"application/network+xml",!0))b=3;else return null;switch(a){case "Full":d=1;break;case "Partial":d=0;break;default:return null}return new MSM.NotificationLayer(c,e,d,b,f)};MSM.NotificationLayer.prototype={$7:0,$8:null,$9:0,$A:0,$B:null,$C:null,$D:null,get_body:function(){return this.$B},get_documentType:function(){return this.$A},
get_uri:function(){return this.$8},get_notificationSegment:function(){return this.$9},get_notificationType:function(){return this.$7},get_users:function(){null==this.$C&&this.$F();return this.$C},get_pendingUsers:function(){null==this.$D&&this.$F();return this.$D},serialize:function(){var a=new MSM.MimeBuilder;a.setStringHeader("Notification","1.0");a.setStringHeader("Uri",this.$8);0!==this.$A&&a.setStringHeader("Content-Type",this.getDocumentType(this.$B,this.$A));a.setIntHeader("NotifNum",this.$9);
a.setStringHeader("NotifType",this.$E());a.setBody(this.$B);return a.toString()},$E:function(){switch(this.$7){case 0:return"Partial";case 1:return"Full";default:return null}},$F:function(){var a=[],b=[];if(String.isNullOrEmpty(this.$B)){var c=this.$8.indexOf("roster(IM)/user(");if(-1!==c){var d=this.$8.lastIndexOf(")"),c=MSH.StringHelper.substringSection(this.$8,c+16,d),c=new MSM.Mri(c);a.add(c)}}else if(c=ss.XmlDocumentParser.parse(this.$B),null!=c&&(c=MSH.XmlHelper.selectSingleNode(c.documentElement,
"roster"),null!=c&&(c=MSH.XmlHelper.selectNodes(c,"user"),null!=c)))for(d=0;d<c.length;d++){var e=c[d],f=new MSM.Mri(MSH.XmlHelper.selectSingleNode(e,"id").text),g=MSH.XmlHelper.selectSingleNode(e,"ep/id"),e=MSH.XmlHelper.selectSingleNode(e,"state");null!=g&&(g=MSH.XmlHelper.xmlNodeValue(g),String.isNullOrEmpty(g)||(f=MSM.Mri.create(f.get_address(),f.get_addressType(),g,null,null)));null!=e&&"Pending"===MSH.XmlHelper.xmlNodeValue(e)?b.add(f):a.add(f)}this.$C=MSH.CollectionHelper.toArray(a);this.$D=
MSH.CollectionHelper.toArray(b)}};MSM.PublicationLayer=function(a,b,c){MSM.PublicationLayer.initializeBase(this);this.$3=a;this.$4=c;this.$5=b};MSM.PublicationLayer.create=function(a){var b=a.getHeader("Publication"),c=a.getHeader("Uri"),d=a.getHeader("Content-Type")||null,a=a.getBody();return 0===String.compare(b,"1.0")&&!String.isNullOrEmpty(c)&&"application/circles+xml"!==d?new MSM.PublicationLayer(c,1,a):null};MSM.PublicationLayer.prototype={$3:null,$4:null,$5:0,get_body:function(){return this.$4},
serialize:function(){var a=new MSM.MimeBuilder;a.setStringHeader("Publication","1.0");a.setStringHeader("Uri",this.$3);0!==this.$5&&a.setStringHeader("Content-Type",this.getDocumentType(this.$4,this.$5));a.setBody(this.$4);return a.toString()}};MSM.ReliabilityLayer=function(){};MSM.ReliabilityLayer.deserialize=function(a){a=(new MSM.MimeParser(a)).getHeader("Reliability")||String.Empty;return 0!==String.compare(a,"1.0")?null:new MSM.ReliabilityLayer};MSM.ReliabilityLayer.prototype={serialize:function(){var a=
new MSM.MimeBuilder;a.set_disableContentLengthHeader(!0);a.setStringHeader("Reliability","1.0");return a.toString()}};MSM.RoutingLayer=function(a,b){this.to=a;this.$F=b};MSM.RoutingLayer.deserialize=function(a){var b=new MSM.MimeParser(a),a=b.getHeader("Routing")||String.Empty,c=b.getHeader("To"),d=b.getHeader("From");if(0!==String.compare(a,"1.0")||null==c||null==d)return null;var a=MSM.RoutingLayer.$12(c),d=MSM.RoutingLayer.$12(d),e=b.getHeader("Service-Channel")||String.Empty,b=2,c=1;if(!String.isNullOrEmpty(e)&&
(b=MSM.RoutingLayer.$14(e),c=MSM.RoutingLayer.$15(e),0===b))return null;a=new MSM.RoutingLayer(a,d);a.set_service(b);a.set_channel(c);return a};MSM.RoutingLayer.$11=function(a){return a?"0":String.Empty};MSM.RoutingLayer.$12=function(a){return a.startsWith("4:tel:")?MSM.Mri.create(MSH.StringHelper.substringToEnd(a,6),4,null,null,null):new MSM.Mri(a)};MSM.RoutingLayer.$13=function(a,b){var c=String.Empty,d=String.Empty,e=String.Empty;switch(a){case 1:c="PE";break;case 4:c="PD";break;case 2:c="IM"}switch(b){case 3:d=
"Mobile";break;case 2:d="Offline";break;case 1:d="Online";break;case 4:d="History"}String.isNullOrEmpty(c)||(e=c,String.isNullOrEmpty(d)||(e=e+"/"+d));return e};MSM.RoutingLayer.$14=function(a){switch(a.split("/")[0]){case "IM":return 2;case "PE":return 1;case "PD":return 4;default:return 0}};MSM.RoutingLayer.$15=function(a){a=a.split("/");if(1<a.length)switch(a[1]){case "Online":return 1;case "Offline":return 2;case "Mobile":return 3;case "History":return 4}return 0};MSM.RoutingLayer.prototype={$D:0,
$E:0,to:null,$F:null,$10:!1,get_to:function(){return this.to},get_from:function(){return this.$F},get_service:function(){return this.$D},set_service:function(a){return this.$D=a},get_channel:function(){return this.$E},set_channel:function(a){return this.$E=a},get_disableSelfFanOut:function(){return this.$10},set_disableSelfFanOut:function(a){return this.$10=a},mapInterLayerInfo:function(a){a=Type.safeCast(a,MSM.MessagingLayer);null!=a&&(a=a.get_appId(),String.isNullOrEmpty(a)||(this.$F=MSM.Mri.create(this.$F.get_address(),
this.$F.get_addressType(),this.$F.get_endpointId(),a,this.$F.get_networkId()),this.to=MSM.Mri.create(this.to.get_address(),this.to.get_addressType(),this.to.get_endpointId(),a,this.to.get_networkId())))},serialize:function(){var a=this.to.toString(),b=this.$F.toString(),c=MSM.RoutingLayer.$13(this.$D,this.$E),d=MSM.RoutingLayer.$11(this.$10);4===this.to.get_addressType()&&(a=this.to.get_addressType()+":tel:"+this.to.get_address());var e=new MSM.MimeBuilder;e.set_disableContentLengthHeader(!0);e.setStringHeader("Routing",
"1.0");e.setStringHeader("To",a);e.setStringHeader("From",b);e.setStringHeader("Service-Channel",c);e.setStringHeader("Options",d);return e.toString()}};MSM.PagedMessage=function(a,b,c,d){this.$0=a;this.$1=b;this.$2=c;this.$3=d};MSM.PagedMessage.createPagedMessage=function(a,b){var c=MSM.PagedMessage.$4(b),d=MSM.RoutingLayer.deserialize(c[0]);if(null==d)return null;var e=MSM.ReliabilityLayer.deserialize(c[1]);if(null==e)return null;var f=null;if(3===c.length&&!String.isNullOrEmpty(c[2])){f=MSM.ContentLayer.deserialize(c[2]);
if(null==f)return null;c=Type.safeCast(f,MSM.NotificationLayer);if(null!=c)if(4===a)a=2===c.get_documentType()?6:2;else if(3===a)switch(c.get_documentType()){case 3:a=7;break;case 2:a=5;break;case 1:a=1}}d.mapInterLayerInfo(f);return new MSM.PagedMessage(a,d,e,f)};MSM.PagedMessage.$4=function(a){var b=Array(3),c=0,d=0,e;for(e=0;2>e;e++){d=a.indexOf("\r\n\r\n",c);if(-1===d)break;b[e]=MSH.StringHelper.substringSection(a,c,d);c=d+=4}c<a.length&&(b[e]=MSH.StringHelper.substringToEnd(a,c));return b};MSM.PagedMessage.prototype=
{$0:0,$1:null,$2:null,$3:null,payLoad:function(){var a=new ss.StringBuilder;a.append(this.$1.serialize());a.append(this.$2.serialize());a.append(this.$3.serialize());return a.toString()},get_pageType:function(){return this.$0},get_routing:function(){return this.$1},get_reliability:function(){return this.$2},get_content:function(){return this.$3}};MSM.S$3=function(a,b,c){this.$0=a;this.$1=b;this.$2=c};MSM.S$3.prototype={$0:0,$1:null,$2:null,$3:function(a){return MSH.DateTimeHelper.isGreaterThanOrEqual(a,
this.$2)},get_$4:function(){return this.$0},get_$5:function(){return this.$1}};MSM.S$2=function(a){this.$0=[];this.$1=1E3*a};MSM.S$2.prototype={$1:0,$2:function(a,b){var c=MSH.DateTimeHelper.addMilliseconds(Date.get_now(),this.$1);this.$0.add(new MSM.S$3(a,b,c))},$3:function(a){if(0<a)for(var b=0;b<this.$0.length;b++){var c=this.$0[b];if(c.get_$4()===a)return a=c.get_$5(),this.$0.removeAt(b),a}return null},$4:function(){if(0!==this.$0.length)for(var a=Date.get_now(),b=0;b<this.$0.length;b++){var c=
this.$0[b];c.$3(a)&&(MSH.Logger.logTrace(MC.LogContext.get_global(),"TimeoutQueue.ExpireEntries",String.format("Timed out entry (key={0})",c.get_$4())),this.$0.removeAt(b--))}}};MSM.HttpMsnpTransportLogContext.registerClass("MSM.HttpMsnpTransportLogContext",null,MC.ILogContext);MSM.MimeParser.registerClass("MSM.MimeParser");MSM.MimeBuilder.registerClass("MSM.MimeBuilder");MSM.Mri.registerClass("MSM.Mri");MSM.S$4.registerClass("MSM.S$4",null,MSM.S$0);MSM.S$5.registerClass("MSM.S$5",null,MSM.IMsnpCommand);
MSM.MsnpConnection.registerClass("MSM.MsnpConnection",null,MSM.IMsnpEvents,ss.IDisposable);MSM.S$6.registerClass("MSM.S$6");MSM.S$7.registerClass("MSM.S$7",MSM.S$6);MSM.MsnpServerCommand.registerClass("MSM.MsnpServerCommand");MSM.ContentLayer.registerClass("MSM.ContentLayer");MSM.MessagingLayer.registerClass("MSM.MessagingLayer",MSM.ContentLayer);MSM.NotificationLayer.registerClass("MSM.NotificationLayer",MSM.ContentLayer);MSM.PublicationLayer.registerClass("MSM.PublicationLayer",MSM.ContentLayer);
MSM.ReliabilityLayer.registerClass("MSM.ReliabilityLayer");MSM.RoutingLayer.registerClass("MSM.RoutingLayer");MSM.PagedMessage.registerClass("MSM.PagedMessage");MSM.S$3.registerClass("MSM.S$3");MSM.S$2.registerClass("MSM.S$2");MSM.S$4.$0=5E3;MSM.S$4.$1=3E4;MSM.MsnpConnection.$0=0;MSM.ContentLayer.contentTypeHeader="Content-Type";MSM.ContentLayer.contentTypeCircleDocument="application/circles+xml";MSM.ContentLayer.contentTypeUserDocument="application/user+xml";MSM.ContentLayer.contentTypeNetworkDocument=
"application/network+xml";MSM.ContentLayer.contentTypeEndOfCallReport="qosreport/xml";Type.registerNamespace("MSP");MSP.P$0=function(){};MSP.P$0.prototype={$0:0,$1:1,$2:2,$3:3,$4:4};MSP.P$0.registerEnum("MSP.P$0",!1);MSP.FslOptions=function(){};MSP.FslOptions.prototype={none:0,IM:1,PE:2,CM:4};MSP.FslOptions.registerEnum("MSP.FslOptions",!0);MSP.FslListType=function(){};MSP.FslListType.prototype={reset:0,windowsLive:1,connect:1024};MSP.FslListType.registerEnum("MSP.FslListType",!0);MSP.P$A=function(a,
b,c){MSP.P$A.initializeBase(this);this.$E=a;this.$A=b;this.$B=c};MSP.P$A.prototype={$A:null,$B:null,$C:"<conversations><buddylist><buddy>{0}</buddy></buddylist><imcountperbuddy>{1}</imcountperbuddy></conversations>",$D:10,$E:null,$F:0,get_$10:function(){return this.$F},$3:function(){var a=String.format(this.$C,this.$E,this.$D);this.$A.$1_1D(a,ss.Delegate.create(this,this.$11))},$11:function(a){switch(a){case 0:this.$F=0;break;default:this.$F=1,MSH.Logger.logWarning(this.$A.get_logContext(),"GetConversationHistoryCommand.OnGetCompleted",
String.format("Received GET error code: {0}",a))}this.$6()},$7:function(){null!=this.$B&&this.$B.invoke(this.$F);MSP.P$A.callBaseMethod(this,"$7")}};MSP.P$16=function(a,b){MSP.P$16.initializeBase(this);this.$A=a;this.$B=b};MSP.P$16.prototype={$A:null,$B:null,$C:"<conversations><buddycount>{0}</buddycount><imcountperbuddy>{1}</imcountperbuddy ></conversations>",$D:10,$E:1,$F:0,get_$10:function(){return this.$F},$3:function(){var a=String.format(this.$C,this.$D,this.$E);this.$A.$1_1D(a,ss.Delegate.create(this,
this.$11))},$11:function(a){switch(a){case 0:this.$F=0;break;default:this.$F=1,MSH.Logger.logWarning(this.$A.get_logContext(),"GetRecentConversationsCommand.OnGetCompleted",String.format("Received GET error code: {0}",a))}this.$6()},$7:function(){null!=this.$B&&this.$B.invoke(this.$F);MSP.P$16.callBaseMethod(this,"$7")}};MSP.P$15=function(a,b,c){this.$11=String.Empty;MSP.P$15.initializeBase(this);this.$B=a;this.$A=b;this.$C=c};MSP.P$15.prototype={$A:null,$B:0,$C:null,$D:"<subscriptions><type>Messenger</type><type>Skype</type></subscriptions>",
$E:"<subscriptions><type>Messenger</type></subscriptions>",$F:"MSGR\\SUBSCRIPTIONS",$10:0,get_$12:function(){return this.$10},get_$13:function(){return this.$11},$3:function(){switch(this.$B){case 1:this.$A.$1_1E(this.$F,this.$E,ss.Delegate.create(this,this.$14));break;case 2:this.$A.$1_1E(this.$F,this.$D,ss.Delegate.create(this,this.$14));break;case 3:this.$A.$1_1B(this.$F,this.$E,ss.Delegate.create(this,this.$14));break;case 4:this.$A.$1_1B(this.$F,this.$D,ss.Delegate.create(this,this.$14))}},$14:function(a){switch(a){case 0:this.$10=
0;break;default:this.$11=String.format("UpdateBuddySubscriptions PUT response error: {0}",this.$5(a)),this.$10=1,MSH.Logger.logWarning(this.$A.get_logContext(),"UpdateBuddySubscriptionsCommand.OnUpdateCompleted",this.$11)}this.$6()},$7:function(){null!=this.$C&&this.$C.invoke(this.$10);MSP.P$15.callBaseMethod(this,"$7")}};MSP.P$18=function(a,b,c,d){MSP.P$18.initializeBase(this);null!=a&&(this.$A=MSH.StringHelper.toLowerCase(a));this.$B=b;this.$C=c;this.$D=d;this.$10=0};MSP.P$18.prototype={$A:null,
$B:0,$C:null,$D:null,$E:"<networks><network>{0}</network></networks>",$F:"MSGR\\NETWORKS",$10:0,$3:function(){switch(this.$B){case 1:this.$C.$1_1E(this.$F,String.format(this.$E,this.$A),ss.Delegate.create(this,this.$11));break;case 2:this.$C.$1_1B(this.$F,String.format(this.$E,this.$A),ss.Delegate.create(this,this.$11))}},$11:function(a){switch(a){case 0:this.$10=0;break;default:this.$10=1,MSH.Logger.logWarning(this.$C.get_logContext(),"UpdateNetworkSubscriptionsCommand.OnResponse",String.format("Received error code: {0} to network operation: {1}",
a,this.$B))}this.$6()},$7:function(){null!=this.$D&&this.$D.invoke(this.$10);MSP.P$18.callBaseMethod(this,"$7")}};MSP.P$17=function(a,b){this.$E=String.Empty;MSP.P$17.initializeBase(this);this.$A=a;this.$B=b};MSP.P$17.prototype={$A:null,$B:null,$C:"<partners><type>Hotmail</type><type>ABCH</type></partners>",$D:0,get_$F:function(){return this.$D},get_$10:function(){return this.$E},$3:function(){this.$A.$1_1E("MSGR\\PARTNERS",this.$C,ss.Delegate.create(this,this.$11))},$11:function(a){switch(a){case 0:this.$D=
0;break;default:this.$E=String.format("UpdatePartnerSubscriptions PUT response error: {0}",this.$5(a)),this.$D=1,MSH.Logger.logWarning(this.$A.get_logContext(),"UpdatePartnerSubscriptionsCommand.OnUpdateCompleted",this.$E)}this.$6()},$7:function(){null!=this.$B&&this.$B.invoke(this.$D);MSP.P$17.callBaseMethod(this,"$7")}};MSP.ConnectionService=function(a,b,c){this.$0=a;this.$1=b;this.$6=c;this.$5=new MSP.P$D(this)};MSP.ConnectionService.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:!1,
$7:null,get_logContext:function(){null==this.$7&&(this.$7=new MC.LogContext(this.$0.liveId));null!=this.$2&&this.$2.set_logContext(this.$7);return this.$7},set_logContext:function(a){this.$7=a;null!=this.$2&&this.$2.set_logContext(this.$7);return a},get_$8:function(){return this.$0},get_serverName:function(){return null!=this.$2?this.$2.get_serverName():String.Empty},get_isSignedIn:function(){return Type.canCast(this.$5,MSP.P$C)},authenticate:function(a,b,c,d,e){String.isNullOrEmpty(b)&&(b=null!=
this.$3?this.$3:MSCo.Configuration.get_presenceHostName());null==d&&(d=this.$4);this.$2=new MSP.P$B(this,b,this.$6);this.$2.set_logContext(this.get_logContext());this.$2.set_identity(this.$0);this.$5.$2(new MSP.P$12(this.$0,a,d,c,this.$2,e))},resumeSession:function(a){this.$2=new MSP.P$B(this,a.server,this.$6);this.$2.set_logContext(this.get_logContext());this.$2.set_identity(this.$0);this.$2.resume(a.sessionToken,a.transactionID);this.$C(new MSP.P$C(this));if(null!=a.pendingEvents)for(a=ss.IEnumerator.getEnumerator(a.pendingEvents);a.moveNext();){var b=
a.get_current(),c=b[1];switch(b[0]){case "OnDatagramReceived":this.onDatagramReceived(c[0]);break;case "OnABChangeNotificationReceived":this.onABChangeNotificationReceived(c[0]);break;case "OnNetworkStatusChanged":this.onNetworkStatusChanged(b[1],b[2])}}},updateNetworks:function(a,b,c){this.$5.$4(new MSP.P$18(a,b,this.$2,c))},updateBuddySubscriptions:function(a,b){this.$5.$3(new MSP.P$15(a,this.$2,b))},getSession:function(){return null!=this.$2?this.$2.get_$1_4():null},$9:function(a){this.$2=a;null!=
this.$0&&this.$2.set_identity(this.$0)},sendDatagram:function(a,b){this.$5.$B(new MSP.P$1E(a,this.$2,b))},signIn:function(a,b,c,d){var e=new MSP.P$17(this.$2,null),f=new MSP.P$15(2,this.$2,null),g=null;if(null!=c)for(var g=Array(c.length),h=0;h<c.length;h++)g[h]=new MSP.P$18(c[h],1,this.$2,null);a=new MSP.P$1F(this.$0,a,b,this.$2,null);d=new MSP.P$1A(this.$1,d);this.$5.$7(b,e,f,g,a,d)},signOut:function(a,b,c,d,e){this.$5.$8(new MSP.P$1D(this.$0,a,b,c,d,this.$2,this,this.$1,e))},deleteServiceData:function(a,
b){this.$5.$9(new MSP.P$13(this.$0,a,this.$2,b))},publishServiceData:function(a,b,c){this.$5.$A(new MSP.P$1F(this.$0,a,b,this.$2,c))},getRecentConversations:function(a){this.$5.$5(new MSP.P$16(this.$2,a))},getConversationHistory:function(a,b){this.$5.$6(new MSP.P$A(a,this.$2,b))},onAlertNotificationReceived:function(a){this.$1.onAlertNotificationReceived(a)},onNetworkStatusChanged:function(a,b){this.$1.onNetworkStatusChanged(a,b)},onSessionIdChanged:function(a){if(null!=this.$1&&this.$1!==this)this.$1.onSessionIdChanged(a)},
onTridChanged:function(a){if(null!=this.$1&&this.$1!==this)this.$1.onTridChanged(a)},onServiceDataChanged:function(a,b){this.$5.$C(new MSP.P$21(a,b,this.$1))},onServiceDataDeleted:function(a,b){this.$5.$D(new MSP.P$20(a,b,this.$1))},onSettingsChanged:function(a){this.$5.$12(new MSP.P$1B(a,this.$1))},onMailNotificationReceived:function(a){this.$5.$10(new MSP.P$19(a,this.$1))},onABChangeNotificationReceived:function(a){this.$5.$11(new MSP.P$1C(this.$1,a))},onDatagramReceived:function(a){this.$5.$13(new MSP.P$14(a,
this.$1))},onDisconnected:function(a,b,c){this.$A();this.$5.$F(new MSP.P$11(a,this.$1,b,c))},onTransferred:function(a,b,c){this.$A();this.$5.$E(new MSP.P$10(a,b,c,this,this.$1))},onSignInEventsEmpty:function(){this.$1.onSignInEventsEmpty()},$A:function(){null!=this.$2&&this.$2.dispose()},$B:function(a){a.$2()},$C:function(a){this.$5=a;Type.canCast(this.$5,MSP.P$D)&&this.$A()},setTransferServer:function(a,b){this.$3=a;this.$4=b},abort:function(){this.$A()},pauseSession:function(a){this.$2.pauseSession(a)}};
MSP.P$9=function(){};MSP.P$9.prototype={$0:!1,$1:!1,$2:function(){this.$0=!0;this.$3()},$4:function(){this.$1||(this.$1=!0,this.$7())},$5:function(a){return String.format("{0}-{1}",a,MSM.MsnpStatusCode.toString(a))},$6:function(){this.$1||(this.$1=!0,this.$7())},$7:function(){null!=this.$9&&this.$9.invoke(this,ss.EventArgs.Empty)},add_$8:function(a){this.$9=ss.Delegate.combine(this.$9,a)},remove_$8:function(a){this.$9=ss.Delegate.remove(this.$9,a)},$9:null};MSP.P$12=function(a,b,c,d,e,f){this.$11=
String.Empty;MSP.P$12.initializeBase(this);this.$A=a;this.$B=b;this.$12=d;this.$C=c;this.$D=e;this.$E=f};MSP.P$12.prototype={$A:null,$B:null,$C:null,$D:null,$E:null,$F:0,$10:0,$12:0,$3:function(){this.$13(0,null)},$7:function(){this.$E.invoke(this.$10,this.$11);MSP.P$12.callBaseMethod(this,"$7")},$13:function(a,b){0!==a&&(this.$F=1);switch(this.$F){case 0:this.$D.$1_18(this.$C,ss.Delegate.create(this,this.$14));switch(this.$A.authenticationInfo.authType){case 1:this.$F=2;this.$D.$1_19(this.$A.authenticationInfo.uicTicket,
ss.Delegate.create(this,this.$15));this.$D.$1_1A(MSCo.Configuration.get_clientVersion(),this.$A.endpointId,ss.Delegate.create(this,this.$16));break;default:this.$11="Unsupported authentication type.",this.$10=1,this.$6()}break;case 3:var c=ss.XmlDocumentParser.parse(b).documentElement;if(null!=c)c=MSH.XmlHelper.selectSingleNode(c,"nonce"),null!=c&&!String.isNullOrEmpty(c.text)?(c=(new MSP.P$8).$1(c.text,"PROD0090YUAUV{2B","YMM8C_H7KCQ2S_KL"),c=String.format("<challenge><appId>{0}</appId><response>{1}</response></challenge>",
"PROD0090YUAUV{2B",c),this.$D.$1_1E("MSGR\\CHALLENGE",c,ss.Delegate.create(this,this.$17))):(this.$10=0,this.$6());else{this.$11="Authenticate BND response invalid.";this.$10=1;this.$6();break}break;case 4:this.$10=0;this.$6();break;case 1:MSH.Logger.logWarning(this.$D.get_logContext(),"AuthenticateCommand.Process","Authentication failed"),this.$10=a,this.$6()}},$14:function(a,b){switch(a){case 0:this.$13(0,b);break;default:this.$11=String.format("Authenticate CNT response error: {0}",this.$5(a)),
this.$13(1,b),MSH.Logger.logWarning(this.$D.get_logContext(),"AuthenticateCommand.OnCnt",this.$11)}},$15:function(a,b){switch(a){case 0:this.$13(0,b);break;default:this.$11=String.format("Authenticate ATH response error: {0}",this.$5(a)),this.$13(911===a||928===a?4:1,b),MSH.Logger.logWarning(this.$D.get_logContext(),"AuthenticateCommand.OnAth",this.$11)}},$16:function(a,b){this.$F=3;switch(a){case 0:this.$13(0,b);break;default:this.$11=String.format("Authenticate BND response error: {0}",this.$5(a)),
this.$13(1,b),MSH.Logger.logWarning(this.$D.get_logContext(),"AuthenticateCommand.OnBnd",this.$11)}},$17:function(a,b){this.$F=4;switch(a){case 0:this.$13(0,b);break;default:this.$11=String.format("Authenticate PUT response error: {0}",this.$5(a)),this.$13(1,b),MSH.Logger.logWarning(this.$D.get_logContext(),"AuthenticateCommand.OnPut",this.$11)}}};MSP.P$11=function(a,b,c,d){MSP.P$11.initializeBase(this);this.$A=a;this.$B=b;this.$C=c;this.$D=d};MSP.P$11.prototype={$A:0,$B:null,$C:0,$D:0,$3:function(){this.$B.onDisconnected(this.$A,
this.$C,this.$D)}};MSP.P$14=function(a,b){MSP.P$14.initializeBase(this);this.$A=a;this.$B=b};MSP.P$14.prototype={$A:null,$B:null,$3:function(){this.$7()},$7:function(){this.$B.onDatagramReceived(this.$A)}};MSP.P$13=function(a,b,c,d){MSP.P$13.initializeBase(this);this.$A=a;this.$B=b;this.$C=c;this.$D=d};MSP.P$13.prototype={$A:null,$B:null,$C:null,$D:null,$E:0,$3:function(){for(var a=0,b=ss.IEnumerator.getEnumerator(this.$B.toServiceDataArray());b.moveNext();){var c=b.get_current();0<c.getAllEndpoints().length&&
(a|=c.get_service())}0!==a?(b=MC.$create_IMAddressInfo(this.$A.liveId,1,0),c=new MSP.ServiceDataWriter(this.$B.toArray(),null,a,1),a=MSM.Mri.createFromIMAddressInfo(b),b=MSM.Mri.create(b.address,b.type,this.$A.endpointId,b.applicationId,b.network),c=c.getPayload(),null==c?this.$6():(a=new MSM.PagedMessage(6,new MSM.RoutingLayer(a,b),new MSM.ReliabilityLayer,new MSM.PublicationLayer("/user",2,c)),this.$C.$1_1B("MSGR\\PRESENCE",a.payLoad(),ss.Delegate.create(this,this.$F)))):this.$6()},$7:function(){null!=
this.$D&&this.$D.invoke(this.$E);MSP.P$13.callBaseMethod(this,"$7")},$F:function(a){0!==a?(this.$E=1,this.$4()):this.$6()}};MSP.P$19=function(a,b){MSP.P$19.initializeBase(this);this.$A=a;this.$B=b};MSP.P$19.prototype={$A:null,$B:null,$3:function(){this.$B.onMailNotificationReceived(this.$A)}};MSP.P$1F=function(a,b,c,d,e){this.$11=String.Empty;MSP.P$1F.initializeBase(this);this.$A=MC.$create_IMAddressInfo(a.liveId,1,0);this.$B=a.endpointId;this.$C=b;this.$D=MSP.P$4.$0(c);this.$E=d;this.$F=e};MSP.P$1F.prototype=
{$A:null,$B:null,$C:null,$D:0,$E:null,$F:null,$10:0,get_$12:function(){return this.$A},get_$13:function(){return this.$C},$3:function(){if(0===this.$D)this.$6();else{var a=(new MSP.ServiceDataWriter(this.$C.toArray(),this.$B,this.$D,0)).getPayload();if(null==a)this.$6();else{var b=MSM.Mri.createFromIMAddressInfo(this.$A),c=MSM.Mri.create(this.$A.address,this.$A.type,this.$B,this.$A.applicationId,this.$A.network),a=new MSM.PagedMessage(5,new MSM.RoutingLayer(b,c),new MSM.ReliabilityLayer,new MSM.PublicationLayer("/user",
2,a));this.$E.$1_1E("MSGR\\PRESENCE",a.payLoad(),ss.Delegate.create(this,this.$16))}}},$7:function(){null!=this.$F&&this.$F.invoke(this.$10);MSP.P$1F.callBaseMethod(this,"$7")},get_$14:function(){return this.$10},get_$15:function(){return this.$11},$16:function(a){0!==a?(this.$11=String.format("PublishService PUT Response error: {0}",this.$5(a)),this.$10=1,this.$4()):this.$6()}};MSP.P$1E=function(a,b,c){MSP.P$1E.initializeBase(this);this.$A=a;this.$B=b;this.$C=c};MSP.P$1E.prototype={$A:null,$B:null,
$C:null,$D:0,$E:null,$3:function(){MSH.Logger.logTrace(this.$B.get_logContext(),"SendPageCommand.OnExecuted","Executing CsSendPageCommand");switch(this.$A.datagramType){case 0:this.$B.$1_1F(this.$A.payload,ss.Delegate.create(this,this.$F));break;case 8:this.$B.$1_1D(this.$A.payload,ss.Delegate.create(this,this.$F));break;case 1:this.$B.$1_1E("",this.$A.payload,ss.Delegate.create(this,this.$F));break;case 2:this.$B.$1_1B("",this.$A.payload,ss.Delegate.create(this,this.$F))}},$7:function(){this.$C.invoke(this.$D,
this.$E)},$F:function(a,b){if(0===a)this.$D=0,1===this.$A.datagramType&&null!=b&&(this.$E=MC.$create_DatagramInfo(this.$A.datagramType,b)),this.$6();else{switch(a){case 217:this.$D=5;break;case 285:case 598:this.$D=2;break;case 596:case 590:case 591:this.$D=3;break;case 550:case 551:case 595:this.$D=4;break;default:this.$D=1}this.$E=this.$A;this.$4()}}};MSP.P$21=function(a,b,c){MSP.P$21.initializeBase(this);this.$A=a;this.$B=b;this.$C=c};MSP.P$21.prototype={$A:null,$B:null,$C:null,get_$D:function(){return this.$A},
get_$E:function(){return this.$B},$3:function(){this.$C.onServiceDataChanged(this.$A,this.$B)}};MSP.P$20=function(a,b,c){MSP.P$20.initializeBase(this);this.$A=a;this.$B=b;this.$C=c};MSP.P$20.prototype={$A:null,$B:null,$C:null,get_$D:function(){return this.$A},get_$E:function(){return this.$B},$3:function(){this.$C.onServiceDataDeleted(this.$A,this.$B)}};MSP.P$1B=function(a,b){MSP.P$1B.initializeBase(this);this.$A=a;this.$B=b};MSP.P$1B.prototype={$A:null,$B:null,$3:function(){this.$B.onSettingsChanged(this.$A)}};
MSP.P$1A=function(a,b){this.$D=String.Empty;MSP.P$1A.initializeBase(this);this.$A=a;this.$B=b};MSP.P$1A.prototype={$A:null,$B:null,$C:0,$E:null,$F:null,$10:function(a,b,c,d){this.$C=a;this.$D=b;this.$E=c;this.$F=d},$3:function(){this.$B.invoke(this.$C,this.$D);if(0===this.$C)this.$A.onServiceDataChanged(this.$E,this.$F)}};MSP.P$1D=function(a,b,c,d,e,f,g,h,i){MSP.P$1D.initializeBase(this);this.$A=a;this.$B=b;this.$C=c;this.$E=e;this.$F=f;this.$10=g;this.$11=h;this.$12=i;null!=d&&(this.$D=[],this.$D.addRange(d))};
MSP.P$1D.prototype={$A:null,$B:null,$C:0,$D:null,$E:!1,$F:null,$10:null,$11:null,$12:null,$13:null,$14:null,$15:0,$3:function(){var a=this.$17();this.get_$1B()?this.$F.$1_1C(ss.Delegate.create(this,this.$16)):a||this.$6()},$16:function(a){0!==a&&(this.$15=1);this.$6()},$17:function(){if(this.$19(8)||this.$19(2))if(this.$1A(),null!=this.$13)return this.$14=new MSP.P$13(this.$A,this.$13,this.$F,ss.Delegate.create(this,this.$1C)),this.$14.$2(),!0;return!1},$18:function(a){return a===this.$A.endpointId?
this.get_$1B():this.$19(2)||this.$19(8)&&this.$D.contains(a)?!0:!1},$19:function(a){return(this.$C&a)===a},$1A:function(){var a=this.$B.imServiceData;if(null!=a){this.$13=new MC.ServiceDataSet([MC.$create_ServiceDataInfo(2,{},{})]);for(var b=!1,c=ss.IEnumerator.getEnumerator(a.getAllEndpoints());c.moveNext();){var d=c.get_current();this.$18(d.get_endpointId())&&(a.deleteEndpoint(d.get_endpointId()),d.get_endpointId()!==this.$A.endpointId&&(this.$13.addEndpoint(MC.ServiceEndpointData.createEmpty(2,
d.get_endpointId())),b=!0))}b||(this.$13=null)}},get_$1B:function(){return this.$19(1)},$7:function(){if(null!=this.$12)this.$12.invoke(this.$15);else if(this.$E)this.$11.onDisconnected(2,1,-1);MSP.P$1D.callBaseMethod(this,"$7")},$1C:function(a){this.get_$1B()||(this.$15=a,0!==a?this.$4():this.$6())}};MSP.P$1C=function(a,b){MSP.P$1C.initializeBase(this);this.$B=a;this.$A=b};MSP.P$1C.prototype={$A:null,$B:null,$3:function(){this.$B.onABChangeNotificationReceived(this.$A)}};MSP.P$10=function(a,b,c,
d,e){MSP.P$10.initializeBase(this);this.$A=a;this.$B=b;this.$C=c;this.$D=d;this.$E=e};MSP.P$10.prototype={$A:null,$B:null,$C:!1,$D:null,$E:null,$3:function(){this.$D.setTransferServer(this.$A,this.$B);this.$E.onTransferred(this.$A,this.$B,this.$C)}};MSP.P$2=function(){};MSP.P$2.$0=function(a){a=MSH.StringHelper.splitChar(MSH.StringHelper.toLowerCase(a),";");2!==a.length&&(a=[a[0],""]);return a};MSP.P$2.$1=function(a){return(new MSP.P$1).$1C(a)};MSP.P$2.$2=function(a,b,c){return a.replace(RegExp(b),
c)};MSP.P$2.$3=function(a,b){for(var c=a.toString(2),d=b.toString(2),e=new ss.StringBuilder,f=new ss.StringBuilder,g=Math.abs(c.length-d.length),h=0;h<g;h++)f.append("0");c.length<d.length?(f.append(c),c=f.toString()):d.length<c.length&&(f.append(d),d=f.toString());for(f=0;f<c.length;f++)e.append(MSH.StringHelper.charAt(c,f)===MSH.StringHelper.charAt(d,f)?"0":"1");return parseInt(e.toString(),2)};MSP.P$2.$4=function(a){return MSH.ConvertHelper.parseInt(a)};MSP.P$2.$5=function(a){a=MSH.StringHelper.toLowerCase(a);
if(a.startsWith("http://")){var a=MSH.StringHelper.substringToEnd(a,7),b=a.indexOf("/");0<=b&&(a=MSH.StringHelper.substring(a,0,b))}return a};MSP.P$2.$7=function(a){return 0>a.indexOf("&")?a:a.replace(MSP.P$2.$8,function(a){return"&"===a?"&amp;":a})};MSP.P$B=function(a,b,c){MSP.P$B.initializeBase(this,[b,c]);this.$1_0=a;this.$1_3=0;this.$1_1=MC.$create_MessengerSessionInfo(b,null,0,[])};MSP.P$B.prototype={$1_0:null,$1_1:null,$1_2:!1,$1_3:0,get_$1_4:function(){return this.$1_1},$1_5:function(a){if(3!==
a.length)this.$1_12("CNT",a);else{var b=this.getPendingCommand(MSP.P$2.$4(a[0]));if(null!=b)b.onComplete(0,a[2])}},$1_6:function(a,b){if(2!==a.length&&3!==a.length)this.$1_12("ATH",a);else{String.isNullOrEmpty(b)||(this.get_identity().skypeId=b);var c=this.getPendingCommand(MSP.P$2.$4(a[0]));if(null!=c)c.onComplete(0,null)}},$1_7:function(a){if(3!==a.length)this.$1_12("BND",a);else{var b=this.getPendingCommand(MSP.P$2.$4(a[0]));if(null!=b)b.onComplete(0,a[2])}},$1_8:function(a){if(2!==a.length&&3!==
a.length)this.$1_12("DEL",a);else{var b=this.$1_10("DEL",a);if(null!=b)b.onComplete(0,2<a.length?a[2]:null)}},$1_9:function(a){var b=new MSM.MimeParser(a);switch(MSH.StringHelper.splitChar(b.getHeader("Content-Type"),";")[0]){case "text/x-msmsgsprofile":a=MC.$create_SettingsInfo();a.hasInbox="1"===b.getHeader("EmailEnabled");a.hasInboxChanged=!0;this.$1_0.onSettingsChanged(a);break;case "text/x-msmsgsinitialmdatanotification":case "text/x-msmsgsactivemailnotification":case "text/x-msmsgsemailnotification":case "text/x-msmsgsoimnotification":if(b=
new MSP.P$3(b),b.$3())for(a=0;a<b.get_$2().length;a++)this.$1_0.onMailNotificationReceived(b.get_$2()[a]);else MSH.Logger.logWarning(this.get_logContext(),"CsConnection.OnServerMsg","Failed to parse mail notification: "+a)}},$1_A:function(a){if(3!==a.length)this.$1_12("NFY",a);else{var b;switch(a[1]){case "MSGR\\NETWORKS":case "MSGR\\PUT":b=3;break;case "MSGR\\DEL":b=4;break;case "MSGR\\ABCH":this.$1_13(a[2]);return;case "MSGR\\HOTMAIL":this.$1_9(a[2]);return;default:return}var c=MSM.PagedMessage.createPagedMessage(b,
a[2]);if(null!=c)switch(c.get_pageType()){case 7:c=new MSP.P$7(c);if(c.get_$3())this.$1_0.onNetworkStatusChanged(c.get_$4(),c.get_$5());break;case 6:case 5:a=MSM.Mri.getIMAddressInfo(c.get_routing().get_from());b=new MSP.P$6(a,this.get_identity().liveId,c.get_content().get_body());if(!b.$7())break;b=new MC.ServiceDataSet(b.get_$6());if(5===c.get_pageType())this.$1_0.onServiceDataChanged(a,b);else this.$1_0.onServiceDataDeleted(a,b);break;default:this.$1_0.onDatagramReceived(MC.$create_DatagramInfo(b,
a[1]))}}},$1_B:function(a){if(3!==a.length)this.$1_12("OUT",a),this.$1_0.onDisconnected(1,3,-1);else{this.$1_2=!0;var b=String.Empty,c=ss.XmlDocumentParser.parse(a[2]).documentElement;null!=c&&(c=MSH.XmlHelper.selectSingleNode(c,"reason"),null!=c&&!String.isNullOrEmpty(c.text)&&(b=c.text));switch(b){case "OTH":case "RemoteLogout":this.$1_0.onDisconnected(2,1,-1);break;case "TME":this.$1_0.onDisconnected(3,4,-1);break;case "RCT":if(2!==a.length){this.$1_12("OUT",a);break}a=MSH.ConvertHelper.parseInt(a[1]);
this.$1_0.onDisconnected(0,5,a);break;case "SessionTimeout":this.$1_0.onDisconnected(5,7,-1);break;case "BadUIC":this.$1_0.onDisconnected(6,8,-1);break;default:this.$1_0.onDisconnected(1,3,-1)}}},$1_C:function(a){if(2!==a.length&&3!==a.length)this.$1_12("PUT",a);else{var b=this.$1_10("PUT",a);if(null!=b)b.onComplete(0,2<a.length?a[2]:null)}},$1_D:function(a){if(2!==a.length&&3!==a.length)this.$1_12("GET",a);else{var b=this.$1_10("GET",a);if(null!=b)b.onComplete(0,2<a.length?a[2]:null)}},$1_E:function(a){if("0"!==
a[0]){var b=this.$1_10("SDG",a);if(null!=b)b.onComplete(500,a[2])}else if(3!==a.length)this.$1_12("SDG",a);else this.$1_0.onDatagramReceived(MC.$create_DatagramInfo(0,a[2]))},$1_F:function(a){if(3!==a.length)this.$1_12("XFR",a);else{var b=ss.XmlDocumentParser.parse(a[2]).documentElement,c=String.Empty,a=String.Empty;if(null!=b){var d=MSH.XmlHelper.selectSingleNode(b,"target");null!=d&&!String.isNullOrEmpty(d.text)&&(c=d.text);b=MSH.XmlHelper.selectSingleNode(b,"state");null!=b&&!String.isNullOrEmpty(b.text)&&
(a=b.text)}String.isNullOrEmpty(c)||(this.$1_2=!0,c=MSH.StringHelper.splitChar(c,":"),MSH.Logger.logInfo(this.get_logContext(),"CsConnection.OnServerXfr",String.concat("XFRed: ",c[0])),this.$1_0.onTransferred(c[0],a,!1))}},$1_10:function(a,b){if(1>b.length)return this.$1_12(a,b),null;var c=MSP.P$2.$4(b[0]);return this.getPendingCommand(c)},$1_11:function(a,b,c){b=this.getPendingCommand(b);MSH.Logger.logWarning(this.get_logContext(),"CsConnection.OnServerError","Error: "+a+" "+c);if(null!=b){if(511===
a&&(a=500,!String.isNullOrEmpty(c))){var d=c.indexOf("<msnp>");if(0<=d){var d=d+6,e=c.indexOf("</msnp>",d);0<=e&&(a=MSH.StringHelper.substring(c,d,e-d),a=MSH.ConvertHelper.parseInt(a))}}b.onComplete(a,c)}},$1_12:function(a,b){MSH.Logger.logError(this.get_logContext(),"CsConnection.OnUnexpectedArgument",String.format("{0}: Unexpected number of arguments: {1}",a,b.length))},$1_13:function(a){var a=MSP.P$2.$7(a),a=ss.XmlDocumentParser.parse(a).documentElement,b;if(null==a)MSH.Logger.logWarning(this.get_logContext(),
"CsConnection.OnAlert","OnAlert: Received invalid notification XML. Ignoring.");else if(MSH.XmlHelper.isElement(a,"NOTIFICATION"))switch(b=this.$1_15(a),b){case 2:this.$1_16(a);break;case 6:this.$1_14(a,b)}},$1_14:function(a,b){var c=MSH.XmlHelper.selectSingleNode(a,"FROM"),d=MSH.XmlHelper.selectSingleNode(a,"TO"),e=MSH.XmlHelper.selectSingleNode(a,"MSG/SUBSCR"),f=MSH.XmlHelper.selectSingleNode(a,"MSG/ACTION"),g=MSH.XmlHelper.selectSingleNode(a,"MSG/BODY/TEXT"),h=MSH.XmlHelper.selectSingleNode(a,
"MSG/BODY");if(!(null==d||null==e||null==f||null==h||null==g)){var i=MSH.XmlHelper.getAttribute(a,"siteurl"),j=null!=c?MSH.XmlHelper.getAttribute(c,"name"):String.Empty,c=null!=c?MSH.XmlHelper.getAttribute(c,"displayName"):String.Empty,d=MSH.XmlHelper.getAttribute(d,"name"),e=this.$1_17(MSH.XmlHelper.getAttribute(e,"url"),i),f=this.$1_17(MSH.XmlHelper.getAttribute(f,"url"),i),k=this.$1_17(MSH.XmlHelper.getAttribute(h,"icon"),i),h=MSH.XmlHelper.getAttribute(h,"lang"),g=MC.$create_AlertInfo(j,c,d,i,
e,f,k,h,g.text,Date.get_now(),b,!1);this.$1_0.onAlertNotificationReceived(g)}},$1_15:function(a){var b=MSH.XmlHelper.getAttribute(a,"siteid")||String.Empty,a=MSH.XmlHelper.getAttribute(a,"siteurl")||String.Empty;return a.endsWith("contacts.msn.com")||a.endsWith("contacts.msn-int.com")?2:a.endsWith("sup.live.com")||a.endsWith("sup.live-int.com")?3:a.endsWith("storage.live.com")||a.endsWith("storage.live-int.com")?4:"111100110"===b&&"isp.messenger.msn.com"===MSP.P$2.$5(a)?5:"1236"===b?1:6},$1_16:function(a){a=
MSH.XmlHelper.selectSingleNode(a,"MSG/BODY");if(null!=a)this.$1_0.onABChangeNotificationReceived(a.text)},$1_17:function(a,b){return String.isNullOrEmpty(a)||a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ftp://")?a:a="/"===MSH.StringHelper.charAt(a,0)?b+a:b+"/"+a},$1_18:function(a,b){var c=String.Empty,c=String.isNullOrEmpty(a)?String.format("<connect><ver>1</ver><agent><os>{0}</os><osVer>5.2</osVer><proc>x86</proc><lcid>en-US</lcid></agent></connect>","winnt"):String.format("<connect><ver>1</ver><agent><os>{0}</os><osVer>5.2</osVer><proc>x86</proc><lcid>en-US</lcid></agent><xfr><state>{1}</state></xfr></connect>",
"winnt",a);this.sendCommand(["CNT",this.get_nextTrid(),"CON",c],b)},$1_19:function(a,b){var c=String.Empty,c=String.isNullOrEmpty(a)?"<user><web-compact-ticket /></user>":String.format("<user><uic>{0}</uic><web-compact-ticket /></user>",a);this.sendCommand(["ATH",this.get_nextTrid(),"CON\\USER",c],b)},$1_1A:function(a,b,c){a=String.format("<msgr><ver>1</ver><client><name>msgrlib</name><ver>{0}</ver></client><epid>{1}</epid></msgr>",a,b);this.sendCommand(["BND",this.get_nextTrid(),"CON\\MSGR",a],c)},
$1_1B:function(a,b,c){this.sendCommand(["DEL",this.get_nextTrid(),a,b],c)},$1_1C:function(a){this.$1_3=this.get_nextTrid();this.sendCommand(["OUT",this.$1_3,"CON",null],a)},$1_1D:function(a,b){this.sendCommand(["GET",this.get_nextTrid(),"MSGR\\CONVERSATIONS",a],b)},$1_1E:function(a,b,c){this.sendCommand(["PUT",this.get_nextTrid(),a,b],c)},$1_1F:function(a,b){this.sendCommand(["SDG",this.get_nextTrid(),"MSGR",a],b)},onDisconnected:function(a,b){if(!this.$1_2){this.$1_2=!0;if(0!==this.$1_3){var c=this.getPendingCommand(this.$1_3);
if(null!=c){c.onComplete(0,null);return}}MSH.Logger.logWarning(this.get_logContext(),"CsConnection.OnDisconnected",String.format("Disconnected due to error code {0}",a));var d,e=-1;switch(a){case 0:b?(c=0,d=3,e=0):(c=0,d=2);break;case 400:c=1;d=2;e=0;break;default:c=1,d=2}this.$1_0.onDisconnected(c,d,e)}},onCommandReceived:function(a){var b=a.get_allParameters();switch(a.get_name()){case "CNT":this.$1_5(b);break;case "ATH":this.$1_6(b,a.get_skypeIdHeader());break;case "BND":this.$1_7(b);break;case "DEL":this.$1_8(b);
break;case "NFY":this.$1_A(b);break;case "OUT":this.$1_B(b);break;case "PUT":this.$1_C(b);break;case "GET":this.$1_D(b);break;case "SDG":this.$1_E(b);break;case "XFR":this.$1_F(b);break;case "SBS":break;default:var c=MSH.ConvertHelper.tryParseInt(a.get_name());if(0>c){MSH.Logger.logInfo(this.get_logContext(),"CsConnection.OnCommandReceived","Received unknown command: "+a+" "+MSH.StringHelper.join(b));break}a=MSP.P$2.$4(b[0]);this.$1_11(c,a,1<b.length?b[1]:null)}},onSessionChanged:function(a,b){null!=
b&&(this.$1_1.server=b);if(null!=a&&(this.$1_1.sessionToken=a,null!=this.$1_0))this.$1_0.onSessionIdChanged(a)},onTridChanged:function(a){this.$1_1.transactionID=a;if(null!=this.$1_0)this.$1_0.onTridChanged(a)}};MSP.P$4=function(){};MSP.P$4.$0=function(a){switch(a){case 3:case 0:return 31}return 0};MSP.P$4.$1=function(a){switch(a){case 2:return 71;case 3:case 0:return 71}return 70};MSP.P$5=function(a){this.$0=a};MSP.P$5.prototype={$0:null,get_$1:function(){return this.$0},$2:function(a){this.$14(a)},
$3:function(a){this.$14(a)},$4:function(a){this.$14(a)},$5:function(a){this.$14(a)},$6:function(a){this.$14(a)},$7:function(a,b,c,d,e,f){this.$14(b);this.$14(c);if(null!=d)for(a=ss.IEnumerator.getEnumerator(d);a.moveNext();)b=a.get_current(),this.$14(b);this.$14(e);this.$14(f)},$8:function(a){this.$14(a)},$9:function(a){this.$14(a)},$A:function(a){this.$14(a)},$B:function(a){this.$14(a)},$C:function(a){this.$14(a)},$D:function(a){this.$14(a)},$E:function(a){this.$14(a)},$F:function(a){this.$14(a)},
$10:function(a){this.$14(a)},$11:function(a){this.$14(a)},$12:function(a){this.$14(a)},$13:function(a){this.$14(a)},$14:function(){}};MSP.P$C=function(a){MSP.P$C.initializeBase(this,[a]);a.setTransferServer(null,null)};MSP.P$C.prototype={$8:function(a){a.get_$1B()&&this.get_$1().$C(new MSP.P$E(this.get_$1(),a));this.get_$1().$B(a)},$9:function(a){this.get_$1().$B(a)},$C:function(a){this.get_$1().$B(a)},$D:function(a){this.get_$1().$B(a)},$10:function(a){this.get_$1().$B(a)},$13:function(a){this.get_$1().$B(a)},
$12:function(a){this.get_$1().$B(a)},$11:function(a){this.get_$1().$B(a)},$A:function(a){this.get_$1().$B(a)},$B:function(a){this.get_$1().$B(a)},$3:function(a){this.get_$1().$B(a)},$4:function(a){this.get_$1().$B(a)},$5:function(a){this.get_$1().$B(a)},$6:function(a){this.get_$1().$B(a)},$E:function(a){this.get_$1().$C(new MSP.P$D(this.get_$1()));this.get_$1().$B(a)},$F:function(a){this.get_$1().$C(new MSP.P$D(this.get_$1()));this.get_$1().$B(a)}};MSP.P$F=function(a){this.$21=[];MSP.P$F.initializeBase(this,
[a])};MSP.P$F.prototype={$15:null,$16:null,$17:null,$18:null,$19:!1,$1A:!1,$1B:!1,$1C:!1,$1D:!1,$1E:!1,$1F:!1,$20:!1,$22:!1,$23:null,$24:null,$25:0,$7:function(a,b,c,d,e,f){this.$18=b;this.$17=c;this.$16=d;this.$15=e;this.$23=f;this.$24=this.$15.get_$13();this.$25=a;this.$26();this.$27();1!==a&&(this.$2B(),this.$29(),this.$2C())},$8:function(a){a.get_$1B()&&this.get_$1().$C(new MSP.P$E(this.get_$1(),a));this.get_$1().$B(a)},$C:function(a){null==this.$24?this.$21.enqueue(a):MSH.ContactHelper.areIMAddressesEqual(a.get_$D(),
this.$15.get_$12())?(this.$24.updateAll(a.get_$E().toArray()),this.$1A=!0,this.$2C()):this.$21.enqueue(a)},$D:function(a){null==this.$24?this.$21.enqueue(a):MSH.ContactHelper.areIMAddressesEqual(a.get_$D(),this.$15.get_$12())?this.$24.deleteAll(a.get_$E().toArray()):this.$21.enqueue(a)},$13:function(a){this.$21.enqueue(a)},$11:function(a){this.$21.enqueue(a)},$12:function(a){this.$21.enqueue(a)},$10:function(a){this.$21.enqueue(a)},$E:function(a){this.get_$1().$C(new MSP.P$D(this.get_$1()));this.get_$1().$B(a)},
$F:function(a){this.get_$1().$C(new MSP.P$D(this.get_$1()));this.get_$1().$B(a)},$26:function(){if(0<this.$21.length){MSH.Logger.logTrace(this.get_$1().get_logContext(),"CsSigningInState.SignIn","Dispatching queued presence commands");var a=this.$21;this.$21=[];for(var b=a.length,c=0;c<b;c++){var d=a.dequeue();Type.canCast(d,MSP.P$21)?this.$C(d):Type.canCast(d,MSP.P$20)?this.$D(d):this.$21.enqueue(d)}}this.$22=!0},$27:function(){this.$1D||(this.$1D=!0,this.$18.add_$8(ss.Delegate.create(this,this.$28)),
this.get_$1().$B(this.$18))},$28:function(){this.$1E=!0;this.$18.remove_$8(ss.Delegate.create(this,this.$28));this.$2E(this.$18.get_$F(),this.$18.get_$10())},$29:function(){this.$1F||(this.$1F=!0,this.$17.add_$8(ss.Delegate.create(this,this.$2A)),this.get_$1().$B(this.$17))},$2A:function(){this.$20=!0;this.$17.remove_$8(ss.Delegate.create(this,this.$2A));this.$2E(this.$17.get_$12(),this.$17.get_$13())},$2B:function(){if(null==this.$16)this.$1C=!0;else if(!this.$1C){this.$1C=!0;for(var a=ss.IEnumerator.getEnumerator(this.$16);a.moveNext();){var b=
a.get_current();this.get_$1().$B(b)}this.$2E(0,String.Empty)}},$2C:function(){!this.$19&&(this.$22&&this.$1A)&&(this.$19=!0,this.$15.add_$8(ss.Delegate.create(this,this.$2D)),this.get_$1().$B(this.$15))},$2D:function(){this.$1B=!0;this.$15.remove_$8(ss.Delegate.create(this,this.$2D));this.$2E(this.$15.get_$14(),this.$15.get_$15())},$2E:function(a,b){(0!==a||this.$1C&&this.$1B&&this.$1E&&this.$20||1===this.$25&&this.$1E)&&this.$2F(a,b)},$2F:function(a,b){0===a?this.get_$1().$C(new MSP.P$C(this.get_$1())):
this.get_$1().$C(new MSP.P$D(this.get_$1()));this.$23.$10(a,b,this.$15.get_$12(),this.$24);this.get_$1().$B(this.$23);if(0===a){for(var c=this.$21.length,d=0;d<c;d++)this.get_$1().$B(this.$21.dequeue());this.get_$1().onSignInEventsEmpty()}}};MSP.P$D=function(a){MSP.P$D.initializeBase(this,[a])};MSP.P$D.prototype={$2:function(a){this.get_$1().$C(new MSP.P$F(this.get_$1()));this.get_$1().$B(a)}};MSP.P$E=function(a,b){MSP.P$E.initializeBase(this,[a]);this.$15=b};MSP.P$E.prototype={$15:null,$F:function(){this.get_$1().$C(new MSP.P$D(this.get_$1()));
this.$15.$6()}};MSP.ServiceDataDocumentType=function(){};MSP.ServiceDataDocumentType.prototype={put:0,del:1};MSP.ServiceDataDocumentType.registerEnum("MSP.ServiceDataDocumentType",!1);MSP.P$3=function(a){this.$0=a};MSP.P$3.$4=function(a){if(String.isNullOrEmpty(a))return 6;switch(MSH.StringHelper.toLowerCase(a)){case "active":return 0;case "saved":return 3;case "draft":return 4;case "trash":return 1;case "hm_bulkmail_":return 2;case "00000000-0000-0000-0000-000000000006":case "00000000-0000-0000-0000-000000000007":case "00000000-0000-0000-0000-000000000008":case "00000000-0000-0000-0000-000000000009":return 6;
default:return 5}};MSP.P$3.prototype={$0:null,$1:null,get_$2:function(){return this.$1},$3:function(){var a=new MSM.MimeParser(this.$0.getBody());switch(MSH.StringHelper.splitChar(this.$0.getHeader("Content-Type"),";")[0]){case "text/x-msmsgsinitialmdatanotification":var b=ss.XmlDocumentParser.parse(a.getHeader("Mail-Data")),b=null!=b?b.documentElement:null;if(null==b){MSH.Logger.logError(MC.LogContext.get_global(),"Presence.MailNotificationParser.Parse","Unable to parse mail data: "+a.getHeader("Mail-Data"));
break}a=MSH.XmlHelper.selectSingleNode(b,"E");if(null==a)break;for(var b=["IU","I","OU","O"],c=[0,0,0,0],d=0;d<b.length;d++){var e=MSH.XmlHelper.selectSingleNode(a,b[d]);null!=e&&(e=MSH.XmlHelper.xmlNodeValue(e.firstChild),null!=e&&(c[d]=MSH.ConvertHelper.parseInt(e)))}this.$1=[MC.$create_MailNotificationInfo(MC.$create_MailNotificationInitialInfo(c[0],c[1],c[2],c[3]),0)];return!0;case "text/x-msmsgsemailnotification":return b=MSP.P$3.$4(a.getHeader("Dest-Folder")),this.$1=[MC.$create_MailNotificationInfo(MC.$create_MailNotificationIncomingInfo(a.getHeader("From"),
a.getHeader("From-Addr"),a.getHeader("Message-URL"),a.getHeader("Subject"),b,a.getHeader("id")),1),MC.$create_MailNotificationInfo(MC.$create_MailNotificationActivityInfo(b,b,-1),2)],!0;case "text/x-msmsgsactivemailnotification":return this.$1=[MC.$create_MailNotificationInfo(MC.$create_MailNotificationActivityInfo(MSP.P$3.$4(a.getHeader("Src-Folder")),MSP.P$3.$4(a.getHeader("Dest-Folder")),MSH.ConvertHelper.parseInt(a.getHeader("Message-Delta"))),2)],!0}return!1}};MSP.P$1=function(){this.$12=[0,
0,0,0];this.$13=[0,0];this.$14=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.$15()};MSP.P$1.f=function(a,b,c){return a&b|~a&c};MSP.P$1.g=function(a,b,c){return a&c|b&~c};MSP.P$1.h=function(a,b,c){return a^b^c};MSP.P$1.i=function(a,b,c){return b^(a|~c)};MSP.P$1.$11=function(a,b){return a<<b|a>>>32-b};MSP.P$1.FF=function(a,b,c,d,e,f,g){a+=MSP.P$1.f(b,c,d)+e+g;a=MSP.P$1.$11(a,f);return a+b};MSP.P$1.GG=function(a,
b,c,d,e,f,g){a+=MSP.P$1.g(b,c,d)+e+g;a=MSP.P$1.$11(a,f);return a+b};MSP.P$1.HH=function(a,b,c,d,e,f,g){a+=MSP.P$1.h(b,c,d)+e+g;a=MSP.P$1.$11(a,f);return a+b};MSP.P$1.II=function(a,b,c,d,e,f,g){a+=MSP.P$1.i(b,c,d)+e+g;a=MSP.P$1.$11(a,f);return a+b};MSP.P$1.$1B=function(a,b,c,d,e){for(var f=0;f<e;f++)c[d+f]=a[b+f]};MSP.P$1.prototype={$15:function(){this.$13[0]=this.$13[1]=0;this.$12[0]=1732584193;this.$12[1]=4023233417;this.$12[2]=2562383102;this.$12[3]=271733878},$16:function(a,b,c){var d,e;e=this.$13[0]>>>
3&63;(this.$13[0]+=c<<3)<c<<3&&this.$13[1]++;this.$13[1]+=c>>>29;d=64-e;if(c>=d){MSP.P$1.$1B(a,b,this.$14,e,d);for(this.$18(this.$14,0);d+63<c;d+=64)this.$18(a,b+d);e=0}else d=0;MSP.P$1.$1B(a,b+d,this.$14,e,c-d)},$17:function(){var a=Array(16),b=Array(8),c;this.$19(b,0,this.$13,0,8);c=this.$13[0]>>>3&63;this.$16(MSP.P$1.$10,0,56>c?56-c:120-c);this.$16(b,0,8);this.$19(a,0,this.$12,0,16);this.$13[0]=this.$13[1]=0;this.$12[0]=0;this.$12[1]=0;this.$12[2]=0;this.$12[3]=0;this.$15();return a},$18:function(a,
b){var c=this.$12[0],d=this.$12[1],e=this.$12[2],f=this.$12[3],g=Array(16);this.$1A(g,0,a,b,64);c=MSP.P$1.FF(c,d,e,f,g[0],7,3614090360);f=MSP.P$1.FF(f,c,d,e,g[1],12,3905402710);e=MSP.P$1.FF(e,f,c,d,g[2],17,606105819);d=MSP.P$1.FF(d,e,f,c,g[3],22,3250441966);c=MSP.P$1.FF(c,d,e,f,g[4],7,4118548399);f=MSP.P$1.FF(f,c,d,e,g[5],12,1200080426);e=MSP.P$1.FF(e,f,c,d,g[6],17,2821735955);d=MSP.P$1.FF(d,e,f,c,g[7],22,4249261313);c=MSP.P$1.FF(c,d,e,f,g[8],7,1770035416);f=MSP.P$1.FF(f,c,d,e,g[9],12,2336552879);
e=MSP.P$1.FF(e,f,c,d,g[10],17,4294925233);d=MSP.P$1.FF(d,e,f,c,g[11],22,2304563134);c=MSP.P$1.FF(c,d,e,f,g[12],7,1804603682);f=MSP.P$1.FF(f,c,d,e,g[13],12,4254626195);e=MSP.P$1.FF(e,f,c,d,g[14],17,2792965006);d=MSP.P$1.FF(d,e,f,c,g[15],22,1236535329);c=MSP.P$1.GG(c,d,e,f,g[1],5,4129170786);f=MSP.P$1.GG(f,c,d,e,g[6],9,3225465664);e=MSP.P$1.GG(e,f,c,d,g[11],14,643717713);d=MSP.P$1.GG(d,e,f,c,g[0],20,3921069994);c=MSP.P$1.GG(c,d,e,f,g[5],5,3593408605);f=MSP.P$1.GG(f,c,d,e,g[10],9,38016083);e=MSP.P$1.GG(e,
f,c,d,g[15],14,3634488961);d=MSP.P$1.GG(d,e,f,c,g[4],20,3889429448);c=MSP.P$1.GG(c,d,e,f,g[9],5,568446438);f=MSP.P$1.GG(f,c,d,e,g[14],9,3275163606);e=MSP.P$1.GG(e,f,c,d,g[3],14,4107603335);d=MSP.P$1.GG(d,e,f,c,g[8],20,1163531501);c=MSP.P$1.GG(c,d,e,f,g[13],5,2850285829);f=MSP.P$1.GG(f,c,d,e,g[2],9,4243563512);e=MSP.P$1.GG(e,f,c,d,g[7],14,1735328473);d=MSP.P$1.GG(d,e,f,c,g[12],20,2368359562);c=MSP.P$1.HH(c,d,e,f,g[5],4,4294588738);f=MSP.P$1.HH(f,c,d,e,g[8],11,2272392833);e=MSP.P$1.HH(e,f,c,d,g[11],
16,1839030562);d=MSP.P$1.HH(d,e,f,c,g[14],23,4259657740);c=MSP.P$1.HH(c,d,e,f,g[1],4,2763975236);f=MSP.P$1.HH(f,c,d,e,g[4],11,1272893353);e=MSP.P$1.HH(e,f,c,d,g[7],16,4139469664);d=MSP.P$1.HH(d,e,f,c,g[10],23,3200236656);c=MSP.P$1.HH(c,d,e,f,g[13],4,681279174);f=MSP.P$1.HH(f,c,d,e,g[0],11,3936430074);e=MSP.P$1.HH(e,f,c,d,g[3],16,3572445317);d=MSP.P$1.HH(d,e,f,c,g[6],23,76029189);c=MSP.P$1.HH(c,d,e,f,g[9],4,3654602809);f=MSP.P$1.HH(f,c,d,e,g[12],11,3873151461);e=MSP.P$1.HH(e,f,c,d,g[15],16,530742520);
d=MSP.P$1.HH(d,e,f,c,g[2],23,3299628645);c=MSP.P$1.II(c,d,e,f,g[0],6,4096336452);f=MSP.P$1.II(f,c,d,e,g[7],10,1126891415);e=MSP.P$1.II(e,f,c,d,g[14],15,2878612391);d=MSP.P$1.II(d,e,f,c,g[5],21,4237533241);c=MSP.P$1.II(c,d,e,f,g[12],6,1700485571);f=MSP.P$1.II(f,c,d,e,g[3],10,2399980690);e=MSP.P$1.II(e,f,c,d,g[10],15,4293915773);d=MSP.P$1.II(d,e,f,c,g[1],21,2240044497);c=MSP.P$1.II(c,d,e,f,g[8],6,1873313359);f=MSP.P$1.II(f,c,d,e,g[15],10,4264355552);e=MSP.P$1.II(e,f,c,d,g[6],15,2734768916);d=MSP.P$1.II(d,
e,f,c,g[13],21,1309151649);c=MSP.P$1.II(c,d,e,f,g[4],6,4149444226);f=MSP.P$1.II(f,c,d,e,g[11],10,3174756917);e=MSP.P$1.II(e,f,c,d,g[2],15,718787259);d=MSP.P$1.II(d,e,f,c,g[9],21,3951481745);this.$12[0]+=c;this.$12[1]+=d;this.$12[2]+=e;this.$12[3]+=f;for(c=0;c<g.length;c++)g[c]=0},$19:function(a,b,c,d,e){for(e=b+e;b<e;d++,b+=4)a[b]=c[d]&255,a[b+1]=c[d]>>>8&255,a[b+2]=c[d]>>>16&255,a[b+3]=c[d]>>>24&255},$1A:function(a,b,c,d,e){for(e=d+e;d<e;b++,d+=4)a[b]=c[d]|c[d+1]<<8|c[d+2]<<16|c[d+3]<<24},$1C:function(a){for(var b=
Array(a.length),c=0;c<a.length;c++)b[c]=MSH.StringHelper.charCodeAt(a,c);this.$16(b,0,b.length);a=this.$17();b=new ss.StringBuilder;for(c=0;c<a.length;c++)b.append(MSH.StringHelper.charAt("0123456789abcdef",a[c]>>>4&15)),b.append(MSH.StringHelper.charAt("0123456789abcdef",a[c]&15));return b.toString()}};MSP.P$8=function(){};MSP.P$8.prototype={$0:function(a){for(var b=new ss.StringBuilder,c=0;3>=c;c++)b.append(MSH.StringHelper.charAt("0123456789abcdef",a>>8*c+4&15)),b.append(MSH.StringHelper.charAt("0123456789abcdef",
a>>8*c&15));return b.toString()},$1:function(a,b,c){var d=a+b,b=8-d.length%8;8!==b&&(d=d.padRight(d.length+b,"0"));for(var e=d.length/4,b=[],f=0,g=0;f<e;f++)b.insert(f,0),b[f]+=1*MSH.StringHelper.charCodeAt(d,g++),b[f]+=256*MSH.StringHelper.charCodeAt(d,g++),b[f]+=65536*MSH.StringHelper.charCodeAt(d,g++),b[f]+=16777216*MSH.StringHelper.charCodeAt(d,g++);d=Array(4);a=MSP.P$2.$1(a+c);for(e=c=0;c<d.length;c++)d[c]=0,d[c]+=1*MSH.ConvertHelper.parseHexInt(MSH.StringHelper.substring(a,e,2)),e+=2,d[c]+=
256*MSH.ConvertHelper.parseHexInt(MSH.StringHelper.substring(a,e,2)),e+=2,d[c]+=65536*MSH.ConvertHelper.parseHexInt(MSH.StringHelper.substring(a,e,2)),e+=2,d[c]+=16777216*MSH.ConvertHelper.parseHexInt(MSH.StringHelper.substring(a,e,2)),e+=2;a=Array(2);this.$2(b,d,a);b=MSP.P$2.$3(d[0],a[0]);c=MSP.P$2.$3(d[1],a[1]);e=MSP.P$2.$3(d[2],a[0]);d=MSP.P$2.$3(d[3],a[1]);return this.$0(b)+this.$0(c)+this.$0(e)+this.$0(d)},$2:function(a,b,c){if(2>a.length||1===(a.length&1))return!1;for(var d=b[1]&2147483647,
e=b[2]&2147483647,f=b[3]&2147483647,b=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,(b[0]&2147483647).toString()),d=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,d.toString()),e=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,e.toString()),f=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,f.toString()),g=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,(242854337).toString()),h=0,i=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,(2147483647).toString()),j=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,"0"),k=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,
"0"),l=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,"0"),m=0;m<a.length/2;m++)j=MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,a[h++].toString()),j.multiply(g),j.modulus(i),k.add(j),k.multiply(b),k.add(d),k.modulus(i),l.add(k),k.add(MSH.BigInt.parseDecInt(MSH.BigInt.decRadix,a[h++].toString())),k.multiply(e),k.add(f),k.modulus(i),l.add(k);k.add(d);k.modulus(i);l.add(f);l.modulus(i);c[0]=MSH.ConvertHelper.parseInt(k.toString());c[1]=MSH.ConvertHelper.parseInt(l.toString());return!0}};MSP.P$7=function(a){this.$0=
a;this.$6()};MSP.P$7.prototype={$0:null,$1:0,$2:!1,get_$3:function(){return this.$2},get_$4:function(){return this.$0.get_routing().get_from().get_address()},get_$5:function(){return this.$1},$6:function(){var a=ss.XmlDocumentParser.parse(this.$0.get_content().get_body()).documentElement;if(null==a||"network"!==a.nodeName)MSH.Logger.logError(MC.LogContext.get_global(),"NetworkDataReader.Parse",String.format("Parse: Invalid XML {0}",this.$0.get_content()));else{var b=0,b=a.selectSingleNode("status");
if(null!=b){switch(b.text){case "SigningIn":b=1;break;case "SignedIn":b=2;break;case "SignedOut":b=0;a=a.selectSingleNode("details");if(null!=a)switch(a.text){case "AbnormalDisconnect":case "CredentialsFetchFailed":case "InternalServerError":b=4}break;default:MSH.Logger.logError(MC.LogContext.get_global(),"NetworkDataReader.Parse",String.format("Invalid network status value {0}",this.$0.get_content()));return}this.$1=b;this.$2=!0}}}};MSP.P$6=function(a,b,c){this.$4=a;this.$0=c;this.$5=1===a.type&&
a.address===b};MSP.P$6.prototype={$0:null,$1:!1,$2:!1,$3:null,$4:null,$5:!1,get_$6:function(){return this.$3},$7:function(){if(this.$1)return this.$2;var a=ss.XmlDocumentParser.parse(this.$0).documentElement;if(null==a)return this.$A(String.format("Parse: Invalid XML {0}",this.$0)),this.$2;if(!MSH.XmlHelper.isElement(a,"user"))return this.$A(String.format("Parse: Invalid root node '{0}'",a.nodeName)),this.$2;for(var b={},c={},a=ss.IEnumerator.getEnumerator(a.childNodes);a.moveNext();){var d=a.get_current(),
e=d.nodeName;if(!("s"!==e&&"sep"!==e)){var f=MSH.XmlHelper.getAttribute(d,"n");if(String.isNullOrEmpty(f))return this.$A(String.format("Parse: Missing service name attribute in node '{0}'",d.nodeName)),this.$2;var g=this.$8(d,f);switch(e){case "s":if(Object.keyExists(b,f))return this.$A(String.format("Parse: Duplicate global service data nodes '{0}'",f)),this.$2;d=MC.ServiceDataHelper.parseServiceName(f);0!==d&&(b[f]=MC.$create_ServiceDataInfo(d,g,null));break;case "sep":e=MSH.XmlHelper.getAttribute(d,
"epid");if(String.isNullOrEmpty(e))return this.$A(String.format("Parse: Missing epid attribute in endpoint node '{0}'",d.nodeName)),this.$2;if(Object.keyExists(c,f)){if(Object.keyExists(c[f],e))return this.$A(String.format("Parse: Duplicate epid for service data nodes '{0}':{1}",f,e)),this.$2}else c[f]={};c[f][e]=MC.$create_ServiceEndpointDataInfo(e,MC.ServiceDataHelper.parseServiceName(f),g)}}}var a=[],h;for(h in c)f=h,g=c[h],Object.keyExists(b,f)?(b[f].endpointData=g,a.add(b[f]),delete b[f]):a.add(MC.$create_ServiceDataInfo(MC.ServiceDataHelper.parseServiceName(f),
{},g));for(var i in b)c=b[i],c.endpointData={},a.add(c);this.$3=MSH.CollectionHelper.toArray(a);this.$B();return this.$2},$8:function(a,b){for(var c={},d=ss.IEnumerator.getEnumerator(a.childNodes);d.moveNext();){var e=d.get_current(),f=e.nodeName;switch(f){case "WebAppData":e=this.$9(e);null!=e&&(c[f]=e);break;case "Scene":case "UserTileLocation":case "DDP":this.$5&&(c[f]=e.text);break;default:c[f]="CM"===b?e.xml:e.text}}Object.keyExists(c,"WebAppData")&&(Type.canCast(c.WebAppData,String)?delete c.WebAppData:
(d=c.WebAppData,Object.keyExists(c,"DMN")||(c.DMN=d.domain),(c.DMN!==MSCo.Configuration.get_domainName()||d.domain!==MSCo.Configuration.get_domainName())&&delete c.WebAppData));return c},$9:function(a){var b=MSH.XmlHelper.getAttribute(a,"domain");if(null==b||b!==MSCo.Configuration.get_domainName())return null;var c=[],d=[],e=MSH.XmlHelper.selectNodes(a,"MsgIds/Id");if(null!=e)for(var f=e.length,g=0;g<f;g++){var h=e[g].text;String.isNullOrEmpty(h)||c.add(h)}a=MSH.XmlHelper.selectSingleNode(a,"Properties");
if(null!=a){e=a.childNodes.length;for(f=0;f<e;f++)g=a.childNodes[f],h=g.nodeName,String.isNullOrEmpty(h)||d.add(MC.$create_KeyValuePair(h,g.text))}return MC.$create_ApplicationDataInfo(b,MSH.CollectionHelper.toArray(d),MSH.CollectionHelper.toArray(c))},$A:function(a){MSH.Logger.logError(MC.LogContext.get_global(),"ServiceDataReader",a);this.$1=!0;this.$2=!1},$B:function(){this.$2=this.$1=!0},get_$C:function(){return this.$1&&this.$2}};MSP.ServiceDataWriter=function(a,b,c,d){this.$5=new ss.StringBuilder;
this.$0=a;this.$1=b;this.$2=c;this.$3=d};MSP.ServiceDataWriter.prototype={$0:null,$1:null,$2:0,$3:0,$4:!1,getPayload:function(){if(this.$4)return this.$5.toString();this.$5.append("<user>");for(var a=!1,b=ss.IEnumerator.getEnumerator(this.$0);b.moveNext();){var c=b.get_current();if(this.$6(c.service)){switch(this.$3){case 0:this.$7(c);this.$8(c);break;case 1:this.$9(c)}a=!0}}if(!a)return null;this.$5.append("</user>");this.$4=!0;return this.$5.toString()},$6:function(a){return(a&this.$2)===a},$7:function(a){var b=
this.$A(a.properties,!0,a.service);0<b.length&&(this.$5.append(String.format('<s n="{0}">',MC.ServiceDataHelper.formatServiceType(a.service))),this.$5.append(b),this.$5.append(String.format("</s>")))},$8:function(a){var b=this.$1,c=a.service;Object.keyExists(a.endpointData,b)||(a.endpointData[b]=MC.$create_ServiceEndpointDataInfo(b,c,MC.ServiceDataHelper.getDefaultOfflineEndpointData(c)));this.$5.append(String.format('<sep n="{0}">',MC.ServiceDataHelper.formatServiceType(c)));this.$5.append(this.$A(a.endpointData[b].properties,
!1,c));this.$5.append(String.format("</sep>"))},$9:function(a){var b=a.endpointData,c;for(c in b)b=c,this.$5.append(String.format('<sep n="{0}" epid="{1}"/>',MC.ServiceDataHelper.formatServiceType(a.service),b))},$A:function(a,b,c){var d=new ss.StringBuilder,e;for(e in a){var f=a[e],g=e;if(null!=f&&MC.ServiceDataHelper.shouldPublishProperty(g,b,c))switch(g){case "WebAppData":d.append(this.$B(f));break;default:d.append(String.format("<{0}>{1}</{0}>",MSH.XmlHelper.xmlEscape(g),MSH.XmlHelper.xmlEscape(f)))}}2===
c&&(!b&&!Object.keyExists(a,"WebAppData"))&&d.append(this.$B(MC.$create_ApplicationDataInfo(a.DMN,[],[])));return d.toString()},$B:function(a){var b=new ss.StringBuilder;b.append(String.format('<WebAppData domain="{0}">',a.domain));b.append("<MsgIds>");for(var c=0;c<a.messageIds.length;c++)b.append("<Id>"),b.append(MSH.XmlHelper.xmlEscape(a.messageIds[c])),b.append("</Id>");b.append("</MsgIds>");b.append("<Properties>");for(c=0;c<a.properties.length;c++)b.append(String.format("<{0}>{1}</{0}>",MSH.XmlHelper.xmlEscape(a.properties[c].key),
MSH.XmlHelper.xmlEscape(a.properties[c].value)));b.append("</Properties>");b.append("</WebAppData>");return b.toString()}};MSP.P$9.registerClass("MSP.P$9");MSP.P$A.registerClass("MSP.P$A",MSP.P$9);MSP.P$16.registerClass("MSP.P$16",MSP.P$9);MSP.P$15.registerClass("MSP.P$15",MSP.P$9);MSP.P$18.registerClass("MSP.P$18",MSP.P$9);MSP.P$17.registerClass("MSP.P$17",MSP.P$9);MSP.ConnectionService.registerClass("MSP.ConnectionService",null,MC.IConnectionService,MC.IConnectionServiceEvents);MSP.P$12.registerClass("MSP.P$12",
MSP.P$9);MSP.P$11.registerClass("MSP.P$11",MSP.P$9);MSP.P$14.registerClass("MSP.P$14",MSP.P$9);MSP.P$13.registerClass("MSP.P$13",MSP.P$9);MSP.P$19.registerClass("MSP.P$19",MSP.P$9);MSP.P$1F.registerClass("MSP.P$1F",MSP.P$9);MSP.P$1E.registerClass("MSP.P$1E",MSP.P$9);MSP.P$21.registerClass("MSP.P$21",MSP.P$9);MSP.P$20.registerClass("MSP.P$20",MSP.P$9);MSP.P$1B.registerClass("MSP.P$1B",MSP.P$9);MSP.P$1A.registerClass("MSP.P$1A",MSP.P$9);MSP.P$1D.registerClass("MSP.P$1D",MSP.P$9);MSP.P$1C.registerClass("MSP.P$1C",
MSP.P$9);MSP.P$10.registerClass("MSP.P$10",MSP.P$9);MSP.P$2.registerClass("MSP.P$2");MSP.P$B.registerClass("MSP.P$B",MSM.MsnpConnection);MSP.P$4.registerClass("MSP.P$4");MSP.P$5.registerClass("MSP.P$5");MSP.P$C.registerClass("MSP.P$C",MSP.P$5);MSP.P$F.registerClass("MSP.P$F",MSP.P$5);MSP.P$D.registerClass("MSP.P$D",MSP.P$5);MSP.P$E.registerClass("MSP.P$E",MSP.P$5);MSP.P$3.registerClass("MSP.P$3");MSP.P$1.registerClass("MSP.P$1");MSP.P$8.registerClass("MSP.P$8");MSP.P$7.registerClass("MSP.P$7");MSP.P$6.registerClass("MSP.P$6");
MSP.ServiceDataWriter.registerClass("MSP.ServiceDataWriter");MSP.P$2.$8=RegExp("&amp;|&lt;|&gt;|&apos;|&quot;|&#[0-9]{1,5};|&#x[0-9a-f]{1,5};|&","ig");MSP.P$1.$10=[128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];Type.registerNamespace("MSS");MSS.St$1=function(a,b,c){MSS.St$1.initializeBase(this,[a]);this.$10=b;this.$11=c};MSS.St$1.$12=function(a){switch(a){case 7:return"Away";case 5:return"Idle";case 6:return"BeRightBack";
case 9:return"OutToLunch";case 4:return"Busy";case 8:return"InACall";case 3:return"AppearOffline";default:return"Online"}};MSS.St$1.$13=function(a){switch(a){case 1:return"1";case 2:return"2";default:return"0"}};MSS.St$1.$14=function(a){switch(a){case 1:return"1";case 2:return"2";default:return"0"}};MSS.St$1.prototype={$10:null,$11:null,$A:function(){this.$11.set_cachedSettings(this.$10);var a=String.format("<MessengerUserSettings><AutoSignInEnabled>{0}</AutoSignInEnabled><AudioEnabled>{1}</AudioEnabled><FirstRunExperienceViewed>{2}</FirstRunExperienceViewed><LastStatus>{3}</LastStatus><UploadLogsPreference>{4}</UploadLogsPreference></MessengerUserSettings>",
MSS.St$1.$14(this.$10.autoSignInEnabled),this.$10.audioEnabled?"1":"0",this.$10.firstRunExperienceViewed?"1":"0",MSS.St$1.$12(this.$10.lastStatus),MSS.St$1.$13(this.$10.uploadLogsPreference));this.$8(2,this.$2.get_$3(),a,ss.Delegate.create(this,this.$B))},$C:function(){},$B:function(){this.$9()}};MSS.St$2=function(a,b,c){MSS.St$2.initializeBase(this,[a]);this.$12=b;this.$10=MC.$create_UXSettingsInfo(1,!0,!1,2,0);this.$11=c};MSS.St$2.$13=function(a){switch(a){case "Away":return 7;case "Idle":return 5;
case "BeRightBack":return 6;case "OutToLunch":return 9;case "Busy":return 4;case "InACall":return 8;case "AppearOffline":return 3;default:return 2}};MSS.St$2.$14=function(a){switch(a){case "1":return 1;case "2":return 2;default:return 0}};MSS.St$2.$15=function(a){switch(a){case "1":return 1;case "2":return 2;default:return 0}};MSS.St$2.prototype={$10:null,$11:null,$12:null,$A:function(){this.$12.get_ageInMilliSeconds()<MSS.St$2.$F&&null!=this.$12.get_cachedSettings()?(this.$10=this.$12.get_cachedSettings(),
this.$9()):this.$8(0,this.$2.get_$3(),null,ss.Delegate.create(this,this.$B))},$C:function(){null!=this.$11&&this.$11.invoke(0,this.$10)},$B:function(a){if(200===a.get_status()){var b=a.get_responseXml();if(null!=b){var a=MSH.XmlHelper.selectSingleNode(b,"MessengerUserSettings/LastStatus"),c=MSH.XmlHelper.selectSingleNode(b,"MessengerUserSettings/UploadLogsPreference"),d=MSH.XmlHelper.selectSingleNode(b,"MessengerUserSettings/AutoSignInEnabled"),e=MSH.XmlHelper.selectSingleNode(b,"MessengerUserSettings/AudioEnabled"),
b=MSH.XmlHelper.selectSingleNode(b,"MessengerUserSettings/FirstRunExperienceViewed");null!=a&&(this.$10.lastStatus=MSS.St$2.$13(a.text));null!=c&&(this.$10.uploadLogsPreference=MSS.St$2.$14(c.text));null!=d&&(this.$10.autoSignInEnabled=MSS.St$2.$15(d.text));null!=e&&(this.$10.audioEnabled="1"===e.text);null!=b&&(this.$10.firstRunExperienceViewed="1"===b.text);this.$12.set_cachedSettings(this.$10)}}this.$9()}};MSS.StorageService=function(a){this.$0=a};MSS.StorageService.prototype={$0:null,$1:null,
get_$2:function(){return this.$0},get_$3:function(){return MSCo.HttpRequest.get_defaultScheme()+String.format("{0}/MyData/AppStorage/MessengerSettings/Global/first",MSCo.Configuration.get_storageHostName())},get_logContext:function(){null==this.$1&&(this.$1=new MC.LogContext(this.$0.liveId));return this.$1},set_logContext:function(a){return this.$1=a},$4:function(a,b,c,d,e){a=new MSCo.HttpRequest(a,b,d,c,e);a.execute();return a},getSettings:function(a,b){(new MSS.St$2(this,a,b)).$7()},putSettings:function(a,
b){(new MSS.St$1(this,a,b)).$7()}};MSS.St$0=function(a){this.$1=1;this.$3={};this.$2=a;this.$0=this.$2.get_$3();this.$3["Content-Type"]="application/web3s+xml";this.$3["Cache-Control"]="no-cache";this.$3.Pragma="No-Cache";this.$3["Content-Type"]="application/web3s+xml";this.$3.Application="MessengerLibrary";this.$3["X-MSN-Auth"]="Use-Cookie"};MSS.St$0.prototype={$0:null,$2:null,$4:!1,$5:!1,$6:null,$7:function(){this.$4=!0;this.$A()},$8:function(a,b,c,d){this.$6=this.$2.$4(a,b,this.$3,c,d)},$9:function(){this.$5||
(this.$1=0,this.$5=!0,null!=this.$E&&this.$E.invoke(this,ss.EventArgs.Empty),this.$C())},add_$D:function(a){this.$E=ss.Delegate.combine(this.$E,a)},remove_$D:function(a){this.$E=ss.Delegate.remove(this.$E,a)},$E:null};MSS.St$0.registerClass("MSS.St$0");MSS.St$1.registerClass("MSS.St$1",MSS.St$0);MSS.St$2.registerClass("MSS.St$2",MSS.St$0);MSS.StorageService.registerClass("MSS.StorageService",null,MC.IStorageService);MSS.St$2.$F=18E4;Type.registerNamespace("MSA");MSA.AddressBookService=function(a){this.$1=
[];this.$0=a};MSA.AddressBookService.prototype={$0:null,$2:!1,$3:null,$4:null,get_$5:function(){return this.$0},get_$6:function(){return 1===this.$0.authenticationInfo.authType&&!String.isNullOrEmpty(this.$0.authenticationInfo.ticket)},get_$7:function(){return MSCo.HttpRequest.get_defaultScheme()+String.format("{0}/users/@C@{1}/rest/livecontacts/",this.get_$8(),this.$0.cid)},get_$8:function(){return MSCo.HttpRequest.get_defaultScheme().startsWith("https:")?MSCo.Configuration.addressBookSecureHostName:
MSCo.Configuration.addressBookInsecureHostName},abort:function(){var a=null;this.$1.clear();a=this.$4;this.$4=null;if(null!=a)try{a.abort()}catch(b){}},get_logContext:function(){null==this.$3&&(this.$3=new MC.LogContext(this.$0.liveId));return this.$3},set_logContext:function(a){return this.$3=a},$9:function(a,b,c,d,e){a=new MSCo.HttpRequest(a,b,d,c,e);a.execute();return a},updateIMAvailability:function(a,b,c,d){a=new MSA.A$2(a,b,c,this,d);this.$A(a)},$A:function(a){a.add_$11(ss.Delegate.create(this,
this.$B));this.$2?this.$1.add(a):(this.$2=!0,this.$4=a,a.$9())},$B:function(){var a=null;0===this.$1.length?this.$2=!1:(a=this.$1[0],this.$1.removeAt(0),this.$4=a,this.$2=!0,null!=a&&a.$9())}};MSA.A$1=function(){};MSA.A$1.$3=function(a){a=MSH.XmlHelper.xmlNodeValue(a);return"1"===a?1:"2"===a?2:"4"===a?4:"8"===a?8:"16"===a?16:"32"===a?32:0};MSA.A$1.$4=function(a){a=MSH.XmlHelper.xmlNodeValue(a);return"Allow"===a?2:"Block"===a?4:"Pending"===a?16:0};MSA.A$1.$5=function(a){a=MSH.XmlHelper.xmlNodeValue(a);
return a.startsWith("MSGR:")?MSH.StringHelper.substringToEnd(a,5):null};MSA.A$1.$6=function(a){if(String.isNullOrEmpty(a))return null;var b=a.lastIndexOf("("),c=a.lastIndexOf(")");return-1===b||c<b?null:MSH.StringHelper.substring(a,b+1,c-b-1)};MSA.A$1.$7=function(a,b){var c=MSH.XmlHelper.xmlNodeValue(MSH.XmlHelper.selectSingleNode(a,"ID")),d=MSA.A$1.$3(MSH.XmlHelper.selectSingleNode(a,"Capability")),e=MSH.XmlHelper.xmlNodeValue(MSH.XmlHelper.selectSingleNode(a,"Address")),f=MSA.A$1.$4(MSH.XmlHelper.selectSingleNode(a,
"PresencePermission")),g=MSH.XmlHelper.xmlNodeValue(MSH.XmlHelper.selectSingleNode(a,"InviteMessage")),h=MSH.XmlHelper.xmlNodeValue(MSH.XmlHelper.selectSingleNode(a,"CID"));"0"===h&&(h=String.Empty);"Cid"===MSH.XmlHelper.xmlNodeValue(MSH.XmlHelper.selectSingleNode(a,"IMAddressType"))&&(d=11);"00000000-0000-0000-0000-000000000000"!==b&&(f|=1);if(String.isNullOrEmpty(c)||0===d||0===f||129<e.length)return null;d=MC.$create_IMAddressInfo(e,d,f);d.id=c;d.inviteMessage=g;d.cid=h;return d};MSA.A$1.$8=function(a){switch(a){case 2:case 16:case 1:case 32:return!0}return!1};
MSA.A$1.$9=function(a){a=MSH.XmlHelper.selectSingleNode(a,"PreferredEmail");return null!=a&&(a=MSH.XmlHelper.xmlNodeValue(a),!String.isNullOrEmpty(a))?MC.$create_EmailInfo(a):null};MSA.A$1.$A=function(a,b,c){var d=MSH.XmlHelper.xmlNodeValue(MSH.XmlHelper.selectSingleNode(c,"CID")),e=MSH.XmlHelper.xmlNodeValue(MSH.XmlHelper.selectSingleNode(c,"Profiles/Personal/FirstName")),f=MSH.XmlHelper.xmlNodeValue(MSH.XmlHelper.selectSingleNode(c,"Profiles/Personal/LastName")),c=MSH.XmlHelper.xmlNodeValue(MSH.XmlHelper.selectSingleNode(c,
"Profiles/Personal/NickName")),c=MC.$create_ContactInfo(a,c,[]);c.cid=d;"00000000-0000-0000-0000-000000000000"!==a&&(c.firstName=e.trim(),c.lastName=f.trim(),c.emailAddress=b);return c};MSA.A$0=function(a){this.$1=1;this.$2={};this.$3=a;this.$0=this.$3.get_$7();this.$2["Content-Type"]="application/xml; charset=utf-8";this.$2["Proxy-Connection"]="Keep-Alive";this.$2.Pragma="No-Cache";this.$2.LiveContacts_PartnerID=MSCo.Configuration.addressBookPartnerId;this.$2.LiveContacts_ErrorMessageLevel="Verbose";
this.$2["If-Modified-Since"]=MSH.DateTimeHelper.toUTCString(MSH.DateTimeHelper.minValue);this.$3.get_$6()&&(this.$2.LiveContacts_TicketToken=this.$3.get_$5().authenticationInfo.ticket)};MSA.A$0.prototype={$0:null,$3:null,$4:!1,$5:!1,$6:!1,$7:null,get_$8:function(){return 1===this.$1},$9:function(){this.$4=!0;this.$E()},$A:function(a,b,c,d){this.$5||(this.$7=this.$3.$9(a,b,this.$2,c,d))},$B:function(){this.$6||(this.$1=0,this.$6=!0,null!=this.$12&&this.$12.invoke(this,ss.EventArgs.Empty),this.$10())},
$C:function(a,b,c,d){MSH.Logger.logWarning(this.$3.get_logContext(),c,String.format("Failed to execute AddressBook method {0}. Response code:{1} Response:{2}",b,a.get_status(),a.toString()));this.$6||(this.$1=d,this.$6=!0,null!=this.$12&&this.$12.invoke(this,ss.EventArgs.Empty),this.$10())},$D:function(a,b,c){this.$C(a,b,c,1)},add_$11:function(a){this.$12=ss.Delegate.combine(this.$12,a)},remove_$11:function(a){this.$12=ss.Delegate.remove(this.$12,a)},$12:null,retry:function(){this.$E()},fail:function(){this.$1=
1;this.$6=!0;this.$10()},abort:function(){var a=this.$7;this.$7=null;this.$5=!0;null!=a&&a.abort()}};MSA.A$2=function(a,b,c,d,e){MSA.A$2.initializeBase(this,[d]);this.$16=d;this.$15=c;this.$14=b;this.$13=a;this.$17=e};MSA.A$2.prototype={$13:null,$14:0,$15:null,$16:null,$17:null,$E:function(){var a=[];if(null!=this.$13){for(var b=ss.IEnumerator.getEnumerator(this.$13);b.moveNext();)for(var c=b.get_current(),c=ss.IEnumerator.getEnumerator(c.addresses);c.moveNext();){var d=c.get_current();a.add(d)}if(0===
a.length){this.fail();return}}a=MC.$create_UpdateIMAvailabilityServiceRequest(this.$16.get_$5().authenticationInfo,MSH.CollectionHelper.toArray(a),this.$15,this.$14);a=MSCo.JsonResponseParser.buildRequest(a);b={};b["Content-Type"]=MSCo.Configuration.get_webActionMethodContentType();(new MSCo.HttpRequest(1,MSCo.Configuration.get_updateIMAvailabilityService(),a,b,ss.Delegate.create(this,this.$F))).execute()},$F:function(a){switch(a.get_status()){case 200:this.$B();break;case 400:case 500:this.$C(a,
"UpdateIMAvailability","UpdateIMAvailabilityServiceCommand.OnResponse",2);break;default:this.$D(a,"UpdateIMAvailability","UpdateIMAvailabilityServiceCommand.OnResponse")}},$10:function(){this.$17.invoke(this.$1)}};MSA.AddressBookService.registerClass("MSA.AddressBookService",null,MC.IAddressBook,MC.IAbortable);MSA.A$1.registerClass("MSA.A$1");MSA.A$0.registerClass("MSA.A$0",null,MC.IAuthenticatedCommand,MC.IAbortable);MSA.A$2.registerClass("MSA.A$2",MSA.A$0);MSA.A$1.$0="MSGR:";MSA.A$1.$1="00000000-0000-0000-0000-000000000000";
Type.registerNamespace("MSI");MSI.I$0=function(a){this.$2=[];this.$2.add(a)};MSI.I$0.prototype={$2:null,$3:null,$4:null,$5:null,$6:!1,add_$7:function(a){this.$8=ss.Delegate.combine(this.$8,a)},remove_$7:function(a){this.$8=ss.Delegate.remove(this.$8,a)},$8:null,$9:function(){this.$5=new MSH.Timer(ss.Delegate.create(this,this.$E),null,1E4,MSH.Timeout.infinite);this.$3=document.createElement("img");this.$3.attachEvent("onload",ss.Delegate.create(this,this.$C));this.$3.attachEvent("onerror",ss.Delegate.create(this,
this.$C));this.$3.src=MSCo.Configuration.get_silentReauthDetectionUrl()},$A:function(a){this.$2.add(a)},$B:function(){window.____ReauthenticationCompleted=ss.Delegate.create(this,this.$D)},$C:function(){1===this.$3.width?(this.$B(),this.$4=document.createElement("iframe"),this.$4.style.display="none",this.$4.src=String.format(MSCo.Configuration.get_silentReauthUrlFormat(),encodeURIComponent(MSCo.Configuration.get_reauthCompletedPageUrl())),document.body.appendChild(this.$4)):this.$F(1)},$D:function(){null!=
this.$5&&(this.$5.dispose(),this.$5=null);this.$F(0)},$E:function(){this.$F(1)},$F:function(a){if(!this.$6){this.$6=!0;null!=this.$4&&(document.body.removeChild(this.$4),this.$4=null);for(var b=ss.IEnumerator.getEnumerator(this.$2);b.moveNext();)b.get_current().invoke(a);null!=this.$8&&this.$8.invoke(this,ss.EventArgs.Empty)}}};MSI.IdentityService=function(){};MSI.IdentityService.prototype={$0:null,reauthenticate:function(a){null==this.$0?(this.$0=new MSI.I$0(a),this.$0.add_$7(ss.Delegate.create(this,
this.$1)),this.$0.$9()):this.$0.$A(a)},$1:function(){this.$0=null}};MSI.I$0.registerClass("MSI.I$0");MSI.IdentityService.registerClass("MSI.IdentityService",null,MC.IIdentityService);Type.registerNamespace("MSCh");MSCh.H$7=function(a,b,c,d,e,f){this.$4=[];this.id=a;this.$0=b;this.$2=d;this.$3=e;this.$4.add(this.$3);this.$6={};a=new MSM.Mri(a);10===a.get_addressType()&&(f=a);this.$1=c.getMessagingContext(this.$3,f,this);this.$5=MSCh.H$3.$F(f,this)};MSCh.H$7.prototype={$0:null,$1:null,$2:null,$3:null,
$4:null,id:null,$5:null,$6:null,$7:!1,$8:!1,$9:!1,$A:null,$B:!1,$C:!1,get_id:function(){return this.id},get_$E:function(){return this.$2},get_$F:function(){return this.$1},get_$10:function(){return this.$0},get_$11:function(){return this.$3},get_$12:function(){return this.$8},set_$12:function(a){return this.$8=a},get_$13:function(){return this.$7},set_$13:function(a){a!==this.$7&&((this.$7=a)||this.$24());return a},get_$14:function(){return this.$4},$15:function(a){!this.$8&&a&&(this.$22(),this.$21());
this.$8=!0},$16:function(a){this.$5.$E();this.$7=!1;this.$28();a&&this.$23()},$17:function(a,b){this.$5.$6(a,b)},$18:function(a,b){this.$5.$9(a,b);MSH.Logger.logTrace(this.$0.get_logContext(),"Chat.Conversation.SendMessage",MSCh.H$5.$2B(a))},$19:function(a){this.$5=a},$1A:function(a){var b=this.id;this.id=a;this.$0.conversationUpdateId(b,a)},$1B:function(a){this.$7!==a&&(this.$7=a,this.$2.onConversationHasUnreadMessagesUpdated(this.id,a));this.$B=!1},$1C:function(){if(!this.$8){for(var a=this.$4.length,
b=Array(a),c=0;c<a;c++)b[c]=MSM.Mri.getIMAddressInfo(this.$4[c]);this.$0.conversationExpose(this.id,b);this.$8=!0}},$1D:function(a){null==this.$2A(a)&&this.$4.add(a)},$1E:function(a){a=this.$2A(a);null!=a&&2<this.$4.length&&(this.$4.remove(a),0===this.$4.length&&(a=this.$20().toConversationId(),this.$0.isValidConversation(a)||this.$1A(a)))},$1F:function(a){return null!=this.$2A(a)},$20:function(){var a=this.$4[0];return a.get_address()===this.get_$11().get_address()?1<this.$4.length?this.$4[1]:null:
a},$21:function(){MSCo.Configuration.get_missedConversationsEnabled()&&!this.get_$12()&&(this.$9=!0,this.$0.getConversationHistory(this.$1.get_to().toConversationId(),ss.Delegate.create(this,this.$29)))},$22:function(){MSCo.Configuration.get_missedConversationsEnabled()&&this.$25(250)},$23:function(){this.$25(252)},$24:function(){this.$C?this.$B=!0:(this.$B=!1,this.$25(251),this.$27())},$25:function(a){a=MSCh.H$5.$28(this.$3,this.get_$F().get_to(),a);this.$5.$9(a,null);MSH.Logger.logTrace(this.$0.get_logContext(),
"Chat.Conversation.SendIMWindowMessage",MSCh.H$5.$2B(a))},$26:function(){this.$C=!1;this.$7?this.$B=!1:this.$B&&this.$24()},$27:function(){null==this.$A?this.$A=new MSH.Timer(ss.Delegate.create(this,this.$26),null,5E3,MSH.Timeout.infinite):this.$A.change(5E3,MSH.Timeout.infinite);this.$C=!0},$28:function(){null!=this.$A&&(this.$A.dispose(),this.$A=null);this.$B=this.$C=!1},$29:function(){this.$9=!1;this.$1C();if(0<Object.getKeyCount(this.$6)){var a=[],b=this.$6,c;for(c in b)a.add(b[c]);Object.clearKeys(this.$6);
MSH.ArrayHelper.sortArrayList(a,ss.Delegate.create(this,function(a,b){return String.compare(a[1].id,b[1].id)}));a[a.length-1][1].isLastHistoryMessage=!0;for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();)b=a.get_current(),this.$5.$A(b[0],b[1])}},onAddressLeft:function(a){this.$5.$8(a);MSH.Logger.logTrace(this.$0.get_logContext(),"Chat.Conversation.OnAddressLeft",a.toString())},onAddressJoined:function(a){this.$5.$7(a);MSH.Logger.logTrace(this.$0.get_logContext(),"Chat.Conversation.OnAddressJoined",
a.toString())},onOpened:function(){this.$5.$C();MSH.Logger.logTrace(this.$0.get_logContext(),"Chat.Conversation.OnOpened","Received OpenIMWindow signal")},onClosed:function(){this.$7=this.$8=!1;this.$5.$D();this.$28();MSH.Logger.logTrace(this.$0.get_logContext(),"Chat.Conversation.OnClosed","Received CloseIMWindow signal")},onMarkedAsRead:function(){this.$1B(!1)},onReceivedMessage:function(a,b){if(this.$8||255!==b.type)(!this.$8||this.$9)&&MSCo.Configuration.get_missedConversationsEnabled()?(this.$21(),
Object.keyExists(this.$6,b.id)||(this.$6[b.id]=[a,b])):b.isHistoryMessage&&!this.$9?(b.isRecentMessage=!0,this.$5.$B(a,b)):this.$5.$A(a,b),MSH.Logger.logTrace(this.$0.get_logContext(),"Chat.Conversation.OnReceivedMessage",MSCh.H$5.$2B(b))},onSendMessageFailed:function(a,b,c){255!==b.type&&(this.$2.onConversationSendMessageFailed(this.get_id(),a,b,c),MSH.Logger.logError(this.$0.get_logContext(),"Chat.Conversation.OnSendMessageFailed",MSCh.H$5.$2B(b)))},$2A:function(a){for(var b=ss.IEnumerator.getEnumerator(this.$4);b.moveNext();){var c=
b.get_current();if(a.get_address()===c.get_address()&&a.get_addressType()===c.get_addressType())return c}return null}};MSCh.ConversationService=function(a,b,c){this.$3=a;this.$0=b;this.$1=c;this.conversations={};this.$2=new MSCh.MessagingService(a,this,this.$0,ss.Delegate.create(this,this.onIncomingRequest))};MSCh.ConversationService.prototype={conversations:null,$0:null,$1:null,$2:null,$3:null,$4:null,get_cid:function(){return this.$3.cid},get_liveId:function(){return this.$3.liveId},get_skypeId:function(){return this.$3.skypeId},
get_localEndpoint:function(){return this.$3.endpointId},isValidConversation:function(a){return null!=this.$5(a)},$5:function(a){return Object.keyExists(this.conversations,a)?this.conversations[a]:null},conversationCreate:function(a,b,c){if(null==this.$5(a)){var d=this.$8(b.type,null),b=MSM.Mri.create(b.address,b.type,null,null,b.network),d=new MSCh.H$7(a,this,this.$2,this,d,b);d.$15(c);this.conversations[a]=d}else this.conversations[a].$15(c)},conversationSendMessage:function(a,b,c){a=this.$5(a);
null!=a&&a.$18(b,c)},conversationInviteAddress:function(a,b,c){a=this.$5(a);null!=a&&a.$17(MSM.Mri.createFromIMAddressInfo(b),c)},conversationClose:function(a,b){var c=this.$5(a);null!=c&&(c.$16(b),2<c.get_$14().length?delete this.conversations[a]:c.set_$12(!1))},conversationExpose:function(a,b){this.$0.conversationExpose(a,b);var c=this.$5(a);null!=c&&c.set_$12(!0)},conversationUpdateId:function(a,b){var c=this.conversations[a],d=Object.keyExists(this.conversations,b);d&&c.set_$12(this.conversations[b].get_$12());
this.conversations[b]=c;delete this.conversations[a];c.get_$12()&&!d&&this.$0.conversationUpdateId(a,b)},conversationUpdateHasUnreadMessages:function(a,b){var c=this.$5(a);null!=c&&c.set_$13(b)},getConversationHistory:function(a,b){this.$0.getConversationHistory(a,b)},sendDatagram:function(a,b,c){this.$0.sendDatagram(a,b,c)},onDatagramReceived:function(a){this.$2.onDatagramReceived(a)},onIncomingRequest:function(a,b){var c=this.$8(a.get_addressType(),a.get_appId()),d=a.toConversationId(),e=MSM.Mri.create(a.get_address(),
a.get_addressType(),null,a.get_appId(),a.get_networkId()),c=new MSCh.H$7(d,this,this.$2,this,c,e);if(10===a.get_addressType()&&0===b.datagramType)return c.$16(!1),!1;this.conversations[d]=c;return!0},close:function(a){a?this.$6():this.$7()},get_logContext:function(){null==this.$4&&(this.$4=new MC.LogContext(this.$3.liveId));return this.$4},set_logContext:function(a){return this.$4=a},onConversationInviteAddressCompleted:function(a,b,c,d){this.$1.onConversationInviteAddressCompleted(a,b,c,d)},onConversationAddressJoined:function(a,
b){this.$1.onConversationAddressJoined(a,b)},onConversationAddressLeft:function(a,b){this.$1.onConversationAddressLeft(a,b)},onConversationMessageReceived:function(a,b){this.$1.onConversationMessageReceived(a,b)},onRecentMessageReceived:function(a,b){this.$1.onConversationMessageReceived(a,b)},onConversationHasUnreadMessagesUpdated:function(a,b){this.$1.onConversationHasUnreadMessagesUpdated(a,b)},onConversationClosed:function(a){this.$1.onConversationClosed(a)},onConversationSendMessageFailed:function(a,
b,c,d){var e=1;switch(b){case 2:e=5;break;case 3:e=6;break;case 4:e=7}this.$1.onConversationSendMessageFailed(a,e,c,d)},onLogRequestReceived:function(a,b){this.$1.onLogRequestReceived(a,b)},$6:function(){var a=[],b=this.conversations,c;for(c in b)a.add(c);for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();)b=a.get_current(),this.conversationClose(b,!1)},$7:function(){var a=[],b=this.conversations,c;for(c in b)a.add(this.$5(c));for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();)b=a.get_current(),
2<b.get_$14().length&&(b.$16(!1),delete this.conversations[b.get_id()],this.$1.onConversationClosed(b.get_id()))},$8:function(a,b){var c=null;return c=11===a?MSM.Mri.create(this.get_cid(),11,this.get_localEndpoint(),b,null):8===a&&!String.isNullOrEmpty(this.get_skypeId())?MSM.Mri.create(this.get_skypeId(),8,this.get_localEndpoint(),null,null):MSM.Mri.create(this.get_liveId(),1,this.get_localEndpoint(),null,null)}};MSCh.H$4=function(){};MSCh.H$4.$0=function(a){switch(a){case 1:return"1";case 255:return"2";
case 2:return"3";default:return"0"}};MSCh.H$4.$2=function(a){return a.replace(MSCh.H$4.$3,function(a){return MSCh.H$4.$4(a)})};MSCh.H$4.$4=function(a){switch(a){case ":-/":return":S";case "O:-)":return"(A)";case ":-&":return"+o(";case "(:|":return"|-)";case ":X":return"(L)";case ">:)":return"(6)";case "X-(":return":@";case ":((":return":'(";case ":-B":return"8-|";case ":-$":return":-#";case ':">':return":$";case ":-?":return"*-)";case "B-)":return"(H)";case ":-*":return"(K)";case "/:)":return"^o)";
case "8-|":return"8-)";case "=((":return"(U)";case "<:-P":return"<:o)";default:return a}};MSCh.H$5=function(a){this.$14=a};MSCh.H$5.$15=function(a){switch(a){case 250:case 252:case 251:return!0;default:return!1}};MSCh.H$5.$16=function(a){a.get_headers();a.get_body();a=a.getHeader("Message-Type");switch(a){case "Text":return 1;case "Signal/AudioMeta":return 5;case "Signal/AudioTunnel":return 4;case "Signal/RequestLogs":return 249;case "Signal/OpenIMWindow":return 250;case "Signal/CloseIMWindow":return 252;
case "Signal/MarkIMWindowRead":return 251;case "Nudge":return 2;case "Control/Typing":return 255;case "ApplicationMessage":return 3;case "Event/Call":return 6;default:return a.startsWith("Text/")?1:0}};MSCh.H$5.$17=function(a,b){var c=MSCh.H$5.$16(a),d=null,e=a.get_headers(),f=a.get_body();switch(c){case 3:d=MSCh.H$5.$20(e,f);break;case 250:case 252:case 251:d=MSCh.H$5.$26(e,f,c);break;case 1:d=MSCh.H$5.$21(e,f);break;case 5:d=MSCh.H$5.$22(b,f);break;case 4:d=MSCh.H$5.$23(b,f);break;case 6:d=MSCh.H$5.$24(f);
break;case 249:d=MSCh.H$5.$25(f);break;case 2:case 255:d=MC.$create_MessageInfo(c,null)}if(null!=d&&(d.id=a.getHeader("Message-ID"),d.timestamp=MC.$create_DateInfo(MSCh.H$5.$19(a)),d.displayNameOverride=a.getHeader("IM-Display-Name"),2===b.get_service()))switch(b.get_channel()){case 2:d.isOfflineMessage=!0;break;case 4:d.isHistoryMessage=!0}return d};MSCh.H$5.$18=function(a){a=new MSCh.H$5(a);return new MSM.MessagingLayer(a.$1A(),a.$1E())};MSCh.H$5.$19=function(a){a=a.getHeader("Original-Arrival-Time");
return String.isNullOrEmpty(a)?Date.get_now():MSH.DateTimeHelper.parseTimeStamp(a)};MSCh.H$5.$20=function(a,b){var c=a["WebApp-Message-ID"];if(String.isNullOrEmpty(c))return MSH.Logger.logError(MC.LogContext.get_global(),"Chat.MessageInfoHandler.ParseMessage","AppMessage does not have valid WebApp-Message-ID header"),null;c=MC.$create_ApplicationMessageInfo(MSH.StringHelper.toLowerCase(c),b);return MC.$create_MessageInfo(3,c)};MSCh.H$5.$21=function(a,b){if(String.isNullOrEmpty(b))return null;var c=
null,d=a["X-MMS-IM-Format"];String.isNullOrEmpty(d)||(c=MSCh.H$5.$29(d));c=MC.$create_TextMessageInfo(b,c);d=a["Safe-Url"];String.isNullOrEmpty(d)||(c.safeUrl=d);return MC.$create_MessageInfo(1,c)};MSCh.H$5.$22=function(a,b){if(String.isNullOrEmpty(b))return null;var c=MC.$create_AudioMetaMessageInfo(b,a.get_from().get_endpointId());return MC.$create_MessageInfo(5,c)};MSCh.H$5.$23=function(a,b){if(String.isNullOrEmpty(b))return null;var c=MC.$create_AudioTunnelMessageInfo(b,a.get_from().get_endpointId());
return MC.$create_MessageInfo(4,c)};MSCh.H$5.$24=function(a){if(String.isNullOrEmpty(a))return null;a=parseInt(a);if(!(0<=a))return null;a=MC.$create_CallEventMessageInfo(a);return MC.$create_MessageInfo(6,a)};MSCh.H$5.$25=function(a){var b=ss.XmlDocumentParser.parse(a).documentElement;if(null==b||!MSH.XmlHelper.isElement(b,"LogRequest"))return null;for(var c=a=null,b=ss.IEnumerator.getEnumerator(b.childNodes);b.moveNext();){var d=b.get_current();switch(d.nodeName){case "Url":a=d.text;break;case "AuthToken":c=
d.text}}if(String.isNullOrEmpty(a)||String.isNullOrEmpty(c))return null;a=MC.$create_LogRequestMessageInfo(a,c);return MC.$create_MessageInfo(249,a)};MSCh.H$5.$26=function(a,b,c){if(String.isNullOrEmpty(b))return null;var d=a=String.Empty,b=b.split("/"),a=b[0];if(2===b.length)d=b[1];else if(1===b.length){b=MSM.Mri.tryParse(a);if(null==b||10!==b.get_addressType())return null;d=a}else return null;a=MC.$create_SignalMessageInfo(a,d);return MC.$create_MessageInfo(c,a)};MSCh.H$5.$27=function(a,b){var c=
MSCh.H$5.$28(a,b,250);return(new MSCh.H$5(c)).$1F()};MSCh.H$5.$28=function(a,b,c){var d=null,e=null;10===b.get_addressType()?d=e=b.toConversationId():(d=a.toConversationId(),e=b.toConversationId());a=0<String.compare(d,e)?MC.$create_SignalMessageInfo(e,d):MC.$create_SignalMessageInfo(d,e);return MC.$create_MessageInfo(c,a)};MSCh.H$5.$29=function(a){for(var b=String.Empty,c=0,d=0,e=!1,a=a.split(";"),a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var f=a.get_current(),g=MSH.StringHelper.splitLimit(f,
"=",2);2===g.length&&(f=g[0].trim(),g=MSH.UriHelper.decode(g[1].trim()),"FN"===f&&MSCh.H$6.$2(g)?b=g:"EF"===f?(0<=g.indexOf("B")&&(d|=1),0<=g.indexOf("I")&&(d|=2),0<=g.indexOf("U")&&(d|=8),0<=g.indexOf("S")&&(d|=4)):"CO"===f?c=MSH.ConvertHelper.parseHexInt(g)&16777215:"RL"===f&&(e="1"===g))}return MC.$create_TextMessageFormatInfo(c,b,d,e)};MSCh.H$5.$2A=function(a){var b=new ss.StringBuilder;b.append("FN=");b.append(MSH.UriHelper.encode(a.fontFamily));b.append("; EF=");0<(a.fontStyle&1)&&b.append("B");
0<(a.fontStyle&2)&&b.append("I");0<(a.fontStyle&4)&&b.append("S");0<(a.fontStyle&8)&&b.append("U");var c=MSH.ConvertHelper.uInt32ToHexString(a.fontColor);b.append("; CO=");b.append(MSH.UriHelper.encode(c));a.rightToLeft&&b.append("; RL=1");return b.toString()};MSCh.H$5.$2B=function(a){var b=new ss.StringBuilder;b.append(String.format("Message Type: {0} ",MC.MessageInfoType.toString(a.type)));1===a.type?b.append(String.format("Text: {0}",a.info.text)):5===a.type?b.append(String.format("AudioMeta: {0}",
a.info.body)):4===a.type&&b.append(String.format("AudioTunnel: {0}",a.info.sipBody));if(MSCh.H$5.$15(a.type)){var c=a.info;b.append(String.format("Participating Users: {0}, {1}",c.firstMri,c.secondMri))}null!=a.sender&&b.append(String.format("Sender: {0}:{1} ",a.sender.type,a.sender.address));return b.toString()};MSCh.H$5.prototype={$14:null,$1A:function(){var a={};a["Content-Type"]=this.$1B();a["Message-Type"]=this.$1C();a["IM-Display-Name"]=this.$14.displayNameOverride;this.$1D(a);return a},$1B:function(){switch(this.$14.type){case 1:case 5:case 4:case 250:case 252:case 251:case 2:case 255:case 6:return"text/plain; charset=UTF-8";
case 3:return"application/x-msmsgr-webapp-message";default:return null}},$1C:function(){switch(this.$14.type){case 1:return"Text";case 5:return"Signal/AudioMeta";case 4:return"Signal/AudioTunnel";case 3:return"ApplicationMessage";case 2:return"Nudge";case 255:return"Control/Typing";case 250:return"Signal/OpenIMWindow";case 252:return"Signal/CloseIMWindow";case 251:return"Signal/MarkIMWindowRead";case 6:return"Event/Call";default:return null}},$1D:function(a){switch(this.$14.type){case 1:var b=this.$14.info;
null!=b.format&&(a["X-MMS-IM-Format"]=MSCh.H$5.$2A(b.format));break;case 3:b=this.$14.info,null!=b&&(a["WebApp-Message-ID"]=b.id)}},$1E:function(){switch(this.$14.type){case 1:return this.$14.info.text;case 5:return this.$14.info.body;case 4:return this.$14.info.sipBody;case 3:return this.$14.info.content;case 6:return this.$14.info.duration.toString();case 250:case 252:case 251:return this.$1F();default:return String.Empty}},$1F:function(){var a=this.$14.info.firstMri,b=this.$14.info.secondMri;return a===
b?a:a+"/"+b}};MSCh.H$6=function(){};MSCh.H$6.$0=function(a){return MSH.ConvertHelper.parseInt(a)};MSCh.H$6.$1=function(){for(var a=Array(4),b=0;4>b;b++)a[b]=Math.round(16777215*Math.random()).toString(16).padLeft(8,"0");return"{"+a[0]+"-"+MSH.StringHelper.substring(a[1],0,4)+"-"+MSH.StringHelper.substring(a[1],4,4)+"-"+MSH.StringHelper.substring(a[2],0,4)+"-"+MSH.StringHelper.substring(a[2],4,4)+a[3]+"}"};MSCh.H$6.$2=function(a){return!MSH.RegexHelper.isMatch("@|(expression)|\\(|\\\\",a,"gi")};MSCh.PersistencedConversationService=
function(a,b,c,d){MSCh.PersistencedConversationService.initializeBase(this,[a,b,c]);this.$9=d};MSCh.PersistencedConversationService.prototype={$9:null,conversationCreate:function(a,b,c){MSCh.PersistencedConversationService.callBaseMethod(this,"conversationCreate",[a,b,c]);this.$C()},conversationExpose:function(a,b){MSCh.PersistencedConversationService.callBaseMethod(this,"conversationExpose",[a,b]);this.$C()},conversationSendMessage:function(a,b,c){MSCh.PersistencedConversationService.callBaseMethod(this,
"conversationSendMessage",[a,b,c]);this.$D(a,b)},conversationInviteAddress:function(a,b,c){MSCh.PersistencedConversationService.callBaseMethod(this,"conversationInviteAddress",[a,b,c]);this.$C()},conversationClose:function(a,b){MSCh.PersistencedConversationService.callBaseMethod(this,"conversationClose",[a,b]);this.$C()},conversationUpdateId:function(a,b){MSCh.PersistencedConversationService.callBaseMethod(this,"conversationUpdateId",[a,b]);this.$C();this.$F(a,b)},conversationUpdateHasUnreadMessages:function(a,
b){MSCh.PersistencedConversationService.callBaseMethod(this,"conversationUpdateHasUnreadMessages",[a,b]);this.$C()},onIncomingRequest:function(a,b){var c=MSCh.PersistencedConversationService.callBaseMethod(this,"onIncomingRequest",[a,b]);c&&this.$C();return c},close:function(a){var b=this.$9;this.$9=null;MSCh.PersistencedConversationService.callBaseMethod(this,"close",[a]);this.$9=b},onConversationMessageReceived:function(a,b){MSCh.PersistencedConversationService.callBaseMethod(this,"onConversationMessageReceived",
[a,b]);this.$D(a,b)},onRecentMessageReceived:function(a,b){MSCh.PersistencedConversationService.callBaseMethod(this,"onRecentMessageReceived",[a,b]);null!=this.$9&&this.$9.saveRecentMessage(a,b)},onConversationHasUnreadMessagesUpdated:function(a,b){MSCh.PersistencedConversationService.callBaseMethod(this,"onConversationHasUnreadMessagesUpdated",[a,b]);this.$C()},onConversationClosed:function(a){MSCh.PersistencedConversationService.callBaseMethod(this,"onConversationClosed",[a]);this.$C()},onConversationAddressJoined:function(a,
b){MSCh.PersistencedConversationService.callBaseMethod(this,"onConversationAddressJoined",[a,b]);this.$C()},onConversationAddressLeft:function(a,b){MSCh.PersistencedConversationService.callBaseMethod(this,"onConversationAddressLeft",[a,b]);this.$C()},onConversationInviteAddressCompleted:function(a,b,c,d){MSCh.PersistencedConversationService.callBaseMethod(this,"onConversationInviteAddressCompleted",[a,b,c,d]);this.$C()},onPersistedConversationsLoaded:function(a){for(a=ss.IEnumerator.getEnumerator(a.conversations);a.moveNext();){var b=
a.get_current();this.$A(b)}},$A:function(a){MSCh.PersistencedConversationService.callBaseMethod(this,"conversationCreate",[a.id,a.roster[1],!1]);a.hasUnreadMessages&&this.conversations[a.id].set_$13(!0);MSCh.H$8.$1(a,this.conversations)},$B:function(){var a=MSCh.H$8.$2(this.conversations,ss.Delegate.create(this,this.$5)),b=MC.$create_PersistedConversations();b.conversations=MSH.CollectionHelper.toArray(a);return b},$C:function(){null!=this.$9&&this.$9.set_conversations(this.$B())},$D:function(a,b){null!=
this.$9&&this.$9.saveConversationMessage(a,b)},$E:function(a){null!=this.$9&&this.$9.deletePersistedConversationMessages(a)},$F:function(a,b){null!=this.$9&&this.$9.updatePersistedConversationMessageIds(a,b)}};MSCh.H$8=function(){};MSCh.H$8.$0=function(a){for(var b=a.get_$14().length,c=Array(b),d=Array(b),e=0;e<b;e++)c[e]=MSM.Mri.getIMAddressInfo(a.get_$14()[e]),d[e]=a.get_$14()[e].toString();return MC.$create_PersistedConversation(a.get_id(),MSM.Mri.getIMAddressInfo(a.get_$11()),c,d,a.get_$13())};
MSCh.H$8.$1=function(a,b){var c=b[a.id];if(null!=c)for(var d=ss.IEnumerator.getEnumerator(a.rosterMri);d.moveNext();){var e=d.get_current();c.$1D(new MSM.Mri(e))}};MSCh.H$8.$2=function(a,b){var c=[];if(null!=a)for(var d in a){var e=b.invoke(d);null!=e&&e.get_$12()&&c.add(MSCh.H$8.$0(e))}return c};MSCh.H$3=function(a){this.$0=a;this.$2=a.get_$F();this.$1=a.get_$E()};MSCh.H$3.$F=function(a,b){var c=null;switch(a.get_addressType()){case 0:case 2:case 1:case 11:case 8:case 16:case 4:case 32:case 13:c=
new MSCh.H$B(a,b);break;case 10:c=MSCh.H$9.$11(b)}return c};MSCh.H$3.prototype={$0:null,$1:null,$2:null,get_$3:function(){return this.$0},get_$4:function(){return this.$1},get_$5:function(){return this.$2},$9:function(a,b){this.get_$5().sendMessage(a,b)},$A:function(a,b){this.$0.get_$12()||this.$0.$1C();b.sender=MSM.Mri.getIMAddressInfo(a);this.$0.get_$10().onConversationMessageReceived(this.$0.get_id(),b);if(255!==b.type&&3!==b.type){var c=b.sender.address===this.$0.get_$11().get_address()&&b.sender.type===
this.$0.get_$11().get_addressType();this.$0.$1B(!c&&!b.isHistoryMessage)}},$B:function(a,b){this.$0.get_$12()||this.$0.$1C();b.sender=MSM.Mri.getIMAddressInfo(a);this.$0.get_$10().onRecentMessageReceived(this.$0.get_id(),b)},$C:function(){},$D:function(){this.$0.get_$10().onConversationClosed(this.$0.get_id())},$E:function(){this.$2.close()}};MSCh.H$9=function(a){MSCh.H$9.initializeBase(this,[a]);this.$10={}};MSCh.H$9.$11=function(a){return new MSCh.H$9(a)};MSCh.H$9.$12=function(a,b,c,d){d=new MSCh.H$9(d);
null!=a&&10!==a.get_addressType()&&d.get_$5().$10(a);null!=b&&(d.$13(b,c),a=[b],d.get_$5().inviteAddress(a));return d};MSCh.H$9.prototype={$10:null,$6:function(a,b){Object.keyExists(this.$10,a.get_address())||(this.get_$3().get_$11().equals(a,1)||this.$13(a,b),this.get_$5().inviteAddress([a]))},$7:function(a){(new MSM.Mri(this.get_$3().get_id())).equals(this.get_$5().get_to(),1)||this.get_$3().$1A(this.get_$5().get_to().toConversationId());if(!this.get_$3().$1F(a)){this.get_$3().$1D(a);var b=MSM.Mri.getIMAddressInfo(a);
if(Object.keyExists(this.$10,a.get_address())){var c=this.$15(a);this.get_$4().onConversationInviteAddressCompleted(this.get_$3().get_id(),0,b,c);this.$14(a)}if(this.get_$3().get_$12())this.get_$4().onConversationAddressJoined(this.get_$3().get_id(),b);else this.get_$3().$1C()}},$8:function(a){this.get_$3().$1F(a)&&(this.get_$3().$1E(a),this.$14(a),a=MSM.Mri.getIMAddressInfo(a),this.get_$4().onConversationAddressLeft(this.get_$3().get_id(),a))},$13:function(a,b){this.$10[a.get_address()]=[a,b]},$14:function(a){Object.keyExists(this.$10,
a.get_address())&&delete this.$10[a.get_address()]},$15:function(a){return Object.keyExists(this.$10,a.get_address())?this.$10[a.get_address()][1]:null}};MSCh.H$B=function(a,b){MSCh.H$B.initializeBase(this,[b]);this.$10=a;this.get_$3().$1D(a)};MSCh.H$B.prototype={$10:null,$6:function(a,b){var c=MSCh.H$9.$12(this.$10,a,b,this.get_$3());this.get_$3().$19(c)},$7:function(a){var b=MSCh.H$9.$11(this.get_$3());this.get_$3().$19(b);b.$7(a)},$8:function(){}};MSCh.IMessagingService=function(){};MSCh.IMessagingService.registerInterface("MSCh.IMessagingService");
MSCh.IMessagingEvents=function(){};MSCh.IMessagingEvents.registerInterface("MSCh.IMessagingEvents");MSCh.H$2=function(a){this.$2=a};MSCh.H$2.prototype={add_$0:function(a){this.$1=ss.Delegate.combine(this.$1,a)},remove_$0:function(a){this.$1=ss.Delegate.remove(this.$1,a)},$1:null,$2:null,$3:!1,get_$4:function(){return this.$2},$5:function(){this.$6()},$7:function(){this.$3||(this.$3=!0,null!=this.$1&&this.$1.invoke(this,ss.EventArgs.Empty))}};MSCh.H$A=function(a,b,c){MSCh.H$A.initializeBase(this,[c]);
this.$9=a;this.$8=b};MSCh.H$A.prototype={$8:null,$9:null,$A:null,$B:null,get_$C:function(){return this.$8},get_$D:function(){null==this.$A&&(this.$A=new MSM.RoutingLayer(this.$8.get_to(),this.$8.get_$A()));return this.$A},get_$E:function(){null==this.$B&&(this.$B=new MSM.ReliabilityLayer);return this.$B},$F:function(a){this.$9.sendDatagram(a,ss.Delegate.create(this,this.$10),this.get_$4())},$10:function(){this.$7()}};MSCh.H$C=function(a,b){MSCh.H$C.initializeBase(this,[null,a,null]);this.$11=b};MSCh.H$C.prototype=
{$11:null,$6:function(){switch(this.$11.get_pageType()){case 0:var a=this.$11.get_routing(),b=this.$11.get_content(),a=MSCh.H$5.$17(b,a);if(null==a)break;this.get_$C().$B(this.$11.get_routing().get_from(),this.$11.get_routing().get_to(),a);break;case 1:a=this.$11.get_content();this.get_$C().$F(this.$11.get_routing().get_from(),this.$11.get_routing().get_to(),a.get_pendingUsers(),a.get_users());this.get_$C().$E(this.$11.get_routing().get_from(),this.$11.get_routing().get_to(),a.get_users());break;
case 2:a=this.$11.get_content(),this.get_$C().$D(this.$11.get_routing().get_from(),this.$11.get_routing().get_to(),a.get_users())}}};MSCh.H$10=function(a,b,c){MSCh.H$10.initializeBase(this,[a,b,null]);this.$15=MSM.Mri.create("00000000-0000-0000-0000-000000000000@live.com",10,null,null,null);this.$16=c};MSCh.H$10.prototype={$15:null,$16:null,get_$14:function(){if(String.isNullOrEmpty(this.get_$C().get_$A().get_appId()))return String.Empty;var a=String.format("<applicationId>{0}</applicationId>",this.get_$C().get_$A().get_appId());
return String.format("<circle><roster><id>IM</id>{0}</roster></circle>",a)},get_$D:function(){return new MSM.RoutingLayer(this.$15,MSCh.H$10.callBaseMethod(this,"get_$D").get_from())},$10:function(a,b){if(0===a){var c=MSM.PagedMessage.createPagedMessage(b.datagramType,b.payload);this.$16.invoke(!0,c.get_routing().get_from())}else this.$16.invoke(!1,null);MSCh.H$10.callBaseMethod(this,"$10",[a,b])}};MSCh.H$F=function(a,b){MSCh.H$F.initializeBase(this,[a,b,null])};MSCh.H$F.prototype={$6:function(){var a=
String.format("/circle/roster(IM)/user({0}:{1})",this.get_$D().get_from().get_addressType(),this.get_$D().get_from().get_address()),a=new MSM.PublicationLayer(a,1,String.Empty),a=new MSM.PagedMessage(2,this.get_$D(),this.get_$E(),a),a=MC.$create_DatagramInfo(2,a.payLoad());this.$F(a)}};MSCh.H$D=function(a,b,c){MSCh.H$D.initializeBase(this,[a,b,null]);this.$12=c};MSCh.H$D.prototype={$12:null,get_$14:function(){for(var a=new ss.StringBuilder,b=0;b<this.$12.length;b++)a.append(String.format("<user><id>{0}:{1}</id></user>",
this.$12[b].get_addressType(),this.$12[b].get_address()));return String.format("<circle><roster><id>IM</id>{0}</roster></circle>",a.toString())},$6:function(){var a=new MSM.PublicationLayer("/circle",1,this.get_$14()),a=new MSM.PagedMessage(1,this.get_$D(),this.get_$E(),a),a=MC.$create_DatagramInfo(1,a.payLoad());this.$F(a)}};MSCh.H$E=function(a,b,c,d){MSCh.H$E.initializeBase(this,[a,b,d]);this.$11=c};MSCh.H$E.prototype={$11:null,$6:function(){var a=this.get_$D();250===this.$11.type||252===this.$11.type||
251===this.$11.type?(a=new MSM.RoutingLayer(MSM.Mri.create(this.get_$D().get_from().get_address(),this.get_$D().get_from().get_addressType(),null,null,null),this.get_$D().get_from()),a.set_service(4),a.set_disableSelfFanOut(!0)):null!=this.$11.targetEndpointId&&(a=new MSM.RoutingLayer(MSM.Mri.create(this.get_$D().get_to().get_address(),this.get_$D().get_to().get_addressType(),this.$11.targetEndpointId,null,null),this.get_$D().get_from()),a.set_disableSelfFanOut(!0));this.$11.isOfflineMessage&&(a.set_service(2),
a.set_channel(2));if(16===a.get_to().get_addressType()||4===a.get_to().get_addressType())a.set_service(2),a.set_channel(3);var b=MSCh.H$5.$18(this.$11);b.set_appId(this.get_$C().get_$A().get_appId());a=new MSM.PagedMessage(0,a,this.get_$E(),b);a=MC.$create_DatagramInfo(0,a.payLoad());this.$F(a)},$10:function(a,b){5===a&&1===this.$11.type&&400>=this.$11.info.text.length&&(this.$11.isOfflineMessage=!0,this.get_$C().sendMessage(this.$11,this.get_$4()),a=0);0!==a&&this.get_$C().$C(a,this.$11,this.get_$4());
MSCh.H$E.callBaseMethod(this,"$10",[a,b])}};MSCh.MessagingContext=function(a,b,c,d,e){this.$0=a;this.$1=c;this.$2=b;this.$3=d;this.$4=e;this.$9=[];10===e.get_addressType()&&(this.$7=!0)};MSCh.MessagingContext.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:!1,$7:!1,$8:!1,$9:null,get_$A:function(){return this.$3},get_to:function(){return this.$4},sendMessage:function(a,b){var c=new MSCh.H$E(this.$0,this,a,b);this.$11(c)},inviteAddress:function(a){this.$17(a)},close:function(){this.$19()},
$B:function(a,b,c){c.sender=MSM.Mri.getIMAddressInfo(a);this.$3.equals(a,1)&&(c.isOfflineMessage=!1);if(!(250===c.type||252===c.type||251===c.type))this.$1.onReceivedMessage(a,c)},$C:function(a,b,c){this.$1.onSendMessageFailed(a,b,c)},$D:function(a,b,c){for(a=ss.IEnumerator.getEnumerator(c);a.moveNext();)b=a.get_current(),this.$1.onAddressLeft(b)},$E:function(a,b,c){for(a=ss.IEnumerator.getEnumerator(c);a.moveNext();)b=a.get_current(),this.$3.equals(b,1)&&!this.$8&&null!=this.$5?(this.$18(this.$5),
this.$8=!0):(this.$7||this.$15(this.$4),this.$1.onAddressJoined(b))},$F:function(a,b,c,d){1===c.length&&(1===d.length&&this.$3.equals(c[0],1))&&(this.$4=a,this.$0.updateSession(d[0],a));for(a=ss.IEnumerator.getEnumerator(c);a.moveNext();)if(b=a.get_current(),this.$3.equals(b,1)){this.$18(b);break}},$10:function(a){this.$5=a},$11:function(a){a.$5()},$12:function(a){if(this.$3.equals(a,1))this.$1.onOpened()},$13:function(a){this.$3.equals(a,1)&&(this.close(),this.$1.onClosed())},$14:function(a){if(this.$3.equals(a,
1))this.$1.onMarkedAsRead()},$15:function(a){if(!this.$7&&10===a.get_addressType()){this.$7=!0;for(a=ss.IEnumerator.getEnumerator(this.$9);a.moveNext();){var b=a.get_current();this.$17(b)}this.$9.clear()}},$16:function(a,b){a?(this.$0.updateSession(this.$4,b),this.$4=b):this.$6=!1},$17:function(a){if(this.$7)for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current();this.$18(b)}else this.$9.add(a),this.$6||(this.$6=!0,a=new MSCh.H$10(this.$0,this,ss.Delegate.create(this,this.$16)),
this.$11(a))},$18:function(a){a=new MSCh.H$D(this.$0,this,[a]);this.$11(a)},$19:function(){if(this.$7){var a=new MSCh.H$F(this.$0,this);this.$11(a);this.$0.deleteSession(this.$4)}}};MSCh.MessagingService=function(a,b,c,d){this.$0=a;this.$1=b;this.$4=c;this.$3=d;this.$2={}};MSCh.MessagingService.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,getMessagingContext:function(a,b,c){var d=this.$6(b);null==d&&(d=new MSCh.MessagingContext(this,this.$4,c,a,b),this.$2[this.$5(b)]=d);return d},onDatagramReceived:function(a){var b=
null,c=null,b=MSM.PagedMessage.createPagedMessage(a.datagramType,a.payload);if(null!=b){var c=b.get_routing().get_from(),d=b.get_routing().get_to();if(0===b.get_pageType()){var e=b.get_routing(),f=b.get_content();if(this.$A(e.get_to())&&this.$A(e.get_from())){c=MSCh.H$5.$16(f);if(249===c){c=MSCh.H$5.$25(f.get_body());if(null==c)return;b=c.info;this.$1.onLogRequestReceived(b.uploadUrl,b.authToken);return}if(!MSCh.H$5.$15(c))return;c=MSCh.H$5.$26(f.get_headers(),f.get_body(),c);if(null==c)return;d=
c.info;c=MSM.Mri.tryParse(d.firstMri);d=MSM.Mri.tryParse(d.secondMri);if(null==c||null==d)return}}1===b.get_pageType()&&(f=b.get_content(),1===f.get_notificationType()&&(1===f.get_pendingUsers().length&&1===f.get_users().length)&&(c=f.get_users()[0],d=f.get_pendingUsers()[0]));c=this.$8(c,d);a=this.$7(c,a);null!=a&&(new MSCh.H$C(a,b)).$5()}},sendDatagram:function(a,b,c){this.$1.sendDatagram(a,b,c)},shutdown:function(){},updateSession:function(a,b){var c=this.$6(a);null!=c&&(delete this.$2[this.$5(a)],
this.$2[this.$5(b)]=c)},deleteSession:function(a){null!=this.$6(a)&&delete this.$2[this.$5(a)]},$5:function(a){return String.format("{0}:{1}",a.get_addressType(),a.get_address())},$6:function(a){a=this.$5(a);return Object.keyExists(this.$2,a)?this.$2[a]:null},$7:function(a,b){var c=this.$6(a);null==c&&this.$3.invoke(a,b)&&(c=this.$6(a),null==c&&MSH.Logger.logError(this.$1.get_logContext(),"Chat.MessagingService.OnDatagramReceived","Cannot obtain messaging context for: "+a.toString()));return c},$8:function(a,
b){var c=a;if(10===a.get_addressType())return a;if(10===b.get_addressType())return b;1===a.get_addressType()?c=0===String.compare(this.$0.liveId,a.get_address())?b:a:8===a.get_addressType()?c=0===String.compare(this.$0.skypeId,a.get_address())?b:a:11===a.get_addressType()&&(c=0===String.compare(this.$0.cid,a.get_address())?b:a);return c},$9:function(a,b){var c=null,c=0===String.compare(this.$0.liveId,a.address)&&1===a.type?b:a;return MSM.Mri.createFromIMAddressInfo(c)},$A:function(a){return MSM.Mri.create(this.$0.liveId,
1,null,null,a.get_networkId()).equals(a,1)}};MSCh.H$7.registerClass("MSCh.H$7",null,MSCh.IMessagingEvents);MSCh.ConversationService.registerClass("MSCh.ConversationService",null,MC.IConversationService,MC.IConversationEvents);MSCh.H$4.registerClass("MSCh.H$4");MSCh.H$5.registerClass("MSCh.H$5");MSCh.H$6.registerClass("MSCh.H$6");MSCh.PersistencedConversationService.registerClass("MSCh.PersistencedConversationService",MSCh.ConversationService,MC.IPersistedConversationService);MSCh.H$8.registerClass("MSCh.H$8");
MSCh.H$3.registerClass("MSCh.H$3");MSCh.H$9.registerClass("MSCh.H$9",MSCh.H$3);MSCh.H$B.registerClass("MSCh.H$B",MSCh.H$3);MSCh.H$2.registerClass("MSCh.H$2");MSCh.H$A.registerClass("MSCh.H$A",MSCh.H$2);MSCh.H$C.registerClass("MSCh.H$C",MSCh.H$A);MSCh.H$D.registerClass("MSCh.H$D",MSCh.H$A);MSCh.H$10.registerClass("MSCh.H$10",MSCh.H$D);MSCh.H$F.registerClass("MSCh.H$F",MSCh.H$A);MSCh.H$E.registerClass("MSCh.H$E",MSCh.H$A);MSCh.MessagingContext.registerClass("MSCh.MessagingContext");MSCh.MessagingService.registerClass("MSCh.MessagingService",
null,MSCh.IMessagingService);MSCh.H$4.$3=RegExp(':-/|O:-\\)|:-&|\\(:\\||:X|>:\\)|X-\\(|:\\(\\(|:-B|:-\\$|:">|:-\\?|B-\\)|:-\\*|/:\\)|8-\\||=\\(\\(|<:-P',"ig");MSCh.H$D.$13="<circle><roster><id>IM</id>{0}</roster></circle>";Type.registerNamespace("MSCr");MSCr.O$0=function(){};MSCr.O$0.prototype={$0:0,$1:1,$2:2};MSCr.O$0.registerEnum("MSCr.O$0",!1);MSCr.O$2=function(){};MSCr.O$2.prototype={$0:0,$1:1,$2:2,$3:4,$4:8};MSCr.O$2.registerEnum("MSCr.O$2",!0);MSCr.O$1=function(){};MSCr.O$1.prototype={$0:0,
$1:1,$2:2,$3:4,$4:8,$5:16,$6:32,$7:64,$8:128,$9:256,$A:512,$B:1024};MSCr.O$1.registerEnum("MSCr.O$1",!0);MSCr.O$9=function(a,b){MSCr.O$9.initializeBase(this);this.$D=a;this.$E=b};MSCr.O$9.prototype={$D:null,$E:null,$6:function(){this.$9()},$A:function(){this.$E.onABChangeNotificationReceived(this.$D)}};MSCr.O$15=function(a,b){MSCr.O$15.initializeBase(this);this.$D=a;this.$E=b};MSCr.O$15.prototype={$D:null,$E:null,$6:function(){this.$9()},$A:function(){this.$E.onAlertNotificationReceived(this.$D)}};
MSCr.O$16=function(a,b,c,d){MSCr.O$16.initializeBase(this);this.$F=c;this.$E=b;this.$10=MC.$create_IdentityInfo(d,null);this.$D=a;this.$13=0};MSCr.O$16.prototype={$D:null,$E:null,$F:null,$10:null,$11:null,$12:null,$13:0,$14:0,get_$15:function(){return this.$12},$6:function(){this.$16(0)},$A:function(){this.$12=MC.$create_InitializeServiceResult(this.$10,this.$11,this.$14)},$16:function(a){this.$14=a;0!==a?this.$9():0===this.$13?this.$17():1===this.$13?this.$18():2===this.$13&&this.$9()},$17:function(){this.$D.initializeUserStorage(null,
this.$10.liveId,ss.Delegate.create(this,function(a){this.$13=1;this.$16(a?0:1)}))},$18:function(){this.$E.getSettings(this.$F,ss.Delegate.create(this,this.$19))},$19:function(a,b){this.$11=0===a?b:null;this.$13=2;this.$16(0)}};MSCr.O$17=function(a,b){MSCr.O$17.initializeBase(this);this.$D=a;this.$E=b};MSCr.O$17.prototype={$D:null,$E:null,$6:function(){this.$D.onDatagramReceived(this.$E)},$A:function(){}};MSCr.O$14=function(a,b){MSCr.O$14.initializeBase(this);this.$D=a;this.$E=b};MSCr.O$14.prototype=
{$D:null,$E:null,$6:function(){this.$9()},$A:function(){this.$D.onInstancesChanged(this.$E)}};MSCr.O$11=function(a,b){MSCr.O$11.initializeBase(this);this.$E=b;this.$D=a};MSCr.O$11.prototype={$D:null,$E:null,$6:function(){this.$E.onMailNotification(this.$D)},$A:function(){}};MSCr.O$12=function(a,b,c,d){MSCr.O$12.initializeBase(this);this.$D=a;this.$E=b;this.$F=c;this.$10=d};MSCr.O$12.prototype={$D:null,$E:0,$F:null,$10:null,$6:function(){this.$9()},$A:function(){this.$F.onNetworkStatusChanged(this.$D,
this.$E);this.$10.onNetworkStatusChanged(this.$D,this.$E)}};MSCr.O$13=function(a,b){MSCr.O$13.initializeBase(this);this.$D=a;this.$E=b};MSCr.O$13.prototype={$D:null,$E:null,$F:0,get_$10:function(){return this.$D},get_$11:function(){return this.$F},$6:function(){this.$E.reauthenticate(ss.Delegate.create(this,this.$12))},$A:function(){0!==this.$F?this.$D.fail():this.$D.retry()},$12:function(a){this.$F=a;0!==this.$F?this.$8():this.$9()}};MSCr.O$1C=function(a,b,c,d){MSCr.O$1C.initializeBase(this);this.$D=
a;this.$E=b;this.$F=c;this.$10=d};MSCr.O$1C.prototype={$D:null,$E:null,$F:null,$10:null,$6:function(){this.$E.sendDatagram(this.$D,ss.Delegate.create(this,this.$11))},$A:function(){},$11:function(a,b){null!=this.$F&&this.$F.invoke(a,b)}};MSCr.O$1D=function(a,b,c){MSCr.O$1D.initializeBase(this);this.$F=a;this.$D=b;this.$E=c};MSCr.O$1D.prototype={$D:null,$E:null,$F:null,$6:function(){this.$D.getConversationHistory(this.$F,ss.Delegate.create(this,this.$10))},$A:function(){},$10:function(a){null!=this.$E&&
this.$E.invoke(a);this.$9()}};MSCr.O$5=function(){};MSCr.O$5.prototype={$0:null,$1:!1,$2:!1,$3:!1,get_$4:function(){return this.$2},$5:function(){this.$0=Date.get_now();this.$1=!0;this.$6()},$7:function(){this.$3||(this.$3=!0,this.$A())},$8:function(){this.$3||(this.$3=!0,this.$A())},$9:function(){this.$3||(this.$2=this.$3=!0,this.$A(),null!=this.$C&&this.$C.invoke(this,ss.EventArgs.Empty))},add_$B:function(a){this.$C=ss.Delegate.combine(this.$C,a)},remove_$B:function(a){this.$C=ss.Delegate.remove(this.$C,
a)},$C:null};MSCr.O$1E=function(a,b,c,d,e){MSCr.O$1E.initializeBase(this);this.$D=a;this.$E=b;this.$F=c;this.$10=d;this.$11=e};MSCr.O$1E.prototype={$D:null,$E:null,$F:null,$10:null,$11:null,get_$12:function(){return this.$D},$6:function(){this.$9()},$A:function(){var a=this.$10.serviceDataChanged(this.$D,this.$E,!1);1===this.$D.type&&this.$D.address===this.$F.liveId&&(a=this.$E.toArray());this.$11.onServiceDataChanged(this.$D,a)}};MSCr.O$1B=function(a,b,c,d,e,f,g,h){MSCr.O$1B.initializeBase(this);
this.$D=a;this.$E=b;this.$14=c;this.$F=d;this.$10=e;this.$11=f;this.$12=g;this.$13=h};MSCr.O$1B.prototype={$D:null,$E:null,$F:null,$10:null,$11:null,$12:null,$13:null,$14:null,$15:0,$16:!1,$17:!1,$6:function(){this.$18();this.$9()},$A:function(){this.$17&&this.$1B()},$18:function(){if(1!==this.$D.type||this.$D.address!==this.$F.liveId)this.$17=!0;else if(this.$1A(),0===this.$15||this.$10.get_switchingServices())this.$16&&this.$1B(),0!==this.$15&&this.$10.set_switchingServices(!1),this.$19();else switch(this.$10.get_services()){case 3:this.$16&&
this.$1B();this.$14.updateServices(1,!1,null);break;default:this.$14.signOut(1,null,!1,null)}},$19:function(){if(!(0===this.$15&&(0===this.$10.get_services()||3===this.$10.get_services()))&&!(1<(new MC.ServiceDataSet(this.$10.getServiceDataInfo(this.$D))).imServiceData.getAllEndpoints().length)){var a=MC.ServiceData.createEmpty(2);a.set_status(1);this.$13.onServiceDataChanged(this.$D,[a.get_info()])}},$1A:function(){this.$15=0;for(var a=ss.IEnumerator.getEnumerator(this.$E.toServiceDataArray());a.moveNext();){var b=
a.get_current();null!=b.getEndpoint(this.$F.endpointId)&&(this.$15|=b.get_service(),b.deleteEndpoint(this.$F.endpointId));0!==b.getAllEndpoints().length&&(this.$16=!0)}},$1B:function(){this.$10.serviceDataChanged(this.$D,this.$E,!0);this.$13.onServiceDataDeleted(this.$D,this.$E.toArray())}};MSCr.O$18=function(a,b){MSCr.O$18.initializeBase(this);this.$D=a;this.$E=b};MSCr.O$18.prototype={$D:null,$E:null,$6:function(){this.$9()},$A:function(){this.$E.onSettingsChanged(this.$D)}};MSCr.O$19=function(a,
b,c,d,e){MSCr.O$19.initializeBase(this);this.$D=a;this.$E=b;this.$F=c;this.$10=d;this.$11=e};MSCr.O$19.prototype={$D:null,$E:null,$F:0,$10:0,$11:0,$6:function(){this.$D.close(2===this.$F);this.$9()},$A:function(){this.$E.onSignedOutRemotely(this.$10,this.$11)}};MSCr.O$1A=function(a,b,c,d,e,f,g,h,i,j){this.$1B=String.Empty;MSCr.O$1A.initializeBase(this);this.$16=a.clone();this.$17=b;this.$11=c;this.$12=d;this.$18=f;this.$D=g;this.$F=h;this.$E=i;this.$13=j;this.$14=MSCo.Configuration.get_clientDomain();
this.$19=Date.get_now();this.$10=e};MSCr.O$1A.prototype={$D:null,$E:null,$F:null,$10:null,$11:!1,$12:null,$13:null,$14:null,$15:0,$16:null,$17:0,$18:null,$19:null,$1A:0,get_$1C:function(){return this.$26(2)&&!this.$26(4)},$1D:function(a,b){this.$D.authenticate(this.$14,a,this.$17,b,ss.Delegate.create(this,this.$20))},$1E:function(){this.get_$1C()||(MSH.Logger.logWarning(this.$D.get_logContext(),"SignInCommand.OnDisconnected","Error Disconnected"),this.$23(1))},$6:function(){this.$23(0)},$A:function(){null!=
this.$E&&(0===this.$1A?this.$24():3===this.$1A&&this.$18.expire(),this.$E.onSignedIn(this.$1A,this.$1B,MSH.DateTimeHelper.subtract(Date.get_now(),this.$19).toString(),this.$D.get_serverName(),this.$10.skypeId,this.$13))},$1F:function(){this.$D.authenticate(this.$14,null,this.$17,null,ss.Delegate.create(this,this.$20))},$20:function(a,b){if(0!==a)switch(this.$1B=b,a){case 4:if(!this.$11||this.$26(2)){this.$23(3);break}this.$15|=2;this.$23(0);break;default:this.$23(1)}else this.$15|=1,this.$23(0)},
$21:function(a){0!==a?this.$23(3):(this.$15|=4,this.$1F())},$22:function(a,b){this.$15|=8;0!==a?(this.$1B=b,this.$23(1)):this.$23(0)},$23:function(a){0!==a?(this.$1A=a,this.$8()):0===this.$15?this.$1F():this.$26(8)?(this.$11||this.$D.getRecentConversations(null),this.$1A=0,this.$9()):this.$26(1)?this.$D.signIn(this.$16,this.$17,this.$12,ss.Delegate.create(this,this.$22)):this.$26(2)&&this.$F.reauthenticate(ss.Delegate.create(this,this.$21))},$24:function(){this.$18.set_messengerSessionState(this.$25());
this.$18.set_messengerSessionEvents(MC.$create_MessengerSessionEvents([]))},$25:function(){var a=this.$D.getSession();return MC.$create_MessengerSessionState(a.server,a.sessionToken,a.transactionID,this.$17,!1,this.$10)},$26:function(a){return(this.$15&a)===a}};MSCr.O$10=function(a,b,c,d,e,f,g,h,i){MSCr.O$10.initializeBase(this);this.$D=a;this.$E=b;this.$F=c;this.$10=d;this.$11=e;this.$12=f;this.$13=h;this.$14=i;this.$16=g};MSCr.O$10.prototype={$D:null,$E:0,$F:null,$10:!1,$11:null,$12:null,$13:null,
$14:null,$15:0,$16:null,get_$17:function(){return 1===(this.$E&1)},$6:function(){this.get_$17()&&this.$12.close(!0);this.$11.signOut(this.$D,this.$E,this.$F,this.$10,ss.Delegate.create(this,this.$18))},$A:function(){if(this.get_$17())this.$16.onSignedOut(this.$10?1:0);if(this.$10)this.$13.onSignedOutRemotely(1,-1);else this.$13.onSignedOut(this.$15,this.$E,this.$14)},$18:function(a){0===a?(this.$15=0,this.$9()):(this.$15=1,this.$8())}};MSCr.O$A=function(a,b,c,d,e){MSCr.O$A.initializeBase(this);this.$D=
a;this.$E=b;this.$F=d;this.$10=e};MSCr.O$A.prototype={$D:null,$E:null,$F:null,$10:null,get_$11:function(){return this.$D},get_$12:function(){return this.$E},$6:function(){this.$9()},$A:function(){this.$10.onDisconnected(0,6,0)}};MSCr.O$8=function(a,b,c,d,e,f){MSCr.O$8.initializeBase(this);this.$D=a;this.$13=this.$E=b;this.$10=d;this.$12=e;this.$F=c;this.$14=f};MSCr.O$8.prototype={$D:null,$E:0,$F:null,$10:null,$11:0,$12:null,$13:0,$14:!1,$6:function(){this.$F.updateNetworks(this.$D,this.$E,ss.Delegate.create(this,
this.$15))},$A:function(){this.$10.onUpdateNetworkCompleted(this.$11,this.$D,this.$E,this.$14)},$15:function(a){this.$11=0===a?0:9;this.$9()}};MSCr.O$6=function(a,b,c,d,e,f){MSCr.O$6.initializeBase(this);this.$D=a;this.$E=b;this.$F=c;this.$10=d;this.$11=e;this.$12=f};MSCr.O$6.prototype={$D:null,$E:null,$F:null,$10:null,$11:null,$12:null,$13:!1,$14:0,$6:function(){var a=MC.$create_IMAddressInfo(this.$E.liveId,1,0),b=new MC.ServiceDataSet(this.$F.getServiceDataInfo(a)),b=MC.ServiceDataSet.createMessengerUpdate(b,
this.$D);this.$15(b);this.$F.serviceDataChanged(a,b,!1);this.$10.publishServiceData(b,this.$F.get_services(),ss.Delegate.create(this,this.$16))},$A:function(){this.$11.onUserServiceDataUpdated(this.$14,this.$12)},$15:function(a){null!=a.imServiceData&&a.imServiceData.getEndpoint(this.$E.endpointId).set_domain(MSCo.Configuration.get_domainName())},$16:function(a){this.$13||(this.$13=!0,0!==a?(this.$14=1,this.$8()):(this.$14=0,this.$9()))}};MSCr.O$7=function(a,b,c,d,e,f,g,h,i){MSCr.O$7.initializeBase(this);
this.$13=MC.$create_IMAddressInfo(b.liveId,1,0);this.$E=d;this.$F=e;this.$10=f;this.$17=g;this.$11=h;this.$16=b;this.$D=a;this.$12=c;this.$18=i};MSCr.O$7.prototype={$D:0,$E:null,$F:null,$10:null,$11:null,$12:null,$13:null,$14:0,$15:0,$16:null,$17:null,$18:!1,get_$19:function(){return this.$D},$6:function(){this.$15=this.$23(this.$12.get_services(),this.$D);this.$12.set_switchingServices(4===(this.$15&4));this.$1A()},$A:function(){this.$12.set_services(this.$D);if(this.$18)this.$11.onUserServicesUpdated(this.$14);
else this.$11.onServicesChanged(this.$D)},$1A:function(){if(1===this.$14)this.$8();else if(2===(this.$15&2))this.$1B();else if(512===(this.$15&512))this.$E.updateBuddySubscriptions(2,ss.Delegate.create(this,this.$28));else if(1024===(this.$15&1024)){if(null!=this.$17)for(var a=ss.IEnumerator.getEnumerator(this.$17);a.moveNext();){var b=a.get_current();this.$E.updateNetworks(MSH.StringHelper.toLowerCase(b),1,ss.Delegate.create(this,this.$26))}}else if(128===(this.$15&128))this.$E.updateBuddySubscriptions(4,
ss.Delegate.create(this,this.$29));else if(256===(this.$15&256)){if(null!=this.$17)for(a=ss.IEnumerator.getEnumerator(this.$17);a.moveNext();)b=a.get_current(),this.$E.updateNetworks(MSH.StringHelper.toLowerCase(b),2,ss.Delegate.create(this,this.$26))}else 32===(this.$15&32)?this.$1F():16===(this.$15&16)?this.$1E():4===(this.$15&4)?this.$1C():64===(this.$15&64)?this.$20():8===(this.$15&8)?this.$1D():this.$9()},$1B:function(){var a=this.$12.getServiceDataInfo(this.$13);null!=a&&0<a.length?(a=new MC.ServiceDataSet(a),
1===a.imServiceData.get_status()&&a.imServiceData.set_status(2),this.$E.publishServiceData(a,this.$D,ss.Delegate.create(this,this.$24))):this.$24(0)},$1C:function(){var a=this.$16.endpointId,b=MC.ServiceDataSet.create();b.addEndpoint(MC.ServiceEndpointData.createEmpty(2,a));b.addEndpoint(MC.ServiceEndpointData.createEmpty(4,a));b.addEndpoint(MC.ServiceEndpointData.createEmpty(1,a));this.$E.deleteServiceData(b,ss.Delegate.create(this,this.$25))},$1D:function(){var a=this.$12.getServiceDataInfo(this.$13);
if(null!=a&&0<a.length)this.$11.onServiceDataChanged(this.$13,a);this.$2A(0,8)},$1E:function(){for(var a=this.$12.getLocalNetworkServiceData(),a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current();this.$10.onServiceDataDeleted(b[0],b[1])}for(var a=this.$12.getServiceDataInfo(this.$13),b=!1,c=0;c<a.length;c++)Object.keyExists(a[c].endpointData,this.$16.endpointId)&&delete a[c].endpointData[this.$16.endpointId],0<Object.getKeyCount(a[c].endpointData)&&(b=!0);if(b)this.$10.onServiceDataDeleted(this.$13,
new MC.ServiceDataSet(a));this.$2A(0,16)},$1F:function(){this.$F.close(!0);this.$2A(0,32)},$20:function(){this.$12.get_localStorage().refreshConversationData(ss.Delegate.create(this,this.$21))},$21:function(){var a=this.$12.get_localStorage().get_conversations();if(null!=a){this.$F.onPersistedConversationsLoaded(a);var b={},c=this.$22(a,b);this.$11.onPersistedConversationsLoaded(a,c,b,!0)}this.$2A(0,64)},$22:function(a,b){for(var c=Array(a.conversations.length),d=0,e=ss.IEnumerator.getEnumerator(a.conversations);e.moveNext();){var f=
e.get_current().id,g=this.$12.get_localStorage().getConversationPersistedMessages(f),h=this.$12.get_localStorage().getLastMessage(f);null!=h&&(b[f]=h);c[d++]=MC.$create_ConversationMessages(f,g)}return c},$23:function(a,b){3===a&&(a=0);3===b&&(b=0);if(2===a){if(0===b)return 1098;if(1===b)return 144}else if(0===a){if(2===b)return 164;if(1===b)return 436}else if(1===a){if(2===b)return 512;if(0===b)return 1610}return 0},$24:function(a){this.$2A(a,2)},$25:function(a){this.$2A(a,4)},$26:function(a){this.$2A(a,
1024)},$27:function(a){this.$2A(a,256)},$28:function(a){this.$2A(a,512)},$29:function(a){this.$2A(a,128)},$2A:function(a,b){0!==a&&(this.$14=1);this.$15&=~b;this.$1A()}};MSCr.O$4=function(){};MSCr.O$4.$0=function(a,b){for(var c=a.events,d={},e=c.length-1;0<=e;e--){var f=c[e];if("OnServiceDataChanged"===f[0].toString()){var g=f[1][0];null!=g&&(13===g.type&&b===g.network)&&(g=MSH.ContactHelper.getIMAddressInfoKey(g),Object.keyExists(d,g)||(d[g]=f))}}var c=new MC.ServiceDataSet([MC.$create_ServiceDataInfo(2,
{Status:"FLN"},{})]),h;for(h in d)MSCr.O$4.$6(d[h],c,!1)};MSCr.O$4.$1=function(a,b,c,d){var e=MSCr.O$4.$3(a.events,b);if(null!=e)return MSCr.O$4.$6(e,c,d);if(d)return null;MSCr.O$4.$4(a,b,c);return c.toArray()};MSCr.O$4.$2=function(a,b){var c=MSCr.O$4.$3(a.events,b);return null!=c?(new MC.ServiceDataSet(c[1][1])).clone().toArray():[]};MSCr.O$4.$3=function(a,b){var c=null;if(null==a)return null;for(var d=a.length-1;0<=d;d--){var e=a[d];if("OnServiceDataChanged"===e[0].toString()){var f=e[1][0];if(null!=
f){if(11===b.type&&11===f.type&&!String.isNullOrEmpty(b.cid)&&b.cid===f.cid){c=e;break}if(!String.isNullOrEmpty(b.address)&&MSH.ContactHelper.areIMAddressesEqual(b,f)){c=e;break}}}}return c};MSCr.O$4.$4=function(a,b,c){var d=Array(2);d[0]="OnServiceDataChanged";d[1]=[b,c.clone().toArray()];MSCr.O$4.$5(a,d)};MSCr.O$4.$5=function(a,b){for(var c=Array(a.events.length+1),d=0,e=a.events.length;d<e;d++)c[d]=a.events[d];c[a.events.length]=b;a.events=c};MSCr.O$4.$6=function(a,b,c){var a=a[1],d=new MC.ServiceDataSet(a[1]);
c?(d.deleteAll(b.toArray()),a[1]=d.toArray(),c=null):(c=d.createDiff(b),b=MSCr.O$4.$7(d,b),b.updateAll(c),a[1]=b.toArray());return c};MSCr.O$4.$7=function(a,b){for(var c=[],d=ss.IEnumerator.getEnumerator(a.toArray());d.moveNext();){var e=d.get_current();c.add(e)}for(d=ss.IEnumerator.getEnumerator(b.toServiceDataArray());d.moveNext();)e=d.get_current(),null==a.getServiceData(e.get_service())&&c.add(e.clone());return new MC.ServiceDataSet(MSH.CollectionHelper.toArray(c))};MSCr.O$4.$8=function(a,b){0===
b.type&&(MSH.Logger.logTrace(MC.LogContext.get_global(),"MessengerStatusSnapshotHelper.AppendMailNotificationEvent","Appending mail notification event, Type="+b.type),MSCr.O$4.$5(a,["OnMailNotification",[b]]))};MSCr.O$4.$9=function(a,b){var c=a.notification;0===c.source?(b.inboxUnread-=c.delta,0!==c.destination&&6!==c.destination&&(b.foldersUnread+=c.delta)):6!==c.source?(b.foldersUnread-=c.delta,0===c.destination&&(b.inboxUnread+=c.delta)):0===c.destination?b.inboxUnread+=c.delta:6!==c.destination&&
(b.foldersUnread+=c.delta);0>b.foldersUnread&&(b.foldersUnread=0)};MSCr.O$4.$A=function(a,b){MSH.Logger.logTrace(MC.LogContext.get_global(),"MessengerStatusSnapshotHelper.UpdateSignInMailNotification","Type="+b.type);var c=MSCr.O$4.$C(a.events);null!=c?MSCr.O$4.$B(c,b):MSCr.O$4.$8(a,b)};MSCr.O$4.$B=function(a,b){MSH.Logger.logTrace(MC.LogContext.get_global(),"MessengerStatusSnapshotHelper.UpdateMailNotificationEvent","Type="+b.type);var c=a[1][0],d=c.notification;switch(b.type){case 0:c.notification=
b.notification;break;case 2:MSCr.O$4.$9(b,d)}};MSCr.O$4.$C=function(a){var b=null;if(null==a)return null;for(var c=a.length-1;0<=c;c--){var d=a[c];if("OnMailNotification"===d[0].toString()&&0===d[1][0].type){b=d;break}}return b};MSCr.O$4.$D=function(a){for(var b=[],c={},d=null,e=ss.IEnumerator.getEnumerator(a.events);e.moveNext();){var f=e.get_current();switch(f[0]){case "OnDatagramReceived":break;case "OnServiceDataChanged":var g=MSCr.O$4.$E(f);Object.keyExists(c,g)?MSCr.O$4.$6(c[g],new MC.ServiceDataSet(f[1][1]),
!1):(c[g]=f,b.add(f));break;case "OnServiceDataDeleted":g=MSCr.O$4.$E(f);Object.keyExists(c,g)&&MSCr.O$4.$6(c[g],new MC.ServiceDataSet(f[1][1]),!0);break;case "OnMailNotification":g=f[1][0];switch(g.type){case 0:null!=d&&b.remove(d);b.add(f);d=f;break;case 2:null!=d&&MSCr.O$4.$B(d,g)}break;default:b.add(f)}}a.events=MSH.CollectionHelper.toArray(b)};MSCr.O$4.$E=function(a){a=a[1][0];return String.format("{0}:{1}",a.type,11===a.type?a.cid:a.address)};MSCr.MessengerStatusSnapshot=function(a,b){this.$9=
null;this.$7=!1;this.$C=b;this.$B=a.get_revision();this.$A=a;this.$A.add_dataWritten(ss.Delegate.create(this,this.$16));this.$A.add_dataRead(ss.Delegate.create(this,this.$17));MSH.PerfCollector.get_instance().registerStatusCollector(this)};MSCr.MessengerStatusSnapshot.getCurrent=function(a,b){for(var c=ss.IEnumerator.getEnumerator(MSCr.MessengerStatusSnapshot.$F);c.moveNext();){var d=c.get_current();if(d.$A===a)return d}c=new MSCr.MessengerStatusSnapshot(a,b);MSCr.MessengerStatusSnapshot.$F.add(c);
return c};MSCr.MessengerStatusSnapshot.prototype={$0:null,$1:null,$2:null,$3:null,$4:!1,$5:!1,$6:!1,$7:!1,$8:!1,$9:null,$A:null,$B:0,$C:null,$E:!1,get_localStorage:function(){return this.$A},get_lastModified:function(){return this.$A.get_lastWriteTime()},get_ageInMilliSeconds:function(){return MSH.DateTimeHelper.subtract(Date.get_now(),this.get_lastModified())},get_instances:function(){return this.$A.get_currentInstances()},get_networkStatusEvents:function(){null==this.$0&&(this.$0=this.$A.get_networkStatusEvents());
return this.$0},set_networkStatusEvents:function(a){this.$0!==a&&(this.$0=a,this.$4=!0,this.$10());return a},get_messengerSessionState:function(){null==this.$1&&(this.$1=this.$A.get_messengerSessionState());return this.$1},set_messengerSessionState:function(a){this.$1!==a&&(this.$1=a,this.$5=!0);return a},get_messengerSessionEvents:function(){null==this.$2&&(this.$2=this.$A.get_messengerSessionEvents());return this.$2},set_messengerSessionEvents:function(a){this.$2!==a&&(this.$2=a,this.$6=!0);return a},
get_cachedSettings:function(){null==this.$3&&(this.$3=this.$A.get_cachedSettings());return this.$3},set_cachedSettings:function(a){this.$3!==a&&(this.$3=a,this.$8=!0,this.$10());return a},get_services:function(){var a=this.get_messengerSessionState();return null!=a?a.services:0},set_services:function(a){var b=this.get_messengerSessionState();null!=b&&b.services!==a&&(b.services=a,this.$5=!0,this.$10());return a},get_switchingServices:function(){return this.$E},set_switchingServices:function(a){return this.$E=
a},updateSessionId:function(a){var b=this.get_messengerSessionState();null!=b&&(b.sessionToken=a,this.$5=!0,this.$10())},updateTrid:function(a){var b=this.get_messengerSessionState();null!=b&&(b.transactionID=a,this.$5=!0,this.$10())},expire:function(){this.$14();this.$10()},onSignedOut:function(a){0===a||1===a?(this.$15(),this.$A.onSignedOut(!1)):(this.$A.onSignedOut(!0),a=this.get_messengerSessionState(),null!=a&&(a.disconnected=!0,a.sessionToken=null,this.$5=!0,this.$10()))},normalizeSignInEvents:function(){var a=
this.get_messengerSessionEvents();null!=a&&(MSCr.O$4.$D(a),this.$6=!0,this.$10())},onNetworkStatusChanged:function(a,b){var c=this.get_networkStatusEvents(),d=!1,e=!1;if(null==c)this.$0=[[a,b]],d=!0;else{for(var f=ss.IEnumerator.getEnumerator(c);f.moveNext();){var g=f.get_current();if(0===MSH.StringHelper.compare(g[0],a,!0)){g[1]!==b&&(g[1]=b,d=!0);e=!0;break}}e||(d=Array(c.length+1),MSH.ArrayHelper.copyTo(c,0,d,0,c.length),d[c.length]=[a,b],this.$0=d,d=!0)}d&&(this.$4=!0,0===b&&MSCr.O$4.$0(this.get_messengerSessionEvents(),
a),this.$10())},serviceDataChanged:function(a,b,c){var d=this.get_messengerSessionEvents();if(null==d)return b.toArray();a=MSCr.O$4.$1(d,a,b,c);this.$6=!0;this.$10();return a},getServiceDataInfo:function(a){var b=this.get_messengerSessionEvents();return null==b?[]:MSCr.O$4.$2(b,a)},getLocalNetworkServiceData:function(){var a=this.get_messengerSessionEvents(),b=[],c={};if(null!=a||null!=a.events)for(var a=a.events,d=a.length-1;0<=d;d--){var e=a[d];if("OnServiceDataChanged"===e[0].toString()){var f=
e[1][0];if(null!=f&&13!==f.type&&!(f.address===this.$C&&1===f.type)){var g=MSH.ContactHelper.getIMAddressInfoKey(f);Object.keyExists(c,g)&&(e=e[1],c[g]=e,g=new MC.ServiceDataSet(e[1]),b.add([f,new MC.ServiceDataSet(g.clone().toArray())]))}}}return MSH.CollectionHelper.toArray(b)},mailNotificationReceived:function(a){var b=this.get_messengerSessionEvents();null!=b&&(MSCr.O$4.$A(b,a),this.$6=!0,this.$10())},alertNotificationReceived:function(a){var a=MC.$create_PersistedAlert(a.actionUrl,a.subscrUrl,
a.iconUrl,a.timestamp,a.message,a.type),b=[];if(null!=this.$A.get_alerts())for(var c=ss.IEnumerator.getEnumerator(this.$A.get_alerts().alerts);c.moveNext();){var d=c.get_current();b.add(d)}50<=b.length&&b.removeAt(0);b.add(a);null==this.$9&&(this.$9=MC.$create_PersistedAlerts());this.$9.alerts=MSH.CollectionHelper.toArray(b);this.$7=!0;this.$10()},get_alerts:function(){null==this.$9&&(this.$9=this.$A.get_alerts());return this.$9},$10:function(){this.$A.get_usesLocalStorageProxy()?MSH.Scheduler.defer(ss.Delegate.create(this,
this.$11)):this.$11()},$11:function(){this.$12();this.$13()},$12:function(){this.$4&&(this.$B++,this.$A.set_networkStatusEvents(this.$0),this.$4=!1);this.$5&&(this.$B++,this.$A.set_messengerSessionState(this.$1),this.$5=!1);this.$6&&(this.$B++,this.$A.set_messengerSessionEvents(this.$2),this.$6=!1);this.$8&&(this.$B++,this.$A.set_cachedSettings(this.$3),this.$8=!1)},$13:function(){this.$7&&(this.$B++,this.$A.set_alerts(this.$9),this.$7=!1)},$14:function(){this.$15()},$15:function(){this.$9=null;this.$7=
!0;this.$0=null;this.$4=!0;this.$1=null;this.$5=!0;this.$2=null;this.$6=!0;this.$3=null;this.$8=!0},$16:function(a,b){if(b.get_revision()>this.$B&&null!=b.get_data())switch(b.get_element()){case 2:this.$0=b.get_data();break;case 4:this.$1=b.get_data();break;case 5:this.$2=b.get_data()}this.$B=b.get_revision()},$17:function(a,b){if(null!=b.get_data()&&(4===b.get_element()&&null==this.$1&&(this.$1=b.get_data()),5===b.get_element()&&null==this.$2&&(this.$2=b.get_data()),2===b.get_element()&&null==this.$0&&
(this.$0=b.get_data()),9===b.get_element()))this.$9=b.get_data()},get_name:function(){return"MessengerStatusSnapshot"},getStatusText:function(){var a=new ss.StringBuilder;a.append("[MessengerStatusSnapshot] ");null!=this.$2&&(a.append("| Messenger session events count: "),a.append(this.$2.events.length));return a.toString()}};MSCr.O$3=function(a){this.$0=a};MSCr.O$3.prototype={$0:null,get_$1:function(){return this.$0},$2:function(a){this.$17(a)},$3:function(a){this.$17(a)},$4:function(a){this.$17(a)},
$5:function(a){this.$17(a)},$6:function(a){this.$17(a)},$7:function(a){this.$17(a)},$8:function(a){this.$17(a)},$9:function(a){this.$17(a)},$A:function(a){this.$17(a)},$B:function(a){this.$17(a)},$C:function(a){this.$17(a)},$D:function(a){this.$17(a)},$E:function(a){this.$17(a)},$F:function(){this.$17(null)},$10:function(a){this.$17(a)},$11:function(a){this.$17(a)},$12:function(a){this.$17(a)},$13:function(a){this.$17(a)},$14:function(a){this.$17(a)},$15:function(a){this.$17(a)},$16:function(a){this.$17(a)},
$17:function(){}};MSCr.O$C=function(a){MSCr.O$C.initializeBase(this,[a])};MSCr.O$C.prototype={$8:function(a){this.get_$1().$E(new MSCr.O$F(this.get_$1(),a));this.get_$1().$D(a)},$4:function(a){this.get_$1().$D(a)}};MSCr.O$B=function(a){this.$18=[];this.$19=[];MSCr.O$B.initializeBase(this,[a])};MSCr.O$B.prototype={$1A:null,$2:function(a){this.get_$1().$D(a)},$5:function(a){this.get_$1().$D(a)},$15:function(a){this.get_$1().$D(a)},$9:function(a){a.get_$17()&&(this.$1D(),this.get_$1().$E(new MSCr.O$E(this.get_$1(),
a)));this.get_$1().$D(a)},$6:function(a){switch(this.get_$1().get_$12()){case 1:this.get_$1().$D(a)}},$F:function(){for(;0<this.$18.length;)this.$18[0].retry(),this.$18.removeAt(0)},$A:function(a){this.$19.enqueue(a);this.$1C()},$B:function(a){this.$19.enqueue(a);this.$1C()},$C:function(a){this.get_$1().$D(a)},$D:function(a){this.get_$1().$D(a)},$E:function(a){this.get_$1().$D(a)},$14:function(a){this.get_$1().$D(a)},$16:function(a){this.get_$1().$D(a)},$10:function(a){this.get_$1().$D(a)},$11:function(a){this.get_$1().$D(a)},
$12:function(a){this.get_$1().$D(a)},$13:function(a){this.$1D();this.get_$1().$E(new MSCr.O$D(this.get_$1()));this.get_$1().$D(a)},$7:function(a){this.get_$1().$D(a)},$3:function(a){this.get_$1().$D(a)},$1B:function(){this.$1A.remove_$B(ss.Delegate.create(this,this.$1B));this.$1A=null;this.$1C()},$1C:function(){for(;null==this.$1A&&0!==this.$19.length;){var a=this.$19.dequeue();this.$1A=Type.safeCast(a,MSCr.O$7);null!=this.$1A&&this.$1A.add_$B(ss.Delegate.create(this,this.$1B));this.get_$1().$D(a)}},
$1D:function(){null!=this.$1A&&(this.$1A.remove_$B(ss.Delegate.create(this,this.$1B)),this.$1A=null);this.$19.clear()}};MSCr.O$D=function(a){MSCr.O$D.initializeBase(this,[a])};MSCr.O$D.prototype={$8:function(a){this.get_$1().$E(new MSCr.O$F(this.get_$1(),a));this.get_$1().$D(a)}};MSCr.O$F=function(a,b){this.$19=[];MSCr.O$F.initializeBase(this,[a]);this.$18=b;this.$18.add_$B(ss.Delegate.create(this,this.$1A))};MSCr.O$F.prototype={$18:null,$9:function(a){a.get_$17()&&this.get_$1().$E(new MSCr.O$E(this.get_$1(),
a));this.get_$1().$D(a)},$A:function(a){this.$19.add(a)},$15:function(a){this.$18.$1D(a.get_$11(),a.get_$12())},$13:function(){this.get_$1().$E(new MSCr.O$D(this.get_$1()));this.$18.$1E()},$6:function(a){a.get_$10().fail()},$1A:function(){this.$18.remove_$B(ss.Delegate.create(this,this.$1A));if(this.$18.get_$4()){var a=new MSCr.O$B(this.get_$1());this.get_$1().$E(a);for(var b=ss.IEnumerator.getEnumerator(this.$19);b.moveNext();){var c=b.get_current();a.$A(c)}}else this.get_$1().$E(new MSCr.O$D(this.get_$1()))}};
MSCr.O$E=function(a,b){MSCr.O$E.initializeBase(this,[a]);b.add_$B(ss.Delegate.create(this,this.$18))};MSCr.O$E.prototype={$18:function(){this.get_$1().$E(new MSCr.O$D(this.get_$1()))},$7:function(a){this.get_$1().$D(a)}};MSCr.UserService=function(a,b,c,d,e){this.$0=a;this.$8=d;this.$6=new MSCr.O$C(this);this.$1=b.createConnectionService(a,this);this.$2=b.createStorage(a);this.$3=e;this.$7=MSCr.MessengerStatusSnapshot.getCurrent(d,a.liveId);this.$5=b.createConversationService(a,this,c,d);this.$4=c;
d.add_instancesChanged(ss.Delegate.create(this,this.$11))};MSCr.UserService.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,$8:null,$9:null,$A:!1,updateNetwork:function(a,b,c){this.$6.$2(new MSCr.O$8(a,b,this.$1,this.$4,this.$7,c))},conversationCreate:function(a,b){this.$5.conversationCreate(a,b,!0)},conversationSendMessage:function(a,b,c){this.$5.conversationSendMessage(a,b,c)},conversationInviteAddress:function(a,b,c){this.$5.conversationInviteAddress(a,b,c)},conversationExpose:function(a,
b){this.$4.onConversationCreated(a,b)},conversationUpdateId:function(a,b){this.$4.onConversationUpdatedId(a,b)},conversationUpdateHasUnreadMessages:function(a,b){this.$5.conversationUpdateHasUnreadMessages(a,b)},conversationClose:function(a){this.$5.conversationClose(a,!0)},initialize:function(a){this.updateTicket(a);var b=new MSCr.O$16(this.$8,this.$2,this.$7,a.liveId);b.add_$B(ss.Delegate.create(this,function(){var a=b.get_$15();if(0===a.resultCode){var d=this.$7.get_messengerSessionState(),e=this.$7.get_messengerSessionEvents();
(this.$A=null!=d&&null!=e&&!d.disconnected&&null!=d.identity&&this.$7.get_ageInMilliSeconds()<MSCo.Configuration.get_storedMessengerSessionLifetime())?a.identity.endpointId=d.identity.endpointId:(this.$7.expire(),a.identity.endpointId=String.Empty)}else this.$7.expire();this.$4.onInitializationCompleted(a)}));this.$6.$4(b)},signIn:function(a,b,c,d,e,f){this.updateTicket(a);this.$B(f);if(this.$A){var b=this.$7.get_messengerSessionState(),f=this.$7.get_messengerSessionEvents(),g=this.$7.get_networkStatusEvents();
this.$C(a,b,f,g,c,e,d)}else a=this.$F(b),this.$6.$8(new MSCr.O$1A(a,c,!1,d,this.get_$13(),this.$7,this.$1,this.$3,this.$4,e))},$B:function(a){if(this.$A){var b=this.$7.get_messengerSessionState();if(!String.isNullOrEmpty(b.identity.skypeId)||a)this.$A=!1,this.$7.expire()}},$C:function(a,b,c,d,e,f,g){var h=null,i=null,j={};this.updateTicket(a);if(3===e||0===e)h=this.$15(),i=this.$16(h,j);this.$9=ss.Delegate.create(this,function(){this.$E(new MSCr.O$B(this));this.$1.resumeSession(MC.$create_MessengerSessionInfo(b.server,
b.sessionToken,b.transactionID,c.events));this.$7.normalizeSignInEvents();this.$4.onPersistedConversationsLoaded(h,i,j,!1);this.$19();null!=c.events&&this.$18(c.events);if(null!=d)for(var a=ss.IEnumerator.getEnumerator(d);a.moveNext();){var f=a.get_current();if(2===f[1])this.$4.onNetworkStatusChanged(f[0],2)}this.$4.onNotifyWebSignInPendingEventsCompleted();this.updateServices(e,!0,g)});this.$4.onSignedIn(0,String.Empty,"0",b.server,a.skypeId,f)},reconnect:function(a,b,c,d){a=this.$F(a);this.$6.$8(new MSCr.O$1A(a,
b,!0,c,this.get_$13(),this.$7,this.$1,this.$3,this.$4,d))},signOut:function(a,b,c,d){var e=null;c&&(e=new MC.ServiceDataSet(this.$7.getServiceDataInfo(MC.$create_IMAddressInfo(this.$0.liveId,1,0))));a=new MSCr.O$10(e,a,b,!c,this.$1,this.$5,this.$7,this.$4,d);this.$6.$9(a)},getConversationHistory:function(a,b){this.$6.$3(new MSCr.O$1D(a,this.$1,b))},updateServices:function(a,b,c){this.$6.$A(new MSCr.O$7(a,this.$0,this.$7,this.$1,this.$5,this,c,this.$4,b))},updateUXSettings:function(a){this.$2.putSettings(a,
this.$7)},updateServiceData:function(a,b){this.$6.$B(new MSCr.O$6(a,this.$0,this.$7,this.$1,this.$4,b))},sendDatagram:function(a,b,c){this.$6.$7(new MSCr.O$1C(a,this.$1,b,c))},$D:function(a){a.$5()},$E:function(a){this.$6=a;Type.canCast(this.$6,MSCr.O$B)&&this.$10()},$F:function(a){var b=this.$0.endpointId,a=new MC.ServiceDataSet(a),c=a.imServiceData.getEndpoint(b);c.set_domain(MSCo.Configuration.get_domainName());if(1!==this.$0.authenticationInfo.authType){var d=c.get_capabilities();d[1]|=4194304;
c.set_capabilities(d)}b=a.peServiceData.getEndpoint(b);b.set_clientName(MSCo.Configuration.get_clientId());b.set_clientVersion(MSCo.Configuration.get_clientVersion());return a},$10:function(){this.$6.$E(new MSCr.O$14(this.$4,this.$7.get_instances()))},$11:function(a,b){this.$6.$E(new MSCr.O$14(this.$4,b.get_instances()))},get_$12:function(){return this.$0.authenticationInfo.authType},get_$13:function(){return this.$0},get_$14:function(){return this.$3},$15:function(){return null==this.$8?null:this.$8.get_conversations()},
$16:function(a,b){if(null==a)return null;var c=Array(a.conversations.length);this.onPersistedConversationsLoaded(a);this.$17(a,c,b);return c},$17:function(a,b,c){if(null!=this.$8)for(var d=0,a=ss.IEnumerator.getEnumerator(a.conversations);a.moveNext();){var e=a.get_current().id,f=this.$8.getConversationPersistedMessages(e),g=this.$8.getLastMessage(e);null!=g&&(c[e]=g);b[d++]=MC.$create_ConversationMessages(e,f)}},$18:function(a){for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current(),
c=b[1];switch(b[0]){case "OnAlertNotification":this.$4.onAlertNotificationReceived(c[0]);break;case "OnMailNotification":this.$4.onMailNotification(c[0]);break;case "OnServiceDataChanged":this.$4.onServiceDataChanged(c[0],c[1]);break;case "OnServiceDataDeleted":this.$4.onServiceDataDeleted(c[0],c[1]);break;case "OnSettingsChanged":this.$4.onSettingsChanged(c[0])}}},$19:function(){if(null!=this.$8){var a=this.$8.get_alerts();if(null!=a)for(a=ss.IEnumerator.getEnumerator(a.alerts);a.moveNext();){var b=
a.get_current(),b=MC.$create_AlertInfo(null,null,null,null,b.subscrUrl,b.actionUrl,b.iconUrl,null,b.text,b.timestamp,b.type,!0);this.$4.onAlertNotificationReceived(b)}}},updateTicket:function(a){this.$0.liveId=a.liveId;this.$0.skypeId=a.skypeId;this.$0.authenticationInfo=a.authenticationInfo;this.$0.cid=a.cid;this.$0.endpointId=a.endpointId;MSH.Logger.logTrace(this.$1.get_logContext(),"UserService.UpdateTicket","Ticket updated. Ticket "+(null==this.$0.authenticationInfo?"Null":MC.AuthenticationType.toString(this.$0.authenticationInfo.authType)));
this.onTicketUpdated()},onTicketUpdated:function(){this.$6.$F()},onSignInPopulateCompleted:function(){null!=this.$9&&(this.$9.invoke(null,ss.EventArgs.Empty),this.$9=null)},onPersistedConversationsLoaded:function(a){this.$5.onPersistedConversationsLoaded(a)},onAlertNotificationReceived:function(a){this.$6.$C(new MSCr.O$15(a,this.$4));this.$7.alertNotificationReceived(a)},onNetworkStatusChanged:function(a,b){this.$6.$5(new MSCr.O$12(a,b,this.$4,this.$7))},onServiceDataChanged:function(a,b){this.$6.$10(new MSCr.O$1E(a,
b,this.$0,this.$7,this.$4))},onServiceDataDeleted:function(a,b){this.$6.$11(new MSCr.O$1B(a,b,this,this.$0,this.$7,this.$1,this.$5,this.$4))},onSettingsChanged:function(a){this.$6.$12(new MSCr.O$18(a,this.$4))},onMailNotificationReceived:function(a){this.$6.$16(new MSCr.O$11(a,this.$4));this.$7.mailNotificationReceived(a)},onABChangeNotificationReceived:function(a){this.$6.$D(new MSCr.O$9(a,this.$4))},onDatagramReceived:function(a){this.$6.$14(new MSCr.O$17(this.$5,a))},onDisconnected:function(a,
b,c){this.$6.$13(new MSCr.O$19(this.$5,this.$4,a,b,c));this.$7.onSignedOut(b)},onTransferred:function(a,b,c){this.$6.$15(new MSCr.O$A(a,b,c,this.$7,this))},onSignInEventsEmpty:function(){},onSessionIdChanged:function(a){this.$7.updateSessionId(a)},onTridChanged:function(a){this.$7.updateTrid(a)}};MSCr.O$5.registerClass("MSCr.O$5");MSCr.O$9.registerClass("MSCr.O$9",MSCr.O$5);MSCr.O$15.registerClass("MSCr.O$15",MSCr.O$5);MSCr.O$16.registerClass("MSCr.O$16",MSCr.O$5);MSCr.O$17.registerClass("MSCr.O$17",
MSCr.O$5);MSCr.O$14.registerClass("MSCr.O$14",MSCr.O$5);MSCr.O$11.registerClass("MSCr.O$11",MSCr.O$5);MSCr.O$12.registerClass("MSCr.O$12",MSCr.O$5);MSCr.O$13.registerClass("MSCr.O$13",MSCr.O$5);MSCr.O$1C.registerClass("MSCr.O$1C",MSCr.O$5);MSCr.O$1D.registerClass("MSCr.O$1D",MSCr.O$5);MSCr.O$1E.registerClass("MSCr.O$1E",MSCr.O$5);MSCr.O$1B.registerClass("MSCr.O$1B",MSCr.O$5);MSCr.O$18.registerClass("MSCr.O$18",MSCr.O$5);MSCr.O$19.registerClass("MSCr.O$19",MSCr.O$5);MSCr.O$1A.registerClass("MSCr.O$1A",
MSCr.O$5);MSCr.O$10.registerClass("MSCr.O$10",MSCr.O$5);MSCr.O$A.registerClass("MSCr.O$A",MSCr.O$5);MSCr.O$8.registerClass("MSCr.O$8",MSCr.O$5);MSCr.O$6.registerClass("MSCr.O$6",MSCr.O$5);MSCr.O$7.registerClass("MSCr.O$7",MSCr.O$5);MSCr.O$4.registerClass("MSCr.O$4");MSCr.MessengerStatusSnapshot.registerClass("MSCr.MessengerStatusSnapshot",null,MC.IMessengerStatusSnapshot,MSH.IStatusCollector);MSCr.O$3.registerClass("MSCr.O$3");MSCr.O$C.registerClass("MSCr.O$C",MSCr.O$3);MSCr.O$B.registerClass("MSCr.O$B",
MSCr.O$3);MSCr.O$D.registerClass("MSCr.O$D",MSCr.O$3);MSCr.O$F.registerClass("MSCr.O$F",MSCr.O$3);MSCr.O$E.registerClass("MSCr.O$E",MSCr.O$3);MSCr.UserService.registerClass("MSCr.UserService",null,MC.IUserService,MC.IConnectionServiceEvents);MSCr.MessengerStatusSnapshot.$F=[];Type.registerNamespace("MSLS");MSLS.$create_LS$5=function(a,b,c,d,e,f){var g={};g.$0=a;g.id=b;g.$1=c;g.$2=d;g.$3=e;g.$4=f;return g};MSLS.LS$1=function(){};MSLS.LS$1.prototype={$0:0,$1:1,$2:2};MSLS.LS$1.registerEnum("MSLS.LS$1",
!1);MSLS.LS$0=function(){};MSLS.LS$0.prototype={$0:0,$1:1,$2:2};MSLS.LS$0.registerEnum("MSLS.LS$0",!0);MSLS.LS$4=function(a){this.$2=a;this.$A=ss.Delegate.create(this,this.$20)};MSLS.LS$4.get_$10=function(){null==MSLS.LS$4.$1&&(MSLS.LS$4.$1=new MSLS.LS$6("Messenger2.INST",1,null));return MSLS.LS$4.$1};MSLS.LS$4.prototype={$2:null,$3:null,$4:null,$5:null,$6:null,$7:!1,$8:null,$9:null,$A:null,$B:null,add_$E:function(a){this.$F=ss.Delegate.combine(this.$F,a)},remove_$E:function(a){this.$F=ss.Delegate.remove(this.$F,
a)},$F:null,get_$11:function(){return this.$7},get_$12:function(){return this.$8},get_$13:function(){return this.$6.id},get_$14:function(){return this.$5},get_$15:function(){return this.$4},set_$15:function(a){this.$4=a;this.$6.$3=a;this.$6.$1=Date.get_now();this.$27(this.$6,!1,!1);return a},$16:function(a,b,c){this.$7?(!String.isNullOrEmpty(a)&&a!==this.$4&&(this.$4=a,this.$6.$3=this.$4,this.$27(this.$6,!1,!1)),c.invoke(!0)):(this.$5=b,this.$4=a,this.$B=c,this.$3.refresh())},$17:function(){for(var a=
[],b=[],c=[],d=this.$24(null),d=ss.IEnumerator.getEnumerator(d);d.moveNext();){var e=d.get_current(),f=this.$29(e.$0,e.$4,null);this.$2A(e)?(a.add(this.$29(e.$0,e.$4,e.id)),c.contains(f)||c.add(f)):b.contains(f)||b.add(f)}for(c=ss.IEnumerator.getEnumerator(c);c.moveNext();)d=c.get_current(),b.contains(d)||a.add(d);return MSH.CollectionHelper.toArray(a)},$18:function(a){a&&1===this.$6.$2||!a&&0===this.$6.$2||(this.$6.$2=a?1:0,this.$6.$1=Date.get_now(),this.$27(this.$6,!0,!1),this.$3.refresh())},$19:function(a){a?
(this.$6.$1=Date.get_now(),this.$6.$2=0,this.$27(this.$6,!0,!1)):(this.$9.dispose(),this.$9=null,window.detachEvent("onunload",this.$A),this.$3.removeOnUnloadWrite(this.$28(this.$6.id)),this.$26([this.$6.id]),this.$8=this.$4=this.$5=this.$6=null,this.$7=!1)},$1A:function(a){this.$3=a;this.$3.add_refreshed(ss.Delegate.create(this,this.$1D))},$1B:function(){null!=this.$F&&this.$F.invoke(this,new MC.InstancesChangedEventArgs(this.$8))},$1C:function(){this.$3.refresh()},$1D:function(){if(this.$7)null!=
this.$9&&this.$1F();else if(null!=this.$B){var a=this.$B;this.$B=null;String.isNullOrEmpty(this.$5)&&this.$1E();String.isNullOrEmpty(this.$5)?a.invoke(!1):(this.$6=this.$21(),window.attachEvent("onunload",this.$A),this.$7=!0,a.invoke(!0),this.$9=new MSH.Timer(ss.Delegate.create(this,this.$1C),null,MSLS.LS$4.$C,MSLS.LS$4.$C))}},$1E:function(){for(var a=this.$23(),a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current();if(!this.$2A(b)&&this.$4===b.$3){this.$5=b.$4;break}}},$1F:function(){var a=
this.$23(),b=this.$8;this.$8=this.$22(a);this.$6.$1=Date.get_now();this.$27(this.$6,!1,!1);a=MSLS.$create_LS$5(this.$2,this.$6.id,this.$6.$1,2,this.$4,this.$5);this.$27(a,!1,!0);if(this.$8.length!==b.length)this.$1B();else for(a=0;a<this.$8.length;a++)if(this.$8[a].id!==b[a].id||this.$8[a].isPrimary!==b[a].isPrimary){this.$1B();break}},$20:function(){null!=this.$9&&(this.$9.dispose(),this.$9=null)},$21:function(){for(var a=this.$23(),b=null,c=[],d=0;d<a.length;d++)if(this.$2A(a[d]))null==b&&(b=a[d]);
else if(2!==a[d].$2)c.add(a[d].id);else if(null==b||a[d].$1>b.$1||this.$2A(b))b=a[d];if(null==b){for(b=0;c.contains(b.toString());)b++;b=MSLS.$create_LS$5(this.$2,b.toString(),Date.get_now(),0,this.$4,this.$5)}else b.$2=0,b.$1=Date.get_now(),b.$3=this.$4;this.$8=this.$22(a);this.$27(b,!0,!1);return b},$22:function(a){for(var b=[],c=0,a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var d=a.get_current();1===d.$2&&!this.$2A(d)&&(d=MC.$create_InstanceInfo(d.id,null!=this.$6&&d.id===this.$6.id,!1),1<
b.length&&0<b[c].id.compareTo(d.id)&&(c=b.length),b.add(d))}0<b.length&&(b[c].isPrimary=!0);return MSH.CollectionHelper.toArray(b)},$23:function(){return this.$24(this.$28(null))},$24:function(a){for(var b=[],c=[],d=ss.IEnumerator.getEnumerator(this.$3);d.moveNext();){var e=d.get_current();if(null==a||e.startsWith(a)){var f=this.$25(this.$3.get_item(e));null!=f?b.add(f):c.add(e)}}for(a=ss.IEnumerator.getEnumerator(c);a.moveNext();)c=a.get_current(),this.$3.set_item(c,null);return MSH.CollectionHelper.toArray(b)},
$25:function(a){if(String.isNullOrEmpty(a))return null;a=a.split(";");if(6!==a.length)return null;var b=Date.parseDate(a[2]);return MSLS.$create_LS$5(a[0],a[1],b,parseInt(a[3]),a[4],a[5])},$26:function(a){for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current();this.$3.set_item(this.$28(b),null)}},$27:function(a,b,c){var d=String.format("{0};{1};{2};{3};{4};{5}",a.$0,a.id,a.$1.toUTCString(),a.$2,a.$3,a.$4),a=this.$28(a.id);c?this.$3.addOnUnloadWrite(a,d):this.$3.set_item(a,d);b&&
this.$3.flush()},$28:function(a){return this.$29(this.$2,this.$5,a)},$29:function(a,b,c){a=new ss.StringBuilder(a);String.isNullOrEmpty(b)||(a.append(b),String.isNullOrEmpty(c)||(a.append("_id"),a.append(c)));return a.toString()},$2A:function(a){return Date.get_now().getTime()-a.$1.getTime()>MSLS.LS$4.$D}};MSLS.LS$7=function(){this.$5=0;this.$1={};this.$1["^"]="^^";this.$2={};this.$2["^^"]="^"};MSLS.LS$7.$7=function(a){var b=new ss.StringBuilder;b.append("(");var c=!0,d;for(d in a)a=d,c||b.append("|"),
c=a.replace(MSLS.LS$7.$0,"\\$1"),b.append(c),c=!1;b.append(")");return RegExp(b.toString(),"g")};MSLS.LS$7.$8=function(a){var b=String.Empty,b=b+"0123456789abcdef".charAt(a/16),b=b+"0123456789abcdef".charAt(a%16);return"^"+b};MSLS.LS$7.prototype={$1:null,$2:null,$3:null,$4:null,$5:0,$6:function(a){for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current();if(0<=b.indexOf("^"))throw Error.argumentOutOfRange("Replacements cannot contain the '^' character.");var c=MSLS.LS$7.$8(this.$5++);
if(3<c.length)break;this.$1[b]=c;this.$2[c]=b}this.$3=MSLS.LS$7.$7(this.$1);this.$4=MSLS.LS$7.$7(this.$2)},$9:function(a){return a.replace(this.$3,ss.Delegate.create(this,function(a){return this.$1[a]}))},$A:function(a){return a.replace(this.$4,ss.Delegate.create(this,function(a){return this.$2[a]}))}};MSLS.LS$6=function(a,b,c){this.$0=a;this.$1=b;this.$2=c};MSLS.LS$6.prototype={$0:null,$1:0,$2:null,get_$3:function(){return this.$0},get_$4:function(){return this.$1},$5:function(a){null!=this.$2&&
(a.add_serialized(ss.Delegate.create(this,this.$6)),a.add_deserialized(ss.Delegate.create(this,this.$7)))},$6:function(a,b){String.isNullOrEmpty(b.get_serialization())||b.set_serialization(this.$2.$9(b.get_serialization()))},$7:function(a,b){String.isNullOrEmpty(b.get_serialization())||b.set_serialization(this.$2.$A(b.get_serialization()))}};MSLS.LS$3=function(a,b){this.$1=a;this.$2={};Microsoft.Live.Core.Internal.LocalStorageConfiguration.set_storageNamespaces(b);this.$5="https:"!==MSH.UriHelper.get_windowLocationProtocol()&&
__MSLiveCore__.Loader.get_settings().httpsApplication&&3===MLC.Channel.getChannelType()&&Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_isHtml5LocalStorageSupported()&&!(Sys.Browser.agent===Sys.Browser.InternetExplorer&&8===Sys.Browser.version);MSH.TestingHelper.get_isUnitTest()||MSH.Scheduler.defer(ss.Delegate.create(this,function(){this.$D()}))};MSLS.LS$3.prototype={$1:null,$2:null,$3:0,$4:!1,$5:!1,$6:0,$7:0,add_$8:function(a){this.$9=ss.Delegate.combine(this.$9,a)},remove_$8:function(a){this.$9=
ss.Delegate.remove(this.$9,a)},$9:null,get_$A:function(){return this.$2},add_$B:function(a){this.add_$8(a);0!==this.$3&&a.invoke(this,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.$3))},remove_$B:function(a){this.remove_$8(a)},get_$C:function(){return this.$5},$D:function(){this.get_$C()?(MSH.Logger.logTrace(MC.LogContext.get_global(),"LocalStorageStore.StartInitialize","Should Use LocalStorageProxy"),Microsoft.Live.Core.Internal.LocalStorageConfiguration.set_proxyChannelName("MessengerStorageChannel"),
__MSLiveCore__.Loader.onDocumentReady(ss.Delegate.create(this,function(){MSH.Logger.logTrace(MC.LogContext.get_global(),"LocalStorageStore.StartInitialize","Start to find Sibling frame");MLC.Channel.fromSibling("MessengerStorageChannel",__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("LocalStorage.html","storageiframe"),ss.Delegate.create(this,this.$11))}))):this.$F(MSLS.LS$4.get_$10())},$E:function(a){MSH.Logger.logTrace(MC.LogContext.get_global(),"LocalStorageStore.EndInitialize",
"e.status: "+Microsoft.Live.Core.LocalStorageStatus.toString(a.get_status()));0===this.$3&&(this.$3=a.get_status(),null!=this.$9&&this.$9.invoke(this,a))},$F:function(a){MSH.Logger.logTrace(MC.LogContext.get_global(),"LocalStorageStore.InitializeLocalStorageInstance","group name: "+a.get_$3());var b=this.$14(a);"Messenger2.INST"===a.get_$3()?b.add_initialized(ss.Delegate.create(this,this.$10)):this.get_$C()&&b.add_initialized(ss.Delegate.create(this,this.$13))},$10:function(a,b){MSH.Logger.logTrace(MC.LogContext.get_global(),
"LocalStorageStore.OnFirstGroupInitialized","e.status: "+Microsoft.Live.Core.LocalStorageStatus.toString(b.get_status()));a.remove_initialized(ss.Delegate.create(this,this.$10));1!==b.get_status()?this.$E(b):(this.$4=1E6>a.get_availableStorage(),this.get_$C()&&this.$7++,this.$12(),this.get_$C()||this.$E(new Microsoft.Live.Core.LocalStorageInitializedEventArgs(1)))},$11:function(a){MSH.Logger.logTrace(MC.LogContext.get_global(),"LocalStorageStore.OnChannelAvailable","Sibling channel available: "+(null!=
a));null==a?this.$E(new Microsoft.Live.Core.LocalStorageInitializedEventArgs(2)):(Microsoft.Live.Core.LocalStorageProxy.setChannel(!1,"MessengerStorageChannel",a),this.$F(MSLS.LS$4.get_$10()))},$12:function(){for(var a=ss.IEnumerator.getEnumerator(this.$1);a.moveNext();){var b=a.get_current();this.$F(b)}},$13:function(a,b){MSH.Logger.logTrace(MC.LogContext.get_global(),"LocalStorageStore.OnLocalStorageProxyInitialized","e.status: "+Microsoft.Live.Core.LocalStorageStatus.toString(b.get_status()));
a.remove_initialized(ss.Delegate.create(this,this.$13));1!==b.get_status()?this.$E(b):(this.$7++,this.$6===this.$7&&this.$E(b))},$14:function(a){var b;this.get_$C()?(this.$6++,b=1===a.get_$4()?new Microsoft.Live.Core.LocalStorageProxy(a.get_$3(),null,1):new Microsoft.Live.Core.LocalStorageProxy(a.get_$3(),null)):b=1===a.get_$4()?new Microsoft.Live.Core.LocalStorage(a.get_$3(),1):new Microsoft.Live.Core.LocalStorage(a.get_$3());this.$4&&a.$5(b);return this.$2[a.get_$3()]=b},get_item:function(a){return this.$2[a]}};
MSLS.LocalStorageService=function(a){this.$3=this.$2=MSH.DateTimeHelper.minValue;this.$1E="live.com live-int.com msn.com msn-int.com microsoft.com livejournal.com".split(" ");this.$6=0;this.$5={};this.$48(a);this.$8=[];this.$4=new MSLS.LS$4(MSLS.LocalStorageService.$47(this.$9));this.$22=new Microsoft.Live.Core.LocalStorageInitializedEventArgs(0);MSLS.LocalStorageService.$1.add_$B(ss.Delegate.create(this,this.$25))};MSLS.LocalStorageService.$47=function(a){return MSCo.HashHelper.computeFastHash(a,
"domain")};MSLS.LocalStorageService.prototype={$4:null,$5:null,$6:0,$8:null,$9:null,$A:null,$B:!1,$C:null,$D:!1,$1F:null,add_$20:function(a){this.$21=ss.Delegate.combine(this.$21,a)},remove_$20:function(a){this.$21=ss.Delegate.remove(this.$21,a)},$21:null,$22:null,get_usesLocalStorageProxy:function(){return MSLS.LocalStorageService.$1.get_$C()},add_initialized:function(a){this.add_$20(a);0!==this.$22.get_status()&&a.invoke(this,this.$22)},remove_initialized:function(a){this.remove_$20(a)},add_dataWritten:function(a){this.$23=
ss.Delegate.combine(this.$23,a)},remove_dataWritten:function(a){this.$23=ss.Delegate.remove(this.$23,a)},$23:null,add_dataRead:function(a){this.$24=ss.Delegate.combine(this.$24,a)},remove_dataRead:function(a){this.$24=ss.Delegate.remove(this.$24,a)},$24:null,add_instancesChanged:function(a){this.$4.add_$E(a)},remove_instancesChanged:function(a){this.$4.remove_$E(a)},get_status:function(){return this.$22.get_status()},$25:function(a,b){MSLS.LocalStorageService.$1.remove_$B(ss.Delegate.create(this,
this.$25));1===b.get_status()&&(this.$4.$1A(MSLS.LocalStorageService.$1.get_item("Messenger2.INST")),this.$43(),this.$44(),this.$29(),this.$49());this.$22=b;null!=this.$21&&this.$21.invoke(this,b)},get_lastWriteTime:function(){this.$3B();return this.$3},get_lastReadTime:function(){return this.$2},get_revision:function(){return this.$6},get_currentInstances:function(){return this.$4.get_$12()},get_networkStatusEvents:function(){return this.$2C(2,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,
this.$35),"Messenger2.ABN",null,0)},set_networkStatusEvents:function(a){this.$2B(a,2,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$35),"Messenger2.ABN",null,0);return a},get_messengerSessionState:function(){return this.$2C(4,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$35),"Messenger1.SES",null,0)},set_messengerSessionState:function(a){this.$2B(a,4,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$35),"Messenger1.SES",null,0);if(this.$4.get_$11())if(ss.isNullOrUndefined(a))this.$2A()&&
this.$3F();else{var b=!1;switch(a.services){case 3:case 0:b=!0}this.$4.$18(b)}return a},get_messengerSessionEvents:function(){return this.$2C(5,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$35),"Messenger1.SEE",null,0)},set_messengerSessionEvents:function(a){this.$2B(a,5,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$35),"Messenger1.SEE",null,0);return a},get_cachedSettings:function(){return this.$2C(12,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$35),
"Messenger1.CSE",null,0)},set_cachedSettings:function(a){this.$2B(a,12,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$35),"Messenger1.CSE",null,0);return a},get_conversations:function(){return this.$2C(6,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$3A),"Messenger2.CONV",null,0)},set_conversations:function(a){this.$2B(a,6,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$3A),"Messenger2.CONV",null,1);return a},get_alerts:function(){return this.$2C(9,
ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$35),"Messenger2.ALT",null,0)||null},set_alerts:function(a){this.$2B(a,9,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$35),"Messenger2.ALT",null,0);return a},saveConversationMessage:function(a,b){if(!(ss.isNullOrUndefined(b)||255===b.type)){var c=this.$5[a]||0;this.$31(a,b,c++);this.$2E(a,c)}},saveRecentMessage:function(a,b){ss.isNullOrUndefined(b)||255===b.type||this.$33(a,b)},deletePersistedConversationMessages:function(a){var b=
this.$39(null,a);this.$41(MSLS.LocalStorageService.$1.get_item("Messenger2.CH"),b);delete this.$5[a]},updatePersistedConversationMessageIds:function(a,b){var c=this.getConversationPersistedMessages(a);if(!(null==c||0===c.length)){this.deletePersistedConversationMessages(a);this.$5[b]=c.length;for(var d=0;d<c.length;d++)this.$31(b,c[d],d);c=this.getLastMessage(a);this.$40(a);this.$33(b,c)}},getConversationPersistedMessages:function(a){return this.$30(a)},getLastMessage:function(a){return this.$32(a)},
clearUserSession:function(){this.$4.get_$11()?(this.set_networkStatusEvents(null),this.set_messengerSessionState(null),this.set_messengerSessionEvents(null),this.$B=!1):this.$B=!0},clearAllPersistedData:function(){Object.clearKeys(this.$5);this.$42(null)},onSignedOut:function(a){this.$4.$19(a)},initializeUserStorage:function(a,b,c){String.isNullOrEmpty(b)&&(String.isNullOrEmpty(a)||"none"===a)?c.invoke(!1):(this.$1F=c,String.isNullOrEmpty(a)||(a=MSCo.HashHelper.computeFastHash(a,String.Empty)),String.isNullOrEmpty(b)||
(b=MSCo.HashHelper.computeFastHash(b,"_user")),this.$4.$16(a,b,ss.Delegate.create(this,this.$27)))},refreshConversationData:function(a){this.$C=a;this.$D=!1;var a=MSLS.LocalStorageService.$1.get_item("Messenger2.CONV"),b=MSLS.LocalStorageService.$1.get_item("Messenger2.CH");a.add_refreshed(ss.Delegate.create(this,this.$28));b.add_refreshed(ss.Delegate.create(this,this.$28));Object.clearKeys(this.$5);a.refresh();b.refresh()},get_$26:function(){return this.$8.length},$27:function(a){var b=this.$1F;
this.$1F=null;if(a){this.$B&&this.clearUserSession();for(var c=this.$4.$17(),c=ss.IEnumerator.getEnumerator(c);c.moveNext();){var d=c.get_current();this.$42(d)}}b.invoke(a)},$28:function(a){a.remove_refreshed(ss.Delegate.create(this,this.$28));this.$D?(a=this.$C,this.$C=null,a.invoke()):this.$D=!0},$29:function(){this.$8.contains(this.$9)||(this.$8.enqueue(this.$9),this.$46())},$2A:function(){for(var a=this.$4.get_$12(),b=this.$4.get_$13(),a=ss.IEnumerator.getEnumerator(a);a.moveNext();)if(a.get_current().id!==
b)return!1;return!0},$2B:function(a,b,c,d,e,f,g){c=c.invoke(e,f);d=d.invoke(e,f);null!=d&&(this.$4B(c,d,a,1===(g&1)),this.$45(),2!==(g&2)&&this.$3C(b,a))},$2C:function(a,b,c,d,e,f){b=b.invoke(d,e);c=c.invoke(d,e);if(null==c)return null;this.$2=Date.get_now();c=this.$4C(b,c);2!==(f&2)&&this.$3E(a,c);return c},$2D:function(a){if(Object.keyExists(this.$5,a))return this.$5[a];var b=this.$2C(7,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$37),"Messenger2.CH",a,2);this.$5[a]=null==b?0:
b;return this.$5[a]},$2E:function(a,b){this.$2B(b,7,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$37),"Messenger2.CH",a,3);this.$5[a]=b},$2F:function(a,b){return this.$2C(7,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,function(a,d){return this.$39(a,d)+"_"+b}),"Messenger2.CH",a,2)},$30:function(a){for(var b=this.$2D(a),c=[],d=0;d<b;d++){var e=this.$2F(a,d);null!=e&&c.add(e)}return MSH.CollectionHelper.toArray(c)},$31:function(a,b,c){this.$2B(b,7,ss.Delegate.create(this,
this.$34),ss.Delegate.create(this,function(a,b){return this.$39(a,b)+"_"+c}),"Messenger2.CH",a,3)},$32:function(a){return this.$2C(11,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$39),"Messenger2.LM",a,2)},$33:function(a,b){this.$2B(b,11,ss.Delegate.create(this,this.$34),ss.Delegate.create(this,this.$39),"Messenger2.LM",a,3)},$34:function(a){return a},$35:function(){return!this.$4.get_$11()?null:this.$36(this.$4.get_$13())},$36:function(a){var b=this.$3A(null,null);return b+"_id"+
a},$37:function(a,b){return this.$39(a,b)+"_count"},$38:function(a,b){if(!this.$4.get_$11())return null;var c=this.$35(null,null);return c+=MSCo.HashHelper.computeFastHash(b,"_key")},$39:function(a,b){if(!this.$4.get_$11())return null;var c=this.$3A(null,null);return c+=MSCo.HashHelper.computeFastHash(b,"_key")},$3A:function(){if(!this.$4.get_$11())return null;var a=MSLS.LocalStorageService.$47(this.$9);return a+=this.$4.get_$14()},$3B:function(){if(0===this.$3.getTime()){var a=this.$4C("Messenger2.StatusGroup",
this.$38(null,"LWT"));ss.isNullOrUndefined(a)||(this.$3=new Date(a))}},$3C:function(a,b){this.$6++;this.$3D();null!=this.$23&&this.$23.invoke(this,new MC.LocalStorageDataReadWriteEventArgs(this.$6,a,b))},$3D:function(){this.$3=Date.get_now();this.$4B("Messenger2.StatusGroup",this.$38(null,"LWT"),this.$3.getTime(),!1)},$3E:function(a,b){this.$2=Date.get_now();null!=this.$24&&this.$24.invoke(this,new MC.LocalStorageDataReadWriteEventArgs(this.$6,a,b))},$3F:function(){var a=this.$3A(null,null);null!=
a&&(Object.clearKeys(this.$5),this.$41(MSLS.LocalStorageService.$1.get_item("Messenger2.CH"),a),this.$41(MSLS.LocalStorageService.$1.get_item("Messenger2.CONV"),a),this.$41(MSLS.LocalStorageService.$1.get_item("Messenger2.LM"),a))},$40:function(a){a=this.$39(null,a);this.$41(MSLS.LocalStorageService.$1.get_item("Messenger2.LM"),a)},$41:function(a,b){if(String.isNullOrEmpty(b))a.clear();else{for(var c=[],d=ss.IEnumerator.getEnumerator(a);d.moveNext();){var e=d.get_current();0<=e.indexOf(b)&&c.enqueue(e)}for(;0<
c.length;)d=c.dequeue().toString(),a.set_item(d,null)}},$42:function(a){var b=MSLS.LocalStorageService.$1.get_$A(),c;for(c in b)this.$41(b[c],a)},$43:function(){var a=this.$4C("Messenger2.StatusGroup","VER");if(String.isNullOrEmpty(a)||a!==MSCo.Configuration.get_clientVersion())this.$42(null),this.$4B("Messenger2.StatusGroup","VER",MSCo.Configuration.get_clientVersion(),!0)},$44:function(){var a=this.$4C("Messenger2.StatusGroup","SGAD");if(!ss.isNullOrUndefined(a))for(var b=0,c=a.length;b<c;b++)this.$8.enqueue(a[b])},
$45:function(){for(var a=0;2<this.$8.length;){var b=this.$8.dequeue().toString();this.$42(MSLS.LocalStorageService.$47(b));a++}0<a&&this.$46()},$46:function(){for(var a=Array(this.$8.length),b=[],c=0;0<this.$8.length;)a[c]=this.$8.dequeue().toString(),b.enqueue(a[c]),c++;this.$4B("Messenger2.StatusGroup","SGAD",a,!1);this.$8=b},$48:function(a){if(String.isNullOrEmpty(a))this.$9=document.domain;else{this.$9=a.toLowerCase();for(var a=0,b=this.$1E.length;a<b;a++){var c=this.$1E[a];if(this.$9===c||this.$9.endsWith("."+
c)){this.$9=this.$1E[a];break}}"msn.com"===this.$9&&(this.$9="live.com");"msn-int.com"===this.$9&&(this.$9="live-int.com")}},$49:function(){this.$A=new MSH.Timer(ss.Delegate.create(this,this.$4A),null,6E4,6E4)},$4A:function(){this.$3D()},$4B:function(a,b,c,d){null!=b&&(a=MSLS.LocalStorageService.$1.get_item(a),a.set_item(b,c),d&&a.flush())},$4C:function(a,b){return null==b?null:MSLS.LocalStorageService.$1.get_item(a).get_item(b)}};MSLS.LS$4.registerClass("MSLS.LS$4");MSLS.LS$7.registerClass("MSLS.LS$7");
MSLS.LS$6.registerClass("MSLS.LS$6");MSLS.LS$3.registerClass("MSLS.LS$3");MSLS.LocalStorageService.registerClass("MSLS.LocalStorageService",null,MC.ILocalStorageService);MSLS.LS$4.$0="Messenger2.INST";MSLS.LS$4.$1=null;MSLS.LS$4.$C=5E3;MSLS.LS$4.$D=12E4;MSLS.LS$7.$0=null;MSLS.LS$7.$0=RegExp("(\\$|\\^|\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");MSLS.LocalStorageService.$0=["Messenger1","Messenger2"];MSLS.LocalStorageService.$1=null;MSLS.LocalStorageService.$1=new MSLS.LS$3([new MSLS.LS$6("Messenger2.StatusGroup",
1,null),new MSLS.LS$6("Messenger2.CONV",1,null),new MSLS.LS$6("Messenger2.CH",1,null),new MSLS.LS$6("Messenger2.LM",1,null),new MSLS.LS$6("Messenger2.ALT",2,null),new MSLS.LS$6("Messenger2.ABN",2,null),new MSLS.LS$6("Messenger1.SES",2,null),new MSLS.LS$6("Messenger1.SEE",2,null),new MSLS.LS$6("Messenger1.CSE",2,null),new MSLS.LS$6("Messenger2.ABS",2,null)],MSLS.LocalStorageService.$0);Type.registerNamespace("MSL");MSL.L$0=function(){};MSL.L$0.prototype={$0:1,$1:2,$2:3,$3:4};MSL.L$0.registerEnum("MSL.L$0",
!1);MSL.L$5=function(a){this.$2=a;this.$1=this.$5();this.$0=MC.$create_IdentityInfo(null,null)};MSL.L$5.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,createUserService:function(a){this.$3=a;return this.$4=new MSCr.UserService(this.$0,this,this.$3,this.$2,this.$5())},createConnectionService:function(a,b){return new MSP.ConnectionService(a,b,"https://"===MSCo.HttpRequest.get_defaultScheme())},createStorage:function(a){return new MSS.StorageService(a)},createConversationService:function(a,b,c,d){return new MSCh.PersistencedConversationService(a,
b,c,d)},createAddressBook:function(a){return new MSA.AddressBookService(a)},$5:function(){null==this.$1&&(this.$1=new MSI.IdentityService);return this.$1}};MSL.L$4=function(a){this.$0=a;this.$0.add_messageReceived(ss.Delegate.create(this,this.$1))};MSL.L$4.prototype={$0:null,$1:function(a,b){var c=b.get_command();b.get_parameters();switch(c){case "CollectLogs":c=MSH.LogCollector.get_instance().getLocalLogEntries();this.$0.sendMessage("CollectLogsResponse",[c]);break;case "ClearLogs":MSH.LogCollector.get_instance().clearLocalLogEntries();
break;case "PerfCollectorOutputToConsole":MSH.PerfCollector.get_instance().reportToConsole();break;case "PerfCollectorEnable":MSH.PerfCollector.get_instance().set_enabled(!0);break;case "PerfCollectorDisable":MSH.PerfCollector.get_instance().set_enabled(!1)}}};MSL.L$3=function(){this.$0=/^\{[a-f\d]{8}\-([a-f\d]{4}\-){3}[a-f\d]{12}\}$/i};MSL.L$3.prototype={$0:null,$1:function(){throw Error("Invalid parameter");},$2:function(a){ss.isNullOrUndefined(a)&&this.$1()},$3:function(a){if(!ss.isNullOrUndefined(a)){this.$8(a);
for(var b=0;b<a.length;b++)this.$C(a[b].key),this.$D(a[b].value)}},$4:function(a){this.$2(a)},$5:function(a){switch(a){case 0:case 1:case 2:break;default:this.$1()}},$6:function(a){this.$2(a);!0!==a&&!1!==a&&this.$1()},$7:function(a){this.$C(a);null==a.match(this.$0)&&this.$1()},$8:function(a){this.$2(a);Array.isInstanceOfType(a)||this.$1()},$9:function(a){this.$8(a);for(var b=0;b<a.length;b++)this.$C(a[b])},$A:function(a){this.$8(a);for(var b=0;b<a.length;b++)this.$B(a[b])},$B:function(a){this.$2(a);
(isNaN(a)||!isFinite(a))&&this.$1()},$C:function(a){this.$2(a);Type.getInstanceType(a)!==String&&this.$1();String.isNullOrEmpty(a)&&this.$1()},$D:function(a){ss.isNullOrUndefined(a)||Type.getInstanceType(a)!==String&&this.$1()},$E:function(a){this.$2(a);Type.getInstanceType(a)!==String&&this.$1()}};MSL.L$1=function(a,b){this.$3=ss.Delegate.create(this,this.$D);this.$1=a;this.$1.add_messageReceived(this.$3);this.$5=b;this.$2=new MSL.L$6(this.$5.createUserService(this))};MSL.L$1.prototype={$1:null,
$2:null,$3:null,$4:!1,$5:null,add_$6:function(a){this.$7=ss.Delegate.combine(this.$7,a)},remove_$6:function(a){this.$7=ss.Delegate.remove(this.$7,a)},$7:null,add_$8:function(a){this.$9=ss.Delegate.combine(this.$9,a)},remove_$8:function(a){this.$9=ss.Delegate.remove(this.$9,a)},$9:null,$A:function(a){this.$4||(this.onSignedOutRemotely(a,-1),this.$2.signOut(1,null,!0,"UserSignOut"))},$B:function(){null!=this.$7&&this.$7.invoke(this,ss.EventArgs.Empty)},$C:function(){null!=this.$9&&this.$9.invoke(this,
ss.EventArgs.Empty)},onAlertNotificationReceived:function(a){this.$1.sendMessage("OnAlertNotificationReceived",[a])},onABChangeNotificationReceived:function(a){this.$1.sendMessage("OnABChangeNotificationReceived",[a])},onInitializationCompleted:function(a){this.$1.sendMessage("OnInitializationCompleted",[a])},onUpdateNetworkCompleted:function(a,b,c,d){this.$1.sendMessage("OnUpdateNetworkCompleted",[a,b,c,d])},onNetworkStatusChanged:function(a,b){this.$1.sendMessage("OnNetworkStatusChanged",[a,b])},
onSignedIn:function(a,b,c,d,e,f){this.$1.sendMessage("OnSignedIn",[a,b,c,d,e,f]);0===a?this.$B():this.$C()},onPersistedConversationsLoaded:function(a,b,c,d){this.$1.sendMessage("OnPersistedConversationsLoaded",[a,b,c,d])},onNotifyWebSignInPendingEventsCompleted:function(){this.$1.sendMessage("OnNotifyWebSignInPendingEventsCompleted",[])},onSignedOut:function(a,b,c){"UserSignOut"!==c&&this.$1.sendMessage("OnSignedOut",[a,b,c]);switch(b){case 3:case 1:this.$C()}},onInstancesChanged:function(a){this.$1.sendMessage("OnInstancesChanged",
[a])},onUserSettingsUpdated:function(a,b){this.$1.sendMessage("OnUserSettingsUpdated",[a,b])},onUserUXSettingsUpdated:function(a){this.$1.sendMessage("OnUserUXSettingsUpdated",[a])},onUserServiceDataUpdated:function(a,b){this.$1.sendMessage("OnUserServiceDataUpdated",[a,b])},onSignedOutRemotely:function(a,b){this.$1.sendMessage("OnSignedOutRemotely",[a,b]);this.$C()},onMailNotification:function(a){this.$1.sendMessage("OnMailNotification",[a])},onPendingContacts:function(a){this.$1.sendMessage("OnPendingContacts",
[a])},onSettingsChanged:function(a){this.$1.sendMessage("OnSettingsChanged",[a])},onServiceDataChanged:function(a,b){this.$1.sendMessage("OnServiceDataChanged",[a,b])},onServiceDataDeleted:function(a,b){this.$1.sendMessage("OnServiceDataDeleted",[a,b])},onConversationCreated:function(a,b){this.$1.sendMessage("OnConversationCreated",[a,b])},onConversationInviteAddressCompleted:function(a,b,c,d){this.$1.sendMessage("OnConversationInviteAddressCompleted",[a,b,c,d])},onConversationAddressJoined:function(a,
b){this.$1.sendMessage("OnConversationAddressJoined",[a,b])},onConversationAddressLeft:function(a,b){this.$1.sendMessage("OnConversationAddressLeft",[a,b])},onConversationMessageReceived:function(a,b){this.$1.sendMessage("OnConversationMessageReceived",[a,b])},onConversationHasUnreadMessagesUpdated:function(a,b){this.$1.sendMessage("OnConversationHasUnreadMessagesUpdated",[a,b])},onConversationClosed:function(a){this.$1.sendMessage("OnConversationClosed",[a])},onConversationSendMessageFailed:function(a,
b,c,d){this.$1.sendMessage("OnConversationSendMessageFailed",[a,b,c,d])},onConversationUpdatedId:function(a,b){this.$1.sendMessage("OnConversationUpdatedId",[a,b])},onLogRequestReceived:function(a,b){this.$1.sendMessage("OnLogRequestReceived",[a,b])},onUserServicesUpdated:function(a){this.$1.sendMessage("OnUserServicesUpdated",[a])},onServicesChanged:function(a){this.$1.sendMessage("OnServicesChanged",[a])},$D:function(a,b){if(!this.$4){MSH.PerfCollector.get_instance().increaseEventCounter("UserServiceEventsProxy-MessageReceivedCount",
1);var c=Date.get_now(),d=b.get_command(),e=b.get_parameters();switch(d){case "UpdateNetwork":this.$2.updateNetwork(e[0],e[1],e[2]);break;case "ConversationClose":this.$2.conversationClose(e[0]);break;case "ConversationUpdateHasUnreadMessages":this.$2.conversationUpdateHasUnreadMessages(e[0],e[1]);break;case "ConversationCreate":this.$2.conversationCreate(e[0],e[1]);break;case "ConversationExpose":this.$2.conversationExpose(e[0],e[1]);break;case "ConversationInviteAddress":this.$2.conversationInviteAddress(e[0],
e[1],e[2]);break;case "ConversationSendMessage":this.$2.conversationSendMessage(e[0],e[1],e[2]);break;case "ConversationUpdateId":this.$2.conversationUpdateId(e[0],e[1]);break;case "Initialize":this.$2.initialize(e[0]);break;case "OnSignInPopulateCompleted":this.$2.onSignInPopulateCompleted();break;case "Reconnect":this.$2.reconnect(e[0],e[1],e[2],e[3]);break;case "SignIn":this.$2.signIn(e[0],e[1],e[2],e[3],e[4],e[5]);break;case "SignOut":this.$2.signOut(e[0],e[1],e[2],e[3]);break;case "UpdateServiceData":this.$2.updateServiceData(e[0],
e[1]);break;case "GetConversationHistory":this.$2.getConversationHistory(e[0],e[1]);break;case "UpdateServices":this.$2.updateServices(e[0],e[1],e[2]);break;case "UpdateTicket":this.$2.updateTicket(e[0]);break;case "UpdateUXSettings":this.$2.updateUXSettings(e[0])}c=MSH.DateTimeHelper.subtract(Date.get_now(),c);MSH.PerfCollector.get_instance().addPerfCounterValue("UserServiceEventsProxy-MessageHandlingTime",c)}},dispose:function(){this.$4||(this.$4=!0,this.$1.remove_messageReceived(this.$3),this.$2=
null)}};MSL.L$6=function(a){MSL.L$6.initializeBase(this);this.$F=a};MSL.L$6.prototype={$F:null,initialize:function(a){this.$10(a);this.$F.initialize(a)},updateNetwork:function(a,b,c){this.$C(a);this.$B(b);this.$F.updateNetwork(a,b,c)},signIn:function(a,b,c,d,e,f){this.$10(a);this.$13(b);this.$B(c);this.$E(e);this.$F.signIn(a,b,c,d,e,f)},reconnect:function(a,b,c,d){this.$13(a);this.$B(b);this.$E(d);this.$F.reconnect(a,b,c,d)},signOut:function(a,b,c,d){this.$18(a);this.$19(b);this.$E(d);this.$6(c);
this.$F.signOut(a,b,c,d)},updateServices:function(a,b,c){this.$B(a);this.$6(b);this.$F.updateServices(a,b,c)},updateUXSettings:function(a){this.$4(a);this.$F.updateUXSettings(a)},updateServiceData:function(a,b){this.$13(a);this.$E(b);this.$F.updateServiceData(a,b)},getConversationHistory:function(a,b){this.$C(a);this.$F.getConversationHistory(a,b)},sendDatagram:function(){},conversationCreate:function(a,b){this.$C(a);this.$1B(b);this.$F.conversationCreate(a,b)},conversationSendMessage:function(a,
b,c){this.$C(a);this.$16(b);this.$E(c);this.$F.conversationSendMessage(a,b,c)},conversationInviteAddress:function(a,b,c){this.$C(a);this.$1B(b);this.$E(c);this.$F.conversationInviteAddress(a,b,c)},conversationClose:function(a){this.$C(a);this.$F.conversationClose(a)},conversationUpdateHasUnreadMessages:function(a,b){this.$C(a);this.$F.conversationUpdateHasUnreadMessages(a,b)},conversationExpose:function(){},conversationUpdateId:function(){},onSignInPopulateCompleted:function(){this.$F.onSignInPopulateCompleted()},
updateTicket:function(a){this.$10(a);this.$F.updateTicket(a)},onTicketUpdated:function(){},onPersistedConversationsLoaded:function(a){this.$F.onPersistedConversationsLoaded(a)},$10:function(a){this.$2(a);this.$2(a.authenticationInfo);this.$D(a.authenticationInfo.ticket);this.$D(a.cid);this.$D(a.endpointId);this.$D(a.liveId);switch(a.authenticationInfo.authType){case 1:break;default:this.$1()}},$11:function(a){null!=a&&(this.$6(a.clearStorageBeforeUse),this.$6(a.disableLocalStorage),this.$6(a.allowLocalSignIn))},
$12:function(a){this.$2(a);this.$D(a.id);if(!ss.isNullOrUndefined(a.addresses)){this.$8(a.addresses);for(var b=0;b<a.addresses.length;b++)this.$1B(a.addresses[b])}},$13:function(a){this.$8(a);for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current();this.$2(b);this.$B(b.service);this.$15(b.properties);this.$2(b.endpointData);var b=b.endpointData,c;for(c in b)this.$14(b[c])}},$14:function(a){this.$2(a);this.$B(a.service);this.$C(a.endpointId);this.$15(a.properties)},$15:function(a){this.$2(a);
for(var b in a)this.$C(b)},$16:function(a){this.$2(a);this.$B(a.type);this.$1B(a.sender);null!=a.targetEndpointId&&this.$C(a.targetEndpointId);switch(a.type){case 3:this.$2(a.info);a=a.info;this.$C(a.id);this.$C(a.content);break;case 2:case 255:ss.isNullOrUndefined(a.info)||this.$1();break;case 1:this.$2(a.info);a=a.info;this.$C(a.text);this.$17(a.format);break;case 5:this.$2(a.info);a=a.info;this.$C(a.body);null!=a.senderEndpointId&&this.$C(a.senderEndpointId);break;case 4:this.$2(a.info);a=a.info;
this.$C(a.sipBody);null!=a.senderEndpointId&&this.$C(a.senderEndpointId);break;case 6:this.$2(a.info);this.$B(a.info.duration);break;default:this.$1()}},$17:function(a){this.$2(a);this.$B(a.fontColor);this.$C(a.fontFamily);this.$B(a.fontStyle);this.$6(a.rightToLeft)},$18:function(a){this.$B(a)},$19:function(a){if(!ss.isNullOrUndefined(a)){this.$9(a);for(var b=0;b<a.length;b++)this.$7(a[b])}},$1A:function(a){this.$2(a);ss.isNullOrUndefined(a.contactIds)||this.$9(a.contactIds);this.$C(a.id);this.$C(a.name)},
$1B:function(a){this.$2(a);this.$C(a.address);this.$B(a.roleLists);this.$B(a.type)}};MSL.L$2=function(){};MSL.L$2.$1=function(a){MSL.L$2.$2(a)};MSL.L$2.$2=function(a){var b=PSCh.PubSubServiceEventsProxy.create(a);return MSL.L$2.$0[a.get_id().toString()]=b};MSL.MessengerServiceInitializer=function(){};MSL.MessengerServiceInitializer.initialize=function(a,b){MSL.MessengerServiceInitializer.$6=new MC.LogContext(a);MSH.Logger.logInfo(MSL.MessengerServiceInitializer.$6,"Initialize","Initialized");if(String.isNullOrEmpty(b))throw Error("Invalid domain.");
MSCo.Configuration.set_domainName(b);MSCo.Network.initializeXmlProxyInterface();MSL.MessengerServiceInitializer.$1=b;MSL.MessengerServiceInitializer.$5=a;MSL.MessengerServiceInitializer.$D()};MSL.MessengerServiceInitializer.$8=function(){MSH.Logger.logTrace(MSL.MessengerServiceInitializer.$6,"CreateChannel","Creating Channel");var a=__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("Channel.html"),a=MLC.Channel.fromChild(MSL.MessengerServiceInitializer.$5,MSL.MessengerServiceInitializer.$1,
a,"MessengerChannel");MSL.MessengerServiceInitializer.$0=new MC.ChannelEndpointMultiplexer(a);MSL.MessengerServiceInitializer.$0.add_channelEndpointCreated(MSL.MessengerServiceInitializer.$9);MSL.MessengerServiceInitializer.$0.add_channelEndpointDisposed(MSL.MessengerServiceInitializer.$B)};MSL.MessengerServiceInitializer.$9=function(a,b){var c=b.get_channelEndpoint();MSH.Logger.logTrace(MSL.MessengerServiceInitializer.$6,"MessengerServiceInitializer.OnMultiplexerChannelEndpointCreated","endpointType: "+
MC.ChannelEndpointType.toString(c.get_type()));switch(c.get_type()){case 0:break;case 1:null==MSL.MessengerServiceInitializer.$2&&(MSL.MessengerServiceInitializer.$2=new MSL.L$4(c));break;case 6:MSL.MessengerServiceInitializer.$C(MSL.MessengerServiceInitializer.$1)&&MSL.L$2.$1(c);break;default:var d=MSL.MessengerServiceInitializer.$A(),d=new MSL.L$1(c,d);MSL.MessengerServiceInitializer.$7[c.get_id().toString()]=d}};MSL.MessengerServiceInitializer.$A=function(){var a=MSL.MessengerServiceInitializer.$E();
return new MSL.L$5(a)};MSL.MessengerServiceInitializer.$B=function(a,b){var c=b.get_channelEndpoint();if(4===c.get_type()){var d=c.get_id().toString();MSL.MessengerServiceInitializer.$7[d].dispose();delete MSL.MessengerServiceInitializer.$7[d]}d=window.signInControlChannelEndpointId;!ss.isNullOrUndefined(d)&&d===c.get_id()&&(window.signInControl=null)};MSL.MessengerServiceInitializer.$C=function(a){var a=a||String.Empty,a=a.toLowerCase(),b="."+window.document.domain.toLowerCase();return a.endsWith(b)};
MSL.MessengerServiceInitializer.$D=function(){__MSLiveCore__.Loader.get_settings().messenger.localStorageDisabled?(MSL.MessengerServiceInitializer.$4=1,__MSLiveCore__.Loader.onDocumentReady(MSL.MessengerServiceInitializer.$8)):(new MSLS.LocalStorageService(MSL.MessengerServiceInitializer.$1)).add_initialized(MSL.MessengerServiceInitializer.$F)};MSL.MessengerServiceInitializer.$E=function(){var a;__MSLiveCore__.Loader.get_settings().messenger.localStorageDisabled||1!==MSL.MessengerServiceInitializer.$4?
a=new MSCo.LocalStorageMemoryService:null!=MSL.MessengerServiceInitializer.$3?(a=MSL.MessengerServiceInitializer.$3,MSL.MessengerServiceInitializer.$3=null):a=new MSLS.LocalStorageService(MSL.MessengerServiceInitializer.$1);return new MSCo.LocalStorageServiceWrapper(a)};MSL.MessengerServiceInitializer.$F=function(a,b){MSL.MessengerServiceInitializer.$4=b.get_status();null!=a&&a.remove_initialized(MSL.MessengerServiceInitializer.$F);1===b.get_status()?MSL.MessengerServiceInitializer.$3=a:MSH.Logger.logWarning(MSL.MessengerServiceInitializer.$6,
"MessengerServiceInitializer.OnFirstLocalStorageServiceInitialized","LocalStorageService failed to initialize.");__MSLiveCore__.Loader.onDocumentReady(MSL.MessengerServiceInitializer.$8)};MSL.L$5.registerClass("MSL.L$5",null,MC.IServiceFactory);MSL.L$4.registerClass("MSL.L$4");MSL.L$3.registerClass("MSL.L$3");MSL.L$1.registerClass("MSL.L$1",null,MC.IUserServiceEvents,ss.IDisposable);MSL.L$6.registerClass("MSL.L$6",MSL.L$3,MC.IUserService);MSL.L$2.registerClass("MSL.L$2");MSL.MessengerServiceInitializer.registerClass("MSL.MessengerServiceInitializer");
MSL.L$2.$0={};MSL.MessengerServiceInitializer.$0=null;MSL.MessengerServiceInitializer.$1=null;MSL.MessengerServiceInitializer.$2=null;MSL.MessengerServiceInitializer.$3=null;MSL.MessengerServiceInitializer.$4=0;MSL.MessengerServiceInitializer.$5=null;MSL.MessengerServiceInitializer.$6=null;MSL.MessengerServiceInitializer.$7={};Type.registerNamespace("Microsoft.Live.Messenger.Services");Microsoft.Live.Messenger.Services.ContactsReader=function(){};Microsoft.Live.Messenger.Services.ContactsReader.prototype=
{$0:null,add_networksChanged:function(a){this.$1=ss.Delegate.combine(this.$1,a)},remove_networksChanged:function(a){this.$1=ss.Delegate.remove(this.$1,a)},$1:null,add_groupsChanged:function(a){this.$2=ss.Delegate.combine(this.$2,a)},remove_groupsChanged:function(a){this.$2=ss.Delegate.remove(this.$2,a)},$2:null,add_personsChanged:function(a){this.$3=ss.Delegate.combine(this.$3,a)},remove_personsChanged:function(a){this.$3=ss.Delegate.remove(this.$3,a)},$3:null,get_hasNetworksChangedListener:function(){return null!=
this.$1},get_hasGroupsChangedListener:function(){return null!=this.$2},get_hasPersonsChangedListener:function(){return null!=this.$3},initialize:function(a){this.$0=a},onInitialized:function(a){null!=this.$0&&(this.$0.invoke(a),this.$0=null)},onGroupsChanged:function(a,b,c){null!=this.$2&&this.$2.invoke(this,new Microsoft.Live.Messenger.ContactsReaderChangedEventArgs(MSH.CollectionHelper.toArray(a),MSH.CollectionHelper.toArray(b),MSH.CollectionHelper.toArray(c)))},onNetworksChanged:function(a,b,c){null!=
this.$1&&this.$1.invoke(this,new Microsoft.Live.Messenger.ContactsReaderChangedEventArgs(MSH.CollectionHelper.toArray(a),MSH.CollectionHelper.toArray(b),MSH.CollectionHelper.toArray(c)))},onPersonsChanged:function(a,b,c){null!=this.$3&&this.$3.invoke(this,new Microsoft.Live.Messenger.ContactsReaderChangedEventArgs(MSH.CollectionHelper.toArray(a),MSH.CollectionHelper.toArray(b),MSH.CollectionHelper.toArray(c)))}};Microsoft.Live.Messenger.Services.M$1B=function(a){this.$39=a};Microsoft.Live.Messenger.Services.M$1B.$45=
function(a){return Microsoft.Live.Messenger.Services.M$1B.$0.contains(a.toUpperCase())};Microsoft.Live.Messenger.Services.M$1B.$55=function(a,b){var c=null,d=MSH.StringHelper.splitString(a.trim(),":");if(null!=d){var e=MSH.ConvertHelper.tryParseInt(d[0]);-1!==e&&(2===d.length&&(32===e||2===e||8===e)?c=MC.$create_IMAddressInfo(d[1],e,b):3===d.length&&(8===e&&"live"===d[1])&&(c=MC.$create_IMAddressInfo("live:"+d[2],e,b)))}return c};Microsoft.Live.Messenger.Services.M$1B.prototype={$39:null,$3A:!1,$3B:0,
$3C:null,$3D:null,$3E:null,get_$3F:function(){return this.$3A},set_$3F:function(a){return this.$3A=a},get_$40:function(){this.$44();return this.$3C},get_$41:function(){this.$47();return this.$3E},get_$42:function(){this.$49();return this.$3D},$43:function(){this.$49()},$44:function(){if(null==this.$3C){var a=this.$39.services;if(null!=a){for(var b=[],c=[],d=0;d<a.length;d++){var e=this.$46(a[d]);Microsoft.Live.Messenger.Services.M$1B.$45(e.id)||(b.add(e),c.add(e.id))}this.$3C=MSH.CollectionHelper.toArray(b)}else this.$3C=
[]}},$46:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[5],g=a[8],h=a[9],i=a[10],j=a[11],k=a[12],a=a[13],l=0;e&&(l=2,Microsoft.Live.Messenger.Services.M$1B.$45(b)&&(l=1));b=MC.$create_NetworkInfo(b,c,l,1!==l,h,g,i,j);b.iconUrl=f;b.rank=k;b.tokenState=d;b.imEnabled=e&&!a;return b},$47:function(){if(null==this.$3E){var a=this.$39.categories;if(null!=a){for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=this.$48(a[c]);this.$3E=b}else this.$3E=[]}},$48:function(a){var b=MC.$create_GroupInfo(this.$54(a,
0),this.$54(a,1),null);b.isFavorites=this.$54(a,2);return b},$49:function(){if(null==this.$3D){this.$47();this.$44();var a=this.$39.persons;this.$3B=this.$39.settings[0];for(var b={},c=[],d=0;d<a.length;d++){var e=this.$4A(a[d]);null!=e&&(c.add(e),this.$52(b,a[d]))}this.$53(this.$3E,b);this.$3D=MSH.CollectionHelper.toArray(c)}},$4A:function(a){for(var b=null,c=a[0],d=[],e=a[1],f=0;f<e.length;f++){var g=e[f],h=this.$39.getContactHelper(a,f),g=this.$4B(a,g,h);null!=g&&d.add(g)}f=e=null;Microsoft.Live.Messenger.M$18.get_$13()&&
(g=null!=a[5]?a[5][0]:null,a=null!=a[5]?a[5][8]:null,String.isNullOrEmpty(g)||(e=this.$50(g,!0,0)),String.isNullOrEmpty(a)||(f=this.$50(a,!0,0)));0<d.length&&(null!=e&&d[0].addresses.add(e),null!=f&&d[0].addresses.add(f),b=MC.$create_PersonInfo(c,MSH.CollectionHelper.toArray(d)));return b},$4B:function(a,b,c){var d=c.getContactState(),e=1!==d?c.getId():null,e=MC.$create_ContactInfo(e,c.getNickName(),[]),f=this.$54(a,6)||String.Empty;e.firstName=c.getFirstName();e.lastName=c.getLastName();e.fullName=
c.getFullName();e.contactFullName=this.$39.getContactFullName(a,b);e.cid=f;e.pictureUrl=c.getUserTileMedium();e.favoritesOrder=c.getFavoriteOrder();if(1===d)return e;var d=!1,g=[],h=3;a[8]&&(h|=64);var i=!1,a=null,j=this.$54(b,3);if(null!=j&&0<j.length&&(a=this.$54(j,0),null!=a&&0<a.length))for(j=ss.IEnumerator.getEnumerator(a);j.moveNext();){var k=j.get_current(),k=Microsoft.Live.Messenger.Services.M$1B.$55(k,h);null!=k&&(g.add(k),i=!0)}i||(i=c.getPassportMemberName(),String.isNullOrEmpty(i)||(i=
MC.$create_IMAddressInfo(i,1,h),i.cid=f,g.add(i)));f=this.$54(b,9);if(null!=f){i=this.$54(b,13);j=this.$54(b,14);for(k=0;k<f.length;k++){var l=this.$4F(f[k],null!=i&&i.length>k?i[k]:!1,null!=j&&j.length>k?j[k]:0,h);null!=l&&(this.$3A&&32===l.type?d=!0:g.add(l))}}h=!1;f=this.$54(b,4);!String.isNullOrEmpty(f)&&"FB"===f&&(j=this.$54(b,3),null!=j&&(h=this.$54(j,2)));0<g.length?e.addresses=MSH.CollectionHelper.toArray(g):(b=this.$4C(c,a),null!=b&&(b.isFacebookMobileEnabled=h,e.addresses=[b]));c=this.$4E(c);
String.isNullOrEmpty(c)||(e.emailAddress=MC.$create_EmailInfo(c));if(0===e.addresses.length&&(d||String.isNullOrEmpty(e.firstName)&&String.isNullOrEmpty(e.lastName)&&null==e.emailAddress))e=null;return e},$4C:function(a,b){var c=null,d=a.getSourceId(),e=String.Empty;if("GOOG"===d){if(null!=b&&0<b.length){var f=MSH.StringHelper.splitString(b[0].trim(),":");2<f.length&&(f=MSH.StringHelper.splitString(f[1].trim(),";"),null!=f&&0<f.length&&(e=f[0]))}}else e=a.getObjectId();!String.isNullOrEmpty(e)&&!String.isNullOrEmpty(d)&&
(f=this.$4D(d),null!=f&&(c=MC.$create_IMAddressInfo(e,13,f.supportsIM?3:0),c.network=d));return c},$4D:function(a){if(null!=this.$3C)for(var b=ss.IEnumerator.getEnumerator(this.$3C);b.moveNext();){var c=b.get_current();if(c.id===a){if(c.isRemoteNetwork)return c;break}}return null},$4E:function(a){var b=a.getPassportMemberName();String.isNullOrEmpty(b)&&(b=a.getPersonalEmail());String.isNullOrEmpty(b)&&(b=a.getWorkEmail());String.isNullOrEmpty(b)&&(b=a.getOtherEmail());return b},$4F:function(a,b,c,
d){var e=null;if(!String.isNullOrEmpty(a)&&b){switch(c){case 2:b=2;break;case 16:b=16;break;case 32:b=32;break;default:b=0}0!==b&&(e=MC.$create_IMAddressInfo(a,b,d))}return e},$50:function(a,b,c){var d=null;!String.isNullOrEmpty(a)&&b&&(d=MC.$create_IMAddressInfo(a,4,c));return d},$51:function(a,b,c,d,e){b=[];a=a.getPassportMemberName();!String.isNullOrEmpty(a)&&4===d&&(d=MC.$create_IMAddressInfo(a,1,1),d.cid=e,b.add(d));return MSH.CollectionHelper.toArray(b)},$52:function(a,b){var c=this.$54(b,12),
d=this.$54(b,0);if(null!=c)for(c=ss.IEnumerator.getEnumerator(c);c.moveNext();){var e=c.get_current(),f=a[e];null==f&&(f=[],a[e]=f);f.add(d)}},$53:function(a,b){for(var c=ss.IEnumerator.getEnumerator(a);c.moveNext();){var d=c.get_current(),e=b[d.id];null==e&&(e=[]);d.contactIds=MSH.CollectionHelper.toArray(e)}},$54:function(a,b){return b<a.length?a[b]:null}};Microsoft.Live.Messenger.Services.PeopleCache=function(a,b){this.$B=-1;Microsoft.Live.Messenger.Services.PeopleCache.initializeBase(this);null==
a&&(a="$WLXContacts");this.id=a;this.$6=b;this.$8=[];this.$9=[];this.$A=[]};Microsoft.Live.Messenger.Services.PeopleCache.peopleCacheExists=function(a){return!ss.isNullOrUndefined(window.self[a])};Microsoft.Live.Messenger.Services.PeopleCache.prototype={id:null,$4:null,$5:null,$6:!1,$7:5,$8:null,$9:null,$A:null,get_networks:function(){return null!=this.$5?this.$5.get_$40():null},get_groups:function(){return null!=this.$5?this.$5.get_$41():null},get_persons:function(){return null!=this.$5?this.$5.get_$42():
null},initialize:function(a){Microsoft.Live.Messenger.Services.PeopleCache.callBaseMethod(this,"initialize",[a]);this.$C()},notifyAddressBookChange:function(a){this.$4.processABChangedEvent(a)},$C:function(){var a=this.get_$D();null!=a?a.isReady?this.$F():(a=ss.Delegate.create(this,this.$F),this.$11(this.get_$D(),"$self","ready",a)):MSH.TestingHelper.get_isUnitTest()||window.setTimeout(ss.Delegate.create(this,this.$C),this.$E())},get_$D:function(){null==this.$4&&(this.$4=window.self[this.id]);return this.$4},
$E:function(){1E3>this.$7&&(this.$7+=10);return this.$7},$F:function(){this.$5=new Microsoft.Live.Messenger.Services.M$1B(this.$4);this.$5.set_$3F(this.$6);this.$5.$43();this.$10();this.onInitialized(0)},$10:function(){var a=ss.Delegate.create(this,this.$12),b=ss.Delegate.create(this,this.$13),c=ss.Delegate.create(this,this.$14);this.$11(this.get_$D(),"$services","changed",a);this.$11(this.get_$D(),"$categories","changed",b);this.$11(this.get_$D(),"$persons","changed",c)},$11:function(a,b,c,d){a[b].bind(c,
d)},$12:function(a,b){this.$8.enqueue(b);this.$15()},$13:function(a,b){this.$9.enqueue(b);this.$15()},$14:function(a,b){this.$A.enqueue(b);this.$15()},$15:function(){-1===this.$B&&(this.$B=window.setTimeout(ss.Delegate.create(this,this.$16),1))},$16:function(){window.clearTimeout(this.$B);this.$B=-1;this.$17();this.$18();this.$19()},$17:function(){if(this.get_hasNetworksChangedListener()){for(var a=[],b=[],c=[];0<this.$8.length;){var d=this.$8.dequeue();if(null!=d.added)for(var e=ss.IEnumerator.getEnumerator(d.added);e.moveNext();){var f=
e.get_current(),f=this.$5.$46(f.updated);null!=f&&!Microsoft.Live.Messenger.Services.M$1B.$45(f.id)&&a.add(f)}if(null!=d.changed)for(e=ss.IEnumerator.getEnumerator(d.changed);e.moveNext();)f=e.get_current(),f=this.$5.$46(f.updated),null!=f&&!Microsoft.Live.Messenger.Services.M$1B.$45(f.id)&&b.add(f);if(null!=d.removed)for(d=ss.IEnumerator.getEnumerator(d.removed);d.moveNext();)e=d.get_current(),e=this.$5.$46(e.original),null!=e&&!Microsoft.Live.Messenger.Services.M$1B.$45(e.id)&&c.add(e)}Microsoft.Live.Messenger.Services.PeopleCache.callBaseMethod(this,
"onNetworksChanged",[a,b,c])}},$18:function(){if(this.get_hasGroupsChangedListener()){for(var a=[],b=[],c=[];0<this.$9.length;){var d=this.$9.dequeue();if(null!=d.added)for(var e=ss.IEnumerator.getEnumerator(d.added);e.moveNext();){var f=e.get_current(),f=this.$5.$48(f.updated);null!=f&&a.add(f)}if(null!=d.changed)for(e=ss.IEnumerator.getEnumerator(d.changed);e.moveNext();)f=e.get_current(),f=this.$5.$48(f.updated),null!=f&&b.add(f);if(null!=d.removed)for(d=ss.IEnumerator.getEnumerator(d.removed);d.moveNext();)e=
d.get_current(),e=this.$5.$48(e.original),null!=e&&c.add(e)}Microsoft.Live.Messenger.Services.PeopleCache.callBaseMethod(this,"onGroupsChanged",[a,b,c])}},$19:function(){if(this.get_hasPersonsChangedListener()){for(var a=[],b=[],c=[];0<this.$A.length;){var d=this.$A.dequeue();if(null!=d.added)for(var e=ss.IEnumerator.getEnumerator(d.added);e.moveNext();){var f=e.get_current(),f=this.$5.$4A(f.updated);null!=f&&a.add(f)}if(null!=d.changed)for(e=ss.IEnumerator.getEnumerator(d.changed);e.moveNext();)f=
e.get_current(),f=this.$5.$4A(f.updated),null!=f&&b.add(f);if(null!=d.removed)for(d=ss.IEnumerator.getEnumerator(d.removed);d.moveNext();)e=d.get_current(),e=this.$5.$4A(e.original),null!=e&&c.add(e)}Microsoft.Live.Messenger.Services.PeopleCache.callBaseMethod(this,"onPersonsChanged",[a,b,c])}}};Microsoft.Live.Messenger.Services.M$1E=function(a,b){Microsoft.Live.Messenger.Services.M$1E.initializeBase(this);null==a||0===a.length?Microsoft.Live.Messenger.M$F.$2("Persons must contain at least one item.",
"persons"):(null==b||0===b.length)&&Microsoft.Live.Messenger.M$F.$2("Networks must contain at least one item.","networks");this.$4=a;this.$5=b};Microsoft.Live.Messenger.Services.M$1E.prototype={$4:null,$5:null,get_networks:function(){return this.$5},get_groups:function(){return[]},get_persons:function(){return this.$4},notifyAddressBookChange:function(){},initialize:function(a){Microsoft.Live.Messenger.Services.M$1E.callBaseMethod(this,"initialize",[a]);this.onInitialized(0)}};Microsoft.Live.Messenger.Services.WebmainHelper=
function(){};Microsoft.Live.Messenger.Services.WebmainHelper.isQoS=function(){return null!=window.self.$ScenarioQoS?!0:!1};Microsoft.Live.Messenger.Services.WebmainHelper.isConfig=function(){return null!=window.self.$Config?!0:!1};Microsoft.Live.Messenger.Services.WebmainHelper.isWlxIM=function(){return null!=window.self.$WLXIM?!0:!1};Microsoft.Live.Messenger.Services.WebmainHelper.startQoS=function(a){return Microsoft.Live.Messenger.Services.WebmainHelper.isQoS()?$ScenarioQoS.startScenario(a,"WebIM"):
null};Microsoft.Live.Messenger.Services.WebmainHelper.stopQoS=function(a,b,c){Microsoft.Live.Messenger.Services.WebmainHelper.isQoS()&&null!=a&&$ScenarioQoS.stopScenario(a,b,c)};Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats=function(a,b,c,d,e){Microsoft.Live.Messenger.Services.WebmainHelper.isQoS()&&null!=d&&$WLXIM.addScenarioQoSStats(a,b,c,d,e)};Microsoft.Live.Messenger.Services.WebmainHelper.qoSResetTime=function(a){switch(a){case "WebIM_Signin":Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime=
(new Date).getTime();break;case "WebIM_Reconnect":Microsoft.Live.Messenger.Services.WebmainHelper.qoSReconnectApiStartTime=(new Date).getTime()}};Microsoft.Live.Messenger.Services.SkyJSHelper=function(){};Microsoft.Live.Messenger.Services.SkyJSHelper.add_initSucceeded=function(a){Microsoft.Live.Messenger.Services.SkyJSHelper.$2=ss.Delegate.combine(Microsoft.Live.Messenger.Services.SkyJSHelper.$2,a)};Microsoft.Live.Messenger.Services.SkyJSHelper.remove_initSucceeded=function(a){Microsoft.Live.Messenger.Services.SkyJSHelper.$2=
ss.Delegate.remove(Microsoft.Live.Messenger.Services.SkyJSHelper.$2,a)};Microsoft.Live.Messenger.Services.SkyJSHelper.add_callStarted=function(a){Microsoft.Live.Messenger.Services.SkyJSHelper.$3=ss.Delegate.combine(Microsoft.Live.Messenger.Services.SkyJSHelper.$3,a)};Microsoft.Live.Messenger.Services.SkyJSHelper.remove_callStarted=function(a){Microsoft.Live.Messenger.Services.SkyJSHelper.$3=ss.Delegate.remove(Microsoft.Live.Messenger.Services.SkyJSHelper.$3,a)};Microsoft.Live.Messenger.Services.SkyJSHelper.add_pluginLoaded=
function(a){Microsoft.Live.Messenger.Services.SkyJSHelper.$4=ss.Delegate.combine(Microsoft.Live.Messenger.Services.SkyJSHelper.$4,a)};Microsoft.Live.Messenger.Services.SkyJSHelper.remove_pluginLoaded=function(a){Microsoft.Live.Messenger.Services.SkyJSHelper.$4=ss.Delegate.remove(Microsoft.Live.Messenger.Services.SkyJSHelper.$4,a)};Microsoft.Live.Messenger.Services.SkyJSHelper.add_callFinished=function(a){Microsoft.Live.Messenger.Services.SkyJSHelper.$5=ss.Delegate.combine(Microsoft.Live.Messenger.Services.SkyJSHelper.$5,
a)};Microsoft.Live.Messenger.Services.SkyJSHelper.remove_callFinished=function(a){Microsoft.Live.Messenger.Services.SkyJSHelper.$5=ss.Delegate.remove(Microsoft.Live.Messenger.Services.SkyJSHelper.$5,a)};Microsoft.Live.Messenger.Services.SkyJSHelper.getInstance=function(){null==Microsoft.Live.Messenger.Services.SkyJSHelper.$0&&(Microsoft.Live.Messenger.Services.SkyJSHelper.$0=window.self.SkyJS);return Microsoft.Live.Messenger.Services.SkyJSHelper.$0};Microsoft.Live.Messenger.Services.SkyJSHelper.skypeInitSucceeded=
function(){Microsoft.Live.Messenger.Services.SkyJSHelper.initSucceeded=!0;null!=Microsoft.Live.Messenger.Services.SkyJSHelper.$2&&Microsoft.Live.Messenger.Services.SkyJSHelper.$2.invoke()};Microsoft.Live.Messenger.Services.SkyJSHelper.skypeCallStarted=function(){Microsoft.Live.Messenger.Services.SkyJSHelper.isCallInProgress=!0;Microsoft.Live.Messenger.Services.SkyJSHelper.isPluginLoaded=!1;null!=Microsoft.Live.Messenger.Services.SkyJSHelper.$3&&Microsoft.Live.Messenger.Services.SkyJSHelper.$3.invoke();
Microsoft.Live.Messenger.Services.SkyJSHelper.$1=Date.get_now()};Microsoft.Live.Messenger.Services.SkyJSHelper.skypePluginStarted=function(){Microsoft.Live.Messenger.Services.SkyJSHelper.isPluginLoaded=!0;null!=Microsoft.Live.Messenger.Services.SkyJSHelper.$4&&Microsoft.Live.Messenger.Services.SkyJSHelper.$4.invoke();Microsoft.Live.Messenger.Services.SkyJSHelper.reportPluginStartDuration()};Microsoft.Live.Messenger.Services.SkyJSHelper.skypeCallFinished=function(){Microsoft.Live.Messenger.Services.SkyJSHelper.isCallInProgress=
!1;Microsoft.Live.Messenger.Services.SkyJSHelper.isPluginLoaded=!1;null!=Microsoft.Live.Messenger.Services.SkyJSHelper.$5&&Microsoft.Live.Messenger.Services.SkyJSHelper.$5.invoke()};Microsoft.Live.Messenger.Services.SkyJSHelper.reportSkypeLogin=function(a,b){Microsoft.Live.Messenger.Services.SkyJSHelper.initErrorCode=b;if(null!=window.self.$BSI){var c={};c.HasSkype=a?1:0;c.ErrorCode=b;$BSI.reportEvent("WebIM.SkypeLogin",c)}};Microsoft.Live.Messenger.Services.SkyJSHelper.reportAudioVideoStarted=function(a){if(null!=
window.self.$BSI){var b={WebIMLaunchPoint:"recentConversations"};b.ConversationType=a?"video":"voice";b.isOverlayMode=$WLXIM.isSidebarOverlay();$BSI.reportEvent("WebIM.ConversationStarted",b)}};Microsoft.Live.Messenger.Services.SkyJSHelper.reportPluginStartDuration=function(){if(null!=window.self.$BSI){var a=Math.floor((Date.get_now()-Microsoft.Live.Messenger.Services.SkyJSHelper.$1)/1E3),b={};b.PluginStartTime=a;$BSI.reportEvent("WebIM.SkypePluginStart",b)}};Microsoft.Live.Messenger.Services.M$17=
function(){this.$0=[]};Microsoft.Live.Messenger.Services.M$17.prototype={$0:null,$1:function(a){this.$2(a)||this.$0.add(a)},$2:function(a){for(var b=ss.IEnumerator.getEnumerator(this.$0);b.moveNext();)if(b.get_current()===a)return!0;return!1}};Microsoft.Live.Messenger.Services.UserServiceFactory=function(){};Microsoft.Live.Messenger.Services.UserServiceFactory.get_$2=function(){return Microsoft.Live.Messenger.Services.UserServiceFactory.$0};Microsoft.Live.Messenger.Services.UserServiceFactory.set_$2=
function(a){return Microsoft.Live.Messenger.Services.UserServiceFactory.$0=a};Microsoft.Live.Messenger.Services.UserServiceFactory.get_callback=function(){return Microsoft.Live.Messenger.Services.UserServiceFactory.$1};Microsoft.Live.Messenger.Services.UserServiceFactory.set_callback=function(a){return Microsoft.Live.Messenger.Services.UserServiceFactory.$1=a};Microsoft.Live.Messenger.Services.UserServiceFactory.create=function(a,b){return null!=Microsoft.Live.Messenger.Services.UserServiceFactory.$0?
Microsoft.Live.Messenger.Services.UserServiceFactory.$0:new Microsoft.Live.Messenger.Services.UserServiceProxy(a.get_$E().get_$3(),b)};Microsoft.Live.Messenger.Services.UserServiceProxy=function(a,b){this.$2=new Microsoft.Live.Messenger.M$13;this.$3=ss.Delegate.create(this,this.$4);this.$0=a;this.$0.add_messageReceived(this.$3);this.$1=b};Microsoft.Live.Messenger.Services.UserServiceProxy.prototype={$0:null,$1:null,$3:null,dispose:function(){this.$0.remove_messageReceived(this.$3)},$4:function(a,
b){MSH.PerfCollector.get_instance().increaseEventCounter("UserServiceProxy-MessageReceivedCount",1);var c=Date.get_now(),d=b.get_parameters();switch(b.get_command()){case "OnAlertNotificationReceived":this.$1.onAlertNotificationReceived(d[0]);break;case "OnABChangeNotificationReceived":this.$1.onABChangeNotificationReceived(d[0]);break;case "OnUpdateNetworkCompleted":this.$1.onUpdateNetworkCompleted(d[0],d[1],d[2],d[3]);break;case "OnNetworkStatusChanged":this.$1.onNetworkStatusChanged(d[0],d[1]);
break;case "OnConversationAddressJoined":this.$1.onConversationAddressJoined(d[0],d[1]);break;case "OnConversationAddressLeft":this.$1.onConversationAddressLeft(d[0],d[1]);break;case "OnConversationCreated":this.$1.onConversationCreated(d[0],d[1]);break;case "OnConversationInviteAddressCompleted":this.$1.onConversationInviteAddressCompleted(d[0],d[1],d[2],this.$2.$3(d[3]));break;case "OnConversationMessageReceived":this.$1.onConversationMessageReceived(d[0],d[1]);break;case "OnConversationHasUnreadMessagesUpdated":this.$1.onConversationHasUnreadMessagesUpdated(d[0],
d[1]);break;case "OnConversationClosed":this.$1.onConversationClosed(d[0]);break;case "OnConversationSendMessageFailed":this.$1.onConversationSendMessageFailed(d[0],d[1],d[2],this.$2.$3(d[3]));break;case "OnConversationUpdatedId":this.$1.onConversationUpdatedId(d[0],d[1]);break;case "OnLogRequestReceived":this.$1.onLogRequestReceived(d[0],d[1]);break;case "OnInitializationCompleted":this.$1.onInitializationCompleted(d[0]);break;case "OnInstancesChanged":this.$1.onInstancesChanged(d[0]);break;case "OnMailNotification":this.$1.onMailNotification(d[0]);
break;case "OnPendingContacts":this.$1.onPendingContacts(d[0]);break;case "OnServiceDataChanged":this.$1.onServiceDataChanged(d[0],d[1]);break;case "OnServiceDataDeleted":this.$1.onServiceDataDeleted(d[0],d[1]);break;case "OnSettingsChanged":this.$1.onSettingsChanged(d[0]);break;case "OnSignedIn":this.$1.onSignedIn(d[0],d[1],d[2],d[3],d[4],this.$2.$3(d[5]));break;case "OnPersistedConversationsLoaded":this.$1.onPersistedConversationsLoaded(d[0],d[1],d[2],d[3]);break;case "OnNotifyWebSignInPendingEventsCompleted":this.$1.onNotifyWebSignInPendingEventsCompleted();
break;case "OnSignedOut":this.$1.onSignedOut(d[0],d[1],this.$2.$3(d[2]));break;case "OnSignedOutRemotely":this.$1.onSignedOutRemotely(d[0],d[1]);break;case "OnUserServiceDataUpdated":this.$1.onUserServiceDataUpdated(d[0],this.$2.$3(d[1]));break;case "OnUserSettingsUpdated":this.$1.onUserSettingsUpdated(d[0],this.$2.$3(d[1]));break;case "OnUserUXSettingsUpdated":this.$1.onUserUXSettingsUpdated(d[0]);break;case "OnUserServicesUpdated":this.$1.onUserServicesUpdated(d[0]);break;case "OnServicesChanged":this.$1.onServicesChanged(d[0])}c=
MSH.DateTimeHelper.subtract(Date.get_now(),c);MSH.PerfCollector.get_instance().addPerfCounterValue("UserServiceProxy-MessageHandlingTime",c)},updateNetwork:function(a,b,c){this.$0.sendMessage("UpdateNetwork",[a,b,c])},signIn:function(a,b,c,d,e,f){this.$0.sendMessage("SignIn",[a,b,c,d,this.$2.$2(e),f])},initialize:function(a){this.$0.sendMessage("Initialize",[a])},reconnect:function(a,b,c,d){this.$0.sendMessage("Reconnect",[a,b,c,this.$2.$2(d)])},signOut:function(a,b,c,d){this.$0.sendMessage("SignOut",
[a,b,c,this.$2.$2(d)])},updateServices:function(a,b,c){this.$0.sendMessage("UpdateServices",[a,b,c])},updateUXSettings:function(a){this.$0.sendMessage("UpdateUXSettings",[a])},updateServiceData:function(a,b){this.$0.sendMessage("UpdateServiceData",[a,this.$2.$2(b)])},getConversationHistory:function(a,b){this.$0.sendMessage("GetConversationHistory",[a,b])},sendDatagram:function(){},conversationCreate:function(a,b){this.$0.sendMessage("ConversationCreate",[a,b])},conversationSendMessage:function(a,
b,c){this.$0.sendMessage("ConversationSendMessage",[a,b,this.$2.$2(c)])},conversationInviteAddress:function(a,b,c){this.$0.sendMessage("ConversationInviteAddress",[a,b,this.$2.$2(c)])},conversationClose:function(a){this.$0.sendMessage("ConversationClose",[a])},conversationExpose:function(){},conversationUpdateId:function(){},conversationUpdateHasUnreadMessages:function(a,b){this.$0.sendMessage("ConversationUpdateHasUnreadMessages",[a,b])},onSignInPopulateCompleted:function(){this.$0.sendMessage("OnSignInPopulateCompleted",
[])},updateTicket:function(){},onTicketUpdated:function(){},onPersistedConversationsLoaded:function(){}};Type.registerNamespace("Microsoft.Live.Messenger");Microsoft.Live.Messenger.UploadLogsPreference=function(){};Microsoft.Live.Messenger.UploadLogsPreference.prototype={none:0,accept:1,decline:2};Microsoft.Live.Messenger.UploadLogsPreference.registerEnum("Microsoft.Live.Messenger.UploadLogsPreference",!1);Microsoft.Live.Messenger.AuthenticationStatus=function(){};Microsoft.Live.Messenger.AuthenticationStatus.prototype=
{none:0,alreadySignedIn:1,unsupportedBrowser:2,multipleEndpointsNotSupported:4,blockedApplication:8,blockedUser:16,authenticationFailure:32,serviceUnavailable:64,insecureTransportNotSupported:128};Microsoft.Live.Messenger.AuthenticationStatus.registerEnum("Microsoft.Live.Messenger.AuthenticationStatus",!0);Microsoft.Live.Messenger.INotifyCollectionChanged=function(){};Microsoft.Live.Messenger.INotifyCollectionChanged.registerInterface("Microsoft.Live.Messenger.INotifyCollectionChanged");Microsoft.Live.Messenger.INotifyPropertyChanged=
function(){};Microsoft.Live.Messenger.INotifyPropertyChanged.registerInterface("Microsoft.Live.Messenger.INotifyPropertyChanged");Microsoft.Live.Messenger.NotifyCollectionChangedAction=function(){};Microsoft.Live.Messenger.NotifyCollectionChangedAction.prototype={add:0,remove:1,replaced:2,reset:3};Microsoft.Live.Messenger.NotifyCollectionChangedAction.registerEnum("Microsoft.Live.Messenger.NotifyCollectionChangedAction",!1);Microsoft.Live.Messenger.M$2=function(){};Microsoft.Live.Messenger.M$2.registerInterface("Microsoft.Live.Messenger.M$2");
Microsoft.Live.Messenger.$create_M$1D=function(a){var b={};b.$0=a;b.$1=[];return b};Microsoft.Live.Messenger.M$0=function(){};Microsoft.Live.Messenger.M$0.prototype={$0:0,$1:1,$2:2,$3:3,$4:4,$5:5,$6:6};Microsoft.Live.Messenger.M$0.registerEnum("Microsoft.Live.Messenger.M$0",!1);Microsoft.Live.Messenger.M$5=function(){};Microsoft.Live.Messenger.M$5.registerInterface("Microsoft.Live.Messenger.M$5");Microsoft.Live.Messenger.IMAddressType=function(){};Microsoft.Live.Messenger.IMAddressType.prototype=
{none:0,windowsLive:1,officeCommunicator:2,telephone:4,skype:8,connect:13,smtp:16,yahoo:32};Microsoft.Live.Messenger.IMAddressType.registerEnum("Microsoft.Live.Messenger.IMAddressType",!1);Microsoft.Live.Messenger.EmoticonSize=function(){};Microsoft.Live.Messenger.EmoticonSize.prototype={small:0,medium:1};Microsoft.Live.Messenger.EmoticonSize.registerEnum("Microsoft.Live.Messenger.EmoticonSize",!1);Microsoft.Live.Messenger.NetworkStatus=function(){};Microsoft.Live.Messenger.NetworkStatus.prototype=
{signedOut:0,signingIn:1,signedIn:2,signingOut:3,autoReconnectWaiting:4};Microsoft.Live.Messenger.NetworkStatus.registerEnum("Microsoft.Live.Messenger.NetworkStatus",!1);Microsoft.Live.Messenger.PresenceStatus=function(){};Microsoft.Live.Messenger.PresenceStatus.prototype={offline:0,online:1,appearOffline:2,busy:3,idle:4,beRightBack:5,away:6,inACall:7,outToLunch:8};Microsoft.Live.Messenger.PresenceStatus.registerEnum("Microsoft.Live.Messenger.PresenceStatus",!1);Microsoft.Live.Messenger.PrivacyMode=
function(){};Microsoft.Live.Messenger.PrivacyMode.prototype={allowByDefault:0,blockByDefault:1};Microsoft.Live.Messenger.PrivacyMode.registerEnum("Microsoft.Live.Messenger.PrivacyMode",!1);Microsoft.Live.Messenger.SessionServices=function(){};Microsoft.Live.Messenger.SessionServices.prototype={normal:0,notifications:1,contactPresence:2,full:3};Microsoft.Live.Messenger.SessionServices.registerEnum("Microsoft.Live.Messenger.SessionServices",!1);Microsoft.Live.Messenger.SignedOutReason=function(){};
Microsoft.Live.Messenger.SignedOutReason.prototype={signedOutByLocalEndpoint:0,signedOutByRemoteEndpoint:1,connectionLost:2,serverError:3,endpointLimitExceeded:4,signedOutByServer:5};Microsoft.Live.Messenger.SignedOutReason.registerEnum("Microsoft.Live.Messenger.SignedOutReason",!1);Microsoft.Live.Messenger.SignOutLocations=function(){};Microsoft.Live.Messenger.SignOutLocations.prototype={local:1,remote:2,all:3};Microsoft.Live.Messenger.SignOutLocations.registerEnum("Microsoft.Live.Messenger.SignOutLocations",
!0);Microsoft.Live.Messenger.M$4=function(){};Microsoft.Live.Messenger.M$4.prototype={$0:0,$1:1,$2:2,$3:3,$4:4,$5:5,$6:6};Microsoft.Live.Messenger.M$4.registerEnum("Microsoft.Live.Messenger.M$4",!1);Microsoft.Live.Messenger.UserStatus=function(){};Microsoft.Live.Messenger.UserStatus.prototype={signedOut:0,signingIn:1,signedIn:2,signingOut:3,autoReconnectWaiting:4};Microsoft.Live.Messenger.UserStatus.registerEnum("Microsoft.Live.Messenger.UserStatus",!1);Microsoft.Live.Messenger.DisplayNameMode=function(){};
Microsoft.Live.Messenger.DisplayNameMode.prototype={displayName:0,fullName:1};Microsoft.Live.Messenger.DisplayNameMode.registerEnum("Microsoft.Live.Messenger.DisplayNameMode",!1);Microsoft.Live.Messenger.MailFolder=function(){};Microsoft.Live.Messenger.MailFolder.prototype={inbox:0,deleted:1,junk:2,sent:3,drafts:4,other:5};Microsoft.Live.Messenger.MailFolder.registerEnum("Microsoft.Live.Messenger.MailFolder",!1);Microsoft.Live.Messenger.MediaType=function(){};Microsoft.Live.Messenger.MediaType.prototype=
{music:0,video:1,game:2};Microsoft.Live.Messenger.MediaType.registerEnum("Microsoft.Live.Messenger.MediaType",!1);Microsoft.Live.Messenger.MessageType=function(){};Microsoft.Live.Messenger.MessageType.prototype={textMessage:1,nudgeMessage:2,applicationMessage:3,audioTunnelMessage:4,audioMetaMessage:5,callEventMessage:6};Microsoft.Live.Messenger.MessageType.registerEnum("Microsoft.Live.Messenger.MessageType",!1);Microsoft.Live.Messenger.TextMessageDirection=function(){};Microsoft.Live.Messenger.TextMessageDirection.prototype=
{leftToRight:0,rightToLeft:1};Microsoft.Live.Messenger.TextMessageDirection.registerEnum("Microsoft.Live.Messenger.TextMessageDirection",!1);Microsoft.Live.Messenger.TextMessageStyle=function(){};Microsoft.Live.Messenger.TextMessageStyle.prototype={regular:0,bold:1,italic:2,strikeout:4,underline:8};Microsoft.Live.Messenger.TextMessageStyle.registerEnum("Microsoft.Live.Messenger.TextMessageStyle",!0);Microsoft.Live.Messenger.AuthenticationResultCode=function(){};Microsoft.Live.Messenger.AuthenticationResultCode.prototype=
{success:0,failure:1};Microsoft.Live.Messenger.AuthenticationResultCode.registerEnum("Microsoft.Live.Messenger.AuthenticationResultCode",!1);Microsoft.Live.Messenger.InviteAddressResultCode=function(){};Microsoft.Live.Messenger.InviteAddressResultCode.prototype={success:0,failure:1};Microsoft.Live.Messenger.InviteAddressResultCode.registerEnum("Microsoft.Live.Messenger.InviteAddressResultCode",!1);Microsoft.Live.Messenger.InviteContactResultCode=function(){};Microsoft.Live.Messenger.InviteContactResultCode.prototype=
{success:0,failure:1};Microsoft.Live.Messenger.InviteContactResultCode.registerEnum("Microsoft.Live.Messenger.InviteContactResultCode",!1);Microsoft.Live.Messenger.SendMessageResultCode=function(){};Microsoft.Live.Messenger.SendMessageResultCode.prototype={success:0,failure:1,messageTooLong:2,recipientInvalid:3,recipientDisabled:4};Microsoft.Live.Messenger.SendMessageResultCode.registerEnum("Microsoft.Live.Messenger.SendMessageResultCode",!1);Microsoft.Live.Messenger.SignInResultCode=function(){};
Microsoft.Live.Messenger.SignInResultCode.prototype={success:0,failure:1,authenticationFailure:2};Microsoft.Live.Messenger.SignInResultCode.registerEnum("Microsoft.Live.Messenger.SignInResultCode",!1);Microsoft.Live.Messenger.SignOutResultCode=function(){};Microsoft.Live.Messenger.SignOutResultCode.prototype={success:0,failure:1};Microsoft.Live.Messenger.SignOutResultCode.registerEnum("Microsoft.Live.Messenger.SignOutResultCode",!1);Microsoft.Live.Messenger.SignInPreference=function(){};Microsoft.Live.Messenger.SignInPreference.prototype=
{none:0,autoSignIn:1,manualSignIn:2};Microsoft.Live.Messenger.SignInPreference.registerEnum("Microsoft.Live.Messenger.SignInPreference",!1);Microsoft.Live.Messenger.$create_M$14=function(a,b,c){var d={};d.$0=a;d.$1=b;d.$2=c;return d};Microsoft.Live.Messenger.M$16={$0:"The provided application message ID has already been registered.",$1:"An ApplicationMessageFactory must be assigned to the User.MessageFactory property.",$2:"ApplicationMessageFactory.Serialize must return a string with a length between 1 and 2000 characters.",
$3:"The provided application message ID has not been registered.",$4:"An application message cannot be sent if message ID is not registered. Use ApplicationMessageFactory.Register to register the ID.",$5:"The provided application message ID is a reserved ID, and cannot be used by applications.",$6:"The serialized content of the SimpleApplicationMessage is too large. Use a smaller object.",$7:"Value cannot be empty.",$8:"Value is invalid: {1}\\r\\n{0}",$9:"Value cannot be null: {0}.",$A:"Specified argument was out of range.",
$B:"Argument must be positive.",$C:"Cannot create a conversation with self.",$D:"Collection already contains object.",$E:"Collection does not contain object.",$F:"Collection is read-only.",$10:"Cannot perform an IMAddress operation on a Contact that is not on WindowsLive network.",$11:"Internal Error. Messenger Web Toolkit configuration is not loaded.",$12:"The contact must be a member of User.Contacts to perform this operation.",$13:"Display name is invalid. Use IMAddressPresence.IsDisplayNameValid() to validate user input.",
$14:"Display name is read-only. Use User.Settings.CanUpdateDisplayName to determine whether the display name can be updated.",$15:"Endpoint name is invalid. Use Endpoint.IsNameValid() to validate user input.",$16:"Cannot update a contact's endpoint. Use User.LocalEndpoint to get the user's endpoint.",$17:"A group with the name '{0}' already exists.",$18:"Group name is invalid. Use User.Groups.IsNameValid() to validate user input.",$19:"The application message ID length must be between 1 and 64 characters.",
$1A:"Operation is not valid due to the current state of the object. {0}",$1B:"The invited contact is already in the conversation.",$1C:"Multiparty is not supported for this conversation. Use Conversation.SupportsMultiparty to check for this conversation.",$1D:"Cannot update Network.IMEnabled for networks that do not support instant messaging. Use Network.SupportsRemoteSignIn to determine whether it is possible.",$1E:"Cannot access a disposed object named '{0}'.",$1F:"Object does not belong to user.",
$20:"Object returned by User.OnCreateMailbox is invalid.",$21:"Object returned by User.OnCreateConversation is invalid.",$22:"Personal message is invalid. Use IMAddressPresence.IsPersonalMessageValid() to validate user input.",$23:"Presence extension name should contain only alphanumeric characters.",$24:"Presence extension name length must be between 1 and 6 characters.",$25:"A PresenceExtensionFactory must be assigned to the User.PresenceFactory property.",$26:"PresenceExtensionFactory.Serialize must return a non-null value.",
$27:"PresenceExtensionFactory.Serialize must return a string with a length less than 500 characters.",$28:"Unexpected presence extension. Presence extensions must be of type SimplePresenceExtension.",$29:"The serialized content of the SimplePresenceExtension is too large. Use a smaller object.",$2A:"Cannot update a contact's presence.",$2B:"Cannot update presence when User.Services is in Notifications or ContactPresence mode.",$2C:"An address of the same type already exists in the contact.",$2D:"Text message is invalid. Use Conversation.IsTextMessageValid() to validate a message.",
$2E:"User is already signed in.",$2F:"An Identity object must be authenticated prior to creating a User instance.",$30:"User must be signed in in order to perform this operation.",$31:"An Identity object cannot be associated with more than one User instance.",$32:"Nickname is invalid. Use Contact.IsNicknameValid() to validate user input.",$33:"A DOM element must exist with the ID of controlId.",$34:"The domain of the channel file does not match the current page.",$35:"The Messenger Library must be hosted in a page that uses HTTP over port 80.",
$36:"Invalid operation for the current authentication mode.",$37:"Cannot add or remove contact from the collection. To add email-only contacts, use User.AddContact().",$38:"",$39:"The Application Logo URL length must be less than 300 characters.",$3A:"The Application Name length must be less than 129 characters.",$3B:"User instance must be present for the operation.",$3C:"Cannot create a conversation with an email-only contact.",$3D:"Cannot send an offline message to this conversation. Use Conversation.SupportsOfflineMessages to check for this conversation.",
$3E:"Cannot perform operation in the current User.Services state.",$3F:"The combined length of all values for this media type must not exceed {0}.",$40:"Cannot update group's AppearOfflineTo/AppearOnlineTo properties when User.Services is in Notifications or ContactPresence mode.",$41:"Cannot send a message to a contact that the user is appearing offline to. Use Contact.AppearOnlineTo() to appear online to the contact first.",$42:"This object does not support this method.",$43:"A message can be sent to a single endpoint only when a conversation has 2 members."};
Microsoft.Live.Messenger.M$11={$0:"Segoe UI",$1:"On Facebook Mobile",$2:"{0} {1}",$3:"{0} ({1})",$4:"Appear offline",$5:"Away",$6:"Busy",$7:"Offline",$8:"Available",$9:"Messenger",$A:"Microsoft Lync\u2122",$B:"SMS",$C:"Yahoo",$D:"Skype"};Microsoft.Live.Messenger.Alert=function(a,b,c,d,e){this.$0=new Microsoft.Live.Messenger.Uri(a);this.$1=new Microsoft.Live.Messenger.Uri(b);this.$2=new Microsoft.Live.Messenger.Uri(c);this.$3=d;this.$4=e;this.$5=!1};Microsoft.Live.Messenger.Alert.prototype={$0:null,
$1:null,$2:null,$3:null,$4:null,$5:!1,get_actionUrl:function(){return this.$0},get_subscriptionUrl:function(){return this.$1},get_iconUrl:function(){return this.$2},get_timestamp:function(){return this.$3},get_text:function(){return this.$4},get_reloaded:function(){return this.$5},$6:function(a){this.$5=a}};Microsoft.Live.Messenger.AlertCollection=function(){Microsoft.Live.Messenger.AlertCollection.initializeBase(this)};Microsoft.Live.Messenger.AlertCollection.prototype={$13:function(a){this.$C(a)},
get_item:function(a){return this.getItem(a)}};Microsoft.Live.Messenger.ContactsReaderChangedEventArgs=function(a,b,c){Microsoft.Live.Messenger.ContactsReaderChangedEventArgs.initializeBase(this);this.added=a;this.changed=b;this.removed=c};Microsoft.Live.Messenger.ContactsReaderChangedEventArgs.prototype={added:null,changed:null,removed:null};Microsoft.Live.Messenger.CallEventMessage=function(a){Microsoft.Live.Messenger.CallEventMessage.initializeBase(this,[6]);if(!(0<=a))throw Microsoft.Live.Messenger.M$F.$5("duration");
this.$F=a};Microsoft.Live.Messenger.CallEventMessage.prototype={$F:0,get_duration:function(){return this.$F},get_$A:function(){return!1},$C:function(a){this.set_sender(a);var b=MC.$create_CallEventMessageInfo(this.$F),b=MC.$create_MessageInfo(6,b);b.sender=a.get_$E();b.isOfflineMessage=this.get_isOfflineMessage();return b}};Microsoft.Live.Messenger.SkypeInitializer=function(){};Microsoft.Live.Messenger.SkypeInitializer.initialize=function(a,b,c){var d=MLC.JSON.deserialize(a);if(null==d)throw Microsoft.Live.Messenger.M$F.$0("json");
if(String.isNullOrEmpty(d.liveId)||String.isNullOrEmpty(d.cid)||ss.isNullOrUndefined(d.buddy))throw Microsoft.Live.Messenger.M$F.$2("Invalid JSON; Missing fields.","json");if(null==c)throw Microsoft.Live.Messenger.M$F.$0("callback");var e=new Microsoft.Live.Messenger.RpsAuthIdentity(d.liveId,d.cid);e.$1A(b);e.add_authenticationCompleted(function(a,b){Microsoft.Live.Messenger.SkypeInitializer.$0(e,b,d,c)})};Microsoft.Live.Messenger.SkypeInitializer.$0=function(a,b,c,d){if(0===b.get_resultCode()){var e=
new Microsoft.Live.Messenger.User(a,new Microsoft.Live.Messenger.Services.M$1E([c.buddy],c.networks));e.add_signInCompleted(function(a,b){d.invoke(b.get_resultCode(),e)});e.signIn()}else d.invoke(1,null)};Microsoft.Live.Messenger.AuthenticationCompletedEventArgs=function(a){Microsoft.Live.Messenger.AuthenticationCompletedEventArgs.initializeBase(this);this.$1_0=a;this.$1_1=0};Microsoft.Live.Messenger.AuthenticationCompletedEventArgs.prototype={$1_0:null,$1_1:0,$1_2:0,$1_3:null,get_status:function(){return this.$1_1},
set_status:function(a){return this.$1_1=a},get_identity:function(){return this.$1_0},get_isAlreadySignedIn:function(){return 0!==(this.$1_1&1)},get_isUnsupportedBrowser:function(){return 0!==(this.$1_1&2)},get_insecureTransportNotSupported:function(){return 0!==(this.$1_1&128)},get_multipleEndpointsNotSupported:function(){return 0!==(this.$1_1&4)},get_isBlockedApplication:function(){return 0!==(this.$1_1&8)},get_isBlockedUser:function(){return 0!==(this.$1_1&16)},get_authenticationFailure:function(){return 0!==
(this.$1_1&32)||0!==(this.$1_1&64)},get_serviceUnavailable:function(){return 0!==(this.$1_1&64)},get_resultCode:function(){return this.$1_2},set_resultCode:function(a){return this.$1_2=a},get_user:function(){return this.get_identity().get_$21()},get_serverName:function(){return this.$1_3},set_serverName:function(a){return this.$1_3=a}};Microsoft.Live.Messenger.Guid=function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("g",a);"{"!==MSH.StringHelper.charAt(a,0)&&(a="{"+a+"}");
if(!MSH.RegexHelper.isMatch("^\\{[a-f\\d]{8}\\-([a-f\\d]{4}\\-){3}[a-f\\d]{12}\\}$",a,"i"))throw Microsoft.Live.Messenger.M$F.$5("g");this.g=MSH.StringHelper.toLowerCase(a)};Microsoft.Live.Messenger.Guid.newGuid=function(){for(var a=Array(4),b=0;4>b;b++)a[b]=Math.round(16777215*Math.random()).toString(16).padLeft(8,"0");return new Microsoft.Live.Messenger.Guid("{"+a[0]+"-"+a[1].substr(0,4)+"-"+a[1].substr(4,4)+"-"+a[2].substr(0,4)+"-"+a[2].substr(4,4)+a[3]+"}")};Microsoft.Live.Messenger.Guid.prototype=
{g:null,equals:function(a){return null==a?!1:this.g===a.g},toString:function(){return this.g}};Microsoft.Live.Messenger.Identity=function(){this.$0=MC.$create_IdentityInfo(null,null);this.$0.authenticationInfo=MC.$create_AuthenticationInfo(1,String.Empty);this.$6=!0;this.$D=Microsoft.Live.Messenger.M$18.get_$11();this.$5=MC.$create_LocalSettingsInfo(!1,!0)};Microsoft.Live.Messenger.Identity.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:!1,$7:!1,$8:!1,$9:null,$A:null,isAuthenticationCompleted:!1,
isGetMappingContainerCompleted:!1,add_propertyChanged:function(a){this.$B=ss.Delegate.combine(this.$B,a)},remove_propertyChanged:function(a){this.$B=ss.Delegate.remove(this.$B,a)},$B:null,add_authenticationCompleted:function(a){this.$C=ss.Delegate.combine(this.$C,a)},remove_authenticationCompleted:function(a){this.$C=ss.Delegate.remove(this.$C,a)},$C:null,$D:0,get_$E:function(){return null},get_liveId:function(){return this.$0.liveId},get_signinScenarioQoSObject:function(){return this.$9},set_signinScenarioQoSObject:function(a){return this.$9=
a},get_reconnectScenarioQoSObject:function(){return this.$A},set_reconnectScenarioQoSObject:function(a){return this.$A=a},get_skypeId:function(){return this.$0.skypeId},get_cid:function(){return this.$0.cid},get_token:function(){return this.get_$1C().ticket},set_token:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("value",a);return this.get_$1C().ticket=a},$F:function(a){this.$0.liveId!==a&&(this.$0.liveId=a,this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("LiveId")))},
$10:function(a){this.$0.cid!==a&&(this.$0.cid=a,this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("Cid")))},$11:function(a){this.$0.skypeId!==a&&(this.$0.skypeId=a,this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("SkypeId")))},$12:function(){var a={liveIframePath:"/handlers"};a.mwtEnv=Microsoft.Live.Messenger.M$12.get_$4();a.region=Microsoft.Live.Messenger.M$12.get_$5();a.cid=this.$0.cid;a.mappingReady=ss.Delegate.create(this,this.onSkyJSInitMappingReady);
a.success=ss.Delegate.create(this,this.onSkyJSInitSuccess);a.error=ss.Delegate.create(this,this.onSkyJSInitFailure);a.callStarted=ss.Delegate.create(this,this.onCallStarted);a.pluginStarted=ss.Delegate.create(this,this.onpluginStarted);a.callFinished=ss.Delegate.create(this,this.onCallFinished);Microsoft.Live.Messenger.Services.SkyJSHelper.getInstance().Outlook.init(a)?null!=window.self.InboxPage&&(null!=InboxPage.Config&&!InboxPage.Config.SkypeOptions.isSkypeIntegrated)&&OptionsWriter.fireOption(InboxPage.Config.SkypeOptions.skypeIntegratedSettingUrl):
this.$19()},onSkyJSInitMappingReady:function(){if(!this.isGetMappingContainerCompleted){var a=Microsoft.Live.Messenger.Services.SkyJSHelper.getInstance().Outlook.getMappingContainer();this.$1A(a);Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Signin_GetUic",null,Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime,this.get_signinScenarioQoSObject(),!1)}},onSkyJSInitSuccess:function(){Microsoft.Live.Messenger.Services.SkyJSHelper.skypeInitSucceeded()},onSkyJSInitFailure:function(a){a=
a.code;403===a?Microsoft.Live.Messenger.Services.SkyJSHelper.skypeAudioVideoEnabled=!1:(Microsoft.Live.Messenger.Services.SkyJSHelper.reportSkypeLogin(!1,a.toString()),Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Signin_GetUic",a.toString(),Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime,this.get_signinScenarioQoSObject(),!1));this.$19()},onCallStarted:function(){Microsoft.Live.Messenger.Services.SkyJSHelper.skypeCallStarted()},onCallFinished:function(){Microsoft.Live.Messenger.Services.SkyJSHelper.skypeCallFinished()},
onpluginStarted:function(){Microsoft.Live.Messenger.Services.SkyJSHelper.skypePluginStarted()},get_isAuthenticated:function(){return this.$6},get_reloaded:function(){return this.$8},set_reloaded:function(a){this.$8!==a&&(this.$8=a,this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("Reloaded")));return a},get_simulatePrivateSessionStorageEnabled:function(){return this.$5.simulatePrivateSessionStorageEnabled},set_simulatePrivateSessionStorageEnabled:function(a){return this.$5.simulatePrivateSessionStorageEnabled=
a},get_crossPageSupportEnabled:function(){return this.$5.crossPageSupportEnabled},set_crossPageSupportEnabled:function(a){return this.$5.crossPageSupportEnabled=a},$13:function(a){this.$6!==a&&(this.$6=a,this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("IsAuthenticated")))},get_$14:function(){String.isNullOrEmpty(this.$0.endpointId)&&this.set_$14(Microsoft.Live.Messenger.Guid.newGuid().toString());return this.$0.endpointId},set_$14:function(a){a=MSH.StringHelper.toLowerCase(a);
this.$0.endpointId!==a&&(this.$0.endpointId=a,this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("EndpointId")));return a},get_$15:function(){return this.$D},get_$16:function(){null==this.$2&&(this.$2=new Microsoft.Live.Messenger.M$D(this));return this.$2},$17:function(){var a=new Microsoft.Live.Messenger.AuthenticationCompletedEventArgs(this);a.set_status(66);a.set_resultCode(1);this.onAuthenticationCompleted(a)},$18:function(a){this.$13(0===a.resultCode);this.get_isAuthenticated()&&
(String.isNullOrEmpty(a.identity.endpointId)?this.set_$14(Microsoft.Live.Messenger.Guid.newGuid().toString()):this.set_$14(a.identity.endpointId),this.$4=a.uxSettings);if(Microsoft.Live.Messenger.Services.WebmainHelper.isWlxIM())if(0===a.resultCode)Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Signin_GetIdentity",null,Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime,this.get_signinScenarioQoSObject(),!1);else{var b=3===a.resultCode;Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Signin_GetIdentity",
MC.MessengerServiceResultCode.toString(a.resultCode),Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime,this.get_signinScenarioQoSObject(),b)}this.isAuthenticationCompleted=!0;this.isGetMappingContainerCompleted&&this.$1B()},$19:function(){this.isGetMappingContainerCompleted||(this.isGetMappingContainerCompleted=!0,this.isAuthenticationCompleted&&this.$1B())},$1A:function(a){String.isNullOrEmpty(a)?Microsoft.Live.Messenger.Services.SkyJSHelper.reportSkypeLogin(!1,"UicTicketMissing"):
(this.get_$1C().uicTicket=a,Microsoft.Live.Messenger.Services.SkyJSHelper.skypeEnabled=!0,Microsoft.Live.Messenger.Services.SkyJSHelper.skypeAudioVideoEnabled=!0,Microsoft.Live.Messenger.Services.SkyJSHelper.reportSkypeLogin(!0,"success"));this.$19()},$1B:function(){var a=new Microsoft.Live.Messenger.AuthenticationCompletedEventArgs(this);this.get_isAuthenticated()?(a.set_status(0),a.set_resultCode(0)):(a.set_status(0),a.set_resultCode(1));this.onAuthenticationCompleted(a)},onAuthenticationCompleted:function(a){MSH.Scheduler.defer(ss.Delegate.create(this,
function(){null!=this.$C&&this.$C.invoke(this,a)}))},get_$1C:function(){return this.$0.authenticationInfo},set_$1C:function(a){return this.$0.authenticationInfo=a},$1D:function(){var a=MC.$create_IdentityInfo(this.get_liveId(),this.get_$14());a.cid=this.get_cid();a.authenticationInfo=this.get_$1C();a.skypeId=this.get_skypeId();return a},get_$1E:function(){null==this.$1&&(this.$1=Microsoft.Live.Messenger.Services.UserServiceFactory.create(this,this.get_$16()));return this.$1},$1F:function(a){this.$1=
a},onPropertyChanged:function(a){null!=this.$B&&this.$B.invoke(this,a)},$20:function(){},get_$21:function(){return this.$3},set_$21:function(a){if(null!=this.$3&&this.$3!==a)throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$31);this.$3=a;null!=this.$4&&(this.$3.$59(this.$4),this.$4=null);return a},add_$22:function(a){this.$23=ss.Delegate.combine(this.$23,a)},remove_$22:function(a){this.$23=ss.Delegate.remove(this.$23,a)},$23:null,get_$24:function(){return this.$7},dispose:function(){this.$7||
(this.$7=!0,Type.canCast(this.get_$1E(),ss.IDisposable)&&this.get_$1E().dispose(),null!=this.$23&&this.$23.invoke(this,ss.EventArgs.Empty))}};Microsoft.Live.Messenger.Uri=function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("uri",a);this.$0=a};Microsoft.Live.Messenger.Uri.get_uriSchemeHttp=function(){return"http"};Microsoft.Live.Messenger.Uri.prototype={$0:null,toString:function(){return this.$0}};Microsoft.Live.Messenger.Version=function(a,b,c,d){if(0>a||0>b||0>c||0>d)throw Microsoft.Live.Messenger.M$F.$5(Microsoft.Live.Messenger.M$16.$B);
this.$0=a;this.$1=b;this.$2=c;this.$3=d};Microsoft.Live.Messenger.Version.prototype={$0:0,$1:0,$2:0,$3:0,get_major:function(){return this.$0},get_minor:function(){return this.$1},get_build:function(){return this.$2},get_revision:function(){return this.$3},toString:function(){return String.format("{0}.{1}.{2}.{3}",this.$0,this.$1,this.$2,this.$3)}};Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs=function(a,b,c,d){this.$1_4=this.$1_2=-1;Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.initializeBase(this);
this.$1_0=a;3!==this.$1_0&&(this.$1_1=[],this.$1_3=[]);0===this.$1_0?(this.$1_1.add(b),this.$1_2=d):1===this.$1_0?(this.$1_3.add(c),this.$1_4=d):2===this.$1_0&&(this.$1_1.add(b),this.$1_3.add(c),this.$1_4=this.$1_2=d)};Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.$1_6=function(a,b,c,d){a=new Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs(a,b,c,d);null!=b&&1<b.length&&(a.$1_1.clear(),a.$1_1.addRange(b));null!=c&&1<c.length&&(a.$1_3.clear(),a.$1_3.addRange(c));return a};Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.prototype=
{$1_0:0,$1_1:null,$1_3:null,$1_5:null,get_action:function(){return this.$1_0},get_newItems:function(){return this.$1_1},get_newStartingIndex:function(){return this.$1_2},get_oldItems:function(){return this.$1_3},get_oldStartingIndex:function(){return this.$1_4},get_changes:function(){null==this.$1_5&&this.$1_7();return this.$1_5},$1_7:function(){switch(this.$1_0){case 0:case 1:case 3:this.$1_5=[new Sys.CollectionChange(this.$1_8(),this.$1_1,this.$1_2,this.$1_3,this.$1_4)];break;case 2:this.$1_5=[new Sys.CollectionChange(1,
null,-1,this.$1_3,this.$1_4),new Sys.CollectionChange(0,this.$1_1,this.$1_2,null,-1)]}},$1_8:function(){switch(this.$1_0){case 1:return 1;case 3:return 2}return 0}};Microsoft.Live.Messenger.PropertyChangedEventArgs=function(a){Microsoft.Live.Messenger.PropertyChangedEventArgs.initializeBase(this);this.$1_0=a};Microsoft.Live.Messenger.PropertyChangedEventArgs.prototype={$1_0:null,get_propertyNamePascal:function(){return this.$1_0},get_propertyName:function(){return MC.Compatibility.get_microsoftAjaxPropertyNamesEnabled()?
MSH.StringHelper.toCamelCase(this.$1_0):this.$1_0}};Microsoft.Live.Messenger.Capabilities=function(a){this.$0=a};Microsoft.Live.Messenger.Capabilities.prototype={$0:null,$1:null,add_propertyChanged:function(a){this.$2=ss.Delegate.combine(this.$2,a)},remove_propertyChanged:function(a){this.$2=ss.Delegate.remove(this.$2,a)},$2:null,get_version:function(){null==this.$1&&(this.$1=this.$C());return this.$1},get_supportsMultipartyConversations:function(){return 11===this.$0.get_$E().type?!1:this.get_$6()},
get_supportsOfflineMessages:function(){switch(this.$0.get_$E().type){case 1:case 32:case 4:case 16:case 13:return!0;default:return!1}},get_$3:function(){switch(this.$0.get_$E().type){case 4:case 16:return!1;default:return!0}},get_address:function(){return this.$0},supportsMessageType:function(a){var b=this.$0.get_type();switch(b){case 1:switch(a){case 1:case 6:return!0;case 5:case 4:return this.get_$7();case 2:return this.get_$5();case 3:return this.get_$4()}break;case 32:switch(a){case 3:return this.get_$4();
default:return!0}case 8:switch(a){case 1:case 6:return!0}break;case 2:case 4:case 16:case 13:switch(a){case 1:return!0;case 5:case 4:return 2===b&&this.get_$8();case 3:return this.get_$4()}}return!1},$D:function(){this.$1=null},$E:function(a){if(String.isNullOrEmpty(a))return null;a=a.split(".");if(2>a.length||4<a.length)return null;for(var b=Array(a.length),c=0;c<b.length;c++){var d=MSH.ConvertHelper.tryParseInt(a[c]);if(0>d)return null;b[c]=d}switch(b.length){case 2:return new Microsoft.Live.Messenger.Version(b[0],
b[1],0,0);case 3:return new Microsoft.Live.Messenger.Version(b[0],b[1],b[2],0);default:return new Microsoft.Live.Messenger.Version(b[0],b[1],b[2],b[3])}},$F:function(a){var b=0,c=0;if(0!==a)switch(a>>>28){case 1:b=6;break;case 2:b=6;c=1;break;case 3:b=6;c=2;break;case 4:b=7;break;case 5:b=7;c=5;break;case 6:b=8;break;case 7:b=8;c=1;break;case 8:b=8;c=5;break;case 9:b=9;break;case 10:b=14}return new Microsoft.Live.Messenger.Version(b,c,0,0)},$10:function(a){null!=this.$2&&this.$2.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))}};
Microsoft.Live.Messenger.Collection=function(){this.$0=[];this.$1=!1};Microsoft.Live.Messenger.Collection.prototype={$1:!1,add_collectionChanged:function(a){this.$2=ss.Delegate.combine(this.$2,a)},remove_collectionChanged:function(a){this.$2=ss.Delegate.remove(this.$2,a)},$2:null,add_propertyChanged:function(a){this.$3=ss.Delegate.combine(this.$3,a)},remove_propertyChanged:function(a){this.$3=ss.Delegate.remove(this.$3,a)},$3:null,onCollectionChanged:function(a){null!=this.$2&&this.$2.invoke(this,
a)},onPropertyChanged:function(a){null!=this.$3&&this.$3.invoke(this,a)},get_$4:function(){return this.$1},get_count:function(){return this.$0.length},get_$5:function(){return this.$0},$6:function(a){if(!this.$1&&null!=this.$3)this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))},$7:function(a,b,c,d){if(!this.$1&&null!=this.$2)this.onCollectionChanged(new Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs(a,b,c,d))},$8:function(a,b){if(!this.$1&&null!=this.$2)this.onCollectionChanged(Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.$1_6(0,
a,null,b,-1))},$9:function(){this.$1=!0},$A:function(){this.$1=!1;this.$6("Count");this.$7(3,null,null,0)},$B:function(a){return this.$0.contains(a)},$C:function(a){this.$0.add(a);this.$1||(this.$6("Count"),this.$7(0,a,null,this.$0.length-1))},$D:function(a){var b=this.$0.indexOf(a);0<=b&&(this.$0.removeAt(b),this.$6("Count"),this.$7(1,null,a,b))},$E:function(a,b){var c=this.$0[a];c!==b&&(this.$0[a]=b,this.$7(2,b,c,a))},$F:function(a,b){this.$0.insert(a,b);this.$6("Count");this.$7(0,b,null,a)},$10:function(a){var b=
this.$0[a];this.$0.removeAt(a);this.$6("Count");this.$7(1,null,b,a)},$11:function(a,b){for(var c=a;c<a+b.length;c++)null!=b[c]&&this.$0.insert(c,b[c]);this.$6("Count");this.$8(b,a)},$12:function(a,b){if(b!==a&&0<=a&&a<=this.get_count()){var c=this.$0[b];this.$10(b);this.$F(a,c)}},getItem:function(a){var b=this.$0;if(0>a||a>=b.length)throw Microsoft.Live.Messenger.M$F.$5("index");return b[a]},getEnumerator:function(){return this.$0.getEnumerator()}};Microsoft.Live.Messenger.Contact=function(a,b,c,
d){this.$B=d;this.$1=a;this.$0=b;this.$2=new Microsoft.Live.Messenger.LinkedContactCollection;this.$4=new Microsoft.Live.Messenger.IMAddressCollection(this);this.$9=[];this.$C=!0;for(a=0;a<c.length;a++)b=new Microsoft.Live.Messenger.LinkedContact(this.$1,this,c[a],d),b.add_propertyChanged(ss.Delegate.create(this,this.$30)),this.$2.$C(b),b.get_network().get_$1F()||(this.$C=!1);for(c=0;c<this.$2.get_count();c++){d=this.$2.get_item(c).get_$A();for(a=0;a<d.get_count();a++)b=d.get_item(a),this.$A|=b.get_$E().roleLists,
this.$4.$C(b)}this.$4.$15();c=this.$32();this.$D=c.get_firstName();this.$E=c.get_lastName();this.$F=c.get_fullName();this.$4.add_collectionChanged(ss.Delegate.create(this,this.$3F));this.$7=this.$3E();this.$35(!1);this.$5=String.Empty;this.$6=0;this.$10=!0;this.$2A(String.Empty,6,!0);this.$29();this.$36(this.$A);this.$B=!1;MC.Compatibility.get_provideLegacyContactInfo()&&(this.$3=MC.$create_ContactInfo(null,null,[]),this.$3.emailAddress=MC.$create_EmailInfo(this.get_emailAddress()||String.Empty))};
Microsoft.Live.Messenger.Contact.isNicknameValid=function(a){return null==a||40<a.length?!1:!0};Microsoft.Live.Messenger.Contact.$1C=function(a,b){var c=-1,d=-1;String.isNullOrEmpty(a.get_linkedContacts().get_item(0).get_$8().favoritesOrder)||(c=MSH.ConvertHelper.tryParseInt(a.get_linkedContacts().get_item(0).get_$8().favoritesOrder));String.isNullOrEmpty(b.get_linkedContacts().get_item(0).get_$8().favoritesOrder)||(d=MSH.ConvertHelper.tryParseInt(b.get_linkedContacts().get_item(0).get_$8().favoritesOrder));
return 0<=c&&0<=d?(c-=d,0!==c?c:String.compare(a.get_displayName(),b.get_displayName())):0<=c?-1:0<=d?1:String.compare(a.get_displayName(),b.get_displayName())};Microsoft.Live.Messenger.Contact.$21=function(a){return 64===(a&64)||5===(a&5)};Microsoft.Live.Messenger.Contact.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:0,$7:null,$8:null,$9:null,$A:0,$B:!1,$C:!1,$D:null,$E:null,$F:null,$10:!1,add_currentAddressChanging:function(a){this.$11=ss.Delegate.combine(this.$11,a)},remove_currentAddressChanging:function(a){this.$11=
ss.Delegate.remove(this.$11,a)},$11:null,get_id:function(){return this.$2.get_item(0).get_id()},get_nickname:function(){var a=String.Empty,b=this.$33();null!=b&&(a=b.get_$8().nickname||String.Empty);return a},get_cid:function(){for(var a=ss.IEnumerator.getEnumerator(this.$4);a.moveNext();){var b=a.get_current();if(b.get_network().get_isWindowsLive())return b.get_cid()}for(a=ss.IEnumerator.getEnumerator(this.$2);a.moveNext();)if(b=a.get_current(),b.get_network().get_isWindowsLive())return b.get_$8().cid;
return null},get_skypeName:function(){for(var a=ss.IEnumerator.getEnumerator(this.$4);a.moveNext();){var b=a.get_current();if(b.get_network().get_isSkype()||b.get_network().get_isWindowsLive()&&!String.isNullOrEmpty(b.get_skypeName()))return b.get_skypeName()}for(a=ss.IEnumerator.getEnumerator(this.$2);a.moveNext();){b=a.get_current();for(b=ss.IEnumerator.getEnumerator(b.get_$A());b.moveNext();){var c=b.get_current();if(c.get_network().get_isSkype()||c.get_network().get_isWindowsLive()&&!String.isNullOrEmpty(c.get_skypeName()))return c.get_skypeName()}}return null},
get_profileUrl:function(){for(var a=ss.IEnumerator.getEnumerator(this.$2);a.moveNext();){var b=a.get_current();if(b.get_network().get_isWindowsLive())return b.get_profileUrl()}return null},get_isEmailOnlyContact:function(){return 0===this.$4.get_count()},get_isIdentityVerified:function(){return this.$10},get_isOnline:function(){return null==this.get_currentAddress()?!1:this.get_currentAddress().get_isOnline()},get_emailAddress:function(){if(1!==this.$0.get_identity().get_$1C().authType)return null;
for(var a=0;a<this.$2.get_count();a++){var b=this.$2.get_item(a);if(null!=b.get_$8().emailAddress)return b.get_$8().emailAddress.address}return null},get_displayName:function(){return this.$5},get_firstName:function(){return this.$D},get_lastName:function(){return this.$E},get_fullName:function(){return this.$F},get_$12:function(){return this.$0.get_$2E()||null==this.get_$18()||this.get_isEmailOnlyContact()},get_linkedContacts:function(){return this.$2},get_addresses:function(){return this.$4},get_presence:function(){null==
this.$8&&(this.$8=new Microsoft.Live.Messenger.ContactPresence(this));return this.$8},get_currentAddress:function(){return this.$7},set_currentAddress:function(a){a!==this.$7&&(this.$41(this.$7,a),this.$7=a,this.$40("CurrentAddress"),null!=this.$7&&this.get_presence().$9(),this.$2A(String.Empty,6,!1),this.$29());return a},get_groups:function(){return MSH.CollectionHelper.toArray(this.$9)},get_isContact:function(){return 0!==(this.$A&1)},get_isFavorite:function(){var a=this.$0.get_groups().get_favorites();
return null==a?!1:a.get_contacts().$B(this)},get_isAllowed:function(){return 0!==(this.$A&2)},get_isBlocked:function(){return 0!==(this.$A&4)},get_isAppearOfflineTo:function(){return 2===this.$0.get_presence().get_status()?!0:this.get_isAppearOfflineToExplicit()},get_isAudioVideoCapable:function(){if(null!=this.get_cid()&&-1<window.self.location.search.indexOf("avcid="+this.get_cid().toString()))return!0;for(var a=ss.IEnumerator.getEnumerator(this.$4);a.moveNext();)if(a.get_current().get_isAudioVideoCapable())return!0;
return!1},get_isAppearOfflineToExplicit:function(){return Microsoft.Live.Messenger.Contact.$21(this.$A)},get_$13:function(){return this.$0},get_$14:function(){return null!=this.get_currentAddress()&&11===this.get_currentAddress().get_$E().type},get_$15:function(){return this.$C},get_$16:function(){for(var a=ss.IEnumerator.getEnumerator(this.$4);a.moveNext();)if(1===a.get_current().get_type())return!0;return!1},get_$17:function(){return 0!==(this.$A&16)},get_$18:function(){for(var a=0;a<this.$2.get_count();a++){var b=
this.$2.get_item(a);if(!b.get_network().get_$1F())return b}return null},get_$19:function(){for(var a=ss.IEnumerator.getEnumerator(this.$2);a.moveNext();){var b=a.get_current();if(b.get_network().get_isWindowsLive())return b}return null},get_$1A:function(){for(var a=0;a<this.$4.get_count();++a)if(this.$4.get_item(a).get_network().get_isSkype())return this.$4.get_item(a);return null},get_$1B:function(){for(var a=0;a<this.$4.get_count();++a)if(this.$4.get_item(a).get_network().get_isWindowsLive())return this.$4.get_item(a);
return null},$1D:function(){this.$0.get_$30().$9(this)&&this.$40("IsOnline")},$1E:function(){this.set_currentAddress(this.$3E())},$1F:function(){this.$29()},$20:function(){this.$40("IsAppearOfflineTo");for(var a=0;a<this.get_addresses().get_count();a++)this.get_addresses().get_item(a).$14()},$22:function(a){var b=this.get_isFavorite();this.$9.add(a);a.get_contacts().$C(this);this.$42(b)},$23:function(a){var b=this.get_isFavorite();this.$9.remove(a);a.get_contacts().$D(this);this.$42(b)},$24:function(){for(var a=
this.get_isFavorite(),b=ss.IEnumerator.getEnumerator(this.$9);b.moveNext();)b.get_current().get_contacts().$D(this);this.$9.clear();this.$42(a)},$25:function(a){for(var b=ss.IEnumerator.getEnumerator(this.$4);b.moveNext();)if(b.get_current().get_type()===a)return!0;return!1},$26:function(a){return this.$9.contains(a)},$27:function(a){if(null!=a){var b=this.get_$18();null!=b&&b.get_$8().nickname!==a&&(b.get_$8().nickname=a,this.$40("Nickname"),this.$2A(a,5,!1))}},$28:function(a){this.get_presence().$9();
a.get_network().get_$1F()||this.$2A(String.Empty,6,!1)},$29:function(){var a=!0;null!=this.$7&&(a=this.$7.get_isIdentityVerified());a!==this.$10&&(this.$10=a,this.$40("IsIdentityVerified"))},$2A:function(a,b,c){var d=this.$5,e=this.$6;this.$6<=b&&(String.isNullOrEmpty(a)?(a=null,this.get_$12()&&(a=this.get_fullName()),!String.isNullOrEmpty(this.get_nickname())&&this.get_nickname()!==this.get_skypeName()?(d=this.get_nickname(),e=5):String.isNullOrEmpty(a)?(a=this.get_fullName(),this.get_isEmailOnlyContact()?
String.isNullOrEmpty(a)?(a=this.get_emailAddress(),String.isNullOrEmpty(a)?(d=String.Empty,e=0):(d=a,e=1)):(d=a,e=4):(b=null,c||(b=this.$34()),null!=b?(d=b.get_presence().get_displayName(),e=3):String.isNullOrEmpty(a)?String.isNullOrEmpty(this.$4.get_item(0).get_address())?String.isNullOrEmpty(this.get_emailAddress())?String.isNullOrEmpty(this.get_nickname())?(d=String.Empty,e=0):(d=this.get_nickname(),e=5):(d=this.get_emailAddress(),e=1):(d=this.$4.get_item(0).get_address(),e=2):(d=a,e=4))):(d=a,
e=4)):(d=a,e=b));return this.$6!==e||this.$5!==d?(this.$5=d,this.$6=e,c||(this.$0.get_$30().$A(this),this.$40("DisplayName")),!0):!1},$2B:function(a,b){var c=this.$A,d=(c^a)&a,c=c|a,d=d|c&b;return 0!==d?(this.$A=c&~b,this.$36(d),!0):!1},$2C:function(a){for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current(),c=this.$2D(b);null!=c&&c.$B(b)}},$2D:function(a){for(var b=0;b<a.addresses.length;b++){var c=this.$3D(a.addresses[b]);if(null!=c)return c}return null},$2E:function(a){var b=
this.$3D(a.get_$E());null!=b&&(b.get_$A().$C(a),this.$4.$C(a),a.$13(b))},$2F:function(){for(var a=Array(this.$2.get_count()),b=0;b<this.$2.get_count();++b)a[b]=this.$2.get_item(b).get_$8();return MC.$create_PersonInfo(this.get_id(),a)},$30:function(a,b){switch(b.get_propertyNamePascal()){case "FirstName":case "LastName":case "FullName":this.$31()}},$31:function(){var a=!1,b=this.$32();this.$D!==b.get_firstName()&&(this.$D=b.get_firstName(),a=!0);this.$E!==b.get_lastName()&&(this.$E=b.get_lastName(),
a=!0);a&&this.$40("FirstName");a&&this.$40("FullName")},$32:function(){for(var a=null,b=null,c=0;c<this.$2.get_count();c++){var d=!1,e=!1,f=!1,g=this.$2.get_item(c);String.isNullOrEmpty(g.get_fullName())||(f=!0);String.isNullOrEmpty(g.get_firstName())||(d=!0);String.isNullOrEmpty(g.get_lastName())||(e=!0);if(f||d&&e)return g;null==a&&d&&(a=g);null==b&&e&&(b=g)}return null!=a?a:null!=b?b:this.$2.get_item(0)},$33:function(){for(var a=null,b=0;b<this.$2.get_count();b++){var c=this.$2.get_item(b);if(!c.get_network().get_$1F())if(String.isNullOrEmpty(c.get_$8().nickname))null==
a&&(a=c);else{a=c;break}}return a},$34:function(){for(var a=0;a<this.$4.get_count();a++){var b=this.$4.get_item(a);if(!b.get_network().get_$1F()&&!String.isNullOrEmpty(b.get_presence().get_displayName()))return b}return null},$35:function(a){var b=this.$A,c=0;6===(b&6)&&(b&=-3,c|=2);17===(b&17)&&(b&=-17,c|=16);if(this.$A!==b){this.$A=b;for(var d=0;d<this.$4.get_count();d++)this.$4.get_item(d).get_$E().roleLists=b}a&&this.$36(c)},$36:function(a){this.$38(a);this.$37()},$37:function(){var a=this.$0.get_emailOnlyContacts();
0===this.$4.get_count()?(this.$B||!a.$B(this))&&a.$14(this):!this.$B&&a.$B(this)&&a.$15(this)},$38:function(a){this.$39(this.$0.get_contacts(),1,a,"IsContact");this.$39(this.$0.get_allowedContacts(),2,a,"IsAllowed");this.$39(this.$0.get_blockedContacts(),4,a,"IsBlocked");this.$3A(a);this.$3B(a);0!==(a&1)&&this.$3C()},$39:function(a,b,c,d){0!==(c&b)&&(0!==(this.$A&b)?a.$C(this):(a.$D(this),1===b&&(this.$24(),this.get_$18().set_id(null))),this.$40(d))},$3A:function(a){var b=null!=this.$0.get_address()&&
2===this.$0.get_presence().get_status(),a=Microsoft.Live.Messenger.Contact.$21(this.$A^a),c=Microsoft.Live.Messenger.Contact.$21(this.$A),d=!1;!b&&!a&&c?(this.$0.get_appearOfflineToContacts().$C(this),d=!0):!b&&(a&&!c)&&(this.$0.get_appearOfflineToContacts().$D(this),d=!0);d&&this.$40("IsAppearOfflineTo")},$3B:function(a){0!==(a&16)&&(0!==(this.$A&16)?this.$0.get_pendingContacts().$15(this):this.$0.get_pendingContacts().$16(this))},$3C:function(){this.get_isContact()?this.$B?this.$0.get_$30().get_$3().$17(this):
this.$0.get_$30().$6(this)||this.$0.get_$30().$4(this):this.$0.get_$30().$6(this)&&this.$0.get_$30().$5(this)},$3D:function(a){for(var b=0;b<this.$4.get_count();b++){var c=this.$4.get_item(b);if(MSH.ContactHelper.areIMAddressesEqual(c.get_$E(),a))return c.get_linkedContact()}return null},$3E:function(){if(0===this.$4.get_count())return null;for(var a=null,b=null,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,o=null,p=0;p<this.$4.get_count();p++){var n=this.$4.get_item(p);
if(n.get_network().get_isWindowsLive()&&n.get_isOnline()){a=n;break}else n.get_network().get_isSkype()&&n.get_isOnline()&&null==b?b=n:n.get_network().get_isFacebook()&&n.get_isOnline()&&null==c?c=n:n.get_network().get_isGoogle()&&n.get_isOnline()&&null==d?d=n:n.get_network().get_isOfficeCommunicator()&&n.get_isOnline()&&null==e?e=n:n.get_network().get_isYahoo()&&n.get_isOnline()&&null==f?f=n:n.get_network().get_isFacebook()&&n.get_isFacebookMobileEnabled()&&null==g?g=n:n.get_network().get_isWindowsLive()&&
null==h?h=n:n.get_network().get_isSkype()&&null==m?m=n:n.get_network().get_isFacebook()&&null==i?i=n:n.get_network().get_isGoogle()&&null==j?j=n:n.get_network().get_isTelephone()&&null==k?k=n:n.get_network().get_isYahoo()&&null==l?l=n:n.get_network().get_isOfficeCommunicator()&&null==o&&(o=n)}return null!=b?b:null!=a?a:null!=c?c:null!=d?d:null!=e?e:null!=f?f:null!=g?g:null!=h?h:null!=i?i:null!=j?j:null!=k?k:null!=l?l:null!=m?m:null!=o?o:this.$4.get_item(0)},$3F:function(){this.set_currentAddress(this.$3E())},
$40:function(a){null!=this.$43&&this.$43.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))},$41:function(a,b){null!=this.$11&&this.$11.invoke(this,new Microsoft.Live.Messenger.AddressChangingEventArgs(a,b))},$42:function(a){this.$40("Groups");a!==this.get_isFavorite()&&this.$40("IsFavorite")},add_propertyChanged:function(a){this.$43=ss.Delegate.combine(this.$43,a)},remove_propertyChanged:function(a){this.$43=ss.Delegate.remove(this.$43,a)},$43:null,addAddress:function(a,b){if(this.$25(b.get_type()))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$2C,
"address");var c=this.get_$18();if(null==c||13===b.get_$E().type)throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$10);c.get_$A().add(b);a.$C(b);a.$15()},removeAddress:function(a,b){var c=this.get_$18();if(null==c||13===b.get_$E().type)throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$10);c.get_$A().remove(b);a.$D(b)}};Microsoft.Live.Messenger.ContactPresence=function(a){this.$0=a;var b=a.get_currentAddress();null!=b?(a=a.get_currentAddress().get_presence(),this.$1=
a.get_status(),this.$2=a.get_personalMessage(),this.$3=a.get_displayPictureUrl(),this.$4=a.get_media(),this.$5=b.get_type(),this.$6=b.get_$E().isFacebookMobileEnabled):(this.$1=0,this.$2=String.Empty,this.$4=this.$3=null)};Microsoft.Live.Messenger.ContactPresence.prototype={$0:null,$1:0,$2:null,$3:null,$4:null,$5:0,$6:!1,get_contact:function(){return this.$0},get_status:function(){return this.$1},get_statusText:function(){return Microsoft.Live.Messenger.IMAddressPresence.$7(this.$1,this.$5,this.$6,
!1)},get_personalMessage:function(){return this.$2},get_displayPictureUrl:function(){return this.$3},get_media:function(){return this.$4},createPersonalMessageElement:function(){var a=this.get_contact().get_currentAddress();if(null!=a)return a.get_presence().createPersonalMessageElement();a=this.$2||String.Empty;a=MSH.RegexHelper.replace("(\\r?\\n)+",a," ","g");return Microsoft.Live.Messenger.MessengerUtility.emoticonEncode(a)},createMediaElement:function(){return null==this.$4?document.createElement("span"):
this.$4.createTextElement()},add_propertyChanged:function(a){this.$7=ss.Delegate.combine(this.$7,a)},remove_propertyChanged:function(a){this.$7=ss.Delegate.remove(this.$7,a)},$7:null,$8:function(a){null!=this.$7&&this.$7.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))},$9:function(){var a=this.$0.get_currentAddress(),b=a.get_presence();this.get_status()!==b.get_status()&&(this.$1=b.get_status(),this.$8("Status"));b=this.$A();this.get_personalMessage()!==b&&(this.$2=b,this.$8("PersonalMessage"));
b=this.$B();this.$3!==b&&(this.$3=b,this.$8("DisplayPictureUrl"));b=this.$C();this.$4!==b&&(this.$4=b,this.$8("Media"));this.$5=a.get_type();this.$6=a.get_$E().isFacebookMobileEnabled},$A:function(){for(var a=null,b=0;b<this.$0.get_addresses().get_count()&&!(a=this.$0.get_addresses().get_item(b).get_presence().get_personalMessage(),!String.isNullOrEmpty(a));b++);return a},$B:function(){for(var a=null,b=0;b<this.$0.get_linkedContacts().get_count()&&!(a=this.$0.get_linkedContacts().get_item(b).get_displayPictureUrl(),
null!=a);b++);return a},$C:function(){for(var a=null,b=0;b<this.$0.get_addresses().get_count()&&!(a=this.$0.get_addresses().get_item(b).get_presence().get_media(),null!=a);b++);return a}};Microsoft.Live.Messenger.M$1A=function(a,b){this.$0=a;this.$1=b;2===b&&(this.$2=4);4===b&&(this.$2=2)};Microsoft.Live.Messenger.M$1A.prototype={$0:null,$1:0,$2:0,$3:null,canAddContact:function(a){var b=this.$0.get_services();switch(this.$1){case 2:case 4:case 64:if(a.get_$14()||2===b||1===b)return!1;break;case 1:if(1===
b)return!1}return!0},canRemoveContact:function(){var a=this.$0.get_services();switch(this.$2){case 2:case 4:case 64:if(2===a||1===a)return!1;break;case 1:if(1===a)return!1}return!0},addContact:function(a,b){if(!b.get_isEmailOnlyContact()&&!b.get_$15()&&!b.get_$14())for(var c=0;c<b.get_linkedContacts().get_count();c++){var d=b.get_linkedContacts().get_item(c);d.get_network().get_$1F()||this.$0.$5E(d,this.$1,this.$2)}},removeContact:function(a,b){if(b.get_$14())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$12);
for(var c=0;c<b.get_linkedContacts().get_count();c++){var d=b.get_linkedContacts().get_item(c);d.get_network().get_$1F()||this.$0.$5E(d,this.$2,this.$1)}},containsContact:function(a){switch(this.$1){case 1:return a.get_isContact();case 2:return a.get_isAllowed();case 4:return a.get_isBlocked();case 64:return a.get_isAppearOfflineTo();default:return this.$3.$B(a)}},setCollection:function(a){this.$3=a},get_capacity:function(){switch(this.$1){case 2:return MSCo.Configuration.maximumAllowedContactCount;
case 4:return MSCo.Configuration.maximumBlockedContactCount;case 1:return MSCo.Configuration.maximumContactCount;case 64:return MSCo.Configuration.maximumContactCount;default:return 0}}};Microsoft.Live.Messenger.ContactCollection=function(a,b){Microsoft.Live.Messenger.ContactCollection.initializeBase(this);this.$13=b;this.$14=a;this.$13.setCollection(this)};Microsoft.Live.Messenger.ContactCollection.prototype={$13:null,$14:null,get_capacity:function(){return this.$13.get_capacity()},add:function(a){if(null==
a)throw Microsoft.Live.Messenger.M$F.$0("contact");if(this.$B(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$D,"contact");if(!this.$13.canAddContact(a))throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$37);this.$13.addContact(this,a)},remove:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("contact");if(!this.$B(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$E,"contact");if(!this.$13.canRemoveContact(a))throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$37);
this.$13.removeContact(this,a)},findByAddress:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("address");if(a.get_$9()!==this.$14)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$1F,"address");return this.get_$5().contains(a.get_contact())?a.get_contact():null},findByCid:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("cid");a=MC.$create_IMAddressInfo(a,11,0);a=this.$14.$48(a);return null!=a?this.findByAddress(a):null},findByIdWithoutRoleCheck:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("id",
a);return this.$14.findContactById(a)},findById:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("id",a);a=this.$14.findContactById(a);return null!=a&&this.$13.containsContact(a)?a:null},find:function(a,b){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("address");for(var c=0;c<this.get_count();c++)for(var d=this.get_$5()[c],e=0;e<d.get_addresses().get_count();e++)if(d.get_addresses().get_item(e).$12(a,b))return d;return null},get_item:function(a){return this.getItem(a)}};
Microsoft.Live.Messenger.M$19=function(a){this.$1={};this.$0={};this.$2={};this.$3=[];this.$4=a;this.$4.get_settings().add_propertyChanged(ss.Delegate.create(this,this.$19));MSH.PerfCollector.get_instance().registerStatusCollector(this)};Microsoft.Live.Messenger.M$19.$10=function(a){if(a.startsWith("13:")){var b=a.indexOf(";");return MSH.StringHelper.substring(a,0,b)+MSH.StringHelper.toLowerCase(MSH.StringHelper.substringToEnd(a,b))}return MSH.StringHelper.toLowerCase(a)};Microsoft.Live.Messenger.M$19.$1E=
function(a){return String.isNullOrEmpty(a)||"00000000-0000-0000-0000-000000000000"===a||"{00000000-0000-0000-0000-000000000000}"===a};Microsoft.Live.Messenger.M$19.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:function(a,b){var c=MC.ServiceData.createEmpty(2);c.set_status(1);var c=[c.get_info()],d=this.$1,e;for(e in d){var f=d[e];f.get_isOnline()&&((!a||!f.get_isUser())&&(null==b||f.get_network().get_id()===b))&&f.$16(c)}},$6:function(a,b){var c=this.$0,d;for(d in c){var e=c[d];if((!e.get_isAppearOfflineToExplicit()||
b)&&e.get_isContact()&&!e.get_$15())a?this.$4.get_appearOfflineToContacts().$C(e):this.$4.get_appearOfflineToContacts().$D(e),e.$20()}},$7:function(a){a=new Microsoft.Live.Messenger.IMAddress(this.$4,a);this.$8(a);return a},$8:function(a){this.$1[a.get_id()]=a;if(1===a.get_$E().type&&!String.isNullOrEmpty(a.get_$E().cid)&&!String.isNullOrEmpty(a.get_$E().address)){var b=MSH.ContactHelper.getIMAddressInfoKey(a.get_$E());this.$1[b]=a}},$9:function(a,b){for(var c=null,d=this.$4.get_identity().get_liveId(),
e=0;e<a.length;e++){for(var f=a[e].addresses,g=f.length,h=0;h<g;h++)if(f[h].address===d&&1===f[h].type){c=this.$15(a);break}if(null!=c)break}null==c?c=this.$18(a,!0):c.$2C(a);if(null!=b)for(d=0;d<b.length;d++)c.$22(b[d])},$A:function(a){var b=null,c=MSH.ContactHelper.computeIMAddressId(a);Object.keyExists(this.$1,c)&&(b=this.$1[c]);null!=b&&(11===b.get_$E().type&&1===a.type)&&(b.$18(a),this.$8(b));return b},$B:function(a,b){var c=this.$A(b);null==c&&(c=this.$7(b));c.$13(a);return c},$C:function(a){return this.$17(MC.$create_ContactInfo(null,
null,a))},$D:function(a){var b=this.$A(a);null==b&&(b=this.$7(a));if(null==b.get_contact()){var a=MC.$create_ContactInfo(null,null,[a]),c=this.$13(a);null!=c?c.$2E(b):this.$17(a)}return b},$E:function(a){if(!Microsoft.Live.Messenger.M$19.$1E(a)){a=Microsoft.Live.Messenger.M$19.$10(a);if(Object.keyExists(this.$0,a))return this.$0[a];if(Object.keyExists(this.$1,a))return this.$1[a].get_contact();if(Object.keyExists(this.$2,a))return this.$2[a]}return null},$F:function(a){var b=this.$0,c;for(c in b)for(var d=
b[c],e=ss.IEnumerator.getEnumerator(d.get_addresses());e.moveNext();)if(e.get_current().get_skypeName()===a)return d;return null},$11:function(a){var b=null,c=this.$A(a);null!=c&&(b=c.get_contact());null==b&&13===a.type&&(b=this.$0[MSH.ContactHelper.computeIMAddressId(a)]);return b},$12:function(a){for(var b=null,a=ss.IEnumerator.getEnumerator(a);a.moveNext();)if(b=a.get_current(),b=this.$11(b),null!=b)return b;return null},$13:function(a){var b=this.$E(a.id);null==b&&0<a.addresses.length&&(b=this.$12(a.addresses));
return b},$14:function(a){var b=this.$15(a);null==b?b=this.$18(a,!1):b.$2C(a);return b},$15:function(a){for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var b=a.get_current(),b=this.$13(b);if(null!=b)return b}return null},$16:function(a){this.$17(MC.$create_ContactInfo(null,null,[a.get_$E()]))},$17:function(a){return this.$18([a],!1)},$18:function(a,b){var c=new Microsoft.Live.Messenger.Contact(this,this.$4,a,b);this.$3.add(c);for(var d=0;d<c.get_linkedContacts().get_count();d++){var e=c.get_linkedContacts().get_item(d);
Microsoft.Live.Messenger.M$19.$1E(e.get_id())||(this.$0[e.get_id()]=c);if(null!=e.get_$8().addresses)for(e=ss.IEnumerator.getEnumerator(e.get_$8().addresses);e.moveNext();){var f=e.get_current();13===f.type&&(this.$0[MSH.ContactHelper.computeIMAddressId(f)]=c)}}if(c.get_isEmailOnlyContact())for(d=0;d<c.get_linkedContacts().get_count();d++){e=c.get_linkedContacts().get_item(d);for(f=0;f<e.get_$8().addresses.length;f++){var g=MSH.ContactHelper.getIMAddressInfoKey(e.get_$8().addresses[f]);this.$2[g]=
c}}return c},$19:function(a,b){if("DisplayNameMode"===b.get_propertyNamePascal())for(var c=ss.IEnumerator.getEnumerator(this.$3);c.moveNext();){var d=c.get_current();String.isNullOrEmpty(d.get_fullName())||d.$2A(String.Empty,6,!1)}},$1A:function(a){delete this.$0[a]},$1B:function(a){this.$0[a.get_id()]=a.get_$9()},$1C:function(a){if(null==this.$0||null==a)return null;var b=this.$0,c;for(c in b){var d=b[c];if(null!=d.get_addresses())for(var e=ss.IEnumerator.getEnumerator(d.get_addresses());e.moveNext();){var f=
e.get_current();if(11===a.type&&f.get_cid()===a.cid||MSH.ContactHelper.areIMAddressesEqual(f.get_$E(),a))return d}}return null},$1D:function(){return this.$1},get_name:function(){return"User-Contacts-Status"},getStatusText:function(){var a=new ss.StringBuilder;a.append("[User-Contacts-Status] ");null!=this.$4&&(a.append("User status: "),a.append(Microsoft.Live.Messenger.UserStatus.toString(this.$4.get_status())),a.append("| Contacts count: "),a.append(this.$4.get_contacts().get_count()),a.append("| Email-Only contacts count: "),
a.append(this.$4.get_emailOnlyContacts().get_count()),a.append("| Online contacts count: "),a.append(this.$4.get_onlineContacts().get_count()),a.append("| Offline contacts count: "),a.append(this.$4.get_offlineContacts().get_count()),a.append("| Groups count: "),a.append(this.$4.get_groups().get_count()),a.append("| Conversations count: "),a.append(this.$4.get_conversations().get_count()));return a.toString()}};Microsoft.Live.Messenger.Conversation=function(a,b){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("user");
if(null==b)throw Microsoft.Live.Messenger.M$F.$0("address");var c=null;if(Type.canCast(b,Microsoft.Live.Messenger.IMAddress))c=b;else if(Type.canCast(b,Microsoft.Live.Messenger.Contact))c=b.get_currentAddress();else throw Microsoft.Live.Messenger.M$F.$5("entity");if(c.get_$9()!==a)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$1F,"address");if(c.get_isUser())throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$C,"address");String.isNullOrEmpty(a.get_conversations().get_$18())?
this.id=c.get_$11():(this.id=a.get_conversations().get_$18(),a.get_conversations().set_$18(String.Empty));this.$1=a;this.$C=c.get_network();null!=a.get_conversations().get_$17()?(this.$2=a.get_conversations().get_$17(),a.get_conversations().set_$17(null)):this.$2=a.get_address();this.$6=new Microsoft.Live.Messenger.MessageCollection;this.$6.add_collectionChanged(ss.Delegate.create(this,this.$19));this.$8={};this.$4=new Microsoft.Live.Messenger.IMAddressCollection(this);this.$4.add_collectionChanged(ss.Delegate.create(this,
this.$1A));this.$4.$C(c);this.$4.$C(a.get_address());this.$5=new Microsoft.Live.Messenger.TypingIMAddressCollection(1E4);this.$9=MSH.DateTimeHelper.minValue;this.$A=a.get_conversations().get_$19();a.get_conversations().$C(this);this.$17()};Microsoft.Live.Messenger.Conversation.$20=function(a,b,c){for(var d=ss.IEnumerator.getEnumerator(a.get_conversations());d.moveNext();){var e=d.get_current();if(e.id===b)return e}a=a.$62(c[0],b);for(b=1;b<c.length;b++)a.$4.$C(c[b]);return a};Microsoft.Live.Messenger.Conversation.prototype=
{$1:null,$2:null,id:null,$3:!1,$4:null,$5:null,$6:null,$7:!1,$8:null,$9:null,$A:!1,$B:null,$C:null,get_user:function(){return this.$1},get_network:function(){return this.$C},get_roster:function(){return this.$4},get_creator:function(){return this.$2},get_typingAddresses:function(){return this.$5},get_history:function(){return this.$6},get_mostRecentMessage:function(){return this.$B},get_closed:function(){return this.$7},get_reloaded:function(){return this.$A},$D:function(a){this.$A=a},get_$E:function(){if(this.$7||
2!==this.$4.get_count())return!1;for(var a=ss.IEnumerator.getEnumerator(this.$4);a.moveNext();){var b=a.get_current();if(!b.get_isUser()){if(MSH.ContactHelper.getIMAddressInfoKey(b.get_$E())!==this.id)break;if(!b.get_isOnline()&&!b.get_$A()&&b.get_isContact())return!0}}return!1},get_$F:function(){for(var a=ss.IEnumerator.getEnumerator(this.$4);a.moveNext();)if(!a.get_current().get_capabilities().get_$3())return!1;return!0},get_id:function(){return this.id},get_supportsMultiparty:function(){if(this.$7)return!1;
for(var a=ss.IEnumerator.getEnumerator(this.$4);a.moveNext();)if(!a.get_current().get_capabilities().get_supportsMultipartyConversations())return!1;return!0},get_supportsOfflineMessages:function(){if(this.$7||2!==this.$4.get_count())return!1;for(var a=ss.IEnumerator.getEnumerator(this.$4);a.moveNext();){var b=a.get_current();if(!b.get_isUser()&&(!b.get_capabilities().get_supportsOfflineMessages()||11===b.get_$E().type))return!1}return!0},get_hasUnreadMessages:function(){return this.$3},set_hasUnreadMessages:function(a){this.$3!==
a&&(this.$1E(a),this.$1.$6C(this.id,a));return a},notifyUserTyped:function(){this.$22();if(this.get_$F()&&!this.get_$E()){var a=Date.get_now();MSH.DateTimeHelper.exceeded(this.$9,a,1E4)&&(this.$9=a,a=MC.$create_MessageInfo(255,null),a.sender=this.$1.get_address().get_$E(),this.$1.$6B(this.id,a,null));this.set_hasUnreadMessages(!1)}},inviteAddress:function(a,b){this.$22();if(null==a)throw Microsoft.Live.Messenger.M$F.$0("address");if(!this.get_supportsMultiparty())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$1C);
if(this.$16(a))throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$1B);this.$1.$6A(this.id,a.get_$E(),b)},inviteContact:function(a,b){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("contact");this.inviteAddress(a.get_currentAddress(),b);this.$8[a.get_currentAddress().get_$10()]=a},sendMessage:function(a,b){this.sendMessageToEndpoint(a,null,b)},sendMessageToEndpoint:function(a,b,c){this.$22();if(null==a)throw Microsoft.Live.Messenger.M$F.$0("message");if(this.$18())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$41);
if(null!=b&&2!==this.$4.get_count())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$43);if(!this.get_$E()||!this.get_supportsOfflineMessages()||a.get_$A()){a.set_networkId(this.get_network().get_id());a.set_networkName(this.get_network().get_name());a.set_conversationId(this.id);var d=a.$C(this.$1.get_address(),this);if(null!=b){for(var e=ss.IEnumerator.getEnumerator(this.$4);e.moveNext();){var f=e.get_current();if(!f.get_isUser()&&!f.get_endpoints().$B(b))throw Microsoft.Live.Messenger.M$F.$5("targetEndpoint");
}d.targetEndpointId=b.get_id().toString()}this.get_$E()&&this.get_supportsOfflineMessages()&&(d.isOfflineMessage=!0);this.$1.$6B(this.id,d,c);this.$6.$14(a);this.set_hasUnreadMessages(!1)}},close:function(){this.$7||(this.$1.$6D(this.id),this.$21())},supportsMessageType:function(a){if(this.$7||(4===a||5===a||6===a)&&2!==this.$4.get_count())return!1;for(var b=ss.IEnumerator.getEnumerator(this.$4);b.moveNext();)if(!b.get_current().get_capabilities().supportsMessageType(a))return!1;return!0},supportsApplicationMessageType:function(a){if(this.$7||
null==this.$1.get_messageFactory())return!1;for(var b=ss.IEnumerator.getEnumerator(this.$4);b.moveNext();)if(!b.get_current().$D(a))return!1;return!0},isTextMessageValid:function(a){return Microsoft.Live.Messenger.TextMessage.isValid(this,a)},add_inviteAddressCompleted:function(a){this.$10=ss.Delegate.combine(this.$10,a)},remove_inviteAddressCompleted:function(a){this.$10=ss.Delegate.remove(this.$10,a)},$10:null,add_inviteContactCompleted:function(a){this.$11=ss.Delegate.combine(this.$11,a)},remove_inviteContactCompleted:function(a){this.$11=
ss.Delegate.remove(this.$11,a)},$11:null,add_sendMessageFailed:function(a){this.$12=ss.Delegate.combine(this.$12,a)},remove_sendMessageFailed:function(a){this.$12=ss.Delegate.remove(this.$12,a)},$12:null,add_messageReceived:function(a){this.$13=ss.Delegate.combine(this.$13,a)},remove_messageReceived:function(a){this.$13=ss.Delegate.remove(this.$13,a)},$13:null,add_recentMessageReceived:function(a){this.$14=ss.Delegate.combine(this.$14,a)},remove_recentMessageReceived:function(a){this.$14=ss.Delegate.remove(this.$14,
a)},$14:null,onMessageReceived:function(a){null!=this.$13&&this.$13.invoke(this,a);this.$6.$15(a.get_message())},onRecentMessageReceived:function(a){null!=this.$14&&this.$14.invoke(this,a);this.$B=a.get_message()},onInviteAddressCompleted:function(a){null!=this.$10&&this.$10.invoke(this,a)},onInviteContactCompleted:function(a){null!=this.$11&&this.$11.invoke(this,a)},onSendMessageFailed:function(a){null!=this.$12&&this.$12.invoke(this,a)},onPropertyChanged:function(a){null!=this.$15&&this.$15.invoke(this,
a)},dispose:function(){this.close()},addAddress:function(){throw Error(Microsoft.Live.Messenger.M$16.$F);},removeAddress:function(){throw Error(Microsoft.Live.Messenger.M$16.$F);},add_propertyChanged:function(a){this.$15=ss.Delegate.combine(this.$15,a)},remove_propertyChanged:function(a){this.$15=ss.Delegate.remove(this.$15,a)},$15:null,$16:function(a){for(var b=ss.IEnumerator.getEnumerator(this.$4);b.moveNext();)if(b.get_current().equals(a))return!0;return!1},$17:function(){var a=this.$4.get_item(0);
a.get_isUser()&&(a=this.$4.get_item(1));this.$1.$69(this.id,a)},$18:function(){if(this.$7||2!==this.$4.get_count())return!1;for(var a=ss.IEnumerator.getEnumerator(this.$4);a.moveNext();){var b=a.get_current();if(!b.get_isUser()&&b.get_network().get_isWindowsLive()&&b.get_contact().get_isAppearOfflineToExplicit())return!0}return!1},$19:function(){this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("History"))},$1A:function(){this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("Roster"))},
$1B:function(a){return 11===a.get_$E().type||null==a.get_contact()||String.isNullOrEmpty(a.get_contact().get_cid())?a.get_$E():MC.$create_IMAddressInfo(a.get_contact().get_cid(),11,a.get_contact().get_currentAddress().get_$E().roleLists)},$1C:function(a,b,c){if(Object.keyExists(this.$8,b.get_$10())){var d=this.$8[b.get_$10()];delete this.$8[b.get_$10()];b=0;1===a&&(b=1);this.onInviteContactCompleted(new Microsoft.Live.Messenger.InviteContactCompletedEventArgs(b,d,c))}else this.onInviteAddressCompleted(new Microsoft.Live.Messenger.InviteAddressCompletedEventArgs(a,
b,c))},$1D:function(){this.$7||this.$21()},$1E:function(a){this.$3!==a&&(this.$3=a,this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("HasUnreadMessages")))},$1F:function(a){this.id!==a&&(this.id=a,this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("Id")))},$21:function(){this.$7=!0;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("Closed"));this.$1.get_conversations().$D(this)},$22:function(){if(this.$7)throw Microsoft.Live.Messenger.M$F.$4("Conversation");
}};Microsoft.Live.Messenger.ConversationCollection=function(a){Microsoft.Live.Messenger.ConversationCollection.initializeBase(this);this.$13=a;this.$14=null;this.$15=String.Empty;this.$16=!1};Microsoft.Live.Messenger.ConversationCollection.prototype={$13:null,$14:null,$15:null,$16:!1,get_$17:function(){return this.$14},set_$17:function(a){return this.$14=a},get_$18:function(){return this.$15},set_$18:function(a){return this.$15=a},get_$19:function(){return this.$16},create:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("address");
this.$13.$65();var b=null;if(Type.canCast(a,Microsoft.Live.Messenger.IMAddress))b=a;else if(Type.canCast(a,Microsoft.Live.Messenger.Contact)){if(a.get_isEmailOnlyContact())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$3C);b=a.get_currentAddress()}else throw Microsoft.Live.Messenger.M$F.$5("entity");if(b.get_isUser())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$C);a=this.$26(b);null==a&&(a=this.$13.$61(b));return a},createByCid:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("cid",
a);a=this.$13.get_contacts().findByCid(a);return null!=a?this.create(a):null},$1A:function(){this.$16=!0},$1B:function(){this.$16=!1},$1C:function(){for(this.$9();0<this.get_count();)this.get_item(0).$1D();this.$A()},$1D:function(a,b,c,d){a=this.$27(a);null!=a&&(c=this.$13.$4A(c),a.$1C(b,c,d))},$1E:function(a,b){var c=this.$27(a);if(null!=c){var d=this.$13.$4A(b);c.get_roster().$C(d)}},$1F:function(a,b){var c=this.$27(a);if(null!=c&&3<=c.get_roster().get_count()){var d=this.$13.$4A(b);c.get_roster().$D(d)}},
$20:function(a){a=this.$27(a);null!=a&&a.$1D()},$21:function(a,b){var c=this.$27(a);null!=c&&c.$1E(b)},$22:function(a,b){var c=this.$27(a);if(null!=c){var d=this.$13.$4A(b.sender);String.isNullOrEmpty(b.displayNameOverride)||(d.get_isAnonymous()||!d.get_contact().get_isContact())&&d.get_contact().$2A(b.displayNameOverride,3,!1);var e=Microsoft.Live.Messenger.Message.$D(this.$13,d,b,c);if(null!=e)if(b.isRecentMessage)c.onRecentMessageReceived(new Microsoft.Live.Messenger.MessageReceivedEventArgs(e));
else this.$16&&e.$B(!0),c.onMessageReceived(new Microsoft.Live.Messenger.MessageReceivedEventArgs(e)),null!=d&&1===e.get_type()&&c.get_typingAddresses().$17(d)}},$23:function(a,b){var c=this.$27(a);if(null!=c){var d=this.$13.$4A(b);d===c.get_user().get_address()||d===c.get_user().get_skypeAddress()||c.get_typingAddresses().$16(d)}},$24:function(a,b,c,d){a=this.$27(a);if(null!=a&&(c=Microsoft.Live.Messenger.Message.$D(this.$13,this.$13.get_address(),c,a),null!=c))a.onSendMessageFailed(new Microsoft.Live.Messenger.SendMessageFailedEventArgs(b,
c,d))},$25:function(a,b){this.$27(a).$1F(b)},$26:function(a){for(var b=ss.IEnumerator.getEnumerator(this);b.moveNext();){var c=b.get_current();if(2>=c.get_roster().get_count())for(var d=ss.IEnumerator.getEnumerator(c.get_roster());d.moveNext();)if(d.get_current().equals(a))return c}return null},$27:function(a){for(var b=ss.IEnumerator.getEnumerator(this);b.moveNext();){var c=b.get_current();if(c.get_id()===a)return c}return null},get_item:function(a){if(0>a||a>=this.get_count())throw Microsoft.Live.Messenger.M$F.$5("index");
return this.get_$5()[a]}};Microsoft.Live.Messenger.EmailOnlyContactCollection=function(a){Microsoft.Live.Messenger.EmailOnlyContactCollection.initializeBase(this);this.$13=a};Microsoft.Live.Messenger.EmailOnlyContactCollection.prototype={$13:null,findByEmail:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("email",a);for(var a=MSH.StringHelper.toLowerCase(a),b=0;b<this.get_count();b++){var c=this.get_$5()[b];if(c.get_emailAddress()===a)return c}return null},findByCid:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("cid");
for(var b=0;b<this.get_count();b++){var c=this.get_$5()[b];if(c.get_cid()===a)return c}return null},$14:function(a){this.$C(a)},$15:function(a){this.$D(a)},get_item:function(a){return this.getItem(a)}};Microsoft.Live.Messenger.Endpoint=function(a,b){this.$0=a;this.$3=b;this.$1=new Microsoft.Live.Messenger.M$20(this.$0,this);this.$2=new Microsoft.Live.Messenger.EndpointPresence(this)};Microsoft.Live.Messenger.Endpoint.isNameValid=function(a){return null==a?!1:a.trim().length<=Microsoft.Live.Messenger.M$18.get_$F()};
Microsoft.Live.Messenger.Endpoint.prototype={$0:null,$1:null,$2:null,$3:null,id:null,add_propertyChanged:function(a){this.$4=ss.Delegate.combine(this.$4,a)},remove_propertyChanged:function(a){this.$4=ss.Delegate.remove(this.$4,a)},$4:null,get_id:function(){null==this.id&&(this.id=new Microsoft.Live.Messenger.EndpointId(this.$3.id));return this.id},get_name:function(){return this.$3.pdEndpointData.get_name()||String.Empty},set_name:function(a){if(!this.get_$5())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$16);
if(null==a)throw Microsoft.Live.Messenger.M$F.$0("value");var b=a.trim();if(!Microsoft.Live.Messenger.Endpoint.isNameValid(b))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$15,"value");this.$0.get_$9().$68();if(this.$3.pdEndpointData.get_name()!==b){var c=this.$D(4);c.getEndpointData(this.$3.id).set_name(b);this.$0.get_$9().$5A(c)}return a},get_imAddress:function(){return this.$0},get_capabilities:function(){return this.$1},get_presence:function(){return this.$2},get_isInstance:function(){if(!this.$0.get_isUser())return!1;
if(this.get_$5())return!0;if(!Microsoft.Live.Messenger.M$18.get_$12())return!1;var a=this.$0.get_$9().get_localEndpoint();return null==this.$3.imEndpointData||null==a.$3.imEndpointData?!1:this.$3.imEndpointData.get_domain()===a.$3.imEndpointData.get_domain()&&this.$3.imEndpointData.get_domain()!==String.Empty},get_$5:function(){return this.$0.$C(this)},get_$6:function(){return this.$3},get_$7:function(){return this.$3.imEndpointData.get_presenceExtensions()},get_$8:function(){return 0===Object.getKeyCount(this.$3.imEndpointData.get_properties())&&
0===Object.getKeyCount(this.$3.pdEndpointData.get_properties())},get_$9:function(){return 0<Object.getKeyCount(this.$3.imEndpointData.get_properties())},equals:function(a){return null==a?!1:this.$3.id===a.$3.id},$A:function(a,b){var c=this.$3.imEndpointData,d=this.$D(2),e=d.getEndpointData(this.$3.id);e.set_messageExtensions(a||c.get_messageExtensions());e.set_presenceExtensions(b||c.get_presenceExtensions());this.$0.get_$9().$5A(d)},$B:function(a){var b=!1;switch(a.service){case 2:b=1===(b|this.$F(a));
break;case 4:b=1===(b|this.$10(a));break;case 8:b=1===(b|this.$11(a))}this.$1.$B(a)&&(b=!0,this.$E("Capabilities"));this.$2.$5(a)&&(b=!0,this.$E("Presence"));return b},$C:function(a,b){this.$3=this.$0.get_$F().getEndpointSet(this.get_id().toString());return a?(this.$2.$6(this.$3),this.$2.get_properties().$16(b,this.id.toString())):!1},$D:function(a){var b=MC.ServiceEndpointData.createEmpty(a,this.$3.id),a=MC.ServiceData.createEmpty(a);a.addEndpoint(b);return a},$E:function(a){null!=this.$4&&this.$4.invoke(this,
new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))},$F:function(){return!1},$10:function(a){return a.updatedEndpoints[this.$3.id].contains(MC.PDServiceEndpointDataProperties.epName)?(this.$E("Name"),!0):!1},$11:function(a){return a.updatedEndpoints[this.$3.id].contains(MC.CMServiceEndpointDataProperties.events)}};Microsoft.Live.Messenger.M$20=function(a,b){Microsoft.Live.Messenger.M$20.initializeBase(this,[a]);this.$11=b;this.$12=this.$11.get_$6().imEndpointData;this.$13=this.$11.get_$6().peEndpointData};
Microsoft.Live.Messenger.M$20.prototype={$11:null,$12:null,$13:null,$14:null,$15:!1,get_isOnlineViaMobileDevice:function(){return this.$12.get_isOnlineViaMobileDevice()},get_isOnlineViaWeb:function(){return this.$12.get_isOnlineViaWeb()},get_webCamDetected:function(){return this.$12.get_webCamDetected()},set_webCamDetected:function(a){if(!this.$11.get_$5())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$1F);a?this.$16(0,16):this.$17(0,16);return a},get_videoCallSupports16By9AspectRatio:function(){return this.$12.get_videoCallSupports16By9AspectRatio()},
set_videoCallSupports16By9AspectRatio:function(a){if(!this.$11.get_$5())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$1F);a?this.$16(1,262144):this.$17(1,262144);return a},get_supportsVideoCalls:function(){return this.$12.get_rtcVideoEnabled()&&this.$12.get_webCamDetected()&&(1===this.get_address().get_type()&&this.$12.get_supportsTunneledSip()||2===this.get_address().get_type()&&this.$12.get_sipTunnelVersion2()&&this.$12.get_fTurnCapable())?!0:!1},set_supportsVideoCalls:function(a){if(!this.$11.get_$5())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$1F);
for(var b=[2097152,545259536],c=0;c<b.length;c++)a?this.$16(c,b[c]):this.$17(c,b[c]);return a},get_canSupportVideoCalls:function(){return this.$12.get_canSupportVideoCalls()},set_canSupportVideoCalls:function(a){if(!this.$11.get_$5())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$1F);a?this.$16(2,4):this.$17(2,4);return a},get_$4:function(){return this.$12.get_supportsApplicationMessages()},get_$5:function(){return this.$12.get_supportsNudges()},get_$6:function(){return this.$12.get_supportsMultipartyConversations()},
get_$7:function(){return this.$12.get_supportsTunneledSip()},set_$7:function(a){a?this.$16(0,2097152):this.$17(0,2097152);return a},get_$A:function(){return this.$12.get_rtcVideoEnabled()},set_$A:function(a){a?this.$16(1,16):this.$17(1,16);return a},get_$8:function(){return this.$12.get_sipTunnelVersion2()},set_$8:function(a){a?this.$16(1,8388608):this.$17(1,8388608);return a},get_$9:function(){return this.$12.get_fTurnCapable()},set_$9:function(a){a?this.$16(1,536870912):this.$17(1,536870912);return a},
$B:function(a){var b=!1;switch(a.service){case 2:b=1===(b|this.$19(a));break;case 1:b=1===(b|this.$1A(a))}return b},$C:function(){var a=this.$E(this.$13.get_clientVersion());null==a&&(a=this.$F(this.$12.get_version()));return a},$16:function(a,b){var c=this.$14||this.$12.get_capabilities();(c[a]&b)!==b&&(c[a]|=b,null==this.$14&&(this.$14=c,MSH.Scheduler.defer(ss.Delegate.create(this,this.$18))))},$17:function(a,b){var c=this.$14||this.$12.get_capabilities();0!==(c[a]&b)&&(c[a]&=~b,null==this.$14&&
(this.$14=c,MSH.Scheduler.defer(ss.Delegate.create(this,this.$18))))},$18:function(){var a=MC.ServiceData.createEmpty(2),b=MC.ServiceEndpointData.createEmpty(2,this.$12.get_endpointId());a.addEndpoint(b);b.set_capabilities(this.$14);this.$14=null;this.$11.get_imAddress().get_$9().$5A(a)},$19:function(a){var b=!1,c=this.get_supportsVideoCalls();this.$15!==c&&(b=!0,this.$15=c,this.$10("SupportsVideoCalls"));for(var a=a.updatedProperties,c=a.length,d=0;d<c;d++)switch(a[d]){case MC.IMServiceEndpointDataProperties.isOnlineViaMobileDevice:b=
!0;this.$10("IsOnlineViaMobileDevice");break;case MC.IMServiceEndpointDataProperties.isOnlineViaWeb:b=!0;this.$10("IsOnlineViaWeb");break;case MC.IMServiceEndpointDataProperties.webCamDetected:b=!0;this.$10("WebCamDetected");break;case MC.IMServiceEndpointDataProperties.videoCallSupports16By9AspectRatio:b=!0;this.$10("VideoCallSupports16By9AspectRatio");break;case MC.IMServiceEndpointDataProperties.canSupportVideoCalls:b=!0;this.$10("CanSupportVideoCalls");break;case MC.IMServiceEndpointDataProperties.supportsMultipartyConversations:b=
!0;this.$10("SupportsMultipartyConversations");break;case MC.IMServiceEndpointDataProperties.version:b=!0,this.$D(),this.$10("Version")}return b},$1A:function(a){for(var b=!1,a=a.updatedProperties,c=a.length,d=0;d<c;d++)switch(a[d]){case MC.PEServiceEndpointDataProperties.clientVersion:b=!0,this.$D(),this.$10("Version")}return b}};Microsoft.Live.Messenger.EndpointCollection=function(a){Microsoft.Live.Messenger.EndpointCollection.initializeBase(this);this.$13=a;this.$14=[];this.$15=[]};Microsoft.Live.Messenger.EndpointCollection.prototype=
{$13:null,$14:null,$15:null,get_$16:function(){return this.$15},$17:function(a){var b=!1,c=a.updatedEndpoints,d;for(d in c){var e=d,c=this.$1B(e);null!=c?(e=Object.keyExists(a.newEndpoints,e),b=1===(b|c.$C(e,a)),e||(b=1===(b|c.$B(a))),b=1===(b|this.$1D(c))):(c=new Microsoft.Live.Messenger.Endpoint(this.$13,this.$13.get_$F().getEndpointSet(e)),b=1===(b|this.$1E(c)))}return b},$18:function(a){var b=!1,c=a.deletedEndpoints,d;for(d in c)c=this.$1B(d),null!=c&&(c.$C(!1,a),c.get_$8()?b=1===(b|this.$1F(c)):
(b=1===(b|c.$B(a)),b=1===(b|this.$1D(c))));return b},$19:function(){for(var a=MC.ServiceDataSet.create(),b=ss.IEnumerator.getEnumerator(this.$15);b.moveNext();){var c=b.get_current();if(!c.get_$5())for(var c=c.get_$6().toServiceDataArray(),d=0;d<c.length;d++)a.addEndpoint(c[d])}this.$13.get_$9().$45(this.$13.get_$E(),a.toArray())},$1A:function(){for(var a=MC.ServiceDataSet.create(),b=ss.IEnumerator.getEnumerator(this.$15);b.moveNext();)for(var c=b.get_current().get_$6().toServiceDataArray(),d=0;d<
c.length;d++)a.addEndpoint(c[d]);this.$13.$17(a.toArray())},$1B:function(a){for(var b=0;b<this.$15.length;b++){var c=this.$15[b];if(c.get_$6().id===a)return c}return null},$1C:function(a){return!a.get_$9()?!0:0===this.$15.length||1===this.$15.length&&a===this.$15[0]?!1:!a.get_$5()&&a.get_isInstance()},$1D:function(a){var b=this.$1C(a);if(this.$14.contains(a)){if(!b)return this.$14.remove(a),this.$C(a),!0}else if(b)return this.$D(a),this.$14.add(a),!0;return!1},$1E:function(a){var b;this.$1C(a)?(this.$14.add(a),
b=!1):(this.$C(a),b=!0);this.$15.add(a);return b},$1F:function(a){this.$15.remove(a);if(this.$14.contains(a))return this.$14.remove(a),!1;this.$D(a);return!0},get_item:function(a){if(0>a||a>=this.get_count())throw Microsoft.Live.Messenger.M$F.$5("index");return this.get_$5()[a]}};Microsoft.Live.Messenger.EndpointId=function(a){this.id=a};Microsoft.Live.Messenger.EndpointId.prototype={id:null,equals:function(a){return null!=a&&this.id===a.id},toString:function(){return this.id||String.Empty}};Microsoft.Live.Messenger.EndpointPresence=
function(a){this.$0=a;var b=this.$0.get_$6();this.$1=new Microsoft.Live.Messenger.PresencePropertyCollection([],[b.imEndpointData,b.pdEndpointData,b.peEndpointData,b.cmEndpointData,b.skpEndpointData]);this.$2=new Microsoft.Live.Messenger.Presence.PresenceExtensionCollection(a)};Microsoft.Live.Messenger.EndpointPresence.prototype={$0:null,$1:null,$2:null,add_propertyChanged:function(a){this.$3=ss.Delegate.combine(this.$3,a)},remove_propertyChanged:function(a){this.$3=ss.Delegate.remove(this.$3,a)},
$3:null,get_properties:function(){return this.$1},get_extensions:function(){return this.$2},get_$4:function(){return this.$0.get_$6().imEndpointData.get_messageExtensions()},$5:function(a){var b=!1;if(2===a.service&&a.updatedEndpoints[this.$0.get_id().toString()].contains(MC.IMServiceEndpointDataProperties.presenceExtensions)&&null!=this.$0.get_imAddress().get_$9().get_presenceFactory()){var c=this.$0.get_$6().imEndpointData.get_presenceExtensions();this.$2.$15(c)&&(b=!0,this.$7("Extensions"))}this.$1.$16(a,
this.$0.get_id().toString())&&(b=!0,this.$7("Properties"));return b},$6:function(a){this.$1.$17([],[a.imEndpointData,a.pdEndpointData,a.peEndpointData,a.cmEndpointData])},$7:function(a){null!=this.$3&&this.$3.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))}};Microsoft.Live.Messenger.LogRequestReceivedEventArgs=function(a,b,c){Microsoft.Live.Messenger.LogRequestReceivedEventArgs.initializeBase(this);this.$1_0=a;this.$1_1=b;this.$1_2=c};Microsoft.Live.Messenger.LogRequestReceivedEventArgs.prototype=
{$1_0:null,$1_1:null,$1_2:null,get_uploadUrl:function(){return this.$1_0},get_authToken:function(){return this.$1_1},get_sessionLogs:function(){return this.$1_2}};Microsoft.Live.Messenger.Group=function(a,b){this.$0=a;this.$1=b;this.$2=new Microsoft.Live.Messenger.ContactCollection(this.$0,this)};Microsoft.Live.Messenger.Group.prototype={$0:null,$1:null,$2:null,get_name:function(){return this.$1.name},get_contacts:function(){return this.$2},get_isFavorites:function(){return this.$1.isFavorites},get_isAppearOfflineTo:function(){for(var a=
ss.IEnumerator.getEnumerator(this.$2);a.moveNext();)if(!a.get_current().get_isAppearOfflineTo())return!1;return!0},get_isAppearOnlineTo:function(){for(var a=ss.IEnumerator.getEnumerator(this.$2);a.moveNext();)if(a.get_current().get_isAppearOfflineTo())return!1;return!0},appearOfflineTo:function(){if(!this.$8())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$37);0!==this.get_contacts().get_count()&&this.$0.$5F(this.get_contacts().get_$5(),1,String.Empty,null)},appearOnlineTo:function(){if(!this.$8())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$40);
0!==this.get_contacts().get_count()&&this.$0.appearOnlineToContacts(this.get_contacts())},get_$3:function(){return this.$1},add_propertyChanged:function(a){this.$4=ss.Delegate.combine(this.$4,a)},remove_propertyChanged:function(a){this.$4=ss.Delegate.remove(this.$4,a)},$4:null,$5:function(a){null!=this.$4&&this.$4.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))},$6:function(a){MSH.ArrayHelper.sortArrayList(this.$2.get_$5(),a)},$7:function(a){this.$1.name!==a&&(this.$1.name=a,
this.$5("Name"))},$8:function(){var a=this.$0.get_services();return 2===a||1===a?!1:!0},canAddContact:function(a){var b=this.$0.get_services();return 2===b||1===b?!1:a.get_isContact()},canRemoveContact:function(){var a=this.$0.get_services();return 3===a||0===a},addContact:function(a,b){if(!b.get_isContact()||b.get_$14())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$12);b.$22(this)},removeContact:function(a,b){b.$23(this)},containsContact:function(a){return this.$2.$B(a)},setCollection:function(){},
get_capacity:function(){return MSCo.Configuration.maximumGroupCount}};Microsoft.Live.Messenger.GroupCollection=function(a){Microsoft.Live.Messenger.GroupCollection.initializeBase(this);this.$13=a};Microsoft.Live.Messenger.GroupCollection.prototype={$13:null,get_capacity:function(){return MSCo.Configuration.maximumGroupCount},get_favorites:function(){for(var a=ss.IEnumerator.getEnumerator(this.get_$5());a.moveNext();){var b=a.get_current();if(b.get_isFavorites())return b}return null},isNameValid:function(a){return String.isNullOrEmpty(a)||
40<a.length?!1:null==this.get_item(a)},$14:function(){var a=this.get_favorites();null!=a&&a.$6(ss.Delegate.create(this,function(a,c){return Microsoft.Live.Messenger.Contact.$1C(a,c)}))},get_item:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("key");if(Type.canCast(a,String)){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("name",a);a=MC.$create_GroupInfo(Microsoft.Live.Messenger.Guid.newGuid().toString(),a,null);return this.$13.$4C(a)}if(Type.canCast(a,Number))return this.getItem(a);
throw Microsoft.Live.Messenger.M$F.$5("key");}};Microsoft.Live.Messenger.M$18=function(){};Microsoft.Live.Messenger.M$18.get_$5=function(){return Microsoft.Live.Messenger.M$18.$1};Microsoft.Live.Messenger.M$18.get_$6=function(){return Microsoft.Live.Messenger.M$18.$1};Microsoft.Live.Messenger.M$18.$7=function(){Microsoft.Live.Messenger.M$18.$1=new Microsoft.Live.Messenger.M$18};Microsoft.Live.Messenger.M$18.get_$8=function(){return window.location.hostname.toLowerCase()};Microsoft.Live.Messenger.M$18.$9=
function(a){if(null!=Microsoft.Live.Messenger.M$18.get_$5()){var b=MSCo.Configuration.get_displayPictureUrlFormat();if(!String.isNullOrEmpty(b))return b.replaceAll("{0}",a)}return null};Microsoft.Live.Messenger.M$18.get_$A=function(){String.isNullOrEmpty(Microsoft.Live.Messenger.M$18.$3)&&(Microsoft.Live.Messenger.M$18.$3=Microsoft.Live.Messenger.M$18.get_$14()+"emoticons/modern/");return Microsoft.Live.Messenger.M$18.$3};Microsoft.Live.Messenger.M$18.$B=function(a){return Microsoft.Live.Messenger.M$18.get_$D()+
MSH.StringHelper.toLowerCase(a)+".png"};Microsoft.Live.Messenger.M$18.$C=function(a){return Microsoft.Live.Messenger.M$18.get_$D()+MSH.StringHelper.toLowerCase(a)+"Error.png"};Microsoft.Live.Messenger.M$18.get_$D=function(){String.isNullOrEmpty(Microsoft.Live.Messenger.M$18.$2)&&(Microsoft.Live.Messenger.M$18.$2=MSH.TestingHelper.get_isUnitTest()?"http://settings.messenger.live.com/static/2008r2/conversation/img/networkicons/":Microsoft.Live.Messenger.M$18.get_$14()+"networkicons/");return Microsoft.Live.Messenger.M$18.$2};
Microsoft.Live.Messenger.M$18.get_$E=function(){String.isNullOrEmpty(Microsoft.Live.Messenger.M$18.$4)&&(Microsoft.Live.Messenger.M$18.$4=Microsoft.Live.Messenger.M$18.get_$14()+"sharing/");return Microsoft.Live.Messenger.M$18.$4};Microsoft.Live.Messenger.M$18.get_$F=function(){return 50};Microsoft.Live.Messenger.M$18.get_$10=function(){return 129};Microsoft.Live.Messenger.M$18.get_$11=function(){return 0};Microsoft.Live.Messenger.M$18.get_$12=function(){return __MSLiveCore__.Loader.get_settings().messenger.sameDomainEndpointsAsLocalEnabled};
Microsoft.Live.Messenger.M$18.get_$13=function(){return __MSLiveCore__.Loader.get_settings().messenger.smsEnabled};Microsoft.Live.Messenger.M$18.get_$14=function(){var a=__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("resources/images/*.jpg");return a.substring(0,a.indexOf("*.jpg"))};Microsoft.Live.Messenger.M$18.get_$15=function(){return 100};Microsoft.Live.Messenger.IMAddress=function(a,b){this.$0=a;this.$1=b;this.$5=this.$1E()};Microsoft.Live.Messenger.IMAddress.$19=function(a){if(String.isNullOrEmpty(a))return 0;
a=a.trim();return 0<a.indexOf("@")?1:a.startsWith("+")?4:11};Microsoft.Live.Messenger.IMAddress.$1A=function(a){return String.isNullOrEmpty(a)||256>a.length};Microsoft.Live.Messenger.IMAddress.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,add_propertyChanged:function(a){this.$8=ss.Delegate.combine(this.$8,a)},remove_propertyChanged:function(a){this.$8=ss.Delegate.remove(this.$8,a)},$8:null,get_address:function(){switch(this.$1.type){case 11:case 13:return String.Empty;
case 4:return this.$1.address;default:return 1!==this.$0.get_identity().get_$1C().authType?String.Empty:this.$1.address}},get_type:function(){switch(this.$1.type){case 1:case 11:return 1;case 13:return 13;case 2:return 2;case 32:return 32;case 4:return 4;case 16:return 16;case 8:return 8;default:return 0}},get_id:function(){return MSH.ContactHelper.computeIMAddressId(this.$1)},get_linkedContact:function(){return this.$6},get_network:function(){return this.$5},get_endpoints:function(){null==this.$2&&
(this.$2=new Microsoft.Live.Messenger.EndpointCollection(this));return this.$2},get_capabilities:function(){null==this.$3&&(this.$3=new Microsoft.Live.Messenger.M$1F(this));return this.$3},get_cid:function(){return 1===this.get_type()?this.get_$E().cid:String.Empty},get_skypeName:function(){if(8===this.get_type())return this.get_address();if(1===this.get_type()&&null!=this.$7&&null!=this.$7.skpServiceData){var a=this.$7.skpServiceData.get_item(MC.SKPServiceDataProperties.skypeName);return null==a?
String.Empty:a}return String.Empty},get_presence:function(){null==this.$4&&(this.$4=new Microsoft.Live.Messenger.IMAddressPresence(this));return this.$4},get_isOnline:function(){if(null==this.$4)return!1;switch(this.get_presence().get_status()){case 2:case 0:return!1;default:return!0}},get_supportsAppearOfflineTo:function(){return!this.$5.get_$1F()&&this.$6.get_$7()},get_isFederated:function(){switch(this.$1.type){case 1:case 11:return!1;default:return!0}},get_isIdentityVerified:function(){return this.get_$F().peServiceData.get_isIdentityVerified()},
get_isContact:function(){return 0!==(this.$1.roleLists&1)},get_isAllowed:function(){return 0!==(this.$1.roleLists&2)},get_isBlocked:function(){return 0!==(this.$1.roleLists&4)},get_isAppearOfflineTo:function(){return 2===this.get_$9().get_presence().get_status()?!0:Microsoft.Live.Messenger.Contact.$21(this.$1.roleLists)},get_isAudioVideoCapable:function(){return!Microsoft.Live.Messenger.Services.SkyJSHelper.skypeEnabled||!Microsoft.Live.Messenger.Services.SkyJSHelper.skypeAudioVideoEnabled?!1:0!==
this.get_presence().get_status()&&2!==this.get_presence().get_status()&&null!=this.$7&&null!=this.$7.skpServiceData&&!String.isNullOrEmpty(this.$7.skpServiceData.get_item(MC.SKPServiceDataProperties.skypeName))?!0:!1},get_networkIconUrl:function(){return this.get_network().get_iconUrl()},get_contact:function(){return null==this.$6?null:this.$6.get_$9()},get_supportsVideoCalls:function(){if(2===this.get_type()&&(!this.get_capabilities().get_$8()||!this.get_capabilities().get_$9()))return!1;for(var a=
ss.IEnumerator.getEnumerator(this.get_endpoints());a.moveNext();)if(a.get_current().get_capabilities().get_supportsVideoCalls())return!0;return!1},get_isUser:function(){return this.$0.get_address()===this||null!=this.$0.get_skypeAddress()&&this.$0.get_skypeAddress().get_address()===this.get_address()},get_$9:function(){return this.$0},get_$A:function(){switch(this.$1.type){case 16:case 4:return!0;default:return!1}},get_isFacebookMobileEnabled:function(){return this.$1.isFacebookMobileEnabled},get_isAnonymous:function(){return this.$1.address.endsWith("@anonymous.messenger.live.com")},
get_$B:function(){if(null==this.$4)return!1;switch(this.get_presence().get_status()){case 1:case 3:case 7:return!0;default:return!1}},$C:function(a){return this.$0.get_localEndpoint()===a},$D:function(a){for(var b=ss.IEnumerator.getEnumerator(this.get_endpoints());b.moveNext();){var c=b.get_current();if(MSH.ArrayHelper.contains(c.get_presence().get_$4(),a))return!0}return!1},get_$E:function(){return this.$1},get_$F:function(){null==this.$7&&(this.$7=MC.ServiceDataSet.create());return this.$7},get_$10:function(){return MSH.ContactHelper.getIMAddressInfoKey(this.$1)},
get_$11:function(){return MSH.ContactHelper.getIMAddressInfoKey(this.get_$E())},equals:function(a){return null==a?!1:MSH.ContactHelper.areIMAddressesEqual(this.$1,a.$1)},$12:function(a,b){return this.$1.address===a&&this.get_type()===b},$13:function(a){this.$6=a},$14:function(){this.$1B("IsAppearOfflineTo")},$15:function(a,b){this.$1.roleLists=a;if(0!==b){0!==(b&1)&&this.$1B("IsContact");0!==(b&2)&&this.$1B("IsAllowed");0!==(b&4)&&this.$1B("IsBlocked");var c=null!=this.$0.get_address()&&2===this.$0.get_presence().get_status(),
d=Microsoft.Live.Messenger.Contact.$21(a^b),e=Microsoft.Live.Messenger.Contact.$21(a);!c&&1===(d^e)&&this.$1B("IsAppearOfflineTo")}},$16:function(a){for(var b=!1,c=!1,d=!1,a=this.get_$F().updateAll(a),a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var e=a.get_current();if(0<Object.getKeyCount(e.deletedEndpoints)||0<Object.getKeyCount(e.newEndpoints)||0<Object.getKeyCount(e.updatedEndpoints)||0<e.updatedProperties.length)switch(b=1===(b|this.get_capabilities().$B(e)),c=1===(c|this.get_endpoints().$17(e)),
d=1===(d|this.get_presence().$8(e)),e.service){case 2:this.$1C(e);break;case 1:this.$1D(e)}}b&&this.$1B("Capabilities");c&&this.$1B("Endpoints");d&&this.$1B("Presence")},$17:function(a){for(var b=!1,c=!1,d=!1,e=this.get_supportsVideoCalls(),a=this.get_$F().deleteAll(a),a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var f=a.get_current(),b=1===(b|this.get_capabilities().$B(f)),c=1===(c|this.get_endpoints().$18(f)),d=1===(d|this.get_presence().$8(f));switch(f.service){case 2:this.$1C(f);break;case 1:this.$1D(f)}}b&&
(this.$1B("Capabilities"),e!==this.get_supportsVideoCalls()&&this.$1B("SupportsVideoCalls"));c&&this.$1B("Endpoints");d&&this.$1B("Presence")},$18:function(a){var b=this.get_id();this.$1.address=a.address;this.$1.type=a.type;this.$1.id=a.id;this.$1B("Address");this.$1B("Type");b!==this.get_id()&&this.$1B("Id")},$1B:function(a){null!=this.$8&&this.$8.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))},$1C:function(a){a=a.updatedProperties;a.contains(MC.IMServiceDataProperties.status)&&
this.get_contact().$1E();a.contains(MC.IMServiceDataProperties.isOnline)&&(this.$1B("IsOnline"),this.get_contact().$1D())},$1D:function(a){a.updatedProperties.contains(MC.PEServiceDataProperties.isIdentityVerified)&&(this.$1B("IsIdentityVerified"),this.get_contact().$1F())},$1E:function(){switch(this.$1.type){case 13:return this.$0.get_networks().get_item(this.$1.network);case 4:case 16:return this.$0.get_networks().$1B(),Microsoft.Live.Messenger.Network.get_$1A();case 2:return this.$0.get_networks().$1D(),
Microsoft.Live.Messenger.Network.get_$19();case 32:return this.$0.get_networks().$1A(),Microsoft.Live.Messenger.Network.get_$18();case 8:return this.$0.get_networks().$1C(),Microsoft.Live.Messenger.Network.get_$17();default:return Microsoft.Live.Messenger.Network.get_$16()}}};Microsoft.Live.Messenger.M$1F=function(a){Microsoft.Live.Messenger.M$1F.initializeBase(this,[a]);this.$11=a.get_$F().imServiceData};Microsoft.Live.Messenger.M$1F.prototype={$11:null,$12:!1,get_isOnlineViaMobileDevice:function(){return this.$11.get_isOnlineViaMobileDevice()},
get_isOnlineViaWeb:function(){return this.$11.get_isOnlineViaWeb()},get_webCamDetected:function(){return this.$11.get_webCamDetected()},set_webCamDetected:function(){throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$42);},get_videoCallSupports16By9AspectRatio:function(){return this.$11.get_videoCallSupports16By9AspectRatio()},set_videoCallSupports16By9AspectRatio:function(){throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$42);},get_supportsVideoCalls:function(){return this.get_address().get_supportsVideoCalls()},
set_supportsVideoCalls:function(){throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$42);},get_canSupportVideoCalls:function(){return this.$11.get_canSupportVideoCalls()},set_canSupportVideoCalls:function(){throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$42);},get_$4:function(){return this.$11.get_supportsApplicationMessages()},get_$5:function(){return this.$11.get_supportsNudges()},get_$6:function(){return this.$11.get_supportsMultipartyConversations()},get_$7:function(){return this.$11.get_supportsTunneledSip()},
set_$7:function(){throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$42);},get_$8:function(){return this.$11.get_sipTunnelVersion2()},set_$8:function(){throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$42);},get_$9:function(){return this.$11.get_fTurnCapable()},set_$9:function(){throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$42);},get_$A:function(){throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$42);},set_$A:function(){throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$42);
},$B:function(a){if(2!==a.service)return!1;var b=!1,c=this.get_supportsVideoCalls();this.$12!==c&&(b=!0,this.$12=c,this.$10("SupportsVideoCalls"));for(var a=a.updatedProperties,c=a.length,d=0;d<c;d++)switch(a[d]){case MC.IMServiceDataProperties.isOnlineViaMobileDevice:b=!0;this.$10("IsOnlineViaMobileDevice");break;case MC.IMServiceDataProperties.isOnlineViaWeb:b=!0;this.$10("IsOnlineViaWeb");break;case MC.IMServiceDataProperties.webCamDetected:b=!0;this.$10("WebCamDetected");break;case MC.IMServiceDataProperties.videoCallSupports16By9AspectRatio:b=
!0;this.$10("VideoCallSupports16By9AspectRatio");break;case MC.IMServiceDataProperties.canSupportVideoCalls:b=!0;this.$10("CanSupportVideoCalls");break;case MC.IMServiceDataProperties.supportsMultipartyConversations:b=!0;this.$10("SupportsMultipartyConversations");break;case MC.IMServiceDataProperties.version:b=!0,this.$D(),this.$10("Version")}return b},$C:function(){return this.$F(this.$11.get_version())}};Microsoft.Live.Messenger.IMAddressCollection=function(a){Microsoft.Live.Messenger.IMAddressCollection.initializeBase(this);
this.$13=a};Microsoft.Live.Messenger.IMAddressCollection.prototype={$13:null,add:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("address");if(this.$B(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$D,"address");this.$13.addAddress(this,a)},remove:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("address");if(!this.$B(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$E,"address");this.$13.removeAddress(this,a)},$14:function(){for(var a=
this.get_$5(),b=Array(a.length),c=0;c<a.length;c++)b[c]=a[c];return b},$15:function(){MSH.ArrayHelper.sortArrayList(this.get_$5(),ss.Delegate.create(this,this.$16))},$16:function(a,b){return a.get_network().get_$20()-b.get_network().get_$20()},get_item:function(a){if(0>a||a>=this.get_count())throw Microsoft.Live.Messenger.M$F.$5("index");return this.get_$5()[a]}};Microsoft.Live.Messenger.IMAddressPresence=function(a){this.$0=a;this.$2=a.get_$F();this.$1=new Microsoft.Live.Messenger.PresencePropertyCollection([this.$2.imServiceData,
this.$2.peServiceData,this.$2.cmServiceData,this.$2.skpServiceData],[])};Microsoft.Live.Messenger.IMAddressPresence.isDisplayNameValid=function(a){return null==a||129<a.length||0<=a.indexOf("&#")?!1:!0};Microsoft.Live.Messenger.IMAddressPresence.isPersonalMessageValid=function(a){return null==a?!1:a.length<=MC.Compatibility.get_maxPersonalMessageLength()};Microsoft.Live.Messenger.IMAddressPresence.$7=function(a,b,c,d){switch(a){case 2:return Microsoft.Live.Messenger.M$11.$4;case 0:return 13===b&&
c&&!d?"On Facebook Mobile":Microsoft.Live.Messenger.M$11.$7;case 6:case 4:case 5:case 8:return Microsoft.Live.Messenger.M$11.$5;case 3:case 7:return Microsoft.Live.Messenger.M$11.$6;case 1:return Microsoft.Live.Messenger.M$11.$8;default:return String.Empty}};Microsoft.Live.Messenger.IMAddressPresence.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,add_propertyChanged:function(a){this.$5=ss.Delegate.combine(this.$5,a)},remove_propertyChanged:function(a){this.$5=ss.Delegate.remove(this.$5,a)},$5:null,
get_imAddress:function(){return this.$0},get_properties:function(){return this.$1},get_displayName:function(){return this.$2.peServiceData.get_displayName()},get_displayPictureUrl:function(){return String.isNullOrEmpty(this.$3)&&(this.$F(),String.isNullOrEmpty(this.$3))?null:new Microsoft.Live.Messenger.Uri(this.$3)},get_media:function(){return this.$4},set_media:function(a){this.$C();if(a!==this.$4){this.$4=a;var b=String.Empty;null!=this.$4&&(this.$4.set_$A(!0),b=this.$4.$D());var c=MC.ServiceData.createEmpty(2);
c.set_currentMedia(b);this.$0.get_$9().$5A(c)}return a},get_personalMessage:function(){return!MC.Compatibility.get_useLegacyPersonalMessage()&&!String.isNullOrEmpty(this.$2.peServiceData.get_richUserMessage())?this.$2.peServiceData.get_richUserMessage():this.$2.peServiceData.get_personalMessage()},set_personalMessage:function(a){this.$C();if(null==a)throw Microsoft.Live.Messenger.M$F.$0("value");a=a.trim();if(!Microsoft.Live.Messenger.IMAddressPresence.isPersonalMessageValid(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$22,
"value");if(this.get_personalMessage()!==a){var b=MC.ServiceData.createEmpty(1);b.set_personalMessage(MSH.StringHelper.truncate(a,129));b.set_richUserMessage(a);b.set_richLinkType(1);b.set_richUrl(null);b.set_safeUrl(null);this.$0.get_$9().$5A(b)}return a},get_status:function(){switch(this.$2.imServiceData.get_status()){case 3:return 2;case 7:return 6;case 6:return 5;case 4:return 3;case 5:return 4;case 8:return 7;case 2:return 1;case 9:return 8;case 0:case 1:return 0;default:return 0}},set_status:function(a){this.$D();
var b=0;switch(a){case 2:b=3;break;case 6:b=7;break;case 5:b=6;break;case 3:b=4;break;case 4:b=5;break;case 7:b=8;break;case 1:b=2;break;case 8:b=9;break;case 0:b=0}if(0===b)throw Microsoft.Live.Messenger.M$F.$5("Status");if(this.$2.imServiceData.get_status()!==b){var c=MC.ServiceData.createEmpty(2);c.set_status(b);var d=this.$0.get_$9();d.$5A(c);5!==b&&d.get_settings().set_$6(b)}return a},get_statusText:function(){return Microsoft.Live.Messenger.IMAddressPresence.$7(this.get_status(),this.get_imAddress().get_type(),
this.get_imAddress().get_$E().isFacebookMobileEnabled,this.get_imAddress().get_isUser())},get_$6:function(){return this.$2},createPersonalMessageElement:function(){var a=this.get_personalMessage()||String.Empty,a=MSH.RegexHelper.replace("(\\r?\\n)+",a," ","g");return Microsoft.Live.Messenger.MessengerUtility.$5(a,this.$2.peServiceData)},$8:function(a){var b=!1;switch(a.service){case 2:b=this.$10(a);break;case 1:b=this.$11(a);break;case 8:b=this.$12(a)}this.$1.$15(a)&&(b=!0,this.$A("Properties"));
b&&this.$0.get_contact().$28(this.$0);return b},$9:function(){this.$B();var a=this.$0.get_$9();2===a.get_status()&&(3===a.get_services()||0===a.get_services())&&null!=this.$4&&this.$4.get_$A()&&this.set_media(null)},$A:function(a){null!=this.$5&&this.$5.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))},$B:function(){if(!this.$0.get_isUser())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$2A);},$C:function(){this.$B();this.$E();this.$0.get_$9().$64()},$D:function(){this.$B();
this.$E();this.$0.get_$9().$68()},$E:function(){this.$0.get_$9().$65()},$F:function(){var a=null;if(13===this.$0.get_type())this.$3=this.$0.get_linkedContact().get_$8().pictureUrl;else{var b=this.$0.get_isUser();if(this.$0.get_contact().get_isContact()||b){var c=this.$2.peServiceData;if(!String.isNullOrEmpty(c.get_userTileLocation())&&"1"!==c.get_userTileLocation()&&(c=ss.XmlDocumentParser.parse(c.get_userTileLocation()).documentElement,null!=c&&"msnobj"===c.nodeName&&(c=MSH.XmlHelper.getAttribute(c,
"Url1"),Microsoft.Live.Messenger.MessengerUtility.$A(c)))){this.$3=MSH.UriHelper.updateDisplayPictureUrl(c);return}}b&&(b=this.$2.peServiceData,String.isNullOrEmpty(b.get_displayPictureUrl())||(a=b.get_displayPictureUrl()));if(null==a){if(String.isNullOrEmpty(this.$0.get_cid())||null==Microsoft.Live.Messenger.M$18.get_$6())return;a=Microsoft.Live.Messenger.M$18.$9(this.$0.get_cid())}if(null!=a){b=this.$0.get_$9().get_identity().get_$1C();c=b.ticket;if(!String.isNullOrEmpty(c))switch(b.authType){case 1:a=
MSH.UriHelper.addParameter(a,"t",c)}this.$3=MSH.UriHelper.updateDisplayPictureUrl(a)}}},$10:function(a){for(var b=!1,c=a.updatedProperties.length,d=0;d<c;d++)switch(a.updatedProperties[d]){case MC.IMServiceDataProperties.currentMedia:b=this.$2.imServiceData.get_currentMedia();null!=this.$4&&this.$4.$D()===b||(this.$4=Microsoft.Live.Messenger.Media.$B(b));b=!0;this.$A("Media");break;case MC.IMServiceDataProperties.status:b=!0,this.$A("Status")}return b},$11:function(a){for(var b=!1,c=!1,d=a.updatedProperties.length,
e=0;e<d;e++)switch(a.updatedProperties[e]){case MC.PEServiceDataProperties.displayName:b=!0;this.$A("DisplayName");break;case MC.PEServiceDataProperties.personalMessage:case MC.PEServiceDataProperties.richLinkType:case MC.PEServiceDataProperties.richUrl:case MC.PEServiceDataProperties.richUserMessage:case MC.PEServiceDataProperties.safeUrl:c||(b=c=!0,this.$A("PersonalMessage"));break;case MC.PEServiceDataProperties.displayPictureUrl:case MC.PEServiceDataProperties.userTileLocation:this.$3=null,b=
!0,this.$A("DisplayPictureUrl")}return b},$12:function(a){for(var b=!1,c=a.updatedProperties.length,d=0;d<c;d++)switch(a.updatedProperties[d]){case MC.CMServiceDataProperties.comments:b=!0}return b}};Microsoft.Live.Messenger.Instance=function(a){this.$0=a};Microsoft.Live.Messenger.Instance.prototype={$0:null,add_propertyChanged:function(a){this.$1=ss.Delegate.combine(this.$1,a)},remove_propertyChanged:function(a){this.$1=ss.Delegate.remove(this.$1,a)},$1:null,get_isLocal:function(){return this.$0.isLocal},
get_id:function(){return this.$0.id},get_isPrimary:function(){return this.$0.isPrimary},$2:function(a){var b=!1,c=!1;a.id!==this.$0.id&&(this.$0.id=a.id,b=!0);a.isPrimary!==this.$0.isPrimary&&(this.$0.isPrimary=a.isPrimary,c=!0);null!=this.$1&&(b&&this.$1.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs("Id")),c&&this.$1.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs("IsPrimary")))}};Microsoft.Live.Messenger.InstanceCollection=function(){Microsoft.Live.Messenger.InstanceCollection.initializeBase(this);
this.$13=new Microsoft.Live.Messenger.Instance(MC.$create_InstanceInfo(String.Empty,!0,!1));this.$C(this.$13)};Microsoft.Live.Messenger.InstanceCollection.prototype={$13:null,get_localInstance:function(){return this.$13},find:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("id",a);for(var b=this.get_$5(),c=0;c<b.length;c++)if(b[c].get_id()===a)return b[c];return null},$14:function(a){var b=[],c=[],d;for(d=0;d<a.length;d++){var e=a[d];c.add(e.id);if(e.isLocal)this.$13.$2(e);
else{var f=this.find(e.id);null!=f?f.$2(e):b.add(new Microsoft.Live.Messenger.Instance(e))}}for(d=0;d<this.get_$5().length;)a=this.get_item(d),c.contains(a.get_id())?d++:a.get_isLocal()?(a.$2(MC.$create_InstanceInfo(a.get_id(),!0,!1)),d++):this.$10(d);for(d=0;d<b.length;d++)this.$C(b[d])},get_item:function(a){return this.getItem(a)}};Microsoft.Live.Messenger.LinkedContact=function(a,b,c){this.$6=0;this.$0=a;this.$1=b;this.$2=c;this.$3=new Microsoft.Live.Messenger.IMAddressCollection(this);a=this.$2.addresses;
if(null!=a&&0<a.length)if(b=a[0],13===b.type){if(this.$5=b.address,this.$4=this.$1.get_$13().get_networks().get_item(b.network),a=this.$0.$A(b),null!=a||null!=this.$4&&this.$4.get_supportsIM()&&!b.isFan)a=this.$0.$B(this,b),this.$6=b.roleLists,this.$3.$C(a)}else for(b=0;b<a.length;b++)if(c=a[b],8!==c.type||Microsoft.Live.Messenger.Services.SkyJSHelper.skypeEnabled){var d;d=this.$0.$B(this,c);d.get_isUser()&&(d.get_$E().roleLists=c.roleLists);this.$6|=c.roleLists;this.$3.$C(d)}null==this.$4&&(this.$4=
0<this.$3.get_count()?this.$3.get_item(0).get_network():Microsoft.Live.Messenger.Network.get_$16())};Microsoft.Live.Messenger.LinkedContact.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,get_displayPictureUrl:function(){if(String.isNullOrEmpty(this.$2.pictureUrl)){for(var a=ss.IEnumerator.getEnumerator(this.$3);a.moveNext();){var b=a.get_current().get_presence().get_displayPictureUrl();if(null!=b)return b}if(!String.isNullOrEmpty(this.$2.cid)&&(a=Microsoft.Live.Messenger.M$18.$9(this.$2.cid),
null!=a))return new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateDisplayPictureUrl(a))}else return this.$4.get_$1F()?new Microsoft.Live.Messenger.Uri(this.$2.pictureUrl):new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateDisplayPictureUrl(this.$2.pictureUrl));return null},get_emailAddress:function(){return null!=this.$2.emailAddress?this.$2.emailAddress.address:null},get_firstName:function(){return this.$2.firstName},get_lastName:function(){return this.$2.lastName},get_fullName:function(){return this.$2.fullName},
get_contactFullName:function(){return this.$2.contactFullName},get_id:function(){return null!=this.$2.id?MSH.StringHelper.toLowerCase(this.$2.id):null},set_id:function(a){this.get_$8().id!==a&&(!String.isNullOrEmpty(this.get_$8().id)&&!Microsoft.Live.Messenger.Guid.empty.equals(new Microsoft.Live.Messenger.Guid(this.get_$8().id))&&this.$0.$1A(this.get_id()),this.get_$8().id=a,!String.isNullOrEmpty(a)&&!Microsoft.Live.Messenger.Guid.empty.equals(new Microsoft.Live.Messenger.Guid(a))&&this.$0.$1B(this));
return a},get_isAllowed:function(){return 0!==(this.$6&2)},get_network:function(){return this.$4},get_photosUrl:function(){var a=this.$10(!1),b=this.$4.get_$1D().photoUrlFormat;return!String.isNullOrEmpty(a)&&!String.isNullOrEmpty(b)?new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(String.format(b,MSH.UriHelper.encode(a)))):null},get_profileUrl:function(){var a=this.$10(!1),b=this.$4.get_$1D().profileUrlFormat;return!String.isNullOrEmpty(a)&&!String.isNullOrEmpty(b)?new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(String.format(b,
MSH.UriHelper.encode(a)))):null},get_sendMessageUrl:function(){var a=this.$10(!0),b=this.$4.get_$1D().sendMessageUrlFormat;return!String.isNullOrEmpty(a)&&!String.isNullOrEmpty(b)?new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(String.format(b,MSH.UriHelper.encode(a)))):null},get_reportAbuseUrl:function(){var a=this.$10(!1),b=this.$4.get_$1D().reportAbuseUrlFormat;return!String.isNullOrEmpty(a)&&!String.isNullOrEmpty(b)?new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(String.format(b,
MSH.UriHelper.encode(a)))):null},get_$7:function(){return 0!==(this.$6&1)},get_$8:function(){return this.$2},get_$9:function(){return this.$1},get_$A:function(){return this.$3},$B:function(a){if(!this.$4.get_$1F()){for(var b=0,c=ss.IEnumerator.getEnumerator(a.addresses);c.moveNext();)var d=c.get_current(),b=b|d.roleLists;0!==b&&this.$C(b,0!==(b&4)?2:4);null==this.get_id()&&!String.isNullOrEmpty(a.id)&&(this.set_id(a.id),this.$11("Id"));this.get_$7()&&(this.$1.$27(a.nickname),this.$D(a.firstName,a.lastName))}},
$C:function(a,b){var c=this.$6,d=(c^a)&a,c=c|a,d=d|c&b,c=c&~b;if(0!==d){this.$6=c;for(var e=0;e<this.$3.get_count();e++)this.$3.get_item(e).get_$E().roleLists=c;this.$1.$2B(a,b);for(e=0;e<this.$3.get_count();e++)this.$3.get_item(e).$15(c,d);return!0}return!1},$D:function(a,b){var c=!1;a!==this.$2.firstName&&(c=!0,this.$2.firstName=a,this.$11("FirstName"));b!==this.$2.lastName&&(c=!0,this.$2.lastName=b,this.$11("LastName"));c&&(this.$11("FullName"),this.$1.$2A(String.Empty,6,!1))},add_propertyChanged:function(a){this.$E=
ss.Delegate.combine(this.$E,a)},remove_propertyChanged:function(a){this.$E=ss.Delegate.remove(this.$E,a)},$E:null,get_$F:function(){if(!String.isNullOrEmpty(this.$2.cid))return this.$2.cid;for(var a=ss.IEnumerator.getEnumerator(this.$3);a.moveNext();){var b=a.get_current();if(!String.isNullOrEmpty(b.get_cid()))return b.get_cid()}return null},$10:function(a){var b=null;this.$4.get_$1F()?b=this.$5:a?b=this.get_emailAddress():(b=MSH.ConvertHelper.convertDecToHex(this.get_$F()),String.isNullOrEmpty(b)||
(b=b.padLeft(16,"0")));return b},$11:function(a){null!=this.$E&&this.$E.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))},addAddress:function(a,b){var c=b.get_contact();null!=c&&c.get_addresses().remove(b);b.$15(this.$6,this.$6^b.get_$E().roleLists);b.$13(this);a.$C(b)},removeAddress:function(a,b){1===this.$3.get_count()&&this.$1.get_$13().$5E(this,0,this.$6);this.$0.$16(b);a.$D(b)}};Microsoft.Live.Messenger.LinkedContactCollection=function(){Microsoft.Live.Messenger.LinkedContactCollection.initializeBase(this)};
Microsoft.Live.Messenger.LinkedContactCollection.prototype={get_item:function(a){return this.getItem(a)}};Microsoft.Live.Messenger.MessageCollection=function(){Microsoft.Live.Messenger.MessageCollection.initializeBase(this);this.$13=MSH.DateTimeHelper.minValue};Microsoft.Live.Messenger.MessageCollection.prototype={$13:null,$14:function(a){var b=Date.get_now();a.set_timestamp(b);this.$15(a)},$15:function(a){this.$C(a);a.get_sender().get_isUser()||(this.$13=a.get_timestamp(),this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("LastReceived")))},
get_lastReceived:function(){return this.$13},get_item:function(a){return this.getItem(a)}};Microsoft.Live.Messenger.AudioMetaMessage=function(a){Microsoft.Live.Messenger.AudioMetaMessage.initializeBase(this,[5]);if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("body");this.$F=a};Microsoft.Live.Messenger.AudioMetaMessage.prototype={$F:null,$10:null,get_senderEndpoint:function(){return this.$10},get_body:function(){return this.$F},$11:function(a){this.$10=a},$C:function(a){this.set_sender(a);
var b=null;null!=this.$10&&(b=this.$10.get_id().toString());b=MC.$create_AudioMetaMessageInfo(this.$F,b);b=MC.$create_MessageInfo(5,b);b.sender=a.get_$E();b.isOfflineMessage=this.get_isOfflineMessage();return b}};Microsoft.Live.Messenger.AudioTunnelMessage=function(a){Microsoft.Live.Messenger.AudioTunnelMessage.initializeBase(this,[4]);if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("sipBody");this.$F=a};Microsoft.Live.Messenger.AudioTunnelMessage.prototype={$F:null,$10:null,get_senderEndpoint:function(){return this.$10},
get_sipBody:function(){return this.$F},$11:function(a){this.$10=a},$C:function(a){this.set_sender(a);var b=null;null!=this.$10&&(b=this.$10.get_id().toString());b=MC.$create_AudioTunnelMessageInfo(this.$F,b);b=MC.$create_MessageInfo(4,b);b.sender=a.get_$E();b.isOfflineMessage=this.get_isOfflineMessage();return b}};Microsoft.Live.Messenger.MessengerUtility=function(){};Microsoft.Live.Messenger.MessengerUtility.getEmoticonUrlPath=function(){return Microsoft.Live.Messenger.M$18.get_$A()};Microsoft.Live.Messenger.MessengerUtility.getImagePath=
function(){var a=__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("resources/images/*.jpg");return a.substring(0,a.indexOf("*.jpg"))};Microsoft.Live.Messenger.MessengerUtility.emoticonEncode=function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("text");return Microsoft.Live.Messenger.MessengerUtility.$0(a,String.Empty,0)};Microsoft.Live.Messenger.MessengerUtility.replaceEmoticons=function(a,b){var c=document.createElement("span");Microsoft.Live.Messenger.MessengerUtility.$1(a,
c,!1,b);return c};Microsoft.Live.Messenger.MessengerUtility.$0=function(a,b,c){for(var d=document.createElement("span"),b=Microsoft.Live.Messenger.MessengerUtility.$4(b),e=0,b=ss.IEnumerator.getEnumerator(b);b.moveNext();){var f=b.get_current();0<f.$0&&Microsoft.Live.Messenger.MessengerUtility.$1(MSH.StringHelper.substringSection(a,e,f.$0),d,!0,c);var e=MSH.StringHelper.substring(a,f.$0,f.$1),g=Microsoft.Live.Messenger.MessengerUtility.$2(e,f.$2);g.innerText=e;d.appendChild(g);e=f.$0+f.$1+1}e<a.length&&
Microsoft.Live.Messenger.MessengerUtility.$1(MSH.StringHelper.substringToEnd(a,e),d,!0,c);return d};Microsoft.Live.Messenger.MessengerUtility.$1=function(a,b,c,d){for(;0<a.length;){var e=!1;a.replace(Microsoft.Live.Messenger.MessengerUtility.$6,function(f,g,h,i,j){0<j&&(f=MSH.StringHelper.substring(a,0,j),b.appendChild(document.createTextNode(f)));switch(g){case "\r\n":case "\r":case "\n":b.appendChild(document.createElement("br"));break;default:g.startsWith("http")||g.startsWith("www")?c?(f=Microsoft.Live.Messenger.MessengerUtility.$2(g,
null),f.innerText=g,b.appendChild(f)):b.appendChild(document.createTextNode(g)):g.startsWith("/www")?b.appendChild(document.createTextNode(g)):(f=Microsoft.Live.Messenger.MessengerUtility.$3(g,d),null==f?b.appendChild(document.createTextNode(g)):b.appendChild(f))}a=MSH.StringHelper.substringToEnd(a,j+g.length);e=!0;return String.Empty});e||(b.appendChild(document.createTextNode(a)),a=String.Empty)}};Microsoft.Live.Messenger.MessengerUtility.$2=function(a,b){var c=document.createElement("a"),d=a;!d.startsWith("http://")&&
!d.startsWith("https://")&&(d="http://"+d);c.href=d;c.target="_blank";c.attachEvent("onclick",function(){"Disabled"===c.className?window.event.returnValue=!1:window.event.cancelBubble=!0;null!=b&&(!b.startsWith("http://")&&!b.startsWith("https://")&&(b="http://"+b),c.href=b,MSH.Scheduler.defer(function(){c.href=d}))});return c};Microsoft.Live.Messenger.MessengerUtility.$3=function(a,b){var c=Microsoft.Live.Messenger.MessengerUtility.$7[MSH.StringHelper.toLowerCase(a)];if(String.isNullOrEmpty(c))return null;
var d=Microsoft.Live.Messenger.M$18.get_$A(),d=ss.isNullOrUndefined(b)||0===b?d+"16px/":d+"19px/",d=d+(c+".png"),c=document.createElement("img");c.title=a;c.alt=a;c.className="Emoticon";MSH.BrowserHelper.get_supportsTransparentPngs()?c.src=d:(c.src=__MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("resources/images/transparent.gif"),c.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='image',src='"+d+"');");return c};Microsoft.Live.Messenger.MessengerUtility.$4=
function(a){var b=[];if(String.isNullOrEmpty(a))return b;a=a.split(" ");for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var c=a.get_current().split(",");b.add(Microsoft.Live.Messenger.$create_M$14(MSH.ConvertHelper.tryParseInt(c[0]),MSH.ConvertHelper.tryParseInt(c[1]),c[2]))}return b};Microsoft.Live.Messenger.MessengerUtility.$5=function(a,b){var c=document.createElement("span");c.className="PersonalMessage";var d=b.get_safeUrl()||String.Empty,d=Microsoft.Live.Messenger.MessengerUtility.$0(a,
d,0);d.className="PersonalMessage_Text";var e=String.Empty,f=1;null!=b&&(f=b.get_richLinkType(),e=b.get_richUrl());if(1!==f&&0!==f&&!String.isNullOrEmpty(e)){var g=document.createElement("img");g.className="PersonalMessage_Icon";g.style.border="none";g.src=Microsoft.Live.Messenger.M$18.get_$E()+Microsoft.Live.Messenger.MessengerUtility.$8[f]+".png";e=Microsoft.Live.Messenger.MessengerUtility.$2(e,null);e.appendChild(g);c.appendChild(e)}c.appendChild(d);return c};Microsoft.Live.Messenger.MessengerUtility.$A=
function(a){return String.isNullOrEmpty(a)?!1:MSH.RegexHelper.isMatch("((http|https):\\/\\/)[^\\s]*[^\\s?.!(;:'>\\[\\],]",a,"i")};Microsoft.Live.Messenger.Network=function(a){this.$14=a;this.$14.iconUrl=Microsoft.Live.Messenger.M$18.$B(this.$14.id);this.$14.iconErrorUrl=Microsoft.Live.Messenger.M$18.$C(this.$14.id)};Microsoft.Live.Messenger.Network.get_$16=function(){if(null==Microsoft.Live.Messenger.Network.$F){var a=MC.$create_NetworkInfo("WL",Microsoft.Live.Messenger.M$11.$9,1,!1,null,null,null,
null);a.imEnabled=!0;a.rank=2;Microsoft.Live.Messenger.Network.$F=new Microsoft.Live.Messenger.Network(a)}return Microsoft.Live.Messenger.Network.$F};Microsoft.Live.Messenger.Network.get_$17=function(){if(null==Microsoft.Live.Messenger.Network.$13){var a=MC.$create_NetworkInfo("SKYPE",Microsoft.Live.Messenger.M$11.$D,1,!1,null,null,null,null);a.imEnabled=!0;a.rank=1;Microsoft.Live.Messenger.Network.$13=new Microsoft.Live.Messenger.Network(a)}return Microsoft.Live.Messenger.Network.$13};Microsoft.Live.Messenger.Network.get_$18=
function(){if(null==Microsoft.Live.Messenger.Network.$12){var a=MC.$create_NetworkInfo("YH",Microsoft.Live.Messenger.M$11.$C,1,!1,null,null,null,null);a.imEnabled=!0;a.rank=1001;Microsoft.Live.Messenger.Network.$12=new Microsoft.Live.Messenger.Network(a)}return Microsoft.Live.Messenger.Network.$12};Microsoft.Live.Messenger.Network.get_$19=function(){if(null==Microsoft.Live.Messenger.Network.$10){var a=MC.$create_NetworkInfo("OCS",Microsoft.Live.Messenger.M$11.$A,1,!1,null,null,null,null);a.imEnabled=
!0;a.rank=3;Microsoft.Live.Messenger.Network.$10=new Microsoft.Live.Messenger.Network(a)}return Microsoft.Live.Messenger.Network.$10};Microsoft.Live.Messenger.Network.get_$1A=function(){if(null==Microsoft.Live.Messenger.Network.$11){var a=MC.$create_NetworkInfo("SMS",Microsoft.Live.Messenger.M$11.$B,1,!1,null,null,null,null);a.imEnabled=!0;a.rank=1002;Microsoft.Live.Messenger.Network.$11=new Microsoft.Live.Messenger.Network(a)}return Microsoft.Live.Messenger.Network.$11};Microsoft.Live.Messenger.Network.get_$1B=
function(){return Microsoft.Live.Messenger.Network.$E++};Microsoft.Live.Messenger.Network.prototype={$14:null,$15:null,get_iconUrl:function(){return!String.isNullOrEmpty(this.$14.iconUrl)?new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(this.$14.iconUrl)):null},get_iconErrorUrl:function(){return!String.isNullOrEmpty(this.$14.iconErrorUrl)?new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(this.$14.iconErrorUrl)):null},get_id:function(){return this.$14.id},get_imEnabled:function(){return this.$14.imEnabled},
set_imEnabled:function(a){if(!this.get_supportsRemoteSignIn())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$1D);this.$14.imEnabled!==a&&(this.$14.imEnabled=a,this.$15.$58(this.get_id(),a?1:2,!0),this.$27("IMEnabled"));return a},get_name:function(){return this.$14.name},get_status:function(){return this.$14.status},get_tokenState:function(){return this.$14.tokenState},get_supportsIM:function(){return this.$14.supportsIM},get_supportsRemoteSignIn:function(){return 2===this.$14.connectionType},
get_isWindowsLive:function(){return"WL"===this.$14.id},get_isTelephone:function(){return"SMS"===this.$14.id},get_isYahoo:function(){return"YH"===this.$14.id},get_isOfficeCommunicator:function(){return"OCS"===this.$14.id},get_isFacebook:function(){return"FB"===this.$14.id},get_isGoogle:function(){return"GOOG"===this.$14.id},get_isSkype:function(){return"SKYPE"===this.$14.id},add_propertyChanged:function(a){this.$1C=ss.Delegate.combine(this.$1C,a)},remove_propertyChanged:function(a){this.$1C=ss.Delegate.remove(this.$1C,
a)},$1C:null,get_$1D:function(){return this.$14},get_$1E:function(){return this.$15},set_$1E:function(a){return this.$15=a},get_$1F:function(){return this.$14.isRemoteNetwork},get_$20:function(){return this.$14.rank},$21:function(a,b,c,d){this.$14.photoUrlFormat=a;this.$14.profileUrlFormat=b;this.$14.sendMessageUrlFormat=c;this.$14.reportAbuseUrlFormat=d},$22:function(a){this.$14.status!==a&&(this.$14.status=a,0===this.$14.status&&this.$26(),this.$27("Status"))},$23:function(a,b){if(0!==a&&8===a){var c=
!1;switch(b&3){case 1:this.get_imEnabled()&&(c=!0,this.$14.imEnabled=!1);break;case 2:this.get_imEnabled()||(c=!0,this.$14.imEnabled=!0)}c&&this.$27("IMEnabled")}},$24:function(a){var b=[];this.$14.name!==a.name&&(this.$14.name=a.name,b.add("Name"));this.$14.supportsIM!==a.supportsIM&&(this.$14.supportsIM=a.supportsIM,b.add("SupportsIM"));this.$14.connectionType!==a.connectionType&&(this.$14.connectionType=a.connectionType,b.add("SupportsRemoteSignIn"));if(this.$14.imEnabled!==a.imEnabled){this.$14.imEnabled=
a.imEnabled;b.add("IMEnabled");var c=this.$14.imEnabled?1:2;this.$15.$58(this.get_id(),c,!0)}this.$14.tokenState!==a.tokenState&&(this.$14.tokenState=a.tokenState,b.add("TokenState"));for(a=0;a<b.length;a++)this.$27(b[a])},$25:function(){2===this.get_$1D().connectionType&&(this.get_$1D().connectionType=0,this.get_$1D().supportsIM=!1,this.$27("SupportsIM"),this.$27("SupportsRemoteSignIn"))},$26:function(){this.$15.get_$2B().$5(!0,this.get_id())},$27:function(a){null!=this.$1C&&this.$1C.invoke(this,
new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))}};Microsoft.Live.Messenger.NetworkCollection=function(a){Microsoft.Live.Messenger.NetworkCollection.initializeBase(this);this.$18=a;this.$13={};this.add_collectionChanged(ss.Delegate.create(this,this.$20));Microsoft.Live.Messenger.Services.SkyJSHelper.skypeEnabled&&this.$1C();this.$C(Microsoft.Live.Messenger.Network.get_$16())};Microsoft.Live.Messenger.NetworkCollection.prototype={$13:null,$14:!1,$15:!1,$16:!1,$17:!1,$18:null,$19:function(a,
b,c){this.$9();if(null!=a)for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var d=a.get_current();this.$1F(d)}if(null!=b)for(b=ss.IEnumerator.getEnumerator(b);b.moveNext();)a=b.get_current(),this.$1F(a);if(null!=c)for(c=ss.IEnumerator.getEnumerator(c);c.moveNext();)b=c.get_current(),b=this.get_item(b.id),null!=b&&b.get_$1F()&&(b.$25(),this.$D(b));this.$21();this.$A()},$1A:function(){this.$14||(this.$C(Microsoft.Live.Messenger.Network.get_$18()),this.$14=!0,this.$21())},$1B:function(){this.$15||
(this.$C(Microsoft.Live.Messenger.Network.get_$1A()),this.$15=!0,this.$21())},$1C:function(){this.$17||(this.$C(Microsoft.Live.Messenger.Network.get_$17()),this.$17=!0,this.$21())},$1D:function(){this.$16||(this.$C(Microsoft.Live.Messenger.Network.get_$19()),this.$16=!0,this.$21())},$1E:function(){for(var a=ss.IEnumerator.getEnumerator(this);a.moveNext();){var b=a.get_current();b.get_$1F()&&b.$22(0)}},$1F:function(a){var b=this.get_item(a.id);null==b?(a.rank=Microsoft.Live.Messenger.Network.get_$1B(),
b=new Microsoft.Live.Messenger.Network(a),b.set_$1E(this.$18),this.$C(b)):b.$24(a)},$20:function(a,b){switch(b.get_action()){case 0:for(var c=0;c<b.get_newItems().length;c++){var d=b.get_newItems()[c];d.set_$1E(this.$18);this.$13[d.get_id()]=d}break;case 1:for(c=0;c<b.get_oldItems().length;c++)d=b.get_oldItems()[c],delete this.$13[d.get_id()];break;case 3:Object.clearKeys(this.$13);for(c=0;c<this.get_$5().length;c++)d=this.get_$5()[c],d.set_$1E(this.$18),this.$13[d.get_id()]=d}},$21:function(){MSH.ArrayHelper.sortArrayList(this.get_$5(),
ss.Delegate.create(this,this.$22))},$22:function(a,b){return a.get_$20()-b.get_$20()},get_item:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("key");if(Type.canCast(a,String)){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("id",a);return this.$13[MSH.StringHelper.toUpperCase(a)]}if(Type.canCast(a,Number))return this.getItem(a);throw Microsoft.Live.Messenger.M$F.$5("key");}};Microsoft.Live.Messenger.M$1C=function(a){this.$0=new Microsoft.Live.Messenger.SortedContactCollection(null,
a);this.$1=new Microsoft.Live.Messenger.SortedContactCollection(null,a)};Microsoft.Live.Messenger.M$1C.prototype={$0:null,$1:null,get_$2:function(){return this.$0},get_$3:function(){return this.$1},$4:function(a){a.get_isOnline()?this.$0.$17(a):this.$1.$17(a)},$5:function(a){a.get_isOnline()?this.$0.$18(a):this.$1.$18(a)},$6:function(a){return this.$0.$B(a)||this.$1.$B(a)},$7:function(a){this.$1.$18(a);this.$0.$17(a)},$8:function(a){this.$0.$18(a);this.$1.$17(a)},$9:function(a){if(!a.get_isContact()||
!this.$6(a))return!1;var b=this.$0.$B(a);return a.get_isOnline()!==b?(a.get_isOnline()?this.$7(a):this.$8(a),!0):!1},$A:function(a){this.get_$2().$1E(a);this.get_$3().$1E(a)}};Microsoft.Live.Messenger.PendingContact=function(a,b){this.$0=a;this.$1=b};Microsoft.Live.Messenger.PendingContact.prototype={$0:null,$1:null,get_imAddress:function(){return this.$1},get_displayName:function(){return this.$1.get_$E().address},get_inviteMessage:function(){return this.$1.get_$E().inviteMessage},accept:function(){this.$0.accept(this)},
decline:function(){this.$0.decline(this)}};Microsoft.Live.Messenger.PendingContactCollection=function(a){Microsoft.Live.Messenger.PendingContactCollection.initializeBase(this);this.$13=a};Microsoft.Live.Messenger.PendingContactCollection.prototype={$13:null,$14:function(a){for(var b=ss.IEnumerator.getEnumerator(this.get_$5());b.moveNext();)if(b.get_current().get_imAddress()===a)return;this.$C(new Microsoft.Live.Messenger.PendingContact(this,a))},$15:function(a){for(var b=ss.IEnumerator.getEnumerator(a.get_addresses());b.moveNext();)for(var c=
b.get_current(),d=ss.IEnumerator.getEnumerator(this.get_$5());d.moveNext();){var e=d.get_current();if(c===e.get_imAddress())return}this.$C(new Microsoft.Live.Messenger.PendingContact(this,a.get_currentAddress()))},$16:function(a){for(a=ss.IEnumerator.getEnumerator(a.get_addresses());a.moveNext();)for(var b=a.get_current(),c=ss.IEnumerator.getEnumerator(this);c.moveNext();){var d=c.get_current();if(b===d.get_imAddress()){this.$D(d);return}}},accept:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("contact");
if(!this.$B(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$E,"contact");this.$17(a,3,16)},decline:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("contact");if(!this.$B(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$E,"contact");this.$17(a,4,16)},$17:function(a,b,c){this.$13.$66();a=MC.$create_ContactInfo(Microsoft.Live.Messenger.Guid.empty.toString(),null,[a.get_imAddress().get_$E()]);a=this.$13.$4B(a);this.$13.$5E(a.get_$19(),b,c)},
get_item:function(a){if(0>a||a>=this.get_count())throw Microsoft.Live.Messenger.M$F.$5("index");return this.get_$5()[a]}};Microsoft.Live.Messenger.PremiumFeature=function(){};Microsoft.Live.Messenger.PremiumFeature.prototype={get_provisioned:function(){return!1},get_enabled:function(){return!1},get_suspended:function(){return!1},add_propertyChanged:function(a){this.$0=ss.Delegate.combine(this.$0,a)},remove_propertyChanged:function(a){this.$0=ss.Delegate.remove(this.$0,a)},$0:null};Microsoft.Live.Messenger.PresenceProperty=
function(a,b){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("name",a);if(null==b)throw Microsoft.Live.Messenger.M$F.$0("value");this.$0=a;this.$1=b};Microsoft.Live.Messenger.PresenceProperty.prototype={$0:null,$1:null,get_name:function(){return this.$0},get_value:function(){return this.$1}};Microsoft.Live.Messenger.PresencePropertyCollection=function(a,b){Microsoft.Live.Messenger.PresencePropertyCollection.initializeBase(this);this.$17(a,b)};Microsoft.Live.Messenger.PresencePropertyCollection.prototype=
{$13:null,$14:null,$15:function(a){var b=!1,c=this.$1A(a.service);null!=c&&(b=1===(b|this.$18(a.updatedProperties,c.get_properties())));return b},$16:function(a,b){var c=!1,d=this.$1A(a.service);null!=d&&(c=1===(c|this.$18(a.updatedProperties,d.get_properties())));d=this.$1B(a.service);null!=d&&(c=1===(c|this.$18(a.updatedEndpoints[b],d.get_properties())));return c},$17:function(a,b){this.$13=a;this.$14=b;this.$1C()},$18:function(a,b){for(var c=!1,d=a.length,e=0;e<d;e++){var f=a[e],g=this.$19(f);
if(Object.keyExists(b,f)){var h=Type.safeCast(b[f],String);null!=h&&(-1===g?this.$C(new Microsoft.Live.Messenger.PresenceProperty(f,h)):this.$E(g,new Microsoft.Live.Messenger.PresenceProperty(f,h)),c=!0)}else this.$D(g),c=!0}return c},$19:function(a){for(var b=this.get_count(),c=0;c<b;c++)if(this.get_$5()[c].get_name()===a)return c;return-1},$1A:function(a){for(var b=0;b<this.$13.length;b++)if(this.$13[b].get_service()===a)return this.$13[b];return null},$1B:function(a){for(var b=0;b<this.$14.length;b++)if(this.$14[b].get_service()===
a)return this.$14[b];return null},$1C:function(){for(var a=0;a<this.$13.length;a++)this.$1D(this.$13[a].get_properties());for(a=0;a<this.$14.length;a++)this.$1D(this.$14[a].get_properties())},$1D:function(a){for(var b in a){var c=b,d=Type.safeCast(a[b],String);null!=d&&this.$C(new Microsoft.Live.Messenger.PresenceProperty(c,d))}},get_item:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("key");if(Type.canCast(a,String)){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("name",
a);for(var b=0;b<this.get_count();b++)if(this.get_$5()[b].get_name()===a)return this.get_$5()[b];return null}if(Type.canCast(a,Number))return this.getItem(a);throw Microsoft.Live.Messenger.M$F.$5("key");}};Microsoft.Live.Messenger.Settings=function(a){this.$0=a;this.$1=MC.$create_SettingsInfo();this.$1.privacyOptions=1;this.$1.isAutoReconnectEnabled=MC.Compatibility.get_autoReconnectEnabled();this.$2=MC.$create_UXSettingsInfo(2,!0,!1,2,0);this.$3=new Microsoft.Live.Messenger.PremiumFeature;this.$4=
new Microsoft.Live.Messenger.PremiumFeature};Microsoft.Live.Messenger.Settings.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,add_propertyChanged:function(a){this.$5=ss.Delegate.combine(this.$5,a)},remove_propertyChanged:function(a){this.$5=ss.Delegate.remove(this.$5,a)},$5:null,get_autoReconnectEnabled:function(){return this.$1.isAutoReconnectEnabled},set_autoReconnectEnabled:function(a){a!==this.$1.isAutoReconnectEnabled&&(this.$1.isAutoReconnectEnabled=a,this.$A("AutoReconnectEnabled"));return a},
get_autoReconnectInitialWaitTime:function(){return this.$1.autoReconnectInitialWaitTime},set_autoReconnectInitialWaitTime:function(a){if(-1>a||120<a)throw Microsoft.Live.Messenger.M$F.$5("AutoReconnectInitialWaitTime");a!==this.$1.autoReconnectInitialWaitTime&&(this.$1.autoReconnectInitialWaitTime=a,this.$A("AutoReconnectInitialWaitTime"));return a},get_privacyMode:function(){return 2===this.$1.privacyOptions?0:1},set_privacyMode:function(a){var b=MC.$create_SettingsInfo();0===a&&2!==this.$1.privacyOptions&&
(b.privacyOptions=2);1===a&&1!==this.$1.privacyOptions&&(b.privacyOptions=1);0!==b.privacyOptions&&this.$0.$55(b);return a},get_canUpdateDisplayName:function(){return!this.$1.isIdentityUnverified},get_hasMailbox:function(){return this.$1.hasInbox},get_prepaidMobileMessaging:function(){return this.$3},get_partnerMobileMessaging:function(){return this.$4},get_multipleEndpointsEnabled:function(){return!this.$1.isMpopDisabled},set_multipleEndpointsEnabled:function(a){var b=!a;if(b!==this.$1.isMpopDisabled){var c=
MC.$create_SettingsInfo();c.isMpopDisabled=b;c.isMpopDisabledChanged=!0;this.$0.$55(c)}return a},get_signInPreference:function(){return this.$2.autoSignInEnabled},set_signInPreference:function(a){if(this.$2.autoSignInEnabled!==a){var b=this.$9();b.autoSignInEnabled=a;this.$0.$56(b)}return a},get_displayNameMode:function(){return 1},get_uploadLogsPreference:function(){switch(this.$2.uploadLogsPreference){case 0:return 0;case 1:return 1;case 2:return 2;default:return 0}},set_uploadLogsPreference:function(a){if(this.$2.uploadLogsPreference!==
a){var b=this.$9();b.uploadLogsPreference=a;this.$0.$56(b)}return a},get_$6:function(){return this.$2.lastStatus},set_$6:function(a){if(this.$2.lastStatus!==a){var b=this.$9();b.lastStatus=a;this.$0.$56(b)}return a},get_$7:function(){return this.$1},get_$8:function(){return this.$2},$9:function(){return MC.$create_UXSettingsInfo(this.$2.autoSignInEnabled,this.$2.audioEnabled,this.$2.firstRunExperienceViewed,this.$2.lastStatus,this.$2.uploadLogsPreference)},$A:function(a){a=new Microsoft.Live.Messenger.PropertyChangedEventArgs(a);
null!=this.$5&&this.$5.invoke(this,a)},$B:function(a){a.hasInboxChanged&&a.hasInbox!==this.$1.hasInbox&&(this.$1.hasInbox=a.hasInbox,this.$A("HasMailbox"));a.isIdentityUnverifiedChanged&&a.isIdentityUnverified!==this.$1.isIdentityUnverified&&(this.$1.isIdentityUnverified=a.isIdentityUnverified,this.$A("CanUpdateDisplayName"));a.isMpopDisabledChanged&&a.isMpopDisabled!==this.$1.isMpopDisabled&&(this.$1.isMpopDisabled=a.isMpopDisabled,this.$A("MultipleEndpointsEnabled"));0!==a.privacyOptions&&a.privacyOptions!==
this.$1.privacyOptions&&(this.$1.privacyOptions=a.privacyOptions,this.$A("PrivacyMode"))},$C:function(a){this.$2.lastStatus!==a.lastStatus&&(this.$2.lastStatus=a.lastStatus);this.$2.uploadLogsPreference!==a.uploadLogsPreference&&(this.$2.uploadLogsPreference=a.uploadLogsPreference,this.$A("UploadLogsPreference"));this.$2.autoSignInEnabled!==a.autoSignInEnabled&&(this.$2.autoSignInEnabled=a.autoSignInEnabled,this.$A("SignInPreference"));this.$2.firstRunExperienceViewed!==a.firstRunExperienceViewed&&
(this.$2.firstRunExperienceViewed=a.firstRunExperienceViewed);this.$2.audioEnabled!==a.audioEnabled&&(this.$2.audioEnabled=a.audioEnabled)}};Microsoft.Live.Messenger.SignedInEventArgs=function(a){Microsoft.Live.Messenger.SignedInEventArgs.initializeBase(this);this.$1_0=a};Microsoft.Live.Messenger.SignedInEventArgs.prototype={$1_0:null,get_serverName:function(){return this.$1_0}};Microsoft.Live.Messenger.M$B=function(a,b){this.$0=a;this.$1=b};Microsoft.Live.Messenger.M$B.prototype={$0:null,$1:!1};
Microsoft.Live.Messenger.M$C=function(a,b,c){this.$0=a;this.$1=b;this.$2=c};Microsoft.Live.Messenger.M$C.prototype={$0:null,$1:0,$2:null};Microsoft.Live.Messenger.M$A=function(){};Microsoft.Live.Messenger.M$A.prototype={$0:!1,$1:0};Microsoft.Live.Messenger.SortedCollection=function(a,b){Microsoft.Live.Messenger.SortedCollection.initializeBase(this);this.$13=a;this.$14=b;null==this.$14&&(this.$14=ss.Delegate.create(this,this.$1B))};Microsoft.Live.Messenger.SortedCollection.prototype={$13:null,$14:null,
$A:function(){this.$14.invoke(this.get_$5());Microsoft.Live.Messenger.SortedCollection.callBaseMethod(this,"$A")},$16:function(a){this.$9();this.get_$5().clear();null!=a&&this.$11(0,a);this.$A()},$17:function(a){var b;if(this.get_$4())b=this.get_count();else{b=new Microsoft.Live.Messenger.M$A;this.$1C(a,b);if(b.$0)this.onInsertEqual(this.get_$5()[b.$1],a);b=b.$1}this.$F(b,a)},$18:function(a){a=this.$1A(a);0<=a&&this.$10(a)},$19:function(a){var b=this.get_$5().indexOf(a);if(-1!==b){var c=new Microsoft.Live.Messenger.M$A;
this.get_$5().removeAt(b);this.$1C(a,c);this.get_$5().insert(b,a);b!==c.$1&&this.$12(c.$1,b)}},$1A:function(a){var b=new Microsoft.Live.Messenger.M$A;return 600<this.get_count()&&!this.get_$4()?(this.$1C(a,b),b.$0?b.$1:-1):this.get_$5().indexOf(a)},onInsertEqual:function(){return!0},$1B:function(a){MSH.ArrayHelper.sortArrayList(a,this.$13)},$1C:function(a,b){b.$1=0;b.$0=!1;if(0!==this.get_count()){for(var c=this.get_count()-1,d=0,e,f;d<=c;)if(e=Math.floor((c+d)/2),f=this.$13.invoke(this.get_$5()[e],
a),0>f)d=e+1;else if(0<f)c=e-1;else if(0===f){for(;0<e&&0===this.$13.invoke(this.get_$5()[e-1],a);)e--;for(;e<this.get_count()-1&&this.get_$5()[e]!==a&&0===this.$13.invoke(this.get_$5()[e+1],a);)e++;b.$1=e;b.$0=this.get_$5()[e]===a;return}b.$1=d}}};Microsoft.Live.Messenger.SortedContactCollection=function(a,b){Microsoft.Live.Messenger.SortedContactCollection.initializeBase(this,[Microsoft.Live.Messenger.SortedContactCollection.$20,Microsoft.Live.Messenger.SortedContactCollection.$21]);this.$1F(a);
this.$1D=b};Microsoft.Live.Messenger.SortedContactCollection.$20=function(a,b){var c=a.get_displayName(),d=b.get_displayName();return MSH.StringHelper.localeCompare(c,d)};Microsoft.Live.Messenger.SortedContactCollection.$21=function(a){var b=[];a.forEach(function(a){b.add([a.get_displayName(),a])});MSH.ArrayHelper.sortArrayList(b,function(a,b){return a[0].localeCompare(b[0])});a.clear();b.forEach(function(b){a.add(b[1])})};Microsoft.Live.Messenger.SortedContactCollection.prototype={$1D:null,findByAddress:function(a){if(null==
a)throw Microsoft.Live.Messenger.M$F.$0("address");return-1<this.$1A(a.get_contact())?a.get_contact():null},findByCid:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("cid");a=MC.$create_IMAddressInfo(a,11,0);a=this.$1D.$A(a);return null!=a?this.findByAddress(a):null},find:function(a,b){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("address");for(var c=0;c<this.get_count();c++)for(var d=this.get_$5()[c],e=0;e<d.get_addresses().get_count();e++)if(d.get_addresses().get_item(e).$12(a,
b))return d;return null},findById:function(a){a=this.$1D.$E(a);return null!=a&&-1<this.$1A(a)?a:null},$1E:function(a){this.$19(a)},$1F:function(a){this.$16(a)},get_item:function(a){return this.getItem(a)}};Microsoft.Live.Messenger.M$9=function(a){this.$0=a;this.$1=Date.get_now()};Microsoft.Live.Messenger.M$9.prototype={$0:null,$1:null,get_$2:function(){return this.$0},get_$3:function(){return this.$1},set_$3:function(a){return this.$1=a}};Microsoft.Live.Messenger.TypingIMAddressCollection=function(a){Microsoft.Live.Messenger.TypingIMAddressCollection.initializeBase(this);
this.$13=a;this.$14=[]};Microsoft.Live.Messenger.TypingIMAddressCollection.prototype={$13:0,$14:null,$15:null,$16:function(a){this.$B(a)||this.$C(a);this.$19(a);null==this.$15&&this.$1C(this.$13)},$17:function(a){this.$D(a)},$18:function(){for(var a=!1;0<this.$14.length;){var b=this.$1B(),c=this.$13-MSH.DateTimeHelper.subtract(Date.get_now(),b.get_$3());if(100>=c)this.$1A(b);else{this.$1C(c);a=!0;break}}a||(this.$15=null)},$19:function(a){for(var b=!1,c=ss.IEnumerator.getEnumerator(this.$14);c.moveNext();){var d=
c.get_current();if(d.get_$2().equals(a)){d.set_$3(Date.get_now());b=!0;break}}b||this.$14.add(new Microsoft.Live.Messenger.M$9(a))},$1A:function(a){this.$D(a.get_$2());this.$14.remove(a)},$1B:function(){for(var a=this.$14[0],b=ss.IEnumerator.getEnumerator(this.$14);b.moveNext();){var c=b.get_current();c.get_$3()<a.get_$3()&&(a=c)}return a},$1C:function(a){this.$15=new MSH.Timer(ss.Delegate.create(this,this.$18),null,a,MSH.Timeout.infinite)},get_item:function(a){return this.getItem(a)}};Microsoft.Live.Messenger.User=
function(a,b){this.$1E=String.Empty;this.$20=-1;this.$24=[];if(null==a)throw Microsoft.Live.Messenger.M$F.$0("identity");if(!a.get_isAuthenticated())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$2F);if(ss.isNullOrUndefined(b))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$9,"contactsReader");this.$12=new Microsoft.Live.Messenger.Settings(this);this.$1=a;this.$1.set_$21(this);this.$15=new MC.LogContext(this.$1.get_liveId()+";"+this.$1.get_$14());this.$13=
this.$1.get_$1E();this.$0=this.$1.get_$16();this.$0.set_$4(this);this.$1F=this.$1.get_$15();this.$C=new Microsoft.Live.Messenger.M$19(this);this.$14=new Microsoft.Live.Messenger.InstanceCollection;this.$D={};this.$5=new Microsoft.Live.Messenger.ContactCollection(this,new Microsoft.Live.Messenger.M$1A(this,1));this.$6=new Microsoft.Live.Messenger.ContactCollection(this,new Microsoft.Live.Messenger.M$1A(this,2));this.$7=new Microsoft.Live.Messenger.ContactCollection(this,new Microsoft.Live.Messenger.M$1A(this,
4));this.$8=new Microsoft.Live.Messenger.ContactCollection(this,new Microsoft.Live.Messenger.M$1A(this,64));this.$A=new Microsoft.Live.Messenger.PendingContactCollection(this);this.$B=new Microsoft.Live.Messenger.EmailOnlyContactCollection(this.$C);this.$9=new Microsoft.Live.Messenger.M$1C(this.$C);this.$E=new Microsoft.Live.Messenger.ConversationCollection(this);this.$F=new Microsoft.Live.Messenger.GroupCollection(this);this.$1B=[];this.$10=new Microsoft.Live.Messenger.AlertCollection;this.$11=new Microsoft.Live.Messenger.NetworkCollection(this);
var c=this.$2A(),d=MC.$create_IMAddressInfo(MSH.StringHelper.toLowerCase(a.get_liveId()),1,0);d.cid=a.get_cid();var e=[d];Microsoft.Live.Messenger.Services.SkyJSHelper.skypeEnabled&&(e=[d,MC.$create_IMAddressInfo(null,8,0)]);this.$3=this.$C.$C(e);this.$2=this.$3.get_$1B();this.$2.$16(c.toArray());this.$2.get_presence().add_propertyChanged(ss.Delegate.create(this,this.$40));this.$3.add_propertyChanged(ss.Delegate.create(this,this.$41));this.$4=this.$2.get_endpoints().get_item(0);this.$1C=MSH.ReportFactory.createReport(1,
5);this.$60();this.$21=new Microsoft.Live.Messenger.M$8(this);this.$18=new Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory(this);this.$19=new Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory;this.$25=b;this.$25.initialize(ss.Delegate.create(this,this.$79));Microsoft.Live.Messenger.Services.WebmainHelper.qoSResetTime("WebIM_Signin");this.$25.add_networksChanged(ss.Delegate.create(this,this.$28));this.get_networks().add_collectionChanged(ss.Delegate.create(this,this.$29))};
Microsoft.Live.Messenger.User.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,$8:null,$9:null,$A:null,$B:null,$C:null,$D:null,$E:null,$F:null,$10:null,$11:null,$12:null,$13:null,$14:null,$15:null,$16:null,$17:null,$18:null,$19:null,$1A:0,$1B:null,$1C:null,$1D:null,$1F:0,$21:null,$22:!1,$23:null,$25:null,$26:!1,$27:null,$28:function(a,b){this.$11.$19(b.added,b.changed,b.removed)},$29:function(a,b){if(1===b.get_action()){var c=b.get_oldItems();if(null!=c)for(c=ss.IEnumerator.getEnumerator(c);c.moveNext();){c=
c.get_current();c.get_isFacebook()&&c.get_imEnabled()&&this.$58(c.get_id(),2,!1);break}}},$2A:function(){var a;a=-1610612224;var b=MC.ServiceEndpointData.createEmpty(4,this.$1.get_$14());b.set_name(Microsoft.Live.Messenger.M$18.get_$8());b.set_clientType(2);var c=MC.ServiceEndpointData.createEmpty(2,this.$1.get_$14());c.set_capabilities([a,1288,1]);a=MC.ServiceEndpointData.createEmpty(1,this.$1.get_$14());a.set_capabilities([0,0]);var d=MC.ServiceEndpointData.createEmpty(16,this.$1.get_$14());a.set_clientType(2);
var e=MC.ServiceDataSet.create();e.imServiceData.set_status(1);e.imServiceData.addEndpoint(c);e.pdServiceData.addEndpoint(b);e.peServiceData.addEndpoint(a);e.skpServiceData.addEndpoint(d);return e},get_$2B:function(){return this.$C},get_$2C:function(){return this.$0},get_$2D:function(){return this.$25},get_autoReconnectWaitTime:function(){return this.$20},get_identity:function(){return this.$1},get_displayName:function(){var a=this.get_contact();return this.get_$2E()&&!String.isNullOrEmpty(a.get_fullName())?
a.get_fullName():String.isNullOrEmpty(this.get_presence().get_displayName())?this.get_identity().get_liveId():this.get_presence().get_displayName()},get_address:function(){return this.$2},get_skypeAddress:function(){return this.$16},get_contact:function(){return this.$3},get_presence:function(){return this.$2.get_presence()},get_endpoints:function(){return this.$2.get_endpoints()},get_localEndpoint:function(){return this.$4},get_conversations:function(){return this.$E},get_alerts:function(){return this.$10},
get_contacts:function(){return this.$5},get_$2E:function(){return 1===this.get_settings().get_displayNameMode()},get_allowedContacts:function(){return this.$6},get_blockedContacts:function(){return this.$7},get_pendingContacts:function(){return this.$A},get_onlineContacts:function(){return this.$9.get_$2()},get_offlineContacts:function(){return this.$9.get_$3()},get_emailOnlyContacts:function(){return this.$B},get_appearOfflineToContacts:function(){return this.$8},get_groups:function(){return this.$F},
get_services:function(){switch(this.$1F){case 2:return 2;case 0:return 0;case 3:return 3;case 1:return 1;default:return 0}},set_services:function(a){this.$68();if(a!==this.get_services()){switch(a){case 2:this.$43(2);break;case 3:this.$43(3);break;case 0:this.$43(0);break;case 1:this.$43(1);break;default:throw Microsoft.Live.Messenger.M$F.$5("Services");}2===this.$1A&&this.$57(this.$1F)}return a},get_settings:function(){return this.$12},get_status:function(){switch(this.get_$32()){case 2:return 2;
case 6:case 0:case 4:return 0;case 1:return 1;case 3:return 3;case 5:return 4;default:return 0}},get_mailbox:function(){return this.$17},get_networks:function(){return this.$11},get_messageFactory:function(){return this.$18},set_messageFactory:function(a){this.$64();this.$65();a!==this.$18&&(this.$18=a,null!=this.$18&&this.$18.$7(),this.onPropertyChanged("MessageFactory"));return a},get_presenceFactory:function(){return this.$19},set_presenceFactory:function(a){this.$64();this.$65();a!==this.$19&&
(this.$19=a,this.onPropertyChanged("PresenceFactory"));return a},get_instances:function(){return this.$14},get_$2F:function(){return 6===this.get_$32()},get_$30:function(){return this.$9},get_$31:function(){return this.$1C},get_$32:function(){return this.$1A},set_$32:function(a){if(a!==this.$1A){MSH.Logger.logStateChange(2,this.$15,"User.State","Changing state",MC.$create_StateChangeLogEntryInfo("User.State",Microsoft.Live.Messenger.M$4.toString(a)));var b=this.get_status();this.$1A=a;2===this.$1A&&
(!this.$1.get_reloaded()&&!this.$22)&&this.$4.$A(this.$18.get_$5(),this.$4.get_presence().get_extensions().get_$14());if(b!==this.get_status())this.onPropertyChanged("Status");2===this.$1A?this.$0.$5():4===this.$1A&&(b=MC.ServiceData.createEmpty(2),b.set_status(1),this.$2.$16([b.get_info()]))}return a},add_alertReceived:function(a){this.$33=ss.Delegate.combine(this.$33,a)},remove_alertReceived:function(a){this.$33=ss.Delegate.remove(this.$33,a)},$33:null,add_signedOutRemotely:function(a){this.$34=
ss.Delegate.combine(this.$34,a)},remove_signedOutRemotely:function(a){this.$34=ss.Delegate.remove(this.$34,a)},$34:null,add_signedOut:function(a){this.$35=ss.Delegate.combine(this.$35,a)},remove_signedOut:function(a){this.$35=ss.Delegate.remove(this.$35,a)},$35:null,add_signedIn:function(a){this.$36=ss.Delegate.combine(this.$36,a)},remove_signedIn:function(a){this.$36=ss.Delegate.remove(this.$36,a)},$36:null,add_signInCompleted:function(a){this.$37=ss.Delegate.combine(this.$37,a)},remove_signInCompleted:function(a){this.$37=
ss.Delegate.remove(this.$37,a)},$37:null,add_signOutCompleted:function(a){this.$38=ss.Delegate.combine(this.$38,a)},remove_signOutCompleted:function(a){this.$38=ss.Delegate.remove(this.$38,a)},$38:null,add_signOutEndpointCompleted:function(a){this.$39=ss.Delegate.combine(this.$39,a)},remove_signOutEndpointCompleted:function(a){this.$39=ss.Delegate.remove(this.$39,a)},$39:null,add_logRequestReceived:function(a){this.$3A=ss.Delegate.combine(this.$3A,a)},remove_logRequestReceived:function(a){this.$3A=
ss.Delegate.remove(this.$3A,a)},$3A:null,add_propertyChanged:function(a){this.$3B=ss.Delegate.combine(this.$3B,a)},remove_propertyChanged:function(a){this.$3B=ss.Delegate.remove(this.$3B,a)},$3B:null,findContactById:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("id",a);return this.$C.$E(a)},findContactBySkypeId:function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("skypeId",a);return this.$C.$F(a)},signIn:function(a){Microsoft.Live.Messenger.Services.WebmainHelper.qoSResetTime("WebIM_Signin");
this.$3C(a,!0)},$3C:function(a,b){this.$63();var c=ss.Delegate.create(this,function(){this.$1D=Date.get_now();if(5!==this.get_$32()&&0!==this.get_$32())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$2E);var c=new Microsoft.Live.Messenger.M$B(a,b);if(5===this.get_$32()&&(this.$21.$8(),this.$22)){this.$3F(c);return}if(0===this.$2.get_presence().get_status()&&1!==this.$1F&&2!==this.$1F){var e=MC.ServiceData.createEmpty(2);MC.Compatibility.get_useLastKnownUserStatus()&&e.set_status(this.$12.get_$6());
(0===e.get_status()||1===e.get_status())&&e.set_status(2);this.$2.$16([e.get_info()])}this.set_$32(1);MSH.Logger.logTrace(MC.LogContext.get_global(),"User.SignIn","Signing in");e=!1;e=Microsoft.Live.Messenger.Services.SkyJSHelper.skypeEnabled;this.$13.signIn(this.$1.$1D(),this.$2.get_$F().toArray(),this.$1F,null,c,e)});this.$26?c.invoke(null,ss.EventArgs.Empty):this.$27=c},triggerFakeAutoReconnect:function(){},signOut:function(a,b){0===arguments.length&&(a=1);if(5===this.get_$32()&&(3===a||1===a))this.$21.$A();
else{this.$64();var c=0;(3===a||1===a)&&this.get_presence().$9();var d=null;switch(a){case 3:c=3;break;case 2:if(!Microsoft.Live.Messenger.M$18.get_$12()){c=2;break}d=[];for(c=ss.IEnumerator.getEnumerator(this.get_endpoints().get_$16());c.moveNext();){var e=c.get_current();!e.get_isInstance()&&e.get_$9()&&d.add(e.get_id().toString())}d.length===this.get_endpoints().get_$16().length-1?(d=null,c=2):c=8;break;case 1:if(!Microsoft.Live.Messenger.M$18.get_$12()){c=1;break}d=[];for(c=ss.IEnumerator.getEnumerator(this.get_endpoints().get_$16());c.moveNext();)e=
c.get_current(),e!==this.$4&&(e.get_isInstance()&&e.get_$9())&&d.add(e.get_id().toString());0===d.length?(d=null,c=1):c=9;break;default:throw Microsoft.Live.Messenger.M$F.$5("locations");}1===(c&1)&&this.set_$32(3);this.$13.signOut(c,null==d?null:MSH.CollectionHelper.toArray(d),!0,new Microsoft.Live.Messenger.M$C(null,a,b))}},signOutEndpoint:function(a,b){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("endpoint");if(!this.$2.get_endpoints().$B(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$1F,
"endpoint");if(5===this.get_$32()&&this.$4===a)this.$21.$A();else{this.$64();var c,d,e;this.$4===a?(e=null,d=c=1,this.get_presence().$9(),this.set_$32(3)):(e=[a.get_id().toString()],c=8,d=2);this.$13.signOut(c,e,!0,new Microsoft.Live.Messenger.M$C(a,d,b))}},appearOnlineToContacts:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("contacts");this.$66();for(var b=[],c=ss.IEnumerator.getEnumerator(a);c.moveNext();){var d=c.get_current();d.get_isAppearOfflineToExplicit()&&b.add(d)}0!==b.length&&
this.$5F(b,2,String.Empty,null);2===this.get_presence().get_status()&&this.$3E(a)},appearOnlineToAllContacts:function(){this.appearOnlineToContacts(this.get_contacts())},createSkypeInitializationInfo:function(a){if(1!==this.$1.get_$1C().authType)throw Microsoft.Live.Messenger.M$F.$3("User must be using RPS auth.");if(2!==this.get_$32())throw Microsoft.Live.Messenger.M$F.$3("User must be signed in.");for(var b=Array(this.get_networks().get_count()),c=0;c<this.$11.get_count();++c)b[c]=this.$11.get_item(c).get_$1D();
return MLC.JSON.serialize(MC.$create_SkypeInitializationInfo(this.$1.get_liveId(),this.$1.get_cid(),a.$2F(),b))},$3D:function(a,b){if(null!=this.$3A){var c=null,c=ss.Delegate.create(this,function(d,e){MSH.LogCollector.get_instance().remove_logsCollected(c);null!=this.$3A&&this.$3A.invoke(this,new Microsoft.Live.Messenger.LogRequestReceivedEventArgs(a,b,MSH.LogCollector.stringifyLogs(e.get_logs())))});MSH.LogCollector.get_instance().add_logsCollected(c);MSH.LogCollector.get_instance().collectLogs()}},
$3E:function(a){this.$66();for(var b=[],c=ss.IEnumerator.getEnumerator(this.get_contacts());c.moveNext();){for(var d=c.get_current(),e=!1,f=ss.IEnumerator.getEnumerator(a);f.moveNext();){var g=f.get_current();if(d===g&&!d.get_isAppearOfflineToExplicit()){e=!0;break}}e||b.add(d)}this.$23={};0!==b.length?this.$5F(b,1,String.Empty,this.$23):this.$54(this.$23)},$3F:function(a){this.$1.set_reconnectScenarioQoSObject(Microsoft.Live.Messenger.Services.WebmainHelper.startQoS("WebIM_Reconnect"));Microsoft.Live.Messenger.Services.WebmainHelper.qoSResetTime("WebIM_Reconnect");
this.set_$32(1);var b=this.$2.get_$F();if((3===this.$1F||0===this.$1F)&&this.$21.get_$7()!==b.imServiceData.get_status())b=b.clone(),b.imServiceData.set_status(this.$21.get_$7());this.$13.reconnect(b.toArray(),this.$1F,this.$74(),a)},$40:function(a,b){if("DisplayName"===b.get_propertyNamePascal())this.onPropertyChanged(b.get_propertyNamePascal())},$41:function(a,b){if("DisplayName"===b.get_propertyNamePascal())this.onPropertyChanged(b.get_propertyNamePascal())},$42:function(a,b){if(null!=b.changed&&
0<b.changed.length)for(var c=ss.IEnumerator.getEnumerator(b.changed);c.moveNext();){var d=c.get_current();this.$C.$14(d.contacts)}},$43:function(a){if(this.$1F!==a){if(1===a||2===a)this.$2.get_presence().$9(),this.$E.$1C(),0!==this.get_presence().get_status()&&this.$70();this.$1F=a;this.onPropertyChanged("Services")}},$44:function(a,b){var c=this.$48(a);null!=c?c.$16(b):1===this.get_$32()?this.$24.enqueue([a,b]):(c=this.$4A(a),null!=c&&c.$16(b))},$45:function(a,b){var c=this.$48(a);null!=c&&c.$17(b)},
$46:function(a){this.$12.$B(a)},$47:function(a,b){return Microsoft.Live.Messenger.Conversation.$20(this,a,b)},$48:function(a){return this.$C.$A(a)},$49:function(a){return this.$C.$1C(a)},$4A:function(a){return this.$C.$D(a)},$4B:function(a){return this.$C.$14([a])},$4C:function(a){a=MSH.StringHelper.toLowerCase(a.name);return Object.keyExists(this.$D,a)?this.$D[a]:null},$4D:function(a){var b=this.$4C(a);null==b&&(b=MSH.StringHelper.toLowerCase(a.name),this.$D[b]=b=new Microsoft.Live.Messenger.Group(this,
a));return b},$4E:function(){this.$52();for(var a={},b=this.$25.get_groups(),c=0;c<b.length;c++){var d=this.$4D(b[c]);this.$F.$C(d);for(var e=ss.IEnumerator.getEnumerator(b[c].contactIds);e.moveNext();){var f=e.get_current();Object.keyExists(a,f)||(a[f]=[]);a[f].add(d)}}this.$4F(this.$25.get_persons().getEnumerator(),a,Microsoft.Live.Messenger.M$18.get_$15())},$4F:function(a,b,c){for(var d=c,e=!1;(c===Microsoft.Live.Messenger.M$18.$0||0<d)&&(e=a.moveNext());){var f=a.get_current();this.$51(f,b);d-=
f.contacts.length}e?new MSH.Timer(ss.Delegate.create(this,function(){var d=Date.get_now();this.$4F(a,b,c);d=MSH.DateTimeHelper.subtract(Date.get_now(),d);MSH.PerfCollector.get_instance().addPerfCounterValue("UserPopulateBatch-MessageHandlingTime",d)}),null,1,MSH.Timeout.infinite):this.$50()},$50:function(){this.$5B(this.get_presence().get_$6().imServiceData.get_status(),0,!0);this.$F.$14();this.$53();this.$25.add_personsChanged(ss.Delegate.create(this,this.$42));this.$26=!0;null!=this.$27&&this.$27.invoke(this,
ss.EventArgs.Empty)},$51:function(a,b){var c=a.contacts[0];String.isNullOrEmpty(c.id)?(this.$3.$27(c.nickname),this.$3.get_$19().$D(c.firstName,c.lastName)):this.$C.$9(a.contacts,b[a.id])},$52:function(){this.$5.$9();this.$6.$9();this.$7.$9();this.$A.$9();this.$8.$9();this.$9.get_$3().$9();this.$9.get_$2().$9();this.$10.$9();for(var a=ss.IEnumerator.getEnumerator(this.$F.get_$5());a.moveNext();)a.get_current().get_contacts().$9();this.$F.$9()},$53:function(){this.$5.$A();this.$6.$A();this.$7.$A();
this.$A.$A();this.$8.$A();this.$F.$A();this.$9.get_$3().$A();this.$9.get_$2().$A();this.$10.$A();for(var a=ss.IEnumerator.getEnumerator(this.$F.get_$5());a.moveNext();)a.get_current().get_contacts().$A()},$54:function(a){null!=a&&(a===this.$23&&2===this.get_presence().get_status()&&this.get_presence().set_status(1),this.$23=null)},onAlertReceived:function(a){null!=this.$33&&this.$33.invoke(this,a)},onSignInCompleted:function(a){null!=this.$37&&this.$37.invoke(this,a)},onSignOutCompleted:function(a){null!=
this.$38&&this.$38.invoke(this,a)},onSignOutEndpointCompleted:function(a){null!=this.$39&&this.$39.invoke(this,a)},onSignedOutRemotely:function(a){null!=this.$34&&this.$34.invoke(this,a)},onSignedOut:function(a){null!=this.$35&&this.$35.invoke(this,a)},onSignedIn:function(a){null!=this.$36&&this.$36.invoke(this,a)},onPropertyChanged:function(a){if("DisplayName"===a){if(this.$1E===this.get_displayName())return;this.$1E=this.get_displayName()}null!=this.$3B&&this.$3B.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))},
$55:function(a){this.$64();this.$12.$B(a)},$56:function(a){this.$63();this.$13.updateUXSettings(a);this.$59(a)},$57:function(a){this.$64();this.$13.updateServices(a,!0,this.$74())},$58:function(a,b,c){this.$64();this.$13.updateNetwork(a,b,c)},$59:function(a){this.$12.$C(a)},$5A:function(a){var b=this.get_presence().get_$6().imServiceData.get_status(),c=[a.get_info()];2===this.get_$32()&&this.$13.updateServiceData(c,null);this.$2.$16(c);2===a.get_service()&&this.$5B(a.get_status(),b,!1)},$5B:function(a,
b,c){3===a&&this.$C.$6(!0,c);3===b&&(3!==a&&0!==a)&&this.$C.$6(!1,c)},$5C:function(a){this.$1C.add(a)},$5D:function(a){if(!a.get_reloaded())this.onAlertReceived(new Microsoft.Live.Messenger.AlertReceivedEventArgs(a));this.get_alerts().$13(a)},$5E:function(a,b,c){this.$64();a.$C(b,c)},$5F:function(a,b,c,d){this.$64();for(var c=[],e=[],a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var f=a.get_current();if(!f.get_isAppearOfflineToExplicit()&&1===b||f.get_isAppearOfflineToExplicit()&&2===b){c.add(f);
for(f=ss.IEnumerator.getEnumerator(f.get_linkedContacts());f.moveNext();){var g=f.get_current();g.get_network().get_$1F()||e.add(g.get_$8())}}}if(0===e.length)this.$54(d);else{d=1===b?64:0;b=2===b?64:0;for(c=ss.IEnumerator.getEnumerator(c);c.moveNext();){e=c.get_current();for(a=0;a<e.get_linkedContacts().get_count();a++)f=e.get_linkedContacts().get_item(a),f.get_network().get_$1F()||f.$C(d,b)}}},onCreateMailbox:function(){return new Microsoft.Live.Messenger.Mailbox(this)},onCreateConversation:function(a){return new Microsoft.Live.Messenger.Conversation(this,
a)},$60:function(){var a=this.onCreateMailbox();if(null==a||a.get_$7()!==this)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$20,"mailbox");this.$17=a},$61:function(a){a=this.onCreateConversation(a);if(null==a||a.get_user()!==this)throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$21);return a},$62:function(a,b){this.get_conversations().set_$17(a);this.get_conversations().set_$18(b);try{return this.$61(a)}finally{this.get_conversations().set_$17(null)}},$63:function(){if(6===
this.get_$32())throw Microsoft.Live.Messenger.M$F.$4("User");},$64:function(){this.$63();if(2!==this.get_$32())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$30);},$65:function(){if(3!==this.$1F&&0!==this.$1F)throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$3E);},$66:function(){if(2!==this.$1F&&0!==this.$1F&&3!==this.$1F)throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$3E);},$67:function(a){if(this.$1.get_$1C().authType!==a)throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$36);
},$68:function(){this.$63();if(0!==this.get_$32()&&2!==this.get_$32())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$30);},dispose:function(){if(6!==this.get_$32()){var a=this.get_$32();this.set_$32(6);(1===a||2===a)&&this.$13.signOut(1,null,!0,new Microsoft.Live.Messenger.M$C(null,1,null));this.$21.dispose()}},$69:function(a,b){this.$13.conversationCreate(a,b.get_$E())},$6A:function(a,b,c){this.$13.conversationInviteAddress(a,b,c)},$6B:function(a,b,c){this.$13.conversationSendMessage(a,
b,c)},$6C:function(a,b){this.$13.conversationUpdateHasUnreadMessages(a,b)},$6D:function(a){this.$13.conversationClose(a)},$6E:function(a,b,c,d,e,f){if(!this.get_$2F()){null==f&&(f=new Microsoft.Live.Messenger.M$B(null,!0));var g=0;if(0!==a)g=1,this.$12.get_autoReconnectEnabled()&&3!==a?this.$21.$B(-1):this.set_$32(4),f.$1&&(1!==MC.Compatibility.get_version()&&(2!==MC.Compatibility.get_version()&&3===a)&&(g=2),f=new Microsoft.Live.Messenger.SignInCompletedEventArgs(g,b,f.$0),f.set_serverName(d),this.onSignInCompleted(f),
this.$78(g,c));else{this.$21.$9();this.$13.onSignInPopulateCompleted();if(!String.isNullOrEmpty(e)){this.$1.$11(e);for(var h=ss.IEnumerator.getEnumerator(this.$3.get_addresses());h.moveNext();){var i=h.get_current();if(i.get_network().get_isSkype()){i.get_$E().address=e;i.get_$E().id=e;this.$16=i;break}}Microsoft.Live.Messenger.Services.SkyJSHelper.skypeAudioVideoEnabled&&(e=MC.ServiceData.createEmpty(16),e.set_skypeName(this.$1.get_skypeId()),e=[e.get_info()],this.$13.updateServiceData(e,null))}this.set_$32(2);
this.$22=!0;this.onSignedIn(new Microsoft.Live.Messenger.SignedInEventArgs(d));f.$1&&(f=new Microsoft.Live.Messenger.SignInCompletedEventArgs(g,b,f.$0),f.set_serverName(d),this.onSignInCompleted(f),this.$78(g,c));for(;0<this.$24.length;)c=this.$24.dequeue(),this.$44(c[0],c[1]);c=this.$74();for(d=ss.IEnumerator.getEnumerator(this.get_networks());d.moveNext();)if(g=d.get_current(),g.get_imEnabled()&&!g.get_isWindowsLive()&&g.get_$1F())for(f=ss.IEnumerator.getEnumerator(c);f.moveNext();)if(e=f.get_current(),
g.get_id()===e){this.$58(g.get_id(),1,!1);break}}null!=this.$1.get_signinScenarioQoSObject()?(0===a?(Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Signin_ConnectMessenger",null,Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime,this.$1.get_signinScenarioQoSObject(),!1),Microsoft.Live.Messenger.Services.WebmainHelper.stopQoS(this.$1.get_signinScenarioQoSObject(),!0,null)):(Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Signin_ConnectMessenger",
b,Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime,this.$1.get_signinScenarioQoSObject(),3===a),Microsoft.Live.Messenger.Services.WebmainHelper.stopQoS(this.$1.get_signinScenarioQoSObject(),!1,b)),this.$1.set_signinScenarioQoSObject(null)):null!=this.$1.get_reconnectScenarioQoSObject()&&(0===a?(Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Reconnect_Call",null,Microsoft.Live.Messenger.Services.WebmainHelper.qoSReconnectApiStartTime,this.$1.get_reconnectScenarioQoSObject(),
!1),Microsoft.Live.Messenger.Services.WebmainHelper.stopQoS(this.$1.get_reconnectScenarioQoSObject(),!0,null)):(Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Reconnect_Call",b,Microsoft.Live.Messenger.Services.WebmainHelper.qoSReconnectApiStartTime,this.$1.get_reconnectScenarioQoSObject(),3===a),Microsoft.Live.Messenger.Services.WebmainHelper.stopQoS(this.$1.get_reconnectScenarioQoSObject(),!1,b)),this.$1.set_reconnectScenarioQoSObject(null))}},$6F:function(a,b){(a=1===(a&this.$12.get_autoReconnectEnabled()))?
this.$21.$B(b):6!==this.get_$32()&&this.set_$32(4);this.$70();this.$2.get_endpoints().$19();this.$14.$14([])},$70:function(){var a=MC.ServiceData.createEmpty(2);a.set_status(1);this.$2.$16([a.get_info()])},$71:function(){this.$C.$5(!1,null)},$72:function(a){a!==this.$20&&(this.$20=a,this.onPropertyChanged("AutoReconnectWaitTime"))},$73:function(a){a=MC.$create_IMAddressInfo(a,2,1);return null!=this.$48(a)},$74:function(){for(var a=[],b=0;b<this.get_networks().get_count();b++){var c=this.get_networks().get_item(b);
c.get_imEnabled()&&(!c.get_isWindowsLive()&&c.get_$1F())&&a.add(c.get_id())}return 0<a.length?MSH.StringHelper.listToArray(a):null},$75:function(a,b,c,d){if(null!=a){this.$E.$1A();for(a=ss.IEnumerator.getEnumerator(a.conversations);a.moveNext();){var e=a.get_current(),f=e.id;this.$0.$6(this,f,e.roster,e.hasUnreadMessages,!d);e=MSH.DateTimeHelper.minValue;null!=b&&(e=this.$77(b,f,d));null!=c&&Object.keyExists(c,f)&&c[f].timestamp.utcMilliseconds>MC.$create_DateInfo(e).utcMilliseconds&&this.$0.$7(f,
c[f],!d)}d&&this.$E.$1B()}},$76:function(){this.$E.$1B()},$77:function(a,b,c){var d=MSH.DateTimeHelper.minValue;if(null==a||0===a.length)return d;for(var e=0,f=a.length;e<f;e++){var g=a[e];if(g.conversationId===b){a=g.messages;if(null==a||0===a.length)break;e=0;for(f=a.length;e<f;e++)g=a[e],d=MSH.DateTimeHelper.fromUtcMilliseconds(g.timestamp.utcMilliseconds),this.$0.$7(b,g,!c);break}}return d},$78:function(a){this.$1.get_reloaded()||(this.$5C(MSH.$create_ReportKeyValue(17,0===a?MSH.DateTimeHelper.subtract(Date.get_now(),
this.$1D).toString():"failure")),this.$5C(MSH.$create_ReportKeyValue(16,0===a?"success":"failure")),this.$1C.report())},$79:function(a){0===a?(Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Signin_ContactsReady",null,Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime,this.$1.get_signinScenarioQoSObject(),!1),this.get_networks().$19(this.$25.get_networks(),null,null),Microsoft.Live.Messenger.M$18.$7(),this.get_networks().get_item("WL").$21(MSCo.Configuration.get_photoUrlFormat(),
MSCo.Configuration.get_profileUrlFormat(),MSCo.Configuration.get_sendMessageUrlFormat(),MSCo.Configuration.get_profileUrlFormat()),this.$4E()):Microsoft.Live.Messenger.Services.WebmainHelper.addQoSStats("WebIM_Signin_ContactsReady",MC.MessengerServiceResultCode.toString(a),Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime,this.$1.get_signinScenarioQoSObject(),!1)}};Microsoft.Live.Messenger.M$8=function(a){this.$2=-1;this.$5=a};Microsoft.Live.Messenger.M$8.prototype={$2:0,$3:null,
$4:null,$5:null,$6:0,get_$7:function(){return this.$6},dispose:function(){this.$C()},$8:function(){this.$C()},$9:function(){this.$C();this.$2=-1},$A:function(){this.$C();this.$2=-1;this.$5.set_$32(4);this.$5.onSignedOut(new Microsoft.Live.Messenger.SignedOutEventArgs(0))},$B:function(a){2===this.$5.get_$32()&&(this.$6=this.$5.get_address().get_$F().imServiceData.get_status());this.$E(a);this.$5.set_$32(5)},$C:function(){this.$D(-1);null!=this.$3&&(this.$3.dispose(),this.$3=null)},$D:function(a){this.$5.$72(a)},
$E:function(a){null==this.$3&&(this.$3=new MSH.Timer(ss.Delegate.create(this,this.$F),null,MSH.Timeout.infinite,MSH.Timeout.infinite));this.$2=0<=a?a:-1===this.$2?0<=this.$5.get_settings().get_autoReconnectInitialWaitTime()?Math.min(this.$5.get_settings().get_autoReconnectInitialWaitTime(),120):MSH.MathHelper.random(2,60):Math.min(this.$2+30,120);this.$4=MSH.DateTimeHelper.addMilliseconds(Date.get_now(),1E3*this.$2);this.$D(this.$2);this.$5.set_$32(5);this.$3.change(1E3,1E3)},$F:function(){var a=
Math.round(MSH.DateTimeHelper.subtract(this.$4,Date.get_now())/1E3);0<a?this.$D(a):(this.$3.change(MSH.Timeout.infinite,MSH.Timeout.infinite),this.$D(-1),this.$5.$3C(null,!1))}};Microsoft.Live.Messenger.M$D=function(a){this.$2=a};Microsoft.Live.Messenger.M$D.prototype={$0:null,$1:null,$2:null,$3:null,get_$4:function(){return this.$3},set_$4:function(a){return this.$3=a},onInitializationCompleted:function(a){this.$2.$18(a)},onServicesChanged:function(a){this.$3.$43(a)},onAlertNotificationReceived:function(a){var b=
new Microsoft.Live.Messenger.Alert(a.actionUrl,a.subscrUrl,a.iconUrl,a.timestamp,a.message);a.reloaded&&b.$6(!0);this.$3.$5D(b)},onABChangeNotificationReceived:function(a){this.$3.get_$2D().notifyAddressBookChange(a)},onUpdateNetworkCompleted:function(a,b,c,d){var e=this.$3.get_networks().get_item(b);null!=e&&e.$23(a,c);d&&0===a&&(a=new XMLHttpRequest,a.open("POST",String.format("{0}//{1}/Handlers/PeopleApi/{2}",window.location.protocol,window.location.host,2===c?"HideNetwork.mvc":"UnHideNetwork.mvc"),
!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.send(String.format("canary={0}&sourceId={1}",encodeURIComponent($Config.ContactCache.canary),b)))},onNetworkStatusChanged:function(a,b){var c=this.$3.get_networks().get_item(a);null!=c&&c.$22(b)},onSignedIn:function(a,b,c,d,e,f){this.$3.$6E(a,b,c,d,e,f)},onPersistedConversationsLoaded:function(a,b,c,d){this.$3.$75(a,b,c,d)},$5:function(){this.$9();this.$A()},
onSignedOut:function(a,b,c){var d=0;0!==a&&(d=1);var e=c.$1,a=c.$0;1===(b&1)&&this.$3.$6F(!1,0);c=new Microsoft.Live.Messenger.SignOutCompletedEventArgs(d,e,a,c.$2);if(!this.$3.get_$2F()){if(null!=a)this.$3.onSignOutEndpointCompleted(c);else this.$3.onSignOutCompleted(c);if(1===(b&1)){if(5!==this.$3.get_$32())this.$3.onSignedOut(new Microsoft.Live.Messenger.SignedOutEventArgs(0));this.$3.$71();this.$3.get_networks().$1E()}}},onInstancesChanged:function(a){!this.$3.get_$2F()&&4!==this.$3.get_$32()&&
this.$3.get_instances().$14(a)},onUserServicesUpdated:function(){},onUserSettingsUpdated:function(){},onUserUXSettingsUpdated:function(){},onUserServiceDataUpdated:function(){},onMailNotification:function(a){this.$3.get_mailbox().$8(a)},onPendingContacts:function(a){for(var b=[],a=ss.IEnumerator.getEnumerator(a);a.moveNext();){var c=a.get_current(),d=this.$3.$48(c.addresses[0]);null!=d?b.add(d):(d=this.$3.$4A(c.addresses[0]),null==d.get_linkedContact().get_id()&&!String.isNullOrEmpty(c.id)&&d.get_linkedContact().set_id(c.id),
b.add(d),this.$3.get_pendingContacts().$14(d))}for(a=ss.IEnumerator.getEnumerator(this.$3.get_pendingContacts());a.moveNext();)c=a.get_current(),b.contains(c.get_imAddress())||this.$3.get_pendingContacts().$D(c)},onServiceDataChanged:function(a,b){this.$3.$44(a,b)},onServiceDataDeleted:function(a,b){this.$3.$45(a,b)},onSettingsChanged:function(a){this.$3.$46(a)},onSignedOutRemotely:function(a,b){var c=!1,d=1;switch(a){case 2:d=2;c=!0;break;case 3:d=3;c=!0;break;case 4:d=4;break;case 1:d=1;break;case 6:case 5:c=
!0;d=5;break;default:return}this.$3.$6F(c,b);this.$3.onSignedOutRemotely(new Microsoft.Live.Messenger.SignedOutRemotelyEventArgs);this.$3.onSignedOut(new Microsoft.Live.Messenger.SignedOutEventArgs(d));this.$3.$71()},onNotifyWebSignInPendingEventsCompleted:function(){this.$5();this.$3.$76()},$6:function(a,b,c,d,e){for(var f=Array(c.length-1),g=0,h=0;h<c.length;h++){var i=a.$4A(c[h]);i.get_isUser()||(f[g++]=i)}e?this.$B(a,b,d,f):this.$8(a,b,d,f)},onConversationCreated:function(a,b){var c=2!==this.$3.get_$32();
this.$6(this.$3,a,b,!1,c)},onConversationInviteAddressCompleted:function(a,b,c,d){var e=0;0!==b&&(e=1);this.$3.get_conversations().$1D(a,e,c,d)},onConversationAddressJoined:function(a,b){this.$3.get_conversations().$1E(a,b)},onConversationAddressLeft:function(a,b){this.$3.get_conversations().$1F(a,b)},onConversationMessageReceived:function(a,b){var c=2!==this.$3.get_$32();this.$7(a,b,c)},onConversationHasUnreadMessagesUpdated:function(a,b){this.$3.get_conversations().$21(a,b)},onConversationClosed:function(a){this.$3.get_conversations().$20(a)},
$7:function(a,b,c){c?(c={},c.id=a,c.messageInfo=b,null==this.$1&&(this.$1=[]),this.$1.enqueue(c)):255===b.type?this.$3.get_conversations().$23(a,b.sender):this.$3.get_conversations().$22(a,b)},onConversationSendMessageFailed:function(a,b,c,d){var e=1;switch(b){case 5:e=2;break;case 7:e=4;break;case 6:e=3}this.$3.get_conversations().$24(a,e,c,d)},onConversationUpdatedId:function(a,b){this.$3.get_conversations().$25(a,b)},onLogRequestReceived:function(a,b){this.$3.$3D(a,b)},$8:function(a,b,c,d){a.$47(b,
d).$1E(c)},$9:function(){if(null!=this.$0)for(;0<this.$0.length;){var a=this.$0.dequeue();this.$8(this.$3,a.id.toString(),a.hasUnreadMessages,a.addresses)}},$A:function(){if(null!=this.$1)for(;0<this.$1.length;){var a=this.$1.dequeue();this.$7(a.id.toString(),a.messageInfo,!1)}},$B:function(a,b,c,d){null==this.$0&&(this.$0=[]);a={};a.id=b;a.addresses=d;a.hasUnreadMessages=c;this.$0.enqueue(a)}};Microsoft.Live.Messenger.M$13=function(){this.$0={}};Microsoft.Live.Messenger.M$13.prototype={$1:0,$2:function(a){this.$1++;
var b=this.$1.toString();ss.isNullOrUndefined(a)&&(a=null);this.$0[b]=a;return b},$3:function(a){if(Object.keyExists(this.$0,a)){var b=this.$0[a];delete this.$0[a];return b}return null}};Microsoft.Live.Messenger.M$15=function(a,b){this.$2=b;if(null!=Microsoft.Live.Messenger.M$15.$0)Microsoft.Live.Messenger.M$15.$5=Microsoft.Live.Messenger.M$15.$0;else if(String.isNullOrEmpty(a)&&(a=null),this.$C(a),null==Microsoft.Live.Messenger.M$15.$5){var c=MSH.ChannelHelper.getPreloadedIframe("messenger_iframe");
Microsoft.Live.Messenger.M$15.$5=MSH.ChannelHelper.createParentChannel("Messenger.html",c,a,"MessengerChannel");c=Microsoft.Live.Messenger.M$15.$7(a,1).get_$9();MSH.LogCollector.get_instance().registerMessengerServicesChannel(c);MSH.PerfCollector.get_instance().registerRemoteServiceChannel(c)}this.$8(b)};Microsoft.Live.Messenger.M$15.$7=function(a,b){return MSH.ChannelHelper.canCreateChannel(a)?new Microsoft.Live.Messenger.M$15(a,b):null};Microsoft.Live.Messenger.M$15.prototype={$1:null,$2:0,$3:!1,
$8:function(a){null==Microsoft.Live.Messenger.M$15.$6&&(Microsoft.Live.Messenger.M$15.$6=new MC.ChannelEndpointMultiplexer(Microsoft.Live.Messenger.M$15.$5));this.$1=Microsoft.Live.Messenger.M$15.$6.createNewChannelEndpoint(a)},get_$9:function(){return this.$1},get_$A:function(){return this.$1.get_id()},dispose:function(){this.$3||(this.$3=!0,this.$1.dispose())},get_$B:function(){return window.location.hostname.toLowerCase()},$C:function(a){if(!String.isNullOrEmpty(a)){var a=a.toLowerCase(),b=a.startsWith("http://")?
"http://":a.startsWith("https://")?"https://":null;if(null!=b&&(a=a.substr(b.length),b=a.indexOf("/"),0<=b)){var c=document.domain.toLowerCase(),a=a.substring(0,b),d=a.indexOf(":");0<d&&d<b&&(a=a.substring(0,d));if(!a.endsWith(c))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$34,"channelUrl");}}}};Microsoft.Live.Messenger.AddressChangingEventArgs=function(a,b){Microsoft.Live.Messenger.AddressChangingEventArgs.initializeBase(this);this.$1_0=a;this.$1_1=b};Microsoft.Live.Messenger.AddressChangingEventArgs.prototype=
{$1_0:null,$1_1:null,get_oldAddress:function(){return this.$1_0},get_newAddress:function(){return this.$1_1}};Microsoft.Live.Messenger.AlertReceivedEventArgs=function(a){Microsoft.Live.Messenger.AlertReceivedEventArgs.initializeBase(this);this.$1_0=a};Microsoft.Live.Messenger.AlertReceivedEventArgs.prototype={$1_0:null,get_alert:function(){return this.$1_0}};Microsoft.Live.Messenger.InviteAddressCompletedEventArgs=function(a,b,c){Microsoft.Live.Messenger.InviteAddressCompletedEventArgs.initializeBase(this);
if(null==b)throw Microsoft.Live.Messenger.M$F.$0("address");this.$1_0=a;this.$1_1=b;this.$1_2=c};Microsoft.Live.Messenger.InviteAddressCompletedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_resultCode:function(){return this.$1_0},get_imAddress:function(){return this.$1_1},get_userState:function(){return this.$1_2}};Microsoft.Live.Messenger.InviteContactCompletedEventArgs=function(a,b,c){Microsoft.Live.Messenger.InviteContactCompletedEventArgs.initializeBase(this);if(null==b)throw Microsoft.Live.Messenger.M$F.$0("contact");
this.$1_0=a;this.$1_1=b;this.$1_2=c};Microsoft.Live.Messenger.InviteContactCompletedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_resultCode:function(){return this.$1_0},get_contact:function(){return this.$1_1},get_userState:function(){return this.$1_2}};Microsoft.Live.Messenger.MessageReceivedEventArgs=function(a){Microsoft.Live.Messenger.MessageReceivedEventArgs.initializeBase(this);this.$1_0=a};Microsoft.Live.Messenger.MessageReceivedEventArgs.prototype={$1_0:null,get_message:function(){return this.$1_0}};
Microsoft.Live.Messenger.SendMessageFailedEventArgs=function(a,b,c){Microsoft.Live.Messenger.SendMessageFailedEventArgs.initializeBase(this);this.$1_0=a;this.$1_1=b;this.$1_2=c};Microsoft.Live.Messenger.SendMessageFailedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_resultCode:function(){return this.$1_0},get_message:function(){return this.$1_1},get_userState:function(){return this.$1_2}};Microsoft.Live.Messenger.SignedOutEventArgs=function(a){Microsoft.Live.Messenger.SignedOutEventArgs.initializeBase(this);
this.$1_0=a};Microsoft.Live.Messenger.SignedOutEventArgs.prototype={$1_0:0,get_reason:function(){return this.$1_0}};Microsoft.Live.Messenger.SignedOutRemotelyEventArgs=function(){Microsoft.Live.Messenger.SignedOutRemotelyEventArgs.initializeBase(this)};Microsoft.Live.Messenger.SignInCompletedEventArgs=function(a,b,c){Microsoft.Live.Messenger.SignInCompletedEventArgs.initializeBase(this);this.$1_0=a;this.$1_2=b;this.$1_1=c};Microsoft.Live.Messenger.SignInCompletedEventArgs.prototype={$1_0:0,$1_1:null,
$1_2:null,$1_3:null,get_resultCode:function(){return this.$1_0},get_error:function(){return this.$1_2},get_userState:function(){return this.$1_1},get_serverName:function(){return this.$1_3},set_serverName:function(a){return this.$1_3=a}};Microsoft.Live.Messenger.SignOutCompletedEventArgs=function(a,b,c,d){Microsoft.Live.Messenger.SignOutCompletedEventArgs.initializeBase(this);this.$1_1=a;this.$1_0=b;this.$1_2=c;this.$1_3=d};Microsoft.Live.Messenger.SignOutCompletedEventArgs.prototype={$1_0:0,$1_1:0,
$1_2:null,$1_3:null,get_endpoint:function(){return this.$1_2},get_locations:function(){return this.$1_0},get_resultCode:function(){return this.$1_1},get_userState:function(){return this.$1_3}};Microsoft.Live.Messenger.M$F=function(){};Microsoft.Live.Messenger.M$F.$0=function(a){return Error(String.format(Microsoft.Live.Messenger.M$16.$9,a))};Microsoft.Live.Messenger.M$F.$1=function(a,b){return null==b?Microsoft.Live.Messenger.M$F.$0(a):Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$7,
a)};Microsoft.Live.Messenger.M$F.$2=function(a,b){return Error(String.format(Microsoft.Live.Messenger.M$16.$8,a,b))};Microsoft.Live.Messenger.M$F.$3=function(a){return Error(String.format(Microsoft.Live.Messenger.M$16.$1A,a))};Microsoft.Live.Messenger.M$F.$4=function(a){return Error(String.format(Microsoft.Live.Messenger.M$16.$1E,a))};Microsoft.Live.Messenger.M$F.$5=function(){return Error(Microsoft.Live.Messenger.M$16.$A)};Microsoft.Live.Messenger.ReportingHelper=function(){};Microsoft.Live.Messenger.ReportingHelper.$0=
function(){var a=MSH.ReportFactory.createReport(1,4);a.add(MSH.$create_ReportKeyValue(18,null!=__MSLiveCore__.Loader.get_scriptsLoadTime()?__MSLiveCore__.Loader.get_scriptsLoadTime().toString():"failure"));a.report()};Microsoft.Live.Messenger.M$E=function(){};Microsoft.Live.Messenger.M$E.$0=function(a){return MLC.JSON.deserialize(a)};Microsoft.Live.Messenger.M$E.$1=function(a){return MLC.JSON.serialize(a)};Microsoft.Live.Messenger.M$10=function(a,b){this.$2=b;this.$0=Microsoft.Live.Messenger.M$15.$7(a,
b)};Microsoft.Live.Messenger.M$10.prototype={$0:null,$1:null,$2:0,get_$3:function(){return this.$0.get_$9()},$4:function(a){this.$1=a;null==this.$0?MSH.Scheduler.defer(ss.Delegate.create(this,function(){this.$1.$17()})):this.$1.$1F(Microsoft.Live.Messenger.Services.UserServiceFactory.create(this.$1,this.$1.get_$16()));this.$1.get_$1E().initialize(this.$1.$1D())},dispose:function(){null!=this.$0&&this.$0.dispose()}};Microsoft.Live.Messenger.RpsAuthIdentity=function(a,b,c,d){Microsoft.Live.Messenger.RpsAuthIdentity.initializeBase(this);
this.$13(!0);this.$F(a);this.$10(b);this.set_$1C(MC.$create_AuthenticationInfo(1,""));this.$26=new Microsoft.Live.Messenger.M$10(c,4);MSH.Scheduler.defer(ss.Delegate.create(this,function(){this.$26.$4(this,d||null)}));Microsoft.Live.Messenger.Services.WebmainHelper.isQoS()&&(this.set_signinScenarioQoSObject(Microsoft.Live.Messenger.Services.WebmainHelper.startQoS("WebIM_Signin")),Microsoft.Live.Messenger.Services.WebmainHelper.qoSResetTime("WebIM_Signin"));Microsoft.Live.Messenger.Services.WebmainHelper.isConfig()&&
1!==$Config.WebIM.si?this.$19():(a=Microsoft.Live.Messenger.RpsAuthIdentity.$27("uicTicket"),String.isNullOrEmpty(a)?null!=Microsoft.Live.Messenger.Services.SkyJSHelper.getInstance()&&null!=Microsoft.Live.Messenger.Services.SkyJSHelper.getInstance().Outlook&&this.$12():this.$1A(a))};Microsoft.Live.Messenger.RpsAuthIdentity.$27=function(a){var b=window.location.href.indexOf("?");if(0>b)return"";for(var b=window.location.href.substr(b+1).split("&"),c=ss.IEnumerator.getEnumerator(b);c.moveNext();)if(b=
c.get_current(),b.toLowerCase().startsWith(a.toLowerCase()))return a=b.indexOf("="),decodeURIComponent(b.substr(a+1));return""};Microsoft.Live.Messenger.RpsAuthIdentity.prototype={$25:null,$26:null,get_experienceId:function(){return this.$25},set_experienceId:function(a){this.$25!==a&&(this.$25=a,this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs("ExperienceId")));return a},get_uicTicket:function(){return this.get_$1C().uicTicket},set_uicTicket:function(a){this.$1A(a);return a},
get_$E:function(){return this.$26},$1D:function(){var a=Microsoft.Live.Messenger.RpsAuthIdentity.callBaseMethod(this,"$1D");a.experienceId=this.$25;return a},dispose:function(){this.get_$24()||(this.$26.dispose(),Microsoft.Live.Messenger.RpsAuthIdentity.callBaseMethod(this,"dispose"))}};Microsoft.Live.Messenger.EmailReceivedEventArgs=function(a,b,c,d,e){Microsoft.Live.Messenger.EmailReceivedEventArgs.initializeBase(this);this.$1_0=a;this.$1_1=b;this.$1_2=c;this.$1_3=d;this.$1_4=e};Microsoft.Live.Messenger.EmailReceivedEventArgs.prototype=
{$1_0:null,$1_1:null,$1_2:null,$1_3:null,$1_4:0,get_subject:function(){return this.$1_0},get_sender:function(){return this.$1_1},get_senderAddress:function(){return this.$1_2},get_messageUrl:function(){return this.$1_3},get_folder:function(){return this.$1_4}};Microsoft.Live.Messenger.Mailbox=function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("user");this.$0=a};Microsoft.Live.Messenger.Mailbox.prototype={$0:null,$1:0,$2:0,$3:0,$4:0,add_emailReceived:function(a){this.$5=ss.Delegate.combine(this.$5,
a)},remove_emailReceived:function(a){this.$5=ss.Delegate.remove(this.$5,a)},$5:null,add_propertyChanged:function(a){this.$6=ss.Delegate.combine(this.$6,a)},remove_propertyChanged:function(a){this.$6=ss.Delegate.remove(this.$6,a)},$6:null,get_inboxInitialCount:function(){return this.$1},set_inboxInitialCount:function(a){a!==this.$1&&(this.$1=a,this.$9("InboxInitialCount"));return a},get_inboxUnreadCount:function(){return this.$2},set_inboxUnreadCount:function(a){a!==this.$2&&(this.$2=a,this.$9("InboxUnreadCount"));
return a},get_otherInitialCount:function(){return this.$3},set_otherInitialCount:function(a){a!==this.$3&&(this.$3=a,this.$9("OtherInitialCount"));return a},get_otherUnreadCount:function(){return this.$4},set_otherUnreadCount:function(a){0>a&&(a=0);a!==this.$4&&(this.$4=a,this.$9("OtherUnreadCount"));return a},get_$7:function(){return this.$0},$8:function(a){switch(a.type){case 0:a=a.notification;this.set_inboxInitialCount(a.inboxTotal);this.set_inboxUnreadCount(a.inboxUnread);this.set_otherInitialCount(a.foldersTotal);
this.set_otherUnreadCount(a.foldersUnread);break;case 1:a=a.notification;if(6!==a.folder)this.onEmailReceived(new Microsoft.Live.Messenger.EmailReceivedEventArgs(a.subject,a.from,a.fromAddress,new Microsoft.Live.Messenger.Uri(String.format(MSCo.Configuration.get_messageUrlFormat(),a.messageUrl)),a.folder));break;case 2:a=a.notification,0===a.source?(this.set_inboxUnreadCount(this.get_inboxUnreadCount()-a.delta),0!==a.destination&&6!==a.destination&&this.set_otherUnreadCount(this.get_otherUnreadCount()+
a.delta)):6!==a.source?(this.set_otherUnreadCount(this.get_otherUnreadCount()-a.delta),0===a.destination&&this.set_inboxUnreadCount(this.get_inboxUnreadCount()+a.delta)):0===a.destination?this.set_inboxUnreadCount(this.get_inboxUnreadCount()+a.delta):6!==a.destination&&this.set_otherUnreadCount(this.get_otherUnreadCount()+a.delta)}},onEmailReceived:function(a){null!=this.$5&&this.$5.invoke(this,a)},onPropertyChanged:function(a){null!=this.$6&&this.$6.invoke(this,a)},$9:function(a){this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs(a))}};
Microsoft.Live.Messenger.Game=function(a,b,c){Microsoft.Live.Messenger.Game.initializeBase(this,[2]);if(null==a)throw Microsoft.Live.Messenger.M$F.$0("title");var d=Array(3);d[0]=c||String.Empty;d[1]=a;d[2]=b||String.Empty;a=this.$18(d);this.set_$9(d);this.set_$8(a);this.$C()};Microsoft.Live.Messenger.Game.prototype={get_platform:function(){return this.get_$9()[0]},get_title:function(){return this.get_$9()[1]},get_username:function(){return this.get_$9()[2]},$18:function(a){return String.isNullOrEmpty(a[0])?
String.isNullOrEmpty(a[2])?"{1}":"{1} ({2})":"{0}: {1} ({2})"}};Microsoft.Live.Messenger.Media=function(a){this.$6=String.Empty;this.$3=a};Microsoft.Live.Messenger.Media.$B=function(a){if(String.isNullOrEmpty(a))return null;a=MSH.StringHelper.splitString(a,"\\0");if(4<=a.length){if("1"!==a[2])return null;var b=null;switch(MSH.StringHelper.toLowerCase(a[1])){case "game":b=new Microsoft.Live.Messenger.Game(String.Empty);break;case "music":b=new Microsoft.Live.Messenger.Music(String.Empty,String.Empty);
break;case "video":b=new Microsoft.Live.Messenger.Video(String.Empty)}if(null!=b){for(var c=Array(a.length-4),d=0;d<c.length;d++)c[d]=a[d+4];b.$6=Microsoft.Live.Messenger.Media.$F(a[0]);b.$4=a[3];b.$5=c;return b}}return null};Microsoft.Live.Messenger.Media.$F=function(a){var b=MSH.StringHelper.toLowerCase(a);return Object.keyExists(Microsoft.Live.Messenger.Media.$2,b)?Microsoft.Live.Messenger.Media.$2[b]:a};Microsoft.Live.Messenger.Media.$10=function(a){switch(a){case 2:return"Game";case 0:return"Music";
case 1:return"Video"}return String.Empty};Microsoft.Live.Messenger.Media.$11=function(a){return a.replaceAll("\\0",String.Empty)};Microsoft.Live.Messenger.Media.prototype={$3:0,$4:null,$5:null,$7:!1,get_application:function(){return this.$6},get_type:function(){return this.$3},get_text:function(){return this.$4.replace(Microsoft.Live.Messenger.Media.$1,ss.Delegate.create(this,function(a,b){var c=parseInt(b);return c<this.$5.length?this.$5[c]:String.Empty}))},get_$8:function(){return this.$4},set_$8:function(a){return this.$4=
a},get_$9:function(){return this.$5},set_$9:function(a){return this.$5=a},get_$A:function(){return this.$7},set_$A:function(a){return this.$7=a},createTextElement:function(){var a=document.createElement("span");a.innerText=this.get_text();return a},$C:function(){var a=null;String.isNullOrEmpty(this.$6)&&(a=MSH.StringHelper.fromChar("x",Microsoft.Live.Messenger.M$18.get_$10()));a=this.$E(a);if(250<MSH.StringHelper.getByteCount(a))throw Microsoft.Live.Messenger.M$F.$3(String.format(Microsoft.Live.Messenger.M$16.$3F,
250));},$D:function(){return this.$E(String.Empty)},$E:function(a){var b=new ss.StringBuilder;b.append(Microsoft.Live.Messenger.Media.$11(this.$6||a));b.append("\\0");b.append(Microsoft.Live.Messenger.Media.$10(this.$3));b.append("\\01\\0");b.append(Microsoft.Live.Messenger.Media.$11(this.$4));b.append("\\0");for(a=0;a<this.$5.length;a++)b.append(Microsoft.Live.Messenger.Media.$11(this.$5[a])),b.append("\\0");return b.toString()}};Microsoft.Live.Messenger.Music=function(a,b){Microsoft.Live.Messenger.Music.initializeBase(this,
[0]);if(null==a)throw Microsoft.Live.Messenger.M$F.$0("artist");if(null==b)throw Microsoft.Live.Messenger.M$F.$0("title");var c=Array(2);c[0]=a;c[1]=b;this.set_$8("{0} - {1}");this.set_$9(c);this.$C()};Microsoft.Live.Messenger.Music.prototype={get_artist:function(){return this.get_$9()[0]},get_title:function(){return this.get_$9()[1]}};Microsoft.Live.Messenger.Video=function(a){Microsoft.Live.Messenger.Video.initializeBase(this,[1]);if(null==a)throw Microsoft.Live.Messenger.M$F.$0("title");a=[a];
this.set_$8("{0}");this.set_$9(a);this.$C()};Microsoft.Live.Messenger.Video.prototype={get_title:function(){return this.get_$9()[0]}};Microsoft.Live.Messenger.Message=function(a){this.$0=a;this.$2=Date.get_now();this.$6=!1};Microsoft.Live.Messenger.Message.$D=function(a,b,c,d){var e=null;switch(c.type){case 1:a=c.info;e=new Microsoft.Live.Messenger.TextMessage(a.text,Microsoft.Live.Messenger.TextMessageFormat.$6(a.format));e.set_$12(a.safeUrl);break;case 5:a=c.info;e=new Microsoft.Live.Messenger.AudioMetaMessage(a.body);
e.$11(Microsoft.Live.Messenger.Message.$E(b,a.senderEndpointId));if(null==e.get_senderEndpoint())return null;break;case 4:a=c.info;e=new Microsoft.Live.Messenger.AudioTunnelMessage(a.sipBody);e.$11(Microsoft.Live.Messenger.Message.$E(b,a.senderEndpointId));if(null==e.get_senderEndpoint())return null;break;case 2:e=new Microsoft.Live.Messenger.NudgeMessage;break;case 3:if(null!=a.get_messageFactory()){var f=c.info;a.get_messageFactory().isRegistered(f.id)&&(e=a.get_messageFactory().deserialize(b,f.id,
f.content))}break;default:return null}e.$1=b;e.$2=MSH.DateTimeHelper.fromUtcMilliseconds(c.timestamp.utcMilliseconds);e.$3=c.isOfflineMessage;e.$4=c.isHistoryMessage;e.$5=c.isLastHistoryMessage;e.id=c.id;e.$8=d.get_network().get_id();e.$7=d.get_network().get_name();e.$9=d.get_id();return e};Microsoft.Live.Messenger.Message.$E=function(a,b){for(var c=ss.IEnumerator.getEnumerator(a.get_endpoints());c.moveNext();){var d=c.get_current();if(d.get_id().toString()===b)return d}return null};Microsoft.Live.Messenger.Message.prototype=
{$0:0,$1:null,$2:null,$3:!1,$4:!1,$5:!1,$6:!1,$7:null,id:null,$8:null,$9:null,get_sender:function(){return this.$1},set_sender:function(a){return this.$1=a},get_type:function(){return this.$0},get_timestamp:function(){return this.$2},set_timestamp:function(a){return this.$2=a},get_reloaded:function(){return this.$4?!0:this.$6},get_isOfflineMessage:function(){return this.$3},get_isHistoryMessage:function(){return this.$4},get_isLastHistoryMessage:function(){return this.$5},get_networkName:function(){return this.$7},
set_networkName:function(a){return this.$7=a},get_receivedMessageId:function(){return this.id},set_receivedMessageId:function(a){return this.id=a},get_networkId:function(){return this.$8},set_networkId:function(a){return this.$8=a},get_conversationId:function(){return this.$9},set_conversationId:function(a){return this.$9=a},get_$A:function(){return!1},$B:function(a){this.$6=a},$C:function(a){this.$1=a;a=MC.$create_MessageInfo(this.$0,null);a.sender=this.$1.get_$E();a.timestamp=MC.$create_DateInfo(this.$2);
a.isOfflineMessage=this.$3;a.isHistoryMessage=this.$4;return a}};Microsoft.Live.Messenger.NudgeMessage=function(){Microsoft.Live.Messenger.NudgeMessage.initializeBase(this,[2])};Microsoft.Live.Messenger.TextMessage=function(a,b){Microsoft.Live.Messenger.TextMessage.initializeBase(this,[1]);if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("text");null==b&&(b=Microsoft.Live.Messenger.TextMessageFormat.get_defaultFormat());this.$F=a;this.$10=b};Microsoft.Live.Messenger.TextMessage.isValid=
function(a,b){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("conversation");return a.get_closed()||null!=b&&0===b.length?!1:0<=Microsoft.Live.Messenger.TextMessage.getRemainingCharCount(a,b)};Microsoft.Live.Messenger.TextMessage.getRemainingCharCount=function(a,b){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("conversation");if(null==b)throw Microsoft.Live.Messenger.M$F.$0("textMessage");var c=0;if(!a.get_closed())if(a.get_$E())c=400;else for(var d=ss.IEnumerator.getEnumerator(a.get_roster());d.moveNext();){var e=
d.get_current();if(!e.get_isUser())switch(e.get_type()){case 1:case 8:c=2E3;break;case 2:case 32:c=400;break;case 13:c=1E3;break;case 4:c=140;break;case 16:c=600}}return c-b.length};Microsoft.Live.Messenger.TextMessage.prototype={$F:null,$10:null,$11:null,get_format:function(){return this.$10},get_text:function(){return this.$F},createTextElement:function(a,b){var c=Microsoft.Live.Messenger.MessengerUtility.$0(this.$F,this.$11,b);a||this.$10.applyToElement(c);return c},createTextElementNoUrls:function(a,
b){var c=Microsoft.Live.Messenger.MessengerUtility.replaceEmoticons(this.$F,b);a||this.$10.applyToElement(c);return c},get_$A:function(){return!0},get_$12:function(){return this.$11},set_$12:function(a){return this.$11=a},$C:function(a,b){if(!b.isTextMessageValid(this.get_text()))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$2D,"message");this.set_sender(a);var c=MC.$create_TextMessageInfo(this.$F,this.$10.$5()),c=MC.$create_MessageInfo(1,c);c.sender=a.get_$E();c.isOfflineMessage=
this.get_isOfflineMessage();return c}};Microsoft.Live.Messenger.TextMessageColor=function(){};Microsoft.Live.Messenger.TextMessageColor.fromRgb=function(a,b,c){if(0>a||255<a)throw Microsoft.Live.Messenger.M$F.$5("r");if(0>b||255<b)throw Microsoft.Live.Messenger.M$F.$5("g");if(0>c||255<c)throw Microsoft.Live.Messenger.M$F.$5("b");var d=new Microsoft.Live.Messenger.TextMessageColor;d.r=a;d.g=b;d.b=c;return d};Microsoft.Live.Messenger.TextMessageColor.prototype={r:0,g:0,b:0,get_r:function(){return this.r},
get_g:function(){return this.g},get_b:function(){return this.b}};Microsoft.Live.Messenger.TextMessageFormat=function(a,b,c,d){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("fontColor");if(String.isNullOrEmpty(b))throw Microsoft.Live.Messenger.M$F.$0("fontFamily");this.$1=a;this.$2=b;this.$3=c;this.$4=d||0};Microsoft.Live.Messenger.TextMessageFormat.get_defaultFormat=function(){return Microsoft.Live.Messenger.TextMessageFormat.$0};Microsoft.Live.Messenger.TextMessageFormat.$6=function(a){return null==
a?Microsoft.Live.Messenger.TextMessageFormat.get_defaultFormat():new Microsoft.Live.Messenger.TextMessageFormat(Microsoft.Live.Messenger.TextMessageColor.fromRgb(a.fontColor&255,a.fontColor>>>8&255,a.fontColor>>>16&255),!String.isNullOrEmpty(a.fontFamily)?a.fontFamily:Microsoft.Live.Messenger.TextMessageFormat.get_defaultFormat().get_fontFamily(),a.fontStyle,a.rightToLeft?1:0)};Microsoft.Live.Messenger.TextMessageFormat.prototype={$1:null,$2:null,$3:0,$4:0,get_fontColor:function(){return this.$1},
get_fontFamily:function(){return this.$2},get_fontStyle:function(){return this.$3},get_flowDirection:function(){return this.$4},applyToElement:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("element");a=a.style;if(0!==this.get_fontStyle()&&(1===(this.get_fontStyle()&1)&&(a.fontWeight="bold"),2===(this.get_fontStyle()&2)&&(a.fontStyle="italic"),8===(this.get_fontStyle()&8)&&(a.textDecoration="underline"),4===(this.get_fontStyle()&4)))a.textDecoration+=" line-through";a.fontFamily="'"+
this.get_fontFamily()+"'";a.color="rgb("+this.get_fontColor().get_r()+","+this.get_fontColor().get_g()+","+this.get_fontColor().get_b()+")";a.direction=1===this.get_flowDirection()?"rtl":"ltr";try{a.whiteSpace="pre-wrap"}catch(b){}},$5:function(){return MC.$create_TextMessageFormatInfo(this.$1.get_b()<<16|this.$1.get_g()<<8|this.$1.get_r(),this.$2,this.$3,1===this.$4)}};Microsoft.Live.Messenger.PubSubChannelEndpoint=function(){};Microsoft.Live.Messenger.PubSubChannelEndpoint.createEndpoint=function(a){return Microsoft.Live.Messenger.M$15.$7(a,
6).get_$9()};Microsoft.Live.Messenger.M$12=function(){};Microsoft.Live.Messenger.M$12.get_$0=function(){return __MSLiveCore__.Loader.get_settings().messenger.getResourceUrl("Messenger.html").startsWith("https:")?"https:":"http:"};Microsoft.Live.Messenger.M$12.get_$1=function(){return window.location.hostname};Microsoft.Live.Messenger.M$12.$2=function(){return __MSLiveCore__.Loader.get_settings().messenger.version};Microsoft.Live.Messenger.M$12.get_$3=function(){switch(__MSLiveCore__.Loader.get_settings().environment){case "production":case "dogfood":case "dogfood-int":case "dogfood-corep5":return!0;
default:return!1}};Microsoft.Live.Messenger.M$12.get_$4=function(){return __MSLiveCore__.Loader.get_settings().environment};Microsoft.Live.Messenger.M$12.get_$5=function(){return __MSLiveCore__.Loader.get_settings().market};Type.registerNamespace("Microsoft.Live.Messenger.Applications");Microsoft.Live.Messenger.Applications.Application=function(){};Type.registerNamespace("Microsoft.Live.Messenger.Services.UnitTests");Microsoft.Live.Messenger.Services.UnitTests.MockContactsReader=function(){Microsoft.Live.Messenger.Services.UnitTests.MockContactsReader.initializeBase(this);
this.$4=[];this.$5=[];this.$6=[]};Microsoft.Live.Messenger.Services.UnitTests.MockContactsReader.prototype={$4:null,$5:null,$6:null,get_groups:function(){return this.$4},get_networks:function(){return this.$5},get_persons:function(){return this.$6},setPersons:function(a){this.$6=a},setNetworks:function(a){this.$5=a},setGroups:function(a){this.$4=a},raiseInitializationCallback:function(a){Microsoft.Live.Messenger.Services.UnitTests.MockContactsReader.callBaseMethod(this,"onInitialized",[a])},initialize:function(a){Microsoft.Live.Messenger.Services.UnitTests.MockContactsReader.callBaseMethod(this,
"initialize",[a])},notifyAddressBookChange:function(){}};Type.registerNamespace("Microsoft.Live.Messenger.Messaging");Microsoft.Live.Messenger.Messaging.ApplicationMessage=function(){Microsoft.Live.Messenger.Messaging.ApplicationMessage.initializeBase(this,[3])};Microsoft.Live.Messenger.Messaging.ApplicationMessage.prototype={createTextElement:function(){return null},$C:function(a,b){null==b.get_user().get_messageFactory()&&Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$1);if(MC.Compatibility.get_enforceApplicationMessageIDRegistration()&&
!b.supportsApplicationMessageType(this.get_id()))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$4,"message");this.set_sender(a);var c=this.get_sender().get_$9().get_messageFactory().serialize(this);if(String.isNullOrEmpty(c)||2E3<c.length)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$2,"message");c=MC.$create_ApplicationMessageInfo(MSH.StringHelper.toLowerCase(this.get_id()),c);c=MC.$create_MessageInfo(3,c);c.sender=this.get_sender().get_$E();c.timestamp=
MC.$create_DateInfo(this.get_timestamp());return c}};Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory=function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("user");this.$1=[];this.$2=a};Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.prototype={$1:null,$2:null,$3:null,get_$4:function(){return this.$2},get_$5:function(){return MSH.CollectionHelper.toArray(this.$1)},register:function(a){this.$2.$64();this.$2.$65();if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("id",
a);if(64<a.length)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$19,"id");a=MSH.StringHelper.toLowerCase(a);if(MSH.ArrayHelper.contains(Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.$0,a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$5,"id");if(this.isRegistered(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$0,"id");this.$6(a)},unregister:function(a){this.$2.$64();this.$2.$65();if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("id");
a=MSH.StringHelper.toLowerCase(a);if(!this.isRegistered(a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$3,"id");if(MSH.ArrayHelper.contains(Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.$0,a))throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$5,"id");this.$1.remove(a);this.$7()},isRegistered:function(a){return this.$1.contains(MSH.StringHelper.toLowerCase(a))},onMessageRendered:function(a){this.$3=a},createTextElement:function(a){return null!=
this.$3?this.$3.invoke(a):null},$6:function(a){this.$1.add(a);this.$7()},$7:function(){2===this.$2.get_$32()&&this.$2.get_localEndpoint().$A(MSH.CollectionHelper.toArray(this.$1),null)}};Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage=function(a){Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage.initializeBase(this);var b=Microsoft.Live.Messenger.M$E.$1(a);if(2E3<b.length)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$6,"value");this.$11=b;this.$10=a};Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage.get_messageId=
function(){return"json"};Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage.prototype={$10:null,$11:null,get_id:function(){return"json"},get_rawValue:function(){return this.$11},get_value:function(){return this.$10},$12:function(a){this.$11=a}};Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory=function(a){Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory.initializeBase(this,[a]);this.$6("json")};Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory.prototype=
{deserialize:function(a,b,c){b=MSH.StringHelper.toLowerCase(b);if("json"!==b)return null;a=new Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage(Microsoft.Live.Messenger.M$E.$0(c));a.$12(c);return a},serialize:function(a){if(String.isNullOrEmpty(a.get_id())||"json"!==MSH.StringHelper.toLowerCase(a.get_id()))return null;if(String.isNullOrEmpty(a.get_rawValue())){var b=Microsoft.Live.Messenger.M$E.$1(a.get_value());if(2E3<b.length)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$6,
"value");a.$12(b)}return a.get_rawValue()}};Type.registerNamespace("Microsoft.Live.Messenger.Presence");Microsoft.Live.Messenger.Presence.PresenceExtensionFactory=function(){};Microsoft.Live.Messenger.Presence.PresenceExtensionFactory.prototype={$0:null,onExtensionRendered:function(a){this.$0=a},createTextElement:function(a){return null!=this.$0?this.$0.invoke(a):null}};Microsoft.Live.Messenger.Presence.PresenceExtension=function(a){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$0("name");
if(6<a.length)throw Microsoft.Live.Messenger.M$F.$2("Length > 6","name");if(!MSH.RegexHelper.isMatch("^[a-z][a-z\\d]*$",a,"i"))throw Microsoft.Live.Messenger.M$F.$2("Should contain only [A..Z][a..z][0..9], and may not start with a digit.","name");this.$1=a};Microsoft.Live.Messenger.Presence.PresenceExtension.prototype={$1:null,get_name:function(){return this.$1},createTextElement:function(){return null}};Microsoft.Live.Messenger.Presence.PresenceExtensionCollection=function(a){Microsoft.Live.Messenger.Presence.PresenceExtensionCollection.initializeBase(this);
this.$13=a;var b=this.$13.get_imAddress().get_$9().get_presenceFactory();if(null!=b&&(a=a.get_$7(),null!=a))for(var c=0;c<a.length;c++)this.$C(b.deserialize(a[c].key,a[c].value))};Microsoft.Live.Messenger.Presence.PresenceExtensionCollection.prototype={$13:null,get_$14:function(){for(var a=[],b=ss.IEnumerator.getEnumerator(this);b.moveNext();){var c=b.get_current();a.add(MC.$create_KeyValuePair(c.get_name(),this.$19(c)))}return MSH.CollectionHelper.toArray(a)},add:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("property");
if(!this.$13.get_$5())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$F);var b=this.$19(a),c=[];c.addRange(this.$13.get_$7());var d=this.$17(a.get_name());-1!==d?(c[d]=MC.$create_KeyValuePair(a.get_name(),b),this.$E(d,a)):(c.add(MC.$create_KeyValuePair(a.get_name(),b)),this.$C(a));this.$16(c)},remove:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("property");if(!this.$13.get_$5())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$F);if(null==this.$13.get_imAddress().get_$9().get_presenceFactory())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$25);
var b=[];b.addRange(this.$13.get_$7());a=this.$17(a.get_name());-1!==a&&(b.removeAt(a),this.$10(a));this.$16(b)},clear:function(){if(!this.$13.get_$5())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$F);if(null==this.$13.get_imAddress().get_$9().get_presenceFactory())throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$25);0<this.get_count()&&(this.$9(),this.$16([]),this.$A())},$15:function(a){for(var b=this.$13.get_imAddress().get_$9().get_presenceFactory(),c=
!1,d=this.get_count()-1;0<=d;d--)-1===this.$18(this.get_item(d).get_name(),a)&&(this.$10(d),c=!0);for(d=0;d<a.length;d++){var e=this.$17(a[d].key);-1===e?(this.$C(b.deserialize(a[d].key,a[d].value)),c=!0):b.serialize(this.get_item(e))!==a[d].value&&(this.$E(e,b.deserialize(a[d].key,a[d].value)),c=!0)}return c},$16:function(a){a=null==a?this.get_$14():MSH.CollectionHelper.toArray(a);2===this.$13.get_imAddress().get_$9().get_$32()&&this.$13.$A(null,a)},$17:function(a){for(var b=this.get_count(),c=0;c<
b;c++)if(this.get_item(c).get_name()===a)return c;return-1},$18:function(a,b){for(var c=0;c<b.length;c++)if(b[c].key===a)return c;return-1},$19:function(a){var b=this.$13.get_imAddress().get_$9().get_presenceFactory();if(null==b)throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$25);a=b.serialize(a);if(null==a)throw Microsoft.Live.Messenger.M$F.$3(Microsoft.Live.Messenger.M$16.$26);if(500<a.length)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$27,"property");
return a},get_item:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("key");if(Type.canCast(a,String)){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("name",a);a=this.$17(a);return-1!==a?this.getItem(a):null}if(Type.canCast(a,Number))return this.getItem(a);throw Microsoft.Live.Messenger.M$F.$5("key");}};Microsoft.Live.Messenger.Presence.SimplePresenceExtension=function(a,b){Microsoft.Live.Messenger.Presence.SimplePresenceExtension.initializeBase(this,[a]);var c=Microsoft.Live.Messenger.M$E.$1(b);
if(500<c.length)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$29,"value");this.$3=c;this.$2=b};Microsoft.Live.Messenger.Presence.SimplePresenceExtension.prototype={$2:null,$3:null,get_rawValue:function(){return this.$3},get_value:function(){return this.$2},$4:function(a){this.$3=a}};Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory=function(){Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory.initializeBase(this)};Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory.prototype=
{deserialize:function(a,b){if(String.isNullOrEmpty(a))throw Microsoft.Live.Messenger.M$F.$1("name",a);if(String.isNullOrEmpty(b))throw Microsoft.Live.Messenger.M$F.$1("content",b);var c=new Microsoft.Live.Messenger.Presence.SimplePresenceExtension(a,Microsoft.Live.Messenger.M$E.$0(b));c.$4(b);return c},serialize:function(a){if(null==a)throw Microsoft.Live.Messenger.M$F.$0("property");a=Type.safeCast(a,Microsoft.Live.Messenger.Presence.SimplePresenceExtension);if(null==a)throw Microsoft.Live.Messenger.M$F.$2(Microsoft.Live.Messenger.M$16.$28,
"property");String.isNullOrEmpty(a.get_rawValue())&&a.$4(Microsoft.Live.Messenger.M$E.$1(a.get_value()));return a.get_rawValue()}};Microsoft.Live.Messenger.Services.ContactsReader.registerClass("Microsoft.Live.Messenger.Services.ContactsReader");Microsoft.Live.Messenger.Services.M$1B.registerClass("Microsoft.Live.Messenger.Services.M$1B");Microsoft.Live.Messenger.Services.PeopleCache.registerClass("Microsoft.Live.Messenger.Services.PeopleCache",Microsoft.Live.Messenger.Services.ContactsReader);Microsoft.Live.Messenger.Services.M$1E.registerClass("Microsoft.Live.Messenger.Services.M$1E",
Microsoft.Live.Messenger.Services.ContactsReader);Microsoft.Live.Messenger.Services.WebmainHelper.registerClass("Microsoft.Live.Messenger.Services.WebmainHelper");Microsoft.Live.Messenger.Services.SkyJSHelper.registerClass("Microsoft.Live.Messenger.Services.SkyJSHelper");Microsoft.Live.Messenger.Services.M$17.registerClass("Microsoft.Live.Messenger.Services.M$17");Microsoft.Live.Messenger.Services.UserServiceFactory.registerClass("Microsoft.Live.Messenger.Services.UserServiceFactory");Microsoft.Live.Messenger.Services.UserServiceProxy.registerClass("Microsoft.Live.Messenger.Services.UserServiceProxy",
null,MC.IUserService,ss.IDisposable);Microsoft.Live.Messenger.Alert.registerClass("Microsoft.Live.Messenger.Alert");Microsoft.Live.Messenger.Collection.registerClass("Microsoft.Live.Messenger.Collection",null,ss.IEnumerable,Microsoft.Live.Messenger.INotifyCollectionChanged,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.AlertCollection.registerClass("Microsoft.Live.Messenger.AlertCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.ContactsReaderChangedEventArgs.registerClass("Microsoft.Live.Messenger.ContactsReaderChangedEventArgs",
ss.EventArgs);Microsoft.Live.Messenger.Message.registerClass("Microsoft.Live.Messenger.Message");Microsoft.Live.Messenger.CallEventMessage.registerClass("Microsoft.Live.Messenger.CallEventMessage",Microsoft.Live.Messenger.Message);Microsoft.Live.Messenger.SkypeInitializer.registerClass("Microsoft.Live.Messenger.SkypeInitializer");Microsoft.Live.Messenger.AuthenticationCompletedEventArgs.registerClass("Microsoft.Live.Messenger.AuthenticationCompletedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.Guid.registerClass("Microsoft.Live.Messenger.Guid");
Microsoft.Live.Messenger.Identity.registerClass("Microsoft.Live.Messenger.Identity",null,Microsoft.Live.Messenger.INotifyPropertyChanged,ss.IDisposable);Microsoft.Live.Messenger.Uri.registerClass("Microsoft.Live.Messenger.Uri");Microsoft.Live.Messenger.Version.registerClass("Microsoft.Live.Messenger.Version");Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.registerClass("Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.PropertyChangedEventArgs.registerClass("Microsoft.Live.Messenger.PropertyChangedEventArgs",
ss.EventArgs);Microsoft.Live.Messenger.Capabilities.registerClass("Microsoft.Live.Messenger.Capabilities",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.Contact.registerClass("Microsoft.Live.Messenger.Contact",null,Microsoft.Live.Messenger.INotifyPropertyChanged,Microsoft.Live.Messenger.M$5);Microsoft.Live.Messenger.ContactPresence.registerClass("Microsoft.Live.Messenger.ContactPresence",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.M$1A.registerClass("Microsoft.Live.Messenger.M$1A",
null,Microsoft.Live.Messenger.M$2);Microsoft.Live.Messenger.ContactCollection.registerClass("Microsoft.Live.Messenger.ContactCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.M$19.registerClass("Microsoft.Live.Messenger.M$19",null,MSH.IStatusCollector);Microsoft.Live.Messenger.Conversation.registerClass("Microsoft.Live.Messenger.Conversation",null,Microsoft.Live.Messenger.INotifyPropertyChanged,Microsoft.Live.Messenger.M$5,ss.IDisposable);Microsoft.Live.Messenger.ConversationCollection.registerClass("Microsoft.Live.Messenger.ConversationCollection",
Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.EmailOnlyContactCollection.registerClass("Microsoft.Live.Messenger.EmailOnlyContactCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.Endpoint.registerClass("Microsoft.Live.Messenger.Endpoint",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.M$20.registerClass("Microsoft.Live.Messenger.M$20",Microsoft.Live.Messenger.Capabilities);Microsoft.Live.Messenger.EndpointCollection.registerClass("Microsoft.Live.Messenger.EndpointCollection",
Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.EndpointId.registerClass("Microsoft.Live.Messenger.EndpointId");Microsoft.Live.Messenger.EndpointPresence.registerClass("Microsoft.Live.Messenger.EndpointPresence",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.LogRequestReceivedEventArgs.registerClass("Microsoft.Live.Messenger.LogRequestReceivedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.Group.registerClass("Microsoft.Live.Messenger.Group",null,Microsoft.Live.Messenger.INotifyPropertyChanged,
Microsoft.Live.Messenger.M$2);Microsoft.Live.Messenger.GroupCollection.registerClass("Microsoft.Live.Messenger.GroupCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.M$18.registerClass("Microsoft.Live.Messenger.M$18");Microsoft.Live.Messenger.IMAddress.registerClass("Microsoft.Live.Messenger.IMAddress",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.M$1F.registerClass("Microsoft.Live.Messenger.M$1F",Microsoft.Live.Messenger.Capabilities);Microsoft.Live.Messenger.IMAddressCollection.registerClass("Microsoft.Live.Messenger.IMAddressCollection",
Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.IMAddressPresence.registerClass("Microsoft.Live.Messenger.IMAddressPresence",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.Instance.registerClass("Microsoft.Live.Messenger.Instance",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.InstanceCollection.registerClass("Microsoft.Live.Messenger.InstanceCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.LinkedContact.registerClass("Microsoft.Live.Messenger.LinkedContact",
null,Microsoft.Live.Messenger.INotifyPropertyChanged,Microsoft.Live.Messenger.M$5);Microsoft.Live.Messenger.LinkedContactCollection.registerClass("Microsoft.Live.Messenger.LinkedContactCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.MessageCollection.registerClass("Microsoft.Live.Messenger.MessageCollection",Microsoft.Live.Messenger.Collection,ss.IEnumerable);Microsoft.Live.Messenger.AudioMetaMessage.registerClass("Microsoft.Live.Messenger.AudioMetaMessage",Microsoft.Live.Messenger.Message);
Microsoft.Live.Messenger.AudioTunnelMessage.registerClass("Microsoft.Live.Messenger.AudioTunnelMessage",Microsoft.Live.Messenger.Message);Microsoft.Live.Messenger.MessengerUtility.registerClass("Microsoft.Live.Messenger.MessengerUtility");Microsoft.Live.Messenger.Network.registerClass("Microsoft.Live.Messenger.Network",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.NetworkCollection.registerClass("Microsoft.Live.Messenger.NetworkCollection",Microsoft.Live.Messenger.Collection);
Microsoft.Live.Messenger.M$1C.registerClass("Microsoft.Live.Messenger.M$1C");Microsoft.Live.Messenger.PendingContact.registerClass("Microsoft.Live.Messenger.PendingContact");Microsoft.Live.Messenger.PendingContactCollection.registerClass("Microsoft.Live.Messenger.PendingContactCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.PremiumFeature.registerClass("Microsoft.Live.Messenger.PremiumFeature",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.PresenceProperty.registerClass("Microsoft.Live.Messenger.PresenceProperty");
Microsoft.Live.Messenger.PresencePropertyCollection.registerClass("Microsoft.Live.Messenger.PresencePropertyCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.Settings.registerClass("Microsoft.Live.Messenger.Settings",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.SignedInEventArgs.registerClass("Microsoft.Live.Messenger.SignedInEventArgs",ss.EventArgs);Microsoft.Live.Messenger.M$B.registerClass("Microsoft.Live.Messenger.M$B");Microsoft.Live.Messenger.M$C.registerClass("Microsoft.Live.Messenger.M$C");
Microsoft.Live.Messenger.M$A.registerClass("Microsoft.Live.Messenger.M$A");Microsoft.Live.Messenger.SortedCollection.registerClass("Microsoft.Live.Messenger.SortedCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.SortedContactCollection.registerClass("Microsoft.Live.Messenger.SortedContactCollection",Microsoft.Live.Messenger.SortedCollection);Microsoft.Live.Messenger.M$9.registerClass("Microsoft.Live.Messenger.M$9");Microsoft.Live.Messenger.TypingIMAddressCollection.registerClass("Microsoft.Live.Messenger.TypingIMAddressCollection",
Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.User.registerClass("Microsoft.Live.Messenger.User",null,Microsoft.Live.Messenger.INotifyPropertyChanged,ss.IDisposable);Microsoft.Live.Messenger.M$8.registerClass("Microsoft.Live.Messenger.M$8",null,ss.IDisposable);Microsoft.Live.Messenger.M$D.registerClass("Microsoft.Live.Messenger.M$D",null,MC.IUserServiceEvents);Microsoft.Live.Messenger.M$13.registerClass("Microsoft.Live.Messenger.M$13");Microsoft.Live.Messenger.M$15.registerClass("Microsoft.Live.Messenger.M$15",
null,ss.IDisposable);Microsoft.Live.Messenger.AddressChangingEventArgs.registerClass("Microsoft.Live.Messenger.AddressChangingEventArgs",ss.EventArgs);Microsoft.Live.Messenger.AlertReceivedEventArgs.registerClass("Microsoft.Live.Messenger.AlertReceivedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.InviteAddressCompletedEventArgs.registerClass("Microsoft.Live.Messenger.InviteAddressCompletedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.InviteContactCompletedEventArgs.registerClass("Microsoft.Live.Messenger.InviteContactCompletedEventArgs",
ss.EventArgs);Microsoft.Live.Messenger.MessageReceivedEventArgs.registerClass("Microsoft.Live.Messenger.MessageReceivedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.SendMessageFailedEventArgs.registerClass("Microsoft.Live.Messenger.SendMessageFailedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.SignedOutEventArgs.registerClass("Microsoft.Live.Messenger.SignedOutEventArgs",ss.EventArgs);Microsoft.Live.Messenger.SignedOutRemotelyEventArgs.registerClass("Microsoft.Live.Messenger.SignedOutRemotelyEventArgs",
ss.EventArgs);Microsoft.Live.Messenger.SignInCompletedEventArgs.registerClass("Microsoft.Live.Messenger.SignInCompletedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.SignOutCompletedEventArgs.registerClass("Microsoft.Live.Messenger.SignOutCompletedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.M$F.registerClass("Microsoft.Live.Messenger.M$F");Microsoft.Live.Messenger.ReportingHelper.registerClass("Microsoft.Live.Messenger.ReportingHelper");Microsoft.Live.Messenger.M$E.registerClass("Microsoft.Live.Messenger.M$E");
Microsoft.Live.Messenger.M$10.registerClass("Microsoft.Live.Messenger.M$10",null,ss.IDisposable);Microsoft.Live.Messenger.RpsAuthIdentity.registerClass("Microsoft.Live.Messenger.RpsAuthIdentity",Microsoft.Live.Messenger.Identity);Microsoft.Live.Messenger.EmailReceivedEventArgs.registerClass("Microsoft.Live.Messenger.EmailReceivedEventArgs",ss.EventArgs);Microsoft.Live.Messenger.Mailbox.registerClass("Microsoft.Live.Messenger.Mailbox",null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.Media.registerClass("Microsoft.Live.Messenger.Media");
Microsoft.Live.Messenger.Game.registerClass("Microsoft.Live.Messenger.Game",Microsoft.Live.Messenger.Media);Microsoft.Live.Messenger.Music.registerClass("Microsoft.Live.Messenger.Music",Microsoft.Live.Messenger.Media);Microsoft.Live.Messenger.Video.registerClass("Microsoft.Live.Messenger.Video",Microsoft.Live.Messenger.Media);Microsoft.Live.Messenger.NudgeMessage.registerClass("Microsoft.Live.Messenger.NudgeMessage",Microsoft.Live.Messenger.Message);Microsoft.Live.Messenger.TextMessage.registerClass("Microsoft.Live.Messenger.TextMessage",
Microsoft.Live.Messenger.Message);Microsoft.Live.Messenger.TextMessageColor.registerClass("Microsoft.Live.Messenger.TextMessageColor");Microsoft.Live.Messenger.TextMessageFormat.registerClass("Microsoft.Live.Messenger.TextMessageFormat");Microsoft.Live.Messenger.PubSubChannelEndpoint.registerClass("Microsoft.Live.Messenger.PubSubChannelEndpoint");Microsoft.Live.Messenger.M$12.registerClass("Microsoft.Live.Messenger.M$12");Microsoft.Live.Messenger.Applications.Application.registerClass("Microsoft.Live.Messenger.Applications.Application");
Microsoft.Live.Messenger.Services.UnitTests.MockContactsReader.registerClass("Microsoft.Live.Messenger.Services.UnitTests.MockContactsReader",Microsoft.Live.Messenger.Services.ContactsReader);Microsoft.Live.Messenger.Messaging.ApplicationMessage.registerClass("Microsoft.Live.Messenger.Messaging.ApplicationMessage",Microsoft.Live.Messenger.Message);Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.registerClass("Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory");Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage.registerClass("Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage",
Microsoft.Live.Messenger.Messaging.ApplicationMessage);Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory.registerClass("Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory",Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory);Microsoft.Live.Messenger.Presence.PresenceExtensionFactory.registerClass("Microsoft.Live.Messenger.Presence.PresenceExtensionFactory");Microsoft.Live.Messenger.Presence.PresenceExtension.registerClass("Microsoft.Live.Messenger.Presence.PresenceExtension");
Microsoft.Live.Messenger.Presence.PresenceExtensionCollection.registerClass("Microsoft.Live.Messenger.Presence.PresenceExtensionCollection",Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.Presence.SimplePresenceExtension.registerClass("Microsoft.Live.Messenger.Presence.SimplePresenceExtension",Microsoft.Live.Messenger.Presence.PresenceExtension);Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory.registerClass("Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory",
Microsoft.Live.Messenger.Presence.PresenceExtensionFactory);Microsoft.Live.Messenger.Services.M$1B.$0=["SKYPE","WL"];Microsoft.Live.Messenger.Services.PeopleCache.defaultPeopleCacheId="$WLXContacts";Microsoft.Live.Messenger.Services.WebmainHelper.qoSScenarioSendIm="WebIM_SendIm";Microsoft.Live.Messenger.Services.WebmainHelper.qoSScenarioSignin="WebIM_Signin";Microsoft.Live.Messenger.Services.WebmainHelper.qoSScenarioReconnect="WebIM_Reconnect";Microsoft.Live.Messenger.Services.WebmainHelper.qoSApiGetUic=
"WebIM_Signin_GetUic";Microsoft.Live.Messenger.Services.WebmainHelper.qoSApiGetIdentity="WebIM_Signin_GetIdentity";Microsoft.Live.Messenger.Services.WebmainHelper.qoSApiContactsReady="WebIM_Signin_ContactsReady";Microsoft.Live.Messenger.Services.WebmainHelper.qoSApiConnectMessenger="WebIM_Signin_ConnectMessenger";Microsoft.Live.Messenger.Services.WebmainHelper.qoSApiReconnect="WebIM_Reconnect_Call";Microsoft.Live.Messenger.Services.WebmainHelper.qoSApiSendIm="WebIM_SendIm_Call";Microsoft.Live.Messenger.Services.WebmainHelper.qoSSigninApiStartTime=
0;Microsoft.Live.Messenger.Services.WebmainHelper.qoSReconnectApiStartTime=0;Microsoft.Live.Messenger.Services.SkyJSHelper.$0=null;Microsoft.Live.Messenger.Services.SkyJSHelper.$1=new Date;Microsoft.Live.Messenger.Services.SkyJSHelper.isCallInProgress=!1;Microsoft.Live.Messenger.Services.SkyJSHelper.isPluginLoaded=!1;Microsoft.Live.Messenger.Services.SkyJSHelper.skypeEnabled=!1;Microsoft.Live.Messenger.Services.SkyJSHelper.initErrorCode=null;Microsoft.Live.Messenger.Services.SkyJSHelper.skypeAudioVideoEnabled=
!1;Microsoft.Live.Messenger.Services.SkyJSHelper.initSucceeded=!1;Microsoft.Live.Messenger.Services.SkyJSHelper.$2=null;Microsoft.Live.Messenger.Services.SkyJSHelper.$3=null;Microsoft.Live.Messenger.Services.SkyJSHelper.$4=null;Microsoft.Live.Messenger.Services.SkyJSHelper.$5=null;Microsoft.Live.Messenger.Services.UserServiceFactory.$0=null;Microsoft.Live.Messenger.Services.UserServiceFactory.$1=null;Microsoft.Live.Messenger.Guid.empty=new Microsoft.Live.Messenger.Guid("{00000000-0000-0000-0000-000000000000}");
Microsoft.Live.Messenger.M$18.$0=-1;Microsoft.Live.Messenger.M$18.$1=null;Microsoft.Live.Messenger.M$18.$2=null;Microsoft.Live.Messenger.M$18.$3=null;Microsoft.Live.Messenger.M$18.$4=null;Microsoft.Live.Messenger.MessengerUtility.$6=RegExp("(:\\-?\\)|:\\-?\\}|:\\-?\\]|:\\-\\\\|;\\-?\\\\|:\\-?[Ss]|:\\-?\\||:'\\-?\\||:\\-?[\\(<]|:\\-?[Dd>]|<:o\\)|<[oO]\\)|:\\-?[oO]|:\\-?[pP]|:\\-?\\[|:'\\(|:\\-?@|;\\-?@|:\\-?\\$|:\\-#|:\\-\\*|:\\^\\)|;\\-?\\)|8o\\||8\\-\\)|8\\-\\||\\^o\\)|\\*\\-\\)|\\*\\-?\\\\|\\*\\-?\\||\\+o\\(|\\|\\-\\)|\\([a-pA-Pr-vR-VwWx-zX-Z]\\)|\\([~\\\\*068@#&\\^\\{\\}]\\)|\\(\\|\\|\\)|\\('\\.'\\)|\\*p\\*|\\*s\\*|<3|:8\\)|\\r\\n|\\r|\\n|((http|https):\\/\\/|\\/www|www\\.)[^\\s]*[^\\s?.!(;:'>\\[\\],])");
Microsoft.Live.Messenger.MessengerUtility.$7=null;Microsoft.Live.Messenger.MessengerUtility.$8="none simple_text link link_to_video photo photos video document location".split(" ");i={};i[":)"]=i[":-)"]="1";i[":d"]=i[":-d"]=i[":>"]=i[":->"]="2";i[";)"]=i[";-)"]="3";i[":o"]=i[":-o"]="4";i[":p"]=i[":-p"]="5";i["(h)"]="6";i[":@"]=i[":-@"]="7";i[":$"]=i[":-$"]=i[":s"]=i[":-s"]="8";i[":("]=i[":-("]=i[":<"]=i[":-<"]="9";i[":'("]="10";i[":|"]=i[":-|"]="11";i["(6)"]="12";i["(a)"]="13";i["(l)"]=i["<3"]="14";
i["(u)"]="15";i["(@)"]="16";i["(&)"]="17";i["(s)"]="18";i["(*)"]="19";i["(~)"]="20";i["(8)"]="21";i["(e)"]="22";i["(f)"]="23";i["(w)"]="24";i["(o)"]=i["(0)"]="25";i["(k)"]="26";i["(g)"]="27";i["(^)"]="28";i["(p)"]="29";i["(i)"]="30";i["(c)"]="31";i["(t)"]="32";i["({)"]="33";i["(})"]="34";i["(b)"]="35";i["(d)"]="36";i["(z)"]="37";i["(x)"]="38";i["(y)"]="39";i["(n)"]="40";Microsoft.Live.Messenger.MessengerUtility.$7=i;Microsoft.Live.Messenger.Network.$E=10;Microsoft.Live.Messenger.Network.$F=null;Microsoft.Live.Messenger.Network.$10=
null;Microsoft.Live.Messenger.Network.$11=null;Microsoft.Live.Messenger.Network.$12=null;Microsoft.Live.Messenger.Network.$13=null;Microsoft.Live.Messenger.M$15.$0=null;Microsoft.Live.Messenger.M$15.$4=null;Microsoft.Live.Messenger.M$15.$5=null;Microsoft.Live.Messenger.M$15.$6=null;if(!MSH.TestingHelper.get_isUnitTest())try{if(window.parent===window.self)__MSLiveCore__.Loader.onDocumentReady(function(){3===MLC.Channel.getChannelType()&&null==Microsoft.Live.Messenger.M$15.$5&&(Microsoft.Live.Messenger.M$15.$4=
new Microsoft.Live.Messenger.M$15("/Channel.htm",0))})}catch(W){}__MSLiveCore__.Loader.onReady(function(){Microsoft.Live.Messenger.ReportingHelper.$0()});Microsoft.Live.Messenger.Media.$1=RegExp("\\{(\\d)\\}","g");Microsoft.Live.Messenger.Media.$2=null;Microsoft.Live.Messenger.Media.$2={wmp:"Windows Media Player",xboxmsgr:"Xbox 360",zune:"Zune"};Microsoft.Live.Messenger.TextMessageFormat.$0=new Microsoft.Live.Messenger.TextMessageFormat(Microsoft.Live.Messenger.TextMessageColor.fromRgb(0,0,0),Microsoft.Live.Messenger.M$11.$0,
0,0);Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.$0=["json","xml"]});})();
