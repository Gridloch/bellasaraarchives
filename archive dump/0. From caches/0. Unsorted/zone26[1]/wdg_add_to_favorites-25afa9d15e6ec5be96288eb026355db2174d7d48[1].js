/*
 2013, SpilGames
*/
SpilGames("spilgames.import",{fullName:"Favorites",deps:["SWPUtils","JSLib"],module:function(f,c){return{isUserAuthenticated:function(){return"true"===c.get("spilgames.portal.user.authenticated")?!0:!1},addToFavs:function(d,b){this.checkCurrentFavs(d,function(a){a?b.call(this,d,{success:!1},"already favorite"):c("api.favourite.add",{applicationId:d},function(a){a&&void 0!==a.result?b.call(this,d,{success:a.result},null):a&&a.error&&b.call(this,d,{success:!1},a.error)})})},checkCurrentFavs:function(d,
b){c("api.favourite.list",function(a){if(a&&a.applicationList){var c=!1;-1!==f.indexOf(a.applicationList,d)&&(c=!0);b.call(this,c)}})}}}});SpilGames({name:"wdg_add_to_favorites",waiton:"spilgames.loaded"},["SWPUtils","SWP","Favorites","DOMEvent"],function(f,c,d,b){c.init("add_to_favorites");f=document.querySelector(".wdg_add_to_favorites a")||null;var a=document.getElementById("atf-current-game"),g=a&&a.value?a.value:null,e={"default":document.getElementById("atf-default"),success:document.getElementById("atf-success"),already:document.getElementById("atf-already-fav"),login:document.getElementById("atf-login"),error:document.getElementById("atf-error")},
a=document.getElementById("atf-login-btn")||null,h=document.getElementById("atf-join-now")||null;c.Widget.init(function(a){switch(a.name){case "add.to.favs.clicked":d.isUserAuthenticated()&&g?d.addToFavs(g,function(a,c,b){c.success?(e["default"].style.display="none",e.success.style.display="block"):(e["default"].style.display="none",b&&"already favorite"===b?e.already.style.display="block":e.error.style.display="block")}):(e["default"].style.display="none",e.login.style.display="block")}});f&&(f.onclick=
function(a){b.preventDefault(a);b.preventBubbling(a);c.Widget.emit("add.to.favs.clicked")});a&&(a.onclick=function(a){b.preventDefault(a);b.preventBubbling(a);c.System.emit("popup.login.open")});h&&(h.onclick=function(a){b.preventDefault(a);b.preventBubbling(a);c.System.emit("popup.register.open")})});
//# sourceMappingURL=/wdg/add_to_favorites-active/js/minified/wdg_add_to_favorites.js.map
