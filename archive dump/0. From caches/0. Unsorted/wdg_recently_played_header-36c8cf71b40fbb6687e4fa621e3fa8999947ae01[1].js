SpilGames({name:"wdg_recently_played_header",waiton:"spilgames.loaded"},"SWPUtils SWP Cache DOMSelect JSLib SPAPI".split(" "),function(d,e,h,c,f,s){e.init("recently_played_header");var p=c.get(".wdg_recently_played_header"),q=c.get(".wdg_recently_played_header ul"),r=c.get(".wdg_recently_played_header .unit-counter"),k=c.get(".wdg_recently_played_header .dropdown-fallback"),m=f.get("login_complete_handler"),l=function(a){f("api.application.recentgames",{type:"timestamp"},function(b){var c=[];b.recentList&&
0<b.recentList.length&&d.each(b.recentList,function(a){var b={};b.title=a.application.title;b.uri=a.application.urlPart;b.description=a.application.description;b.gid=a.application.applicationId;b.thumbnail=a.application.thumbnail.medium;c.push(b)});h.setItem({key:"recent.played.games",value:c,expires:31536E3},function(){e.Widget.emit("recent.games.info.loaded",c);d.isFunction(a)&&a()})})};e.Widget.init(function(a){switch(a.name){case "recent.games.info.loaded":a=a.data;var b,e=c.get(".wdg_recently_played_header .dropdown-unit");
for(b=0;6>b&&b<a.length;b++)if(a[b].title&&a[b].description&&a[b].uri&&a[b].thumbnail){var g=e.cloneNode(!0),f=c.get("a",g),h=f.getAttribute("href"),n=c.get("img",g),l=c.get(".title",g),m=c.get(".description",g);f.setAttribute("href",h+a[b].uri);n.setAttribute("src",n.getAttribute("data-src")+a[b].thumbnail);n.setAttribute("alt",a[b].title);l.innerHTML=a[b].title;m.innerHTML=a[b].description;d.removeClass(g,"is-hidden");q.appendChild(g)}r.innerHTML=6<a.length?6:a.length;0<a.length?(d.removeClass(p,
"is-empty"),d.removeClass(k,"is-visible"),d.addClass(k,"is-hidden")):(d.removeClass(k,"is-hidden"),d.addClass(k,"is-visible"))}});f.set("login_complete_handler",function(){d.isFunction(m)&&CurentLoginHandler();l(function(){window.location.reload(!0)})});h.getItem({key:"recent.played.games"},function(a){null!=a&&0<a.length?e.Widget.emit("recent.games.info.loaded",a):l()})});
//# sourceMappingURL=/wdg/recently_played_header-active/js/minified/wdg_recently_played_header.js.map
